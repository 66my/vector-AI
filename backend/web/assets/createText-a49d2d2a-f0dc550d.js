import{n as g,aa as E,as as L}from"./EchartsRenderer-48e0f6e2.js";import{f as b}from"./index-7f383368.js";function k(a){const e=a.replace(/\n{2,}/g,`
`);return L(e)}function v(a){const e=k(a),{children:n}=b(e),r=[[]];let o=0;function l(t,c="normal"){t.type==="text"?t.value.split(`
`).forEach((s,i)=>{i!==0&&(o++,r.push([])),s.split(" ").forEach(u=>{u&&r[o].push({content:u,type:c})})}):(t.type==="strong"||t.type==="emphasis")&&t.children.forEach(f=>{l(f,t.type)})}return n.forEach(t=>{t.type==="paragraph"&&t.children.forEach(c=>{l(c)})}),r}function $(a){const{children:e}=b(a);function n(r){return r.type==="text"?r.value.replace(/\n/g,"<br/>"):r.type==="strong"?`<strong>${r.children.map(n).join("")}</strong>`:r.type==="emphasis"?`<em>${r.children.map(n).join("")}</em>`:r.type==="paragraph"?`<p>${r.children.map(n).join("")}</p>`:`Unsupported markdown: ${r.type}`}return e.map(n).join("")}function j(a,e){e&&a.attr("style",e)}function C(a,e,n,r,o=!1){const l=a.append("foreignObject"),t=l.append("xhtml:div"),c=e.label,f=e.isNode?"nodeLabel":"edgeLabel";t.html(`
    <span class="${f} ${r}" `+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+c+"</span>"),j(t,e.labelStyle),t.style("display","table-cell"),t.style("white-space","nowrap"),t.style("max-width",n+"px"),t.attr("xmlns","http://www.w3.org/1999/xhtml"),o&&t.attr("class","labelBkg");let s=t.node().getBoundingClientRect();return s.width===n&&(t.style("display","table"),t.style("white-space","break-spaces"),t.style("width",n+"px"),s=t.node().getBoundingClientRect()),l.style("width",s.width),l.style("height",s.height),l.node()}function w(a,e,n){return a.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*n-.1+"em").attr("dy",n+"em")}function y(a,e,n){const r=a.append("text"),o=w(r,1,e);S(o,[{content:n,type:"normal"}]);const l=o.node().getComputedTextLength();return r.remove(),l}function M(a,e,n,r=!1){const l=e.append("g");let t=l.insert("rect").attr("class","background");const c=l.append("text").attr("y","-10.1");let f=0;if(n.forEach(s=>{let i=s.map(p=>p.content).join(" "),u="",h=[],d=0;if(y(l,1.1,i)<=a)h.push(i);else{for(let p=0;p<=i.length;p++)if(u=i.slice(d,p),g.info(u,d,p),y(l,1.1,u)>a){const x=i.slice(d,p).lastIndexOf(" ");x>-1&&(p=d+x+1),h.push(i.slice(d,p).trim()),d=p,u=null}u!=null&&h.push(u)}const T=h.map(p=>({content:p,type:s.type}));for(const p of T){let m=w(c,f,1.1);S(m,[p]),f++}}),r){const s=c.node().getBBox(),i=2;return t.attr("x",-i).attr("y",-i).attr("width",s.width+2*i).attr("height",s.height+2*i),l.node()}else return c.node()}function S(a,e){a.text(""),e.forEach((n,r)=>{const o=a.append("tspan").attr("font-style",n.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",n.type==="strong"?"bold":"normal");r===0?o.text(n.content):o.text(" "+n.content)})}const B=(a,e="",{style:n="",isTitle:r=!1,classes:o="",useHtmlLabels:l=!0,isNode:t=!0,width:c,addSvgBackground:f=!1}={})=>{if(g.info("createText",e,n,r,o,l,t,f),l){const s=$(e),i={isNode:t,label:E(s).replace(/fa[blrs]?:fa-[\w-]+/g,h=>`<i class='${h.replace(":"," ")}'></i>`),labelStyle:n.replace("fill:","color:")};return C(a,i,c,o,f)}else{const s=v(e);return M(c,a,s,f)}};export{B as c};
