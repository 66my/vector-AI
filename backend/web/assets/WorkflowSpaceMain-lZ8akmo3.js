import{c as a,A as U,ac as xe,V as q,l as x,P as u,f as p,L as b,j as n,x as d,B as w,T as g,z as T,a9 as K,a1 as Y,s as ee,ad as Me,ae as We,O as $e,af as Te,a7 as te,a8 as je,q as ye,a2 as ze,m as B,a3 as R,Y as $,h as C,F as z,C as V,W as Pe,X as Le,N as G,ag as Ae,ah as X,n as de,D as Q,ai as fe,aj as Re,ak as pe,a6 as Be,al as Ie}from"./index-dXo_TUZF.js";import{_ as _e}from"./QuestionPopover-dtpETa3q.js";import{A as De,_ as Ve}from"./MarkdownEditor-ShLLQXMK.js";import{U as qe}from"./NewWorkflowModal.vue_vue_type_style_index_0_lang-hM2PbsPd.js";import{_ as Ne,F as Ue,C as Fe}from"./WorkflowRunRecordsDrawer-VmhwstaO.js";import{_ as F}from"./_plugin-vue_export-helper-x3n3nnut.js";import{I as He,P as Ee}from"./index-R2VJYWyr.js";var Ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"};const Xe=Ze;var Ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M740 161c-61.8 0-112 50.2-112 112 0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0034.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2 0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm96 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm408-491a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"branches",theme:"outlined"};const Ge=Ye;var Je={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"};const Qe=Je;var Ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M483.2 790.3L861.4 412c1.7-1.7 2.5-4 2.3-6.3l-25.5-301.4c-.7-7.8-6.8-13.9-14.6-14.6L522.2 64.3c-2.3-.2-4.7.6-6.3 2.3L137.7 444.8a8.03 8.03 0 000 11.3l334.2 334.2c3.1 3.2 8.2 3.2 11.3 0zm62.6-651.7l224.6 19 19 224.6L477.5 694 233.9 450.5l311.9-311.9zm60.16 186.23a48 48 0 1067.88-67.89 48 48 0 10-67.88 67.89zM889.7 539.8l-39.6-39.5a8.03 8.03 0 00-11.3 0l-362 361.3-237.6-237a8.03 8.03 0 00-11.3 0l-39.6 39.5a8.03 8.03 0 000 11.3l243.2 242.8 39.6 39.5c3.1 3.1 8.2 3.1 11.3 0l407.3-406.6c3.1-3.1 3.1-8.2 0-11.3z"}}]},name:"tags",theme:"outlined"};const et=Ke;function we(t){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable}))),i.forEach(function(c){tt(t,c,o[c])})}return t}function tt(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var ae=function(e,o){var i=we({},e,o.attrs);return a(U,we({},i,{icon:Xe}),null)};ae.displayName="AppstoreAddOutlined";ae.inheritAttrs=!1;const at=ae;function me(t){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable}))),i.forEach(function(c){ot(t,c,o[c])})}return t}function ot(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var oe=function(e,o){var i=me({},e,o.attrs);return a(U,me({},i,{icon:Ge}),null)};oe.displayName="BranchesOutlined";oe.inheritAttrs=!1;const nt=oe;function ge(t){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable}))),i.forEach(function(c){rt(t,c,o[c])})}return t}function rt(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var ne=function(e,o){var i=ge({},e,o.attrs);return a(U,ge({},i,{icon:xe}),null)};ne.displayName="StarFilled";ne.inheritAttrs=!1;const lt=ne;function ke(t){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable}))),i.forEach(function(c){st(t,c,o[c])})}return t}function st(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var re=function(e,o){var i=ke({},e,o.attrs);return a(U,ke({},i,{icon:Qe}),null)};re.displayName="StarOutlined";re.inheritAttrs=!1;const ct=re;function he(t){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable}))),i.forEach(function(c){it(t,c,o[c])})}return t}function it(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var le=function(e,o){var i=he({},e,o.attrs);return a(U,he({},i,{icon:et}),null)};le.displayName="TagsOutlined";le.inheritAttrs=!1;const ut=le,dt=He("branch-two",!0,function(t){return a("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},[a("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M36 12C38.2091 12 40 10.2091 40 8C40 5.79086 38.2091 4 36 4C33.7909 4 32 5.79086 32 8C32 10.2091 33.7909 12 36 12Z",fill:t.colors[1],stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap,"stroke-linejoin":t.strokeLinejoin},null),a("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 12C16.2091 12 18 10.2091 18 8C18 5.79086 16.2091 4 14 4C11.7909 4 10 5.79086 10 8C10 10.2091 11.7909 12 14 12Z",fill:t.colors[1],stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap,"stroke-linejoin":t.strokeLinejoin},null),a("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 44C16.2091 44 18 42.2091 18 40C18 37.7909 16.2091 36 14 36C11.7909 36 10 37.7909 10 40C10 42.2091 11.7909 44 14 44Z",fill:t.colors[1],stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap,"stroke-linejoin":t.strokeLinejoin},null),a("path",{d:"M14 12L14 36L14 33C14 25 36 24 36 16V12",stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap,"stroke-linejoin":t.strokeLinejoin},null)])}),ft={class:"empty-workflow-template"},pt={__name:"NewWorkflowModal",emits:["create"],setup(t,{expose:e,emit:o}){const i=o,{t:c}=q(),h=x(!1),S=()=>{h.value=!0},s=y=>{h.value=!1,i("create",{id:y})};return e({showModal:S}),(y,f)=>{const k=u("a-typography-text"),r=u("a-card"),M=u("a-col"),O=u("a-row"),v=u("a-modal");return p(),b(v,{open:h.value,"onUpdate:open":f[1]||(f[1]=W=>h.value=W),width:"50vw",title:d(c)("components.workspace.newWorkflowModal.create_new_workflow"),footer:null},{default:n(()=>[a(O,{gutter:[16,16]},{default:n(()=>[a(M,{xs:24,md:12,lg:6},{default:n(()=>[a(r,{class:"template-card-small",hoverable:"",style:{width:"240px"},onClick:f[0]||(f[0]=W=>s("empty"))},{default:n(()=>[T("div",ft,[a(k,{class:"text-primary"},{default:n(()=>[a(d(De),{style:{"font-size":"100px"}})]),_:1}),a(k,null,{default:n(()=>[g(w(d(c)("components.workspace.newWorkflowModal.empty_workflow")),1)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title"])}}},_t={__name:"ShareWorkflowModal",setup(t,{expose:e}){const{t:o}=q(),i=K(),{language:c}=Y(i),h=x(!1),S=x(),s=ee({title:"",brief:"",share_to_community:!1});e({showModal:({wid:O,title:v,brief:W})=>{S.value=O,s.title=v,s.brief=W,h.value=!0}});const f=x(!1),k=x(),r=()=>{s.title="",s.brief="",s.share_to_community=!1},M=async()=>{try{await k.value.validate(),f.value=!0;const O=await Me("create",{wid:S.value,language:c.value,...s});if(O.status==200){const v=`https://vectorvein.com/workspace/workflow/template/${O.data.tid}`;Te.success({title:o("components.workspace.shareWorkflowModal.share_success"),content:()=>$e(We,{href:v,copyable:!0},[v])})}else message.error(O.msg);f.value=!1,h.value=!1}catch(O){f.value=!1,console.log("error",O)}};return(O,v)=>{const W=u("a-input"),L=u("a-form-item"),I=u("a-checkbox"),D=u("a-form"),N=u("a-modal");return p(),b(N,{open:h.value,"onUpdate:open":v[3]||(v[3]=l=>h.value=l),title:d(o)("components.workspace.shareWorkflowModal.share_workflow"),onOk:M,confirmLoading:f.value,onCancel:r},{default:n(()=>[a(D,{ref_key:"formRef",ref:k,model:s},{default:n(()=>[a(L,{rules:[{required:!0}],label:d(o)("components.workspace.shareWorkflowModal.title"),name:"title"},{default:n(()=>[a(W,{value:s.title,"onUpdate:value":v[0]||(v[0]=l=>s.title=l)},null,8,["value"])]),_:1},8,["label"]),a(L,{rules:[{required:!0,min:10,message:d(o)("components.workspace.shareWorkflowModal.brief_min_require",{count:10})}],name:"brief"},{label:n(()=>[g(w(d(o)("components.workspace.shareWorkflowModal.brief"))+" ",1),a(_e,{contents:[d(o)("components.workspace.shareWorkflowModal.brief_hint1"),d(o)("components.workspace.shareWorkflowModal.brief_hint2")]},null,8,["contents"])]),default:n(()=>[(p(),b(Ve,{markdown:s.brief,"onUpdate:markdown":v[1]||(v[1]=l=>s.brief=l),key:S.value},null,8,["markdown"]))]),_:1},8,["rules"]),a(L,{name:"share_to_community"},{label:n(()=>[g(w(d(o)("components.workspace.shareWorkflowModal.share_to_community"))+" ",1),a(_e,{contents:[d(o)("components.workspace.shareWorkflowModal.share_to_community_brief")]},null,8,["contents"])]),default:n(()=>[a(I,{checked:s.share_to_community,"onUpdate:checked":v[2]||(v[2]=l=>s.share_to_community=l)},null,8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title","confirmLoading"])}}},wt={key:0,class:"space-container"},mt={key:2,class:"action-container"},gt={__name:"MyWorkflows",setup(t){const{t:e}=q(),o=x(!0),i=x(!1),c=te(),h=K(),{language:S}=Y(h),s=je(),{userWorkflows:y,userWorkflowsTotal:f}=Y(s),k=x([]);ye(async()=>{const[l,_]=await Promise.all([r.load({}),ze("list",{})]);_.status==200&&(k.value=_.data),o.value=!1});const r=ee({columns:[{name:e("workspace.workflowSpaceMain.workflow_title"),dataIndex:"title",key:"title"},{title:e("workspace.workflowSpaceMain.tags"),key:"tags",dataIndex:"tags",filters:B(()=>k.value.map(l=>({text:l.title,value:l.tid}))),width:"300px"},{title:e("workspace.workflowSpaceMain.update_time"),key:"update_time",dataIndex:"update_time",sorter:!0,sortDirections:["descend","ascend"],width:"200px"},{title:e("common.action"),key:"action",width:"300px"}],data:y.value,loading:!1,current:1,pageSize:10,total:f.value,pagination:B(()=>({total:r.total,current:r.current,pageSize:r.pageSize})),selectTag:"all",selectTagChange:async()=>{r.loading=!0,await r.load({tags:[r.selectTag]}),r.loading=!1},searching:!1,searchText:"",hoverRowWid:null,customRow:l=>({style:{cursor:"pointer"},onClick:_=>{(_.target.classList.contains("ant-table-cell")||_.target.classList.contains("workflow-title"))&&c.push(`/workflow/${l.wid}`)},onMouseenter:_=>{r.hoverRowWid=l.wid},onMouseleave:_=>{r.hoverRowWid=null}}),searchWorkflows:async()=>{r.loading=!0,r.searching=!0,await r.load({search_text:r.searchText}),r.searching=!1,r.loading=!1},clearSearch:async()=>{r.loading=!0,r.searching=!0,r.searchText="",await r.load({}),r.searching=!1,r.loading=!1},handleTableChange:(l,_,m)=>{r.load({page_size:l.pageSize,page:l.current,sort_field:m.field,sort_order:m.order,tags:_.tags})},load:async l=>{r.loading=!0;const _=await R("list",l);_.status==200?r.data=_.data.workflows.map(m=>(m.create_time=new Date(m.create_time).toLocaleString(),m.update_time=new Date(m.update_time).toLocaleString(),m)):$.error(_.msg),r.total=_.data.total,r.pageSize=_.data.page_size,r.current=_.data.page,r.loading=!1}}),M=async l=>{(await R("delete",{wid:l})).status==200?($.success(e("workspace.workflowSpace.delete_success")),s.deleteUserWorkflow(l),r.load({})):$.error(e("workspace.workflowSpace.delete_failed"))},O=async l=>{(await R("add_to_fast_access",{wid:l})).status==200?($.success(e("workspace.workflowSpace.add_to_fast_access_success")),X(s,!0),r.data=r.data.map(m=>(m.wid==l&&(m.is_fast_access=!0),m))):$.error(e("workspace.workflowSpace.add_to_fast_access_failed"))},v=async l=>{(await R("delete_from_fast_access",{wid:l})).status==200?($.success(e("workspace.workflowSpace.delete_from_fast_access_success")),X(s,!0),r.data=r.data.map(m=>(m.wid==l&&(m.is_fast_access=!1),m))):$.error(e("workspace.workflowSpace.delete_from_fast_access_failed"))},W=x(),L=x(),I=async l=>{o.value=!0;const _=await R("create",{title:e("workspace.workflowSpace.new_workflow"),language:S.value});if(_.status!=200){$.error(_.msg);return}const m=_.data;X(s,!0),de(async()=>{await c.push(`/workflow/editor/${m.wid}`)})},D=async l=>{o.value=!0;const _=await R("get",{wid:l});if(_.status!=200){$.error(e("workspace.workflowSpace.clone_failed"));return}const m=await R("create",{..._.data,title:_.data.title+" "+e("workspace.workflowSpace.clone_workflow")});if(m.status!=200){$.error(m.data.msg);return}const J=m.data;X(s,!0),de(async()=>{await c.push(`/workflow/${J.wid}`)})},N=async l=>{await c.push(`/workflow/${l.wid}?rid=${l.rid}`)};return(l,_)=>{const m=u("a-skeleton"),J=u("a-input-search"),se=u("a-button"),H=u("a-space"),E=u("a-col"),ce=u("a-row"),ie=u("a-divider"),ve=u("a-typography-text"),Z=u("a-typography-link"),ue=u("a-tooltip"),be=u("a-tag"),Se=u("a-popconfirm"),Oe=u("a-table"),Ce=u("a-spin");return o.value?(p(),C("div",wt,[a(m,{active:""})])):(p(),b(Ce,{key:1,spinning:i.value,class:"space-container"},{default:n(()=>[a(ce,{justify:"space-between",align:"middle",gutter:[16,16]},{default:n(()=>[a(E,{span:24},{default:n(()=>[a(ce,{type:"flex",align:"middle",justify:"space-between"},{default:n(()=>[a(E,{flex:"auto"},{default:n(()=>[a(H,null,{default:n(()=>[a(J,{value:r.searchText,"onUpdate:value":_[0]||(_[0]=j=>r.searchText=j),placeholder:d(e)("workspace.workflowSpaceMain.input_search_text"),"enter-button":"",onSearch:r.searchWorkflows,class:"search-input"},null,8,["value","placeholder","onSearch"]),a(se,{onClick:r.clearSearch},{default:n(()=>[g(w(d(e)("workspace.workflowSpaceMain.reset_search")),1)]),_:1},8,["onClick"])]),_:1})]),_:1}),a(E,{flex:"auto",style:{display:"flex","justify-content":"end"}},{default:n(()=>[a(H,null,{default:n(()=>[a(se,{type:"primary",onClick:I},{default:n(()=>[a(d(Ee)),g(" "+w(d(e)("workspace.workflowSpaceMain.create_workflow")),1)]),_:1}),a(pt,{ref_key:"newWorkflowModal",ref:L,onCreate:I},null,512),a(Ne,{buttonType:"default",openType:"simple",showWorkflowTitle:!0,onOpenRecord:N})]),_:1})]),_:1})]),_:1})]),_:1}),a(ie),a(E,{span:24},{default:n(()=>[a(Oe,{loading:r.loading,columns:r.columns,customRow:r.customRow,"data-source":r.data,pagination:r.pagination,onChange:r.handleTableChange},{headerCell:n(({column:j})=>[j.key==="title"?(p(),C(z,{key:0},[a(d(nt)),g(" "+w(d(e)("workspace.workflowSpaceMain.workflow_title")),1)],64)):j.key==="tags"?(p(),C(z,{key:1},[a(d(ut)),g(" "+w(d(e)("workspace.workflowSpaceMain.tags")),1)],64)):j.key==="update_time"?(p(),C(z,{key:2},[a(d(Ue)),g(" "+w(d(e)("workspace.workflowSpaceMain.update_time")),1)],64)):j.key==="action"?(p(),C(z,{key:3},[a(d(Fe)),g(" "+w(d(e)("common.action")),1)],64)):V("",!0)]),bodyCell:n(({column:j,record:P})=>[j.key==="title"?(p(),b(H,{key:0},{default:n(()=>[a(ve,{class:"workflow-title"},{default:n(()=>[g(w(P.title),1)]),_:2},1024),P.is_fast_access?(p(),b(ue,{key:1,title:d(e)("workspace.workflowSpace.delete_from_fast_access")},{default:n(()=>[a(Z,{onClick:A=>v(P.wid)},{default:n(()=>[a(d(lt))]),_:2},1032,["onClick"])]),_:2},1032,["title"])):(p(),b(ue,{key:0,title:d(e)("workspace.workflowSpace.add_to_fast_access")},{default:n(()=>[a(Z,{onClick:A=>O(P.wid)},{default:n(()=>[Le(a(d(ct),null,null,512),[[Pe,r.hoverRowWid==P.wid]])]),_:2},1032,["onClick"])]),_:2},1032,["title"]))]),_:2},1024)):j.key==="tags"?(p(),b(H,{key:1},{default:n(()=>[(p(!0),C(z,null,G(P.tags,A=>(p(),b(be,{color:A.color,key:A.tid},{default:n(()=>[g(w(A.title),1)]),_:2},1032,["color"]))),128))]),_:2},1024)):j.key==="action"?(p(),C("div",mt,[a(Z,{onClick:Ae(A=>D(P.wid),["prevent"])},{default:n(()=>[g(w(d(e)("workspace.workflowSpace.clone_workflow")),1)]),_:2},1032,["onClick"]),a(ie,{type:"vertical"}),a(Se,{title:d(e)("workspace.workflowSpace.delete_confirm"),onConfirm:A=>M(P.wid)},{default:n(()=>[a(Z,{type:"danger"},{default:n(()=>[g(w(d(e)("workspace.workflowSpace.delete")),1)]),_:1})]),_:2},1032,["title","onConfirm"])])):V("",!0)]),_:1},8,["loading","columns","customRow","data-source","pagination","onChange"]),a(_t,{ref_key:"shareWorkflowModalRef",ref:W},null,512)]),_:1})]),_:1})]),_:1},8,["spinning"]))}}},kt=F(gt,[["__scopeId","data-v-1c18b54c"]]),ht={class:"author-container"},yt={__name:"AuthorComponent",props:{author:{type:Object,required:!1,default:()=>({})},time:{type:[Boolean,Number],required:!1,default:!1},fontColor:{type:String,required:!1,default:"#fff"}},setup(t){const e=t,{t:o}=q(),i=B(()=>e.author.avatar?{backgroundImage:e.author.avatar}:{backgroundColor:"#28c5e5"}),c=B(()=>e.author.nickname?e.author.nickname:o("common.vectorvein_user")),h=B(()=>typeof e.time=="boolean"&&e.time==!0?new Date().toLocaleString():typeof e.time=="boolean"&&e.time==!1?!1:new Date(e.time).toLocaleString());return(S,s)=>{const y=u("a-typography-text"),f=u("a-space");return p(),b(f,null,{default:n(()=>[T("div",ht,[T("div",{class:"author-avatar",style:Q(i.value)},w(c.value[0]),5),T("div",{class:"author-nickname",style:Q({color:t.fontColor})}," by "+w(c.value),5)]),h.value?(p(),b(y,{key:0,type:"secondary"},{default:n(()=>[g(w(h.value),1)]),_:1})):V("",!0)]),_:1})}}},vt=F(yt,[["__scopeId","data-v-f379b795"]]),bt={class:"gradient-layer"},St={class:"info-container"},Ot={style:{"flex-grow":"1"}},Ct={class:"meta-info-container"},xt={class:"numbers-container"},Mt={key:0},Wt={__name:"WorkflowCard",props:{id:{type:String,required:!1,default:""},title:{type:String,required:!0},tags:{type:Array,required:!0,default:()=>[]},images:{type:Array,required:!1,default:()=>[]},brief:{type:String,required:!1,default:""},author:{type:[Object,Boolean],required:!1,default:()=>({})},forks:{type:[Number,Boolean],required:!1,default:0}},setup(t){const e=t,o=B(()=>e.images.length===0?{backgroundColor:fe[Re(0,fe.length-1)]}:{backgroundImage:`url(${e.images[0]})`});return(i,c)=>{const h=u("a-tag"),S=u("a-typography-title"),s=u("a-card");return p(),b(s,{id:t.id,class:"workflow-card",hoverable:"",style:Q(o.value)},{default:n(()=>[T("div",bt,[T("div",St,[T("div",Ot,[(p(!0),C(z,null,G(t.tags,(y,f)=>(p(),b(h,{key:f,color:y.color,style:{"margin-bottom":"10px"}},{default:n(()=>[g(w(y.title),1)]),_:2},1032,["color"]))),128))]),a(S,{level:4,class:"workflow-title"},{default:n(()=>[g(w(t.title),1)]),_:1}),T("div",Ct,[t.author?(p(),b(vt,{key:0,author:t.author,fontColor:"#fff"},null,8,["author"])):V("",!0),T("div",xt,[typeof t.forks=="number"?(p(),C("div",Mt,[a(d(dt)),g(" "+w(t.forks>=10?t.forks:"<10"),1)])):V("",!0)])])])])]),_:1},8,["id","style"])}}},$t=F(Wt,[["__scopeId","data-v-72986b9f"]]),Tt={key:0},jt={__name:"WorkflowTemplatesMarket",setup(t){const{t:e}=q(),o=x(!0),i=te(),c=K(),{language:h}=Y(c),S=x([]);ye(async()=>{o.value=!1;const[y,f]=await Promise.all([s.load({is_official:!0}),pe("list_tags",{})]);f.status==200&&(S.value=f.data),o.value=!1});const s=ee({data:[],loading:!0,current:1,pageSize:100,total:0,pagination:B(()=>({total:s.total,current:s.current,pageSize:s.pageSize})),selectTag:"all",selectTagChange:async()=>{s.loading=!0,await s.load({tags:[s.selectTag],is_official:!0}),s.loading=!1},hoverRowWid:null,handleTableChange:(y,f,k)=>{s.load({page_size:y.pageSize,page:y.current,sort_field:k.field,sort_order:k.order,tags:f.tags})},load:async y=>{s.loading=!0;const f=await pe("list_templates",{client:"PC",...y});f.status==200?s.data=f.data.templates.map(k=>(k.create_time=new Date(k.create_time).toLocaleString(),k.update_time=new Date(k.update_time).toLocaleString(),k)):$.error(f.msg),s.total=f.data.total,s.pageSize=f.data.page_size,s.current=f.data.page,s.loading=!1}});return(y,f)=>{const k=u("a-skeleton"),r=u("a-typography-title"),M=u("a-col"),O=u("a-row"),v=u("a-typography-text"),W=u("a-radio-button"),L=u("a-radio-group"),I=u("a-space"),D=u("a-divider"),N=u("a-spin");return p(),C(z,null,[o.value?(p(),C("div",Tt,[a(k,{active:""})])):(p(),b(O,{key:1,align:"middle",gutter:[16,16]},{default:n(()=>[a(M,{span:24},{default:n(()=>[a(O,{type:"flex",align:"middle",justify:"space-between"},{default:n(()=>[a(M,{flex:"auto"},{default:n(()=>[a(r,{title:3},{default:n(()=>[g(w(d(e)("workspace.workflowSpaceMain.official_workflow_template")),1)]),_:1})]),_:1})]),_:1})]),_:1}),a(M,{span:24},{default:n(()=>[a(I,null,{default:n(()=>[a(v,null,{default:n(()=>[g(w(d(e)("workspace.workflowTemplate.workflow_template_tags")),1)]),_:1}),a(L,{value:s.selectTag,"onUpdate:value":f[0]||(f[0]=l=>s.selectTag=l),"button-style":"solid",onChange:s.selectTagChange},{default:n(()=>[a(W,{value:"all"},{default:n(()=>[g(w(d(e)("common.all")),1)]),_:1}),(p(!0),C(z,null,G(S.value,l=>(p(),C(z,{key:l.tid},[d(h)==l.language?(p(),b(W,{key:0,value:l.tid},{default:n(()=>[g(w(l.title),1)]),_:2},1032,["value"])):V("",!0)],64))),128))]),_:1},8,["value","onChange"])]),_:1})]),_:1}),a(D),a(M,{span:24},{default:n(()=>[a(N,{spinning:s.loading},{default:n(()=>[a(O,{gutter:[16,16]},{default:n(()=>[(p(!0),C(z,null,G(s.data,l=>(p(),b(M,{lg:6,md:8,sm:12,xs:24,key:l.tid,onClick:_=>d(i).push(`/workflow/template/${l.tid}`)},{default:n(()=>[a($t,{id:l.tid,title:l.title,tags:l.tags,images:l.images,brief:l.brief,author:l.user,forks:!1},null,8,["id","title","tags","images","brief","author"])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["spinning"])]),_:1})]),_:1})),a(D)],64)}}},zt=F(jt,[["__scopeId","data-v-1deb54e3"]]),Pt={__name:"WorkflowSpaceMain",setup(t){const{t:e}=q(),o=Be(),i=te(),c=x(o.query.tab?o.query.tab:"my-workflows"),h=async S=>{await i.push(Ie(o.path,{tab:S}))};return(S,s)=>{const y=u("a-tab-pane"),f=u("a-tabs");return p(),b(f,{activeKey:c.value,"onUpdate:activeKey":s[0]||(s[0]=k=>c.value=k),onChange:h},{default:n(()=>[a(y,{key:"my-workflows"},{tab:n(()=>[T("span",null,[a(d(qe)),g(" "+w(d(e)("workspace.workflowSpaceMain.my_workflows")),1)])]),default:n(()=>[a(kt)]),_:1}),a(y,{key:"official-workflow-templates"},{tab:n(()=>[T("span",null,[a(d(at)),g(" "+w(d(e)("workspace.workflowSpaceMain.official_workflow_template")),1)])]),default:n(()=>[a(zt)]),_:1})]),_:1},8,["activeKey"])}}},qt=F(Pt,[["__scopeId","data-v-4b53fd36"]]);export{qt as default};
