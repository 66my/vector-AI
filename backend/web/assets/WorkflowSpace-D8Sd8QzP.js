import{I as G,c as e,_ as P,W as Y,s as f,Y as q,Z as K,x as J,w as O,h as M,j as o,a7 as Q,ab as X,M as s,f as _,K as p,B as c,T as u,D as w,C as y,F as ee,G as oe,a1 as g,v as te}from"./index-26IlJ65o.js";import{f as L}from"./util-KW7HuL6H.js";import{u as se,a as V}from"./userWorkflows-JO-_tyWs.js";import{S as ae}from"./Star-CALmF95d.js";import{M as ne}from"./More-D0In7HJp.js";import{D as le}from"./Delete-BIY05YyZ.js";const re=G("home",!1,function(t){return e("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},[e("path",{d:"M9 18V42H39V18L24 6L9 18Z",fill:t.colors[1],stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap,"stroke-linejoin":t.strokeLinejoin},null),e("path",{d:"M19 29V42H29V29H19Z",fill:t.colors[3],stroke:t.colors[2],"stroke-width":t.strokeWidth,"stroke-linejoin":t.strokeLinejoin},null),e("path",{d:"M9 42H39",stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap},null)])}),ce={class:"space-container"},ie={class:"starred-workflow-item"},de={class:"starred-workflow-item-more-container"},_e={class:"single-chat-button-more"},fe={__name:"WorkflowSpace",setup(t){const{t:i}=Y(),B=f(!1),b=q(),{language:C}=K(b),k=se(),{userFastAccessWorkflows:H}=K(k),h=Q(),U=X(),v=f(h.params.workflowId),d=f([v.value]),S=f(["user-workflows"]),x=a=>{a.name=="WorkflowSpaceMain"?d.value=["my_index"]:a.name=="VAppMain"?d.value=["v_app"]:a.name=="WorkflowUse"&&(v.value=a.params.workflowId,d.value=[a.params.workflowId])};J(async()=>{x(h),await k.refreshWorkflows()}),O(h,a=>{x(a)});const j=f(1),F=async a=>{const n=await V("create",{title:i("workspace.workflowSpace.new_workflow")+j.value,language:C.value});if(n.status!=200){g.error(n.msg);return}const l=n.data;l.update_time=L(l.update_time),l.create_time=L(l.create_time),k.addUserWorkflow(l),te(async()=>{d.value=[l.wid],await U.push(`/workflow/editor/${l.wid}`)})},T=async a=>{(await V("delete_from_fast_access",{wid:a})).status==200?(g.success(i("workspace.workflowSpace.delete_from_fast_access_success")),await k.refreshWorkflows()):g.error(i("workspace.workflowSpace.delete_from_fast_access_failed"))};return(a,n)=>{const l=s("a-skeleton"),W=s("router-link"),m=s("a-menu-item"),A=s("a-tooltip"),D=s("a-typography-text"),I=s("a-menu"),N=s("a-dropdown"),R=s("a-sub-menu"),Z=s("a-layout-sider"),$=s("router-view"),z=s("a-layout-content"),E=s("a-layout");return _(),M("div",ce,[e(E,{class:"layout"},{default:o(()=>[e(Z,{width:"200",style:{background:"#fff"},breakpoint:"lg","collapsed-width":"0"},{default:o(()=>[B.value?(_(),p(l,{key:0,active:""})):(_(),p(I,{key:1,selectedKeys:d.value,"onUpdate:selectedKeys":n[0]||(n[0]=r=>d.value=r),openKeys:S.value,"onUpdate:openKeys":n[1]||(n[1]=r=>S.value=r),mode:"inline",style:{height:"100%"}},{default:o(()=>[e(m,{key:"my_index",id:"my_index"},{default:o(()=>[e(W,{to:"/workflow/"},{default:o(()=>[e(c(re),{theme:"filled"}),u(" "+w(c(i)("workspace.workflowSpace.workflow_index")),1)]),_:1})]),_:1}),e(R,{key:"user-workflows"},{title:o(()=>[y("span",null,[e(c(ae),{theme:"filled"}),u(" "+w(c(i)("workspace.workflowSpace.user_fast_access_workflows")),1)])]),default:o(()=>[(_(!0),M(ee,null,oe(c(H),r=>(_(),p(m,{key:r.wid},{default:o(()=>[y("div",ie,[e(A,{placement:"topLeft",title:r.title},{default:o(()=>[e(W,{to:`/workflow/${r.wid}`,style:{overflow:"hidden"}},{default:o(()=>[u(w(r.title),1)]),_:2},1032,["to"])]),_:2},1032,["title"]),e(N,null,{overlay:o(()=>[e(I,null,{default:o(()=>[e(m,{key:"delete",onClick:ue=>T(r.wid)},{default:o(()=>[e(D,{type:"danger"},{default:o(()=>[e(c(le)),u(" "+w(c(i)("workspace.workflowSpace.delete_from_fast_access")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),default:o(()=>[y("div",de,[y("div",_e,[e(c(ne))])])]),_:2},1024)])]),_:2},1024))),128)),e(m,{key:"add",onClick:F},{default:o(()=>[u(" + "+w(c(i)("workspace.workflowSpace.add_new_workflow")),1)]),_:1})]),_:1})]),_:1},8,["selectedKeys","openKeys"]))]),_:1}),e(z,{style:{padding:"0 24px",minHeight:"280px"}},{default:o(()=>[(_(),p($,{key:v.value}))]),_:1})]),_:1})])}}},ve=P(fe,[["__scopeId","data-v-1a14eaae"]]);export{ve as default};
