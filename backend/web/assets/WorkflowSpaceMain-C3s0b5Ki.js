import{I as Z,c as t,_ as G,a3 as ye,a4 as ve,W as F,M as c,f as d,K as g,j as o,B as s,E as M,a as P,ad as le,C as I,h as b,F as z,G as N,T as x,D as y,ae as ne,H as xe,s as D,ab as te,aa as re,a0 as J,x as ie,r as ce,v as Y,$ as W,w as Se,n as Ce,a5 as We,Y as be,Z as Te,af as se,a6 as ze}from"./index-DwTab_5X.js";import{g as je,f as E,a as Me}from"./util-CDdHKGWf.js";import{u as Le,w as Ve,a as V}from"./userWorkflows-Bs4ZbHGJ.js";import{_ as Re,C as $e}from"./WorkflowRunRecordsDrawer-WrZDk_dg.js";import{C as qe,a as de,T as Be}from"./TagOne-CBmfNm2W.js";import{A as Ie,B as He}from"./AuthorComponent-BXnae7Yu.js";import{S as X}from"./Star-BAIHbHnV.js";import{D as ue}from"./Delete-DkwO9RIL.js";import{M as Ue}from"./More-DBq0BXvd.js";import{P as Ae}from"./Plus-ky6E8-a9.js";import{T as Pe}from"./Time-DvTUddU7.js";const De=Z("list-one",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M18 6H34V12H18V6Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M18 21H38V27H18V21Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M18 36H44V42H18V36Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("circle",{cx:"8",cy:"9",r:"2",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth},null),t("circle",{cx:"8",cy:"24",r:"2",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth},null),t("circle",{cx:"8",cy:"39",r:"2",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth},null)])}),Ze=Z("more-app",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M18 4H6C4.89543 4 4 4.89543 4 6V18C4 19.1046 4.89543 20 6 20H18C19.1046 20 20 19.1046 20 18V6C20 4.89543 19.1046 4 18 4Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M18 28H6C4.89543 28 4 28.8954 4 30V42C4 43.1046 4.89543 44 6 44H18C19.1046 44 20 43.1046 20 42V30C20 28.8954 19.1046 28 18 28Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M42 4H30C28.8954 4 28 4.89543 28 6V18C28 19.1046 28.8954 20 30 20H42C43.1046 20 44 19.1046 44 18V6C44 4.89543 43.1046 4 42 4Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M28 28H44",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M36 36H44",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M28 44H44",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Fe=Z("search",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M21 38C30.3888 38 38 30.3888 38 21C38 11.6112 30.3888 4 21 4C11.6112 4 4 11.6112 4 21C4 30.3888 11.6112 38 21 38Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M26.657 14.3431C25.2093 12.8954 23.2093 12 21.0001 12C18.791 12 16.791 12.8954 15.3433 14.3431",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M33.2216 33.2217L41.7069 41.707",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Oe=Z("user",!1,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("circle",{cx:"24",cy:"12",r:"8",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M42 44C42 34.0589 33.9411 26 24 26C14.0589 26 6 34.0589 6 44",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Ke=Z("view-grid-card",!1,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("rect",{x:"6",y:"6",width:"36",height:"36",rx:"3",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("rect",{x:"13",y:"13",width:"8",height:"8",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("rect",{x:"27",y:"13",width:"8",height:"8",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("rect",{x:"13",y:"27",width:"8",height:"8",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("rect",{x:"27",y:"27",width:"8",height:"8",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),Ne={__name:"InputSearch",props:{modelValue:{},modelModifiers:{}},emits:ye(["search","clear-search"],["update:modelValue"]),setup(e,{emit:r}){const h=ve(e,"modelValue"),{t:m}=F(),v=r,T=()=>{v("search")},l=()=>{h.value="",v("clear-search")};return(u,w)=>{const p=c("a-input");return d(),g(p,{value:h.value,"onUpdate:value":w[0]||(w[0]=S=>h.value=S),placeholder:s(m)("components.inputSearch.input_search_text"),onPressEnter:T,class:"search-input"},{prefix:o(()=>[t(s(Fe))]),suffix:o(()=>[h.value.length>0?(d(),g(s(qe),{key:0,class:"clear-search-button",theme:"filled",onClick:l,style:{cursor:"pointer"}})):M("",!0)]),_:1},8,["value","placeholder"])}}},fe=G(Ne,[["__scopeId","data-v-28414df6"]]),Ee={class:"gradient-layer"},Ge={key:1,class:"meta-text"},Qe={__name:"WorkflowCard",props:{id:{type:String,required:!1,default:""},title:{type:String,required:!0},tags:{type:Array,required:!0,default:()=>[]},images:{type:Array,required:!1,default:()=>[]},brief:{type:String,required:!1,default:""},author:{type:[Object,Boolean],required:!1,default:!1},datetime:{type:[String,Boolean],required:!1,default:!1},forks:{type:[Number,Boolean],required:!1,default:0},extra:{type:[Object,Boolean],required:!1,default:!1},starred:{type:[Boolean,void 0],required:!1,default:void 0},loading:{type:Boolean,required:!1,default:!1}},emits:["star","clone","delete"],setup(e,{emit:r}){const h=e,m=r,{t:v}=F(),T=P(()=>h.images.length===0?{backgroundColor:le[je(0,le.length-1)]}:{backgroundImage:`url(${h.images[0]})`});return(l,u)=>{const w=c("a-tag"),p=c("a-tooltip"),S=c("a-button"),a=c("a-menu-item"),R=c("a-typography-text"),$=c("a-popconfirm"),q=c("a-menu"),H=c("a-dropdown"),_=c("a-flex"),B=c("a-typography-title"),O=c("a-card");return d(),g(O,{id:e.id,loading:e.loading,class:"workflow-card",hoverable:"",style:xe(T.value)},{default:o(()=>[I("div",Ee,[t(_,{vertical:"",class:"info-container"},{default:o(()=>[t(_,{justify:"space-between",style:{"flex-grow":"1"}},{default:o(()=>[I("div",null,[(d(!0),b(z,null,N(e.tags,(n,i)=>(d(),g(w,{key:i,color:n.color,style:{"margin-bottom":"10px"}},{default:o(()=>[x(y(n.title),1)]),_:2},1032,["color"]))),128))]),I("div",null,[t(_,{align:"center"},{default:o(()=>[typeof e.starred<"u"?(d(),g(S,{key:0,size:"small",type:"text",onClick:u[0]||(u[0]=ne(n=>m("star"),["prevent"]))},{icon:o(()=>[t(p,{title:e.starred?s(v)("workspace.workflowSpace.delete_from_fast_access"):s(v)("workspace.workflowSpace.add_to_fast_access")},{default:o(()=>[t(s(X),{theme:e.starred?"filled":"outline",fill:"#fff"},null,8,["theme"])]),_:1},8,["title"])]),_:1})):M("",!0),e.extra?(d(),g(H,{key:1},{overlay:o(()=>[t(q,null,{default:o(()=>[t(a,{key:"clone",onClick:u[1]||(u[1]=n=>m("clone",e.id))},{default:o(()=>[t(s(de)),x(" "+y(s(v)("workspace.workflowSpace.clone_workflow")),1)]),_:1}),t($,{title:s(v)("workspace.workflowSpace.delete_confirm"),onConfirm:u[2]||(u[2]=n=>m("delete",e.id))},{default:o(()=>[t(a,{key:"delete"},{default:o(()=>[t(R,{type:"danger"},{default:o(()=>[t(s(ue)),x(" "+y(s(v)("common.delete")),1)]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})]),default:o(()=>[t(S,{size:"large",type:"text"},{default:o(()=>[t(s(Ue),{theme:"filled",size:"24",fill:"#fff"})]),_:1})]),_:1})):M("",!0)]),_:1})])]),_:1}),t(B,{level:4,class:"workflow-title"},{default:o(()=>[x(y(e.title),1)]),_:1}),t(_,{align:"center",justify:"space-between",class:"meta-info-container"},{default:o(()=>[e.author?(d(),g(Ie,{key:0,author:e.author,fontColor:"#fff"},null,8,["author"])):M("",!0),e.datetime?(d(),b("span",Ge,y(e.datetime),1)):M("",!0),typeof e.forks=="number"?(d(),g(_,{key:2,align:"center",class:"meta-text"},{default:o(()=>[t(s(He)),I("span",null,y(e.forks>=10?e.forks:"<10"),1)]),_:1})):M("",!0)]),_:1})]),_:1})])]),_:1},8,["id","loading","style"])}}},ee=G(Qe,[["__scopeId","data-v-5ec9d829"]]),Ye={key:2,class:"action-container"},Je={__name:"MyWorkflows",setup(e){const{t:r}=F(),h=D(!0),m=te(),v=re(),{language:T,workflowDisplayPreference:l}=J(v),u=Le(),{userWorkflows:w,userWorkflowsTotal:p}=J(u),S=D([]);ie(async()=>{const n=m.currentRoute.value.query.search_text;let i={};n&&(i={search_text:n},a.searchText=n);const[f,j]=await Promise.all([a.load({page_size:a.pageSize,...i}),Ve("list",{})]);j.status==200&&(S.value=j.data),h.value=!1});const a=ce({columns:[{name:r("workspace.workflowSpaceMain.workflow_title"),dataIndex:"title",key:"title"},{title:r("workspace.workflowSpaceMain.tags"),key:"tags",dataIndex:"tags",filters:P(()=>S.value.map(n=>({text:n.title,value:n.tid}))),width:"300px"},{title:r("workspace.workflowSpaceMain.update_time"),key:"update_time",dataIndex:"update_time",sorter:!0,sortDirections:["descend","ascend"],width:"160px"},{title:r("common.action"),key:"action",width:"160px"}],data:w.value,loading:!1,current:1,pageSize:l.value=="card"?16:10,total:p.value,pagination:P(()=>({total:a.total,current:a.current,pageSize:a.pageSize})),selectTag:"all",selectTagChange:async()=>{a.loading=!0,await a.load({tags:[a.selectTag]}),a.loading=!1},searching:!1,searchText:"",hoverRowWid:null,customRow:n=>({style:{cursor:"pointer"},onClick:async i=>{(i.target.classList.contains("ant-table-cell")||i.target.classList.contains("workflow-title"))&&await Y(async()=>{await m.push(`/workspace/workflow/${n.wid}`)})},onMouseenter:i=>{a.hoverRowWid=n.wid},onMouseleave:i=>{a.hoverRowWid=null}}),searchWorkflows:async()=>{a.loading=!0,a.searching=!0,await a.load({page_size:a.pageSize,search_text:a.searchText}),a.searching=!1,a.loading=!1,await m.push({query:{...m.currentRoute.value.query,search_text:a.searchText}})},clearSearch:async()=>{a.loading=!0,a.searching=!0,a.searchText="",await a.load({page_size:a.pageSize}),a.searching=!1,a.loading=!1,await m.push({query:{...m.currentRoute.value.query,search_text:void 0}})},handleTableChange:(n,i,f)=>{a.load({page_size:n.pageSize,page:n.current,sort_field:f.field,sort_order:f.order,tags:i.tags,search_text:a.searchText})},handleCardViewChange:n=>{a.load({page_size:a.pageSize,page:n,search_text:a.searchText})},load:async n=>{a.loading=!0;const i=await V("list",n);i.status==200?a.data=i.data.workflows.map(f=>(f.create_time=E(f.create_time),f.update_time=E(f.update_time),f.key=f.wid,f)):W.error(i.msg),a.total=i.data.total,a.pageSize=i.data.page_size,a.current=i.data.page,a.loading=!1}});Se(()=>l.value,n=>{l.value=="card"?(a.load({page_size:16}),a.pageSize=16):a.load({page_size:10}),v.setWorkflowDisplayPreference(l.value)});const R=async n=>{(await V("delete",{wid:n})).status==200?(W.success(r("workspace.workflowSpace.delete_success")),u.deleteUserWorkflow(n),a.load({})):W.error(r("workspace.workflowSpace.delete_failed"))},$=async n=>{(await V("add_to_fast_access",{wid:n})).status==200?(W.success(r("workspace.workflowSpace.add_to_fast_access_success")),await u.refreshWorkflows(),a.data=a.data.map(f=>(f.wid==n&&(f.is_fast_access=!0),f))):W.error(r("workspace.workflowSpace.add_to_fast_access_failed"))},q=async n=>{(await V("delete_from_fast_access",{wid:n})).status==200?(W.success(r("workspace.workflowSpace.delete_from_fast_access_success")),await u.refreshWorkflows(),a.data=a.data.map(f=>(f.wid==n&&(f.is_fast_access=!1),f))):W.error(r("workspace.workflowSpace.delete_from_fast_access_failed"))},H=async n=>{n.is_fast_access?await q(n.wid):await $(n.wid)},_=async n=>{h.value=!0;const i=await V("create",{title:r("workspace.workflowSpace.new_workflow"),language:T.value});if(i.status!=200){W.error(i.msg);return}const f=i.data;await u.refreshWorkflows(),Y(async()=>{await m.push(`/workflow/editor/${f.wid}`)})},B=async n=>{h.value=!0;const i=a.data.find(A=>A.wid==n);i.loading=!0;const f=await V("get",{wid:n});if(f.status!=200){W.error(r("workspace.workflowSpace.clone_failed"));return}const j=await V("create",{...f.data,title:f.data.title+" "+r("workspace.workflowSpace.clone_workflow")});if(i.loading=!1,j.status!=200){W.error(j.data.msg);return}const U=j.data;await u.refreshWorkflows(),Y(async()=>{await m.push(`/workflow/${U.wid}`)})},O=async n=>{await m.push(`/workflow/${n.wid}?rid=${n.rid}`)};return(n,i)=>{const f=c("a-tooltip"),j=c("a-segmented"),U=c("a-button"),A=c("a-space"),K=c("a-flex"),ke=c("router-link"),ae=c("a-col"),we=c("a-pagination"),_e=c("a-row"),ge=c("a-typography-text"),Q=c("a-typography-link"),he=c("a-tag"),me=c("a-popconfirm"),oe=c("a-typography-paragraph"),pe=c("a-table");return d(),g(K,{vertical:"",gap:"middle"},{default:o(()=>[t(K,{wrap:"wrap",align:"middle",justify:"space-between",gap:"small"},{default:o(()=>[t(fe,{modelValue:a.searchText,"onUpdate:modelValue":i[0]||(i[0]=k=>a.searchText=k),onSearch:a.searchWorkflows,onClearSearch:a.clearSearch},null,8,["modelValue","onSearch","onClearSearch"]),t(K,{justify:"flex-end"},{default:o(()=>[t(A,null,{default:o(()=>[t(j,{size:"middle",value:s(l),"onUpdate:value":i[1]||(i[1]=k=>Ce(l)?l.value=k:null),options:[{value:"card"},{value:"list"}]},{label:o(({value:k})=>[k=="card"?(d(),g(f,{key:0,title:s(r)("common.card_view")},{default:o(()=>[t(s(Ke))]),_:1},8,["title"])):(d(),g(f,{key:1,title:s(r)("common.table_view")},{default:o(()=>[t(s(De))]),_:1},8,["title"]))]),_:1},8,["value"]),t(U,{type:"primary",onClick:_},{default:o(()=>[t(s(Ae)),x(" "+y(s(r)("workspace.workflowSpaceMain.create_workflow")),1)]),_:1}),t(Re,{buttonType:"default",openType:"simple",showWorkflowTitle:!0,onOpenRecord:O})]),_:1})]),_:1})]),_:1}),s(l)=="card"?(d(),g(_e,{key:0,gutter:[16,16],style:{"margin-bottom":"80px"}},{default:o(()=>[(d(!0),b(z,null,N(a.data,k=>(d(),g(ae,{xxl:6,xl:8,lg:8,md:12,sm:24,xs:24,key:k.pid},{default:o(()=>[t(ke,{to:`/workflow/${k.wid}`},{default:o(()=>[t(ee,{title:k.title,tags:k.tags,images:k.images,brief:k.brief,author:!1,datetime:k.update_time,forks:!1,extra:!0,loading:k.loading,starred:k.is_fast_access,onStar:C=>H(k),onClone:C=>B(k.wid),onDelete:C=>R(k.wid)},null,8,["title","tags","images","brief","datetime","loading","starred","onStar","onClone","onDelete"])]),_:2},1032,["to"])]),_:2},1024))),128)),t(ae,{span:24},{default:o(()=>[t(K,{justify:"flex-end"},{default:o(()=>[t(we,{current:a.current,"onUpdate:current":i[2]||(i[2]=k=>a.current=k),pageSize:a.pageSize,"onUpdate:pageSize":i[3]||(i[3]=k=>a.pageSize=k),total:a.total,"show-less-items":"",onChange:a.handleCardViewChange},null,8,["current","pageSize","total","onChange"])]),_:1})]),_:1})]),_:1})):(d(),g(pe,{key:1,loading:h.value||a.loading,columns:a.columns,customRow:a.customRow,"data-source":a.data,pagination:a.pagination,onChange:a.handleTableChange},{headerCell:o(({column:k})=>[k.key==="title"?(d(),b(z,{key:0},[t(s(We)),x(" "+y(s(r)("workspace.workflowSpaceMain.workflow_title")),1)],64)):k.key==="tags"?(d(),b(z,{key:1},[t(s(Be)),x(" "+y(s(r)("workspace.workflowSpaceMain.tags")),1)],64)):k.key==="update_time"?(d(),b(z,{key:2},[t(s(Pe)),x(" "+y(s(r)("workspace.workflowSpaceMain.update_time")),1)],64)):k.key==="action"?(d(),b(z,{key:3},[t(s($e)),x(" "+y(s(r)("common.action")),1)],64)):M("",!0)]),bodyCell:o(({column:k,record:C,index:at})=>[k.key==="title"?(d(),g(A,{key:0},{default:o(()=>[t(ge,{class:"workflow-title"},{default:o(()=>[x(y(C.title),1)]),_:2},1024),C.is_fast_access?(d(),g(f,{key:1,title:s(r)("workspace.workflowSpace.delete_from_fast_access")},{default:o(()=>[t(Q,{onClick:L=>q(C.wid)},{default:o(()=>[t(s(X),{theme:"filled"})]),_:2},1032,["onClick"])]),_:2},1032,["title"])):(d(),g(f,{key:0,title:s(r)("workspace.workflowSpace.add_to_fast_access")},{default:o(()=>[t(Q,{onClick:L=>$(C.wid)},{default:o(()=>[be(t(s(X),null,null,512),[[Te,a.hoverRowWid==C.wid]])]),_:2},1032,["onClick"])]),_:2},1032,["title"]))]),_:2},1024)):k.key==="tags"?(d(),g(A,{key:1},{default:o(()=>[(d(!0),b(z,null,N(C.tags,L=>(d(),g(he,{color:L.color,key:L.tid},{default:o(()=>[x(y(L.title),1)]),_:2},1032,["color"]))),128))]),_:2},1024)):k.key==="action"?(d(),b("div",Ye,[t(f,{title:s(r)("workspace.workflowSpace.clone_workflow")},{default:o(()=>[t(U,{type:"text",onClick:ne(L=>B(C.wid),["prevent"])},{icon:o(()=>[t(s(de))]),_:2},1032,["onClick"])]),_:2},1032,["title"]),t(f,{title:s(r)("workspace.workflowSpace.delete")},{default:o(()=>[t(me,{title:s(r)("workspace.workflowSpace.delete_confirm"),onConfirm:L=>R(C.wid)},{default:o(()=>[t(U,{type:"text",danger:""},{icon:o(()=>[t(s(ue))]),_:1})]),_:2},1032,["title","onConfirm"])]),_:2},1032,["title"])])):M("",!0)]),emptyText:o(()=>[t(oe,{type:"secondary"},{default:o(()=>[x(y(s(r)("components.workspace.myWorkflows.no_workflows_1")),1)]),_:1}),t(oe,{type:"secondary"},{default:o(()=>[x(y(s(r)("components.workspace.myWorkflows.no_workflows_2"))+" ",1),t(Q,{href:"/workflow/?tab=official-workflow-templates"},{default:o(()=>[x(y(s(r)("workspace.workflowSpaceMain.official_workflow_template")),1)]),_:1})]),_:1})]),_:1},8,["loading","columns","customRow","data-source","pagination","onChange"]))]),_:1})}}},Xe={__name:"WorkflowTemplatesMarket",setup(e){const{t:r}=F();D(!0);const h=te(),m=re();J(m);const v=D([]),T=P(()=>{let u=[{label:r("common.all_tags"),value:"all"}];return u=u.concat(v.value.map(w=>({label:w.title,value:w.tid}))),u});ie(async()=>{const u=h.currentRoute.value.query.search_text;let w={};u&&(w={search_text:u},l.searchText=u);const[p,S]=await Promise.all([l.load({is_official:!0,...w}),se("list_tags",{})]);S.status==200&&(v.value=S.data)});const l=ce({data:[],loading:!0,current:1,pageSize:10,total:0,pagination:P(()=>({total:l.total,current:l.current,pageSize:l.pageSize})),selectTag:"all",selectTagChange:async()=>{l.loading=!0,await l.load({tags:[l.selectTag],is_official:!0}),l.loading=!1},hoverRowWid:null,handleTableChange:(u,w,p)=>{l.load({page_size:u.pageSize,page:u.current,sort_field:p.field,sort_order:p.order,tags:w.tags})},searching:!1,searchText:"",searchWorkflows:async()=>{l.searching=!0,await l.load({page_size:l.pageSize,search_text:l.searchText}),l.searching=!1,await h.push({query:{...h.currentRoute.value.query,search_text:l.searchText}})},clearSearch:async()=>{l.searching=!0,l.searchText="",await l.load({page_size:l.pageSize}),l.searching=!1,await h.push({query:{...h.currentRoute.value.query,search_text:void 0}})},load:async u=>{l.loading=!0;const w=await se("list_templates",{client:"PC",...u});w.status==200?l.data=w.data.templates.map(p=>(p.create_time=E(p.create_time),p.update_time=E(p.update_time),p)):W.error(w.msg),l.total=w.data.total,l.pageSize=w.data.page_size,l.current=w.data.page,l.loading=!1}});return(u,w)=>{const p=c("a-select"),S=c("a-flex"),a=c("a-tooltip"),R=c("a-col"),$=c("a-row"),q=c("a-spin"),H=c("a-divider");return d(),b(z,null,[t(S,{vertical:"",gap:"middle"},{default:o(()=>[t(S,{justify:"space-between"},{default:o(()=>[t(fe,{modelValue:l.searchText,"onUpdate:modelValue":w[0]||(w[0]=_=>l.searchText=_),onSearch:l.searchWorkflows,onClearSearch:l.clearSearch},null,8,["modelValue","onSearch","onClearSearch"]),t(p,{value:l.selectTag,"onUpdate:value":w[1]||(w[1]=_=>l.selectTag=_),style:{width:"200px"},options:T.value,onChange:l.selectTagChange},null,8,["value","options","onChange"])]),_:1}),t(q,{spinning:l.loading},{default:o(()=>[t($,{gutter:[16,16]},{default:o(()=>[(d(!0),b(z,null,N(l.data,(_,B)=>(d(),g(R,{xl:6,lg:8,md:8,sm:12,xs:24,key:_.tid,onClick:O=>u.navigateToTemplate(_.tid)},{default:o(()=>[B==0?(d(),g(a,{key:0,color:"blue",open:u.showBeginnerTipsPopover,title:s(r)("workspace.workflowSpaceMain.select_any_template_to_start"),trigger:"focus"},{default:o(()=>[t(ee,{id:_.tid,title:_.title,tags:_.tags,images:_.images,brief:_.brief,author:_.user,forks:_.used_count},null,8,["id","title","tags","images","brief","author","forks"])]),_:2},1032,["open","title"])):(d(),g(ee,{key:1,id:_.tid,title:_.title,tags:_.tags,images:_.images,brief:_.brief,author:_.user,forks:_.used_count},null,8,["id","title","tags","images","brief","author","forks"]))]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["spinning"])]),_:1}),t(H)],64)}}},et=G(Xe,[["__scopeId","data-v-c152504c"]]),tt={__name:"WorkflowSpaceMain",setup(e){const{t:r}=F(),h=ze(),m=te(),v=D(h.query.tab?h.query.tab:"my-workflows"),T=async l=>{await m.push(Me(h.path,{tab:l}))};return(l,u)=>{const w=c("a-tab-pane"),p=c("a-tabs");return d(),g(p,{activeKey:v.value,"onUpdate:activeKey":u[0]||(u[0]=S=>v.value=S),onChange:T},{default:o(()=>[t(w,{key:"my-workflows"},{tab:o(()=>[I("span",null,[t(s(Oe)),x(" "+y(s(r)("workspace.workflowSpaceMain.my_workflows")),1)])]),default:o(()=>[t(Je)]),_:1}),t(w,{key:"official-workflow-templates"},{tab:o(()=>[I("span",null,[t(s(Ze),{theme:"filled"}),x(" "+y(s(r)("workspace.workflowSpaceMain.official_workflow_template")),1)])]),default:o(()=>[t(et)]),_:1})]),_:1},8,["activeKey"])}}},wt=G(tt,[["__scopeId","data-v-a0d4668b"]]);export{wt as default};
