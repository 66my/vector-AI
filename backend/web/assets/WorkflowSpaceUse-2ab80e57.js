import{c as a,A as oe,j as Ue,r as S,e as ae,b as $e,aq as Se,M as L,l as i,n as l,s as d,q as o,x as w,y as f,u as s,F,C as E,p as b,_ as Ke,T as et,I as Oe,J as tt,G as at,H as ot,K as lt,L as te,k as ue,m as rt,z as M,v as Q,E as Z,V as De,P as ie,ar as xe}from"./index-bbb581e8.js";import{u as nt}from"./userDatabase-570884ac.js";import{F as st,T as ct,_ as ut,a as it,b as pt,c as dt,d as _t}from"./EchartsRenderer-7a287037.js";import{_ as ft}from"./UploaderFieldUse-d6c9df1f.js";import{_ as mt}from"./TemperatureInput-ce9583ae.js";import{F as Re,C as wt}from"./FieldTimeOutlined-0f9042b8.js";import{d as vt}from"./database-07243708.js";import{_ as kt}from"./_plugin-vue_export-helper-c27b6911.js";var gt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 305H624V192c0-17.7-14.3-32-32-32H184v-40c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v784c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V640h248v113c0 17.7 14.3 32 32 32h416c17.7 0 32-14.3 32-32V337c0-17.7-14.3-32-32-32zM184 568V232h368v336H184zm656 145H504v-73h112c4.4 0 8-3.6 8-8V377h216v336z"}}]},name:"flag",theme:"outlined"};const yt=gt;function Le(c){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(_){return Object.getOwnPropertyDescriptor(n,_).enumerable}))),r.forEach(function(_){ht(c,_,n[_])})}return c}function ht(c,e,n){return e in c?Object.defineProperty(c,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):c[e]=n,c}var pe=function(e,n){var r=Le({},e,n.attrs);return a(oe,Le({},r,{icon:yt}),null)};pe.displayName="FlagOutlined";pe.inheritAttrs=!1;const bt=pe;var St={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 000 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 00391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6 877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 00-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z"}}]},name:"fullscreen-exit",theme:"outlined"};const Ot=St;function Fe(c){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(_){return Object.getOwnPropertyDescriptor(n,_).enumerable}))),r.forEach(function(_){Dt(c,_,n[_])})}return c}function Dt(c,e,n){return e in c?Object.defineProperty(c,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):c[e]=n,c}var de=function(e,n){var r=Fe({},e,n.attrs);return a(oe,Fe({},r,{icon:Ot}),null)};de.displayName="FullscreenExitOutlined";de.inheritAttrs=!1;const xt=de;var Rt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"}}]},name:"fullscreen",theme:"outlined"};const Lt=Rt;function Ie(c){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(_){return Object.getOwnPropertyDescriptor(n,_).enumerable}))),r.forEach(function(_){Ft(c,_,n[_])})}return c}function Ft(c,e,n){return e in c?Object.defineProperty(c,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):c[e]=n,c}var _e=function(e,n){var r=Ie({},e,n.attrs);return a(oe,Ie({},r,{icon:Lt}),null)};_e.displayName="FullscreenOutlined";_e.inheritAttrs=!1;const It=_e;var Ct={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm159.6-585h-59.5c-3 0-5.8 1.7-7.1 4.4l-90.6 180H511l-90.6-180a8 8 0 00-7.1-4.4h-60.7c-1.3 0-2.6.3-3.8 1-3.9 2.1-5.3 7-3.2 10.9L457 515.7h-61.4c-4.4 0-8 3.6-8 8v29.9c0 4.4 3.6 8 8 8h81.7V603h-81.7c-4.4 0-8 3.6-8 8v29.9c0 4.4 3.6 8 8 8h81.7V717c0 4.4 3.6 8 8 8h54.3c4.4 0 8-3.6 8-8v-68.1h82c4.4 0 8-3.6 8-8V611c0-4.4-3.6-8-8-8h-82v-41.5h82c4.4 0 8-3.6 8-8v-29.9c0-4.4-3.6-8-8-8h-62l111.1-204.8c.6-1.2 1-2.5 1-3.8-.1-4.4-3.7-8-8.1-8z"}}]},name:"pay-circle",theme:"outlined"};const Ut=Ct;function Ce(c){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(_){return Object.getOwnPropertyDescriptor(n,_).enumerable}))),r.forEach(function(_){$t(c,_,n[_])})}return c}function $t(c,e,n){return e in c?Object.defineProperty(c,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):c[e]=n,c}var fe=function(e,n){var r=Ce({},e,n.attrs);return a(oe,Ce({},r,{icon:Ut}),null)};fe.displayName="PayCircleOutlined";fe.inheritAttrs=!1;const Et=fe,Vt={key:1,class:"action-container"},Pt={__name:"WorkflowRunRecordsDrawer",props:{workflowId:{type:String,required:!0}},emits:["open-record"],setup(c,{emit:e}){const n=c,{t:r}=Ue(),_=S(!0),X={NOT_STARTED:"purple",QUEUED:"orange",RUNNING:"blue",FINISHED:"green",FAILED:"red"},P=S(!1),Y=async()=>{P.value=!0,await y.load({}),_.value=!1},le=()=>{P.value=!1},K=[{text:r("components.workspace.workflowRunRecordsDrawer.status_not_started"),value:"NOT_STARTED"},{text:r("components.workspace.workflowRunRecordsDrawer.status_queued"),value:"QUEUED"},{text:r("components.workspace.workflowRunRecordsDrawer.status_running"),value:"RUNNING"},{text:r("components.workspace.workflowRunRecordsDrawer.status_finished"),value:"FINISHED"},{text:r("components.workspace.workflowRunRecordsDrawer.status_failed"),value:"FAILED"}],y=ae({columns:[{title:r("components.workspace.workflowRunRecordsDrawer.start_time"),key:"start_time",dataIndex:"start_time",sorter:!0,sortDirections:["descend","ascend"],width:"156px"},{title:r("components.workspace.workflowRunRecordsDrawer.end_time"),key:"end_time",dataIndex:"end_time",sorter:!0,sortDirections:["descend","ascend"],width:"156px"},{title:r("components.workspace.workflowRunRecordsDrawer.status"),key:"status",dataIndex:"status",filters:K,width:"60px"},{title:r("common.action"),key:"action",width:"100px"}],data:[],loading:!1,current:1,pageSize:10,total:0,pagination:$e(()=>({total:y.total,current:y.current,pageSize:y.pageSize})),handleTableChange:(C,D,R)=>{y.load({page_size:C.pageSize,page:C.current,sort_field:R.field,sort_order:R.order,status:D.status})},load:async C=>{y.loading=!0;const D=await Se("list",{wid:n.workflowId,...C});D.status==200?y.data=D.data.records.map(R=>(R.start_time=R.start_time?new Date(R.start_time).toLocaleString():"-",R.end_time=R.end_time?new Date(R.end_time).toLocaleString():"-",R)):L.error(D.msg),y.total=D.data.total,y.pageSize=D.data.page_size,y.current=D.data.page,y.loading=!1}}),B=async C=>{_.value=!0;const D=await Se("get",{rid:C});D.status==200?(e("open-record",D.data),P.value=!1):L.error(D.msg),_.value=!1};return(C,D)=>{const R=i("a-button"),I=i("a-tag"),re=i("a-typography-link"),N=i("a-table"),T=i("a-col"),z=i("a-row"),v=i("a-spin"),H=i("a-drawer");return l(),d(F,null,[a(R,{type:"primary",onClick:Y},{default:o(()=>[w(f(s(r)("components.workspace.workflowRunRecordsDrawer.workflows_run_records")),1)]),_:1}),a(H,{title:s(r)("components.workspace.workflowRunRecordsDrawer.my_workflows_run_records"),width:"50vw",open:P.value,onClose:le},{default:o(()=>[a(v,{spinning:_.value},{default:o(()=>[a(z,{justify:"space-between",align:"middle"},{default:o(()=>[a(T,{span:24},{default:o(()=>[a(N,{loading:y.loading,columns:y.columns,customRow:y.customRow,"data-source":y.data,pagination:y.pagination,onChange:y.handleTableChange},{headerCell:o(({column:O})=>[O.key==="start_time"?(l(),d(F,{key:0},[a(s(Re)),w(" "+f(s(r)("components.workspace.workflowRunRecordsDrawer.start_time")),1)],64)):O.key==="end_time"?(l(),d(F,{key:1},[a(s(Re)),w(" "+f(s(r)("components.workspace.workflowRunRecordsDrawer.end_time")),1)],64)):O.key==="status"?(l(),d(F,{key:2},[a(s(bt)),w(" "+f(s(r)("components.workspace.workflowRunRecordsDrawer.status")),1)],64)):O.key==="used_credits"?(l(),d(F,{key:3},[a(s(Et)),w(" "+f(s(r)("components.workspace.workflowRunRecordsDrawer.used_credits")),1)],64)):O.key==="action"?(l(),d(F,{key:4},[a(s(wt)),w(" "+f(s(r)("common.action")),1)],64)):E("",!0)]),bodyCell:o(({column:O,record:V})=>[O.key==="status"?(l(),b(I,{key:0,color:X[V.status]},{default:o(()=>[w(f(s(r)(`components.workspace.workflowRunRecordsDrawer.status_${V.status.toLowerCase()}`)),1)]),_:2},1032,["color"])):O.key==="action"?(l(),d("div",Vt,[a(re,{onClick:Ke(q=>B(V.rid),["prevent"])},{default:o(()=>[V.status==="FAILED"?(l(),d(F,{key:0},[w(f(s(r)("components.workspace.workflowRunRecordsDrawer.check_record_and_error_task")),1)],64)):(l(),d(F,{key:1},[w(f(s(r)("components.workspace.workflowRunRecordsDrawer.check_record")),1)],64))]),_:2},1032,["onClick"])])):E("",!0)]),_:1},8,["loading","columns","customRow","data-source","pagination","onChange"])]),_:1})]),_:1})]),_:1},8,["spinning"])]),_:1},8,["title","open"])],64)}}};const Nt={key:0,class:"space-container"},Tt=["src"],zt=["src"],jt={key:0},At={key:0},Wt={key:1},Mt={key:2},Bt={key:3},Ht={key:4},qt={key:5},Gt={key:6},Jt={key:0},Qt={__name:"WorkflowSpaceUse",setup(c){const{t:e}=Ue(),n=et(),{language:r,setting:_}=Oe(n),X=nt(),{userDatabases:P}=Oe(X),Y=S(!0),le=S(!1),K=tt(),y=at(),B=ot(),C=y.params.workflowId,D=S(!1),R=S(window.innerWidth<=768?"90vw":"60vw"),I=S(!1),re=["typography-paragraph"],N=S([]),T=S([]),z=S([]);lt(async()=>{const h=te("get",{wid:C}),k=vt("list",{}),x=await h,u=await k;if(u.status==200&&X.setUserDatabases(u.data),x.status!=200){L.error(e("workspace.workflowSpace.get_workflow_failed")),B.push({name:"WorkflowSpaceMain"});return}v.value=x.data,v.value.data.nodes.forEach(j=>{j.category=="vectorDb"&&(j.data.template.database.options=P.value.filter(A=>A.status=="VALID").map(A=>({value:A.vid,label:A.name})))});const m=ue(v.value),p=ae(m);N.value=p.inputFields,T.value=p.outputNodes,z.value=p.triggerNodes,H.value=JSON.parse(JSON.stringify(v.value)),Y.value=!1});const v=S({}),H=S({}),O=S(!1),V=S(null),q=S(null),Ee=async()=>{q.value=null,ne.value=!1;let h=!0;try{v.value.data.nodes.forEach(u=>{u.data.has_inputs&&we(u)&&!["triggers"].includes(u.category)&&Object.keys(u.data.template).forEach(m=>{let p=!0;u.data.template[m].field_type!="checkbox"&&u.data.template[m].show&&u.data.template[m].required&&((u.data.template[m].field_type=="file"&&u.data.template[m].value.length==0||u.data.template[m].field_type=="number"&&typeof u.data.template[m].value!="number"||!u.data.template[m].value&&!u.data.template[m].value===0)&&(p=!1),p||(L.error(e("workspace.workflowSpace.field_is_empty",{field:u.data.template[m].display_name})),h=!1))})})}catch{h=!1}if(!h)return;let k=JSON.parse(JSON.stringify(H.value));k.data.nodes.forEach(u=>{u.data.has_inputs&&we(u)&&!["triggers"].includes(u.category)&&Object.keys(u.data.template).forEach(m=>{u.data.template[m].show&&(u.data.template[m].value=v.value.data.nodes.find(p=>p.id==u.id).data.template[m].value)})}),O.value=!0,k.data.setting=_.value.data;const x=await te("run",k);x.status==200?(L.success(e("workspace.workflowSpace.submit_workflow_success")),q.value=x.data.rid,V.value=setInterval(async()=>{const u=await te("check_status",{rid:q.value});if(u.status==200){L.success(e("workspace.workflowSpace.run_workflow_success")),clearInterval(V.value),O.value=!1,v.value=u.data;const m=ue(v.value),p=ae(m);N.value=p.inputFields,T.value=p.outputNodes,z.value=p.triggerNodes}else u.status==500&&(O.value=!1,L.error(e("workspace.workflowSpace.run_workflow_failed")),clearInterval(V.value))},1e3)):(L.error(e("workspace.workflowSpace.submit_workflow_failed")),O.value=!1)},Ve=async()=>{O.value=!0,(await xe("update",{timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,...v.value})).status==200?L.success(e("workspace.workflowSpace.update_schedule_success")):L.error(e("workspace.workflowSpace.update_schedule_failed")),O.value=!1},me=S(!1),Pe=async()=>{me.value=!0,(await xe("delete",{timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,...v.value})).status==200?L.success(e("workspace.workflowSpace.delete_schedule_success")):L.error(e("workspace.workflowSpace.delete_schedule_failed")),me.value=!1},Ne=async()=>{(await te("delete",{wid:v.value.wid})).status==200?(L.success(e("workspace.workflowSpace.delete_success")),K.deleteUserWorkflow(v.value.wid),K.deleteUserWorkflow(v.value.wid,!0),B.push({name:"WorkflowSpaceMain"})):L.error(e("workspace.workflowSpace.delete_failed"))},Te=()=>{B.push({name:"WorkflowEditor",params:{workflowId:C}})},we=h=>{let k=!1;return Object.keys(h.data.template).forEach(x=>{h.data.template[x].show&&(k=!0)}),k},ne=S(!1),G=S(""),se=S(""),ze=$e(()=>G.value=="FINISHED"?"success":G.value=="FAILED"?"error":"info"),je=h=>{q.value=h.rid,G.value=h.status,v.value.data={...h.data,ui:H.value.data.ui||{}};let[k,x]=(h.data.error_task||".").split(".");k=k.split("_").map((p,j)=>j===0?p.charAt(0).toLowerCase()+p.slice(1):p.charAt(0).toUpperCase()+p.slice(1)).join(""),x=x.split("_").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(""),x=="OpenAi"?x="OpenAI":x=="ChatGlm"&&(x="ChatGLM"),se.value=`${k}.${x}`;const u=ue(v.value),m=ae(u);N.value=m.inputFields,T.value=m.outputNodes,z.value=m.triggerNodes,ne.value=!0},Ae=h=>{window.pywebview.api.open_local_file(h)};return(h,k)=>{const x=i("a-skeleton"),u=i("a-typography-title"),m=i("a-typography-text"),p=i("a-divider"),j=i("a-carousel"),A=i("a-modal"),ve=i("a-typography-link"),We=i("a-tag"),ce=i("a-space"),U=i("a-col"),J=i("a-button"),ke=i("a-popconfirm"),W=i("a-row"),Me=i("a-alert"),Be=i("a-select"),He=i("a-textarea"),qe=i("a-input"),Ge=i("a-input-number"),Je=i("a-checkbox"),Qe=i("a-form-item"),ee=i("a-typography-paragraph"),Ze=i("a-form"),Xe=i("cron-ant"),Ye=i("a-card"),ge=i("a-tooltip"),ye=i("a-spin"),he=rt("highlight");return Y.value?(l(),d("div",Nt,[a(x,{active:""})])):(l(),b(ye,{key:1,spinning:le.value,class:"space-container"},{default:o(()=>[a(W,{justify:"space-between",align:"middle"},{default:o(()=>[a(U,null,{default:o(()=>[a(u,null,{default:o(()=>[w(f(v.value.title),1)]),_:1}),a(ce,null,{default:o(()=>[a(m,{type:"secondary"},{default:o(()=>[w(f(s(e)("workspace.workflowSpace.update_time",{time:new Date(v.value.update_time).toLocaleString()})),1)]),_:1}),a(p,{type:"vertical"}),a(ve,{onClick:k[1]||(k[1]=t=>D.value=!0)},{default:o(()=>[w(f(s(e)("workspace.workflowSpace.brief"))+" ",1),a(A,{open:D.value,title:s(e)("workspace.workflowSpace.brief"),width:R.value,footer:null,class:"introduction-modal",onCancel:k[0]||(k[0]=t=>D.value=!1)},{default:o(()=>[a(j,{autoplay:"",arrows:"","dots-class":"slick-dots slick-thumb"},{customPaging:o(t=>[M("a",null,[M("img",{src:v.value.images[t.i]},null,8,Tt)])]),default:o(()=>[(l(!0),d(F,null,Q(v.value.images,(t,$)=>(l(),d("div",{key:$},[M("img",{src:t},null,8,zt)]))),128))]),_:1}),Z(a(s(De),{source:v.value.brief,class:"custom-scrollbar markdown-body custom-hljs"},null,8,["source"]),[[he]])]),_:1},8,["open","title","width"])]),_:1}),a(p,{type:"vertical"}),(l(!0),d(F,null,Q(v.value.tags,(t,$)=>(l(),b(We,{color:t.color,key:$},{default:o(()=>[w(f(t.title),1)]),_:2},1032,["color"]))),128))]),_:1})]),_:1}),a(U,null,{default:o(()=>[a(ce,null,{default:o(()=>[a(Pt,{workflowId:s(C),onOpenRecord:je},null,8,["workflowId"]),a(J,{type:"primary",onClick:Te},{default:o(()=>[w(f(s(e)("workspace.workflowSpace.edit")),1)]),_:1}),a(ke,{placement:"leftTop",title:s(e)("workspace.workflowSpace.delete_confirm"),onConfirm:Ne},{default:o(()=>[a(J,{type:"primary",danger:""},{default:o(()=>[w(f(s(e)("workspace.workflowSpace.delete")),1)]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})]),_:1}),a(p),a(W,{gutter:[16,16]},{default:o(()=>[ne.value?(l(),b(U,{key:0,span:24},{default:o(()=>[a(Me,{type:ze.value,"show-icon":""},{message:o(()=>[M("span",null,f(s(e)("workspace.workflowSpace.record_status",{status:s(e)(`components.workspace.workflowRunRecordsDrawer.status_${G.value.toLowerCase()}`)})),1),a(p,{type:"vertical"}),G.value=="FAILED"&&se.value!="."?(l(),d("span",jt,f(s(e)("workspace.workflowSpace.record_error_task",{task:s(e)("components.nodes."+se.value+".title")})),1)):E("",!0)]),_:1},8,["type"])]),_:1})):E("",!0),Z(a(U,{xxl:6,xl:8,lg:10,md:24},{default:o(()=>[a(W,{gutter:[16,16]},{default:o(()=>[a(u,{level:3},{default:o(()=>[a(s(st),{class:"text-primary"}),w(" "+f(s(e)("workspace.workflowSpace.inputs")),1)]),_:1}),a(U,{span:24},{default:o(()=>[a(Ze,{layout:"vertical"},{default:o(()=>[(l(!0),d(F,null,Q(N.value,(t,$)=>(l(),d("div",{key:`field-${t}-${$}`},[re.includes(t.field_type)?E("",!0):(l(),b(Qe,{key:0},{label:o(()=>[w(f(t.display_name),1)]),default:o(()=>[t.category=="llms"&&t=="temperature"?(l(),b(mt,{key:0,modelValue:t.value,"onUpdate:modelValue":g=>t.value=g},null,8,["modelValue","onUpdate:modelValue"])):t.field_type=="select"?(l(),b(Be,{key:1,value:t.value,"onUpdate:value":g=>t.value=g,options:t.options},null,8,["value","onUpdate:value","options"])):t.field_type=="textarea"?(l(),b(He,{key:2,value:t.value,"onUpdate:value":g=>t.value=g,autoSize:!0,showCount:!0,placeholder:t.placeholder},null,8,["value","onUpdate:value","placeholder"])):t.field_type=="input"?(l(),b(qe,{key:3,value:t.value,"onUpdate:value":g=>t.value=g,placeholder:t.placeholder},null,8,["value","onUpdate:value","placeholder"])):t.field_type=="number"?(l(),b(Ge,{key:4,value:t.value,"onUpdate:value":g=>t.value=g,placeholder:t.placeholder},null,8,["value","onUpdate:value","placeholder"])):t.field_type=="checkbox"?(l(),b(Je,{key:5,checked:t.value,"onUpdate:checked":g=>t.value=g},null,8,["checked","onUpdate:checked"])):t.field_type=="file"?(l(),b(ft,{key:6,modelValue:t.value,"onUpdate:modelValue":g=>t.value=g},null,8,["modelValue","onUpdate:modelValue"])):t.field_type=="list"?(l(),b(ut,{key:7,modelValue:t.value,"onUpdate:modelValue":g=>t.value=g},null,8,["modelValue","onUpdate:modelValue"])):E("",!0)]),_:2},1024)),t.field_type=="typography-paragraph"?(l(),b(W,{key:1},{default:o(()=>[a(U,{span:24,class:"ui-special-item-container"},{default:o(()=>[a(ee,{class:"ui-special-item",content:t.value,"onUpdate:content":g=>t.value=g},null,8,["content","onUpdate:content"])]),_:2},1024)]),_:2},1024)):E("",!0)]))),128))]),_:1})]),_:1}),a(p),a(U,{span:24},{default:o(()=>[a(W,{gutter:[16,16]},{default:o(()=>[(l(!0),d(F,null,Q(z.value,t=>(l(),b(U,{key:`node-${t.id}`,span:24},{default:o(()=>[t.type=="ButtonTrigger"?(l(),b(J,{key:0,type:"primary",block:"",onClick:Ee,loading:O.value},{default:o(()=>[w(f(t.data.template.button_text.value),1)]),_:2},1032,["loading"])):t.type=="ScheduleTrigger"?(l(),b(Ye,{key:1,title:s(e)("components.nodes.triggers.ScheduleTrigger.schedule_settings")},{extra:o(()=>[a(ce,null,{default:o(()=>[a(J,{type:"primary",onClick:Ve,loading:O.value},{default:o(()=>[w(f(s(e)("components.nodes.triggers.ScheduleTrigger.save_schedule_settings")),1)]),_:1},8,["loading"]),a(ke,{title:s(e)("workspace.workflowSpace.delete_schedule_trigger_confirm"),onConfirm:Pe},{default:o(()=>[a(J,{type:"primary",danger:""},{default:o(()=>[w(f(s(e)("workspace.workflowSpace.delete")),1)]),_:1})]),_:1},8,["title"])]),_:1})]),default:o(()=>[a(Xe,{modelValue:t.data.template.schedule.value,"onUpdate:modelValue":$=>t.data.template.schedule.value=$,"button-props":{type:"primary",shape:"round"},locale:s(r)},null,8,["modelValue","onUpdate:modelValue","locale"])]),_:2},1032,["title"])):E("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},512),[[ie,!I.value]]),a(U,{xxl:I.value?24:18,xl:I.value?24:16,lg:I.value?24:14,md:24},{default:o(()=>[a(u,{level:3,style:{display:"flex","justify-content":"space-between"}},{default:o(()=>[M("span",null,[a(s(ct),{class:"text-primary"}),w(" "+f(s(e)("workspace.workflowSpace.outputs")),1)]),M("span",null,[a(ge,{title:s(e)("workspace.workflowSpace.maximize_output")},{default:o(()=>[Z(a(s(It),{onClick:k[2]||(k[2]=t=>I.value=!I.value)},null,512),[[ie,!I.value]])]),_:1},8,["title"]),a(ge,{title:s(e)("workspace.workflowSpace.normalize_output")},{default:o(()=>[Z(a(s(xt),{onClick:k[3]||(k[3]=t=>I.value=!I.value)},null,512),[[ie,I.value]])]),_:1},8,["title"])])]),_:1}),a(ye,{spinning:O.value},{default:o(()=>[a(W,{gutter:[16,16]},{default:o(()=>[(l(!0),d(F,null,Q(T.value,(t,$)=>(l(),b(U,{span:24,class:"draggable-item",key:`node-${t.id}-${$}`},{default:o(()=>{var g;return[t.type=="Text"?(l(),d("div",At,[a(u,{level:5},{default:o(()=>[w(f(t.data.template.output_title.value),1)]),_:2},1024),t.data.template.render_markdown.value?(l(),d(F,{key:0},[Z(a(s(De),{source:t.data.template.text.value,class:"markdown-body custom-hljs"},null,8,["source"]),[[he]]),a(ee,{copyable:{text:t.data.template.text.value}},null,8,["copyable"])],64)):(l(),b(ee,{key:1,copyable:{text:t.data.template.text.value}},{default:o(()=>[w(f(t.data.template.text.value),1)]),_:2},1032,["copyable"]))])):t.type=="Document"?(l(),d("div",Wt,[a(ve,{onClick:be=>Ae(t.data.template.output.value)},{default:o(()=>[w(f(t.data.template.output.value),1)]),_:2},1032,["onClick"])])):t.type=="Audio"?(l(),d("div",Mt,[a(it,{audios:[(g=t.data.template.audio_url)==null?void 0:g.value]},null,8,["audios"])])):t.type=="Mindmap"?(l(),d("div",Bt,[a(pt,{content:t.data.template.content.value,style:{width:"100%","min-height":"50vh"}},null,8,["content"])])):t.type=="Mermaid"?(l(),d("div",Ht,[a(dt,{content:t.data.template.content.value,style:{width:"100%","min-height":"50vh"}},null,8,["content"])])):t.type=="Echarts"?(l(),d("div",qt,[a(_t,{option:t.data.template.option.value,style:{width:"100%","min-height":"50vh"}},null,8,["option"])])):(l(),d("div",Gt,[t.field_type=="typography-paragraph"?(l(),d("div",Jt,[a(ee,{content:t.value,"onUpdate:content":be=>t.value=be},null,8,["content","onUpdate:content"])])):E("",!0)]))]}),_:2},1024))),128))]),_:1})]),_:1},8,["spinning"])]),_:1},8,["xxl","xl","lg"])]),_:1})]),_:1},8,["spinning"]))}}},la=kt(Qt,[["__scopeId","data-v-939b334d"]]);export{la as default};
