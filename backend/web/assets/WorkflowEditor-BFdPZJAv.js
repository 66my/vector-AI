import{I as Ut,c as h,d as Wp,e as du,w as ke,g as Gn,r as ut,a as we,i as On,p as In,b as Re,u as pu,o as fl,f as T,h as Z,j as b,k as Ve,l as fu,m as Ea,n as _o,t as mu,q as jp,s as j,v as St,x as Fr,y as Ue,z as bn,A as tt,B as y,C as Ce,D as J,E as ce,F as ge,G as Ae,H as lt,J as Lr,K as X,L as Me,M as V,N as zn,O as hu,P as Ne,Q as Fp,R as ml,S as Tn,T as ne,U as vu,V as _u,_ as wn,W as Ye,X as Lp,Y as gu,Z as Pt,$ as Vn,a0 as An,a1 as dt,a2 as Gp,a3 as Bp,a4 as Io,a5 as go,a6 as Hp,a7 as yu,a8 as Yp,a9 as Zp,aa as Jp,ab as Kp,ac as ef}from"./index-BajvqMEd.js";import{D as Gr}from"./Delete-C4Pa9Km8.js";import{_ as tf}from"./QuestionPopover-i9ytYpoA.js";import{_ as Br,R as Vo,A as Xn,g as Hr,n as Yr,L as nf,a as of,b as af,c as lf}from"./TextOutput-BMrp_6m_.js";import{E as so}from"./Edit-BqYfF4kx.js";import{C as rf,a as sf,T as uf}from"./TagOne-D7dNHLDl.js";import{u as hl,a as Jo}from"./userDatabase-CTJ-Dgg0.js";import{r as Ou,d as cf,a as df}from"./database-ZepLbEGe.js";import{s as bu,t as Se,L as wu,a as Su,b as xu,i as $u,c as ki,f as ku,d as Tu,E as vl,C as pf,e as ff,g as mf,h as Nl,I as hf,j as vf,N as _f,k as Ft,l as gf,o as Ti,T as yf}from"./vue-codemirror.esm-CIOjFZwZ.js";import{w as Eu,a as cr,u as Of,b as bf,c as wf}from"./userWorkflows-BxTRsMx7.js";import{T as Sf}from"./Time-CFxW-eja.js";import{_ as Qu}from"./UploaderFieldUse-C9IoVp40.js";import{h as ia}from"./util-AxxuNZrd.js";import{S as xf}from"./Save-CXGriLXO.js";import{u as $f}from"./stringify-DnirLPRY.js";const kf=Ut("bookmark-one",!0,function(e){return h("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[h("path",{d:"M34 10V4H8V38L14 35",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),h("path",{d:"M14 44V10H40V44L27 37.7273L14 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),Ei=Ut("caution",!1,function(e){return h("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[h("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 5L2 43H46L24 5Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),h("path",{d:"M24 35V36",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),h("path",{d:"M24 19.0005L24.0083 29",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null)])}),Tf=Ut("check-one",!0,function(e){return h("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[h("path",{d:"M24 44C29.5228 44 34.5228 41.7614 38.1421 38.1421C41.7614 34.5228 44 29.5228 44 24C44 18.4772 41.7614 13.4772 38.1421 9.85786C34.5228 6.23858 29.5228 4 24 4C18.4772 4 13.4772 6.23858 9.85786 9.85786C6.23858 13.4772 4 18.4772 4 24C4 29.5228 6.23858 34.5228 9.85786 38.1421C13.4772 41.7614 18.4772 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),h("path",{d:"M16 24L22 30L34 18",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Ef=Ut("code",!0,function(e){return h("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[h("path",{d:"M16 13L4 25.4322L16 37",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),h("path",{d:"M32 13L44 25.4322L32 37",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),h("path",{d:"M28 4L21 44",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null)])}),Ml=Ut("direction-adjustment-three",!1,function(e){return h("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[h("path",{d:"M18 10L24 4M24 4L30 10M24 4V24M24 24V44M24 24H44M24 24H4M18 38L24 44M24 44L30 38M38 18L44 24M44 24L38 30M10 18L4 24M4 24L10 30",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Qf=Ut("file-code",!0,function(e){return h("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[h("path",{d:"M10 44H38C39.1046 44 40 43.1046 40 42V14H30V4H10C8.89543 4 8 4.89543 8 6V42C8 43.1046 8.89543 44 10 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),h("path",{d:"M30 4L40 14",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),h("path",{d:"M27 24L32 29L27 34",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),h("path",{d:"M21 24L16 29L21 34",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Pf=Ut("left",!0,function(e){return h("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[h("path",{d:"M31 36L19 24L31 12",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Cf=Ut("preview-close-one",!0,function(e){return h("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[h("path",{d:"M9.85786 18C6.23858 21 4 24 4 24C4 24 12.9543 36 24 36C25.3699 36 26.7076 35.8154 28 35.4921M20.0318 12.5C21.3144 12.1816 22.6414 12 24 12C35.0457 12 44 24 44 24C44 24 41.7614 27 38.1421 30",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),h("path",{d:"M20.3142 20.6211C19.4981 21.5109 19 22.6972 19 23.9998C19 26.7612 21.2386 28.9998 24 28.9998C25.3627 28.9998 26.5981 28.4546 27.5 27.5705",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),h("path",{d:"M42 42L6 6",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Df=Ut("preview-open",!1,function(e){return h("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[h("path",{d:"M24 36C35.0457 36 44 24 44 24C44 24 35.0457 12 24 12C12.9543 12 4 24 4 24C4 24 12.9543 36 24 36Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),h("path",{d:"M24 29C26.7614 29 29 26.7614 29 24C29 21.2386 26.7614 19 24 19C21.2386 19 19 21.2386 19 24C19 26.7614 21.2386 29 24 29Z",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),Pu=Ut("refresh",!0,function(e){return h("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[h("path",{d:"M42 8V24",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),h("path",{d:"M6 24L6 40",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),h("path",{d:"M42 24C42 14.0589 33.9411 6 24 6C18.9145 6 14.3216 8.10896 11.0481 11.5M6 24C6 33.9411 14.0589 42 24 42C28.8556 42 33.2622 40.0774 36.5 36.9519",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),_l=Wp("nodeMessages",{state:()=>({nodeMessages:[],nodeMessagesCount:0}),actions:{push(e){this.nodeMessages.push(e),this.nodeMessagesCount=this.nodeMessages.length},pop(){const e=this.nodeMessages.pop();return this.nodeMessagesCount=this.nodeMessages.length,e}}});function gl(e){return fu()?(Ea(e),!0):!1}function Kt(e){return typeof e=="function"?e():y(e)}const zf=typeof window<"u"&&typeof document<"u",qf=e=>typeof e<"u",Nf=Object.prototype.toString,Mf=e=>Nf.call(e)==="[object Object]",Rf=()=>{};function If(e,t){function n(...o){return new Promise((a,l)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(a).catch(l)})}return n}const Cu=e=>e();function Vf(e=Cu){const t=j(!0);function n(){t.value=!1}function o(){t.value=!0}const a=(...l)=>{t.value&&e(...l)};return{isActive:Fp(t),pause:n,resume:o,eventFilter:a}}function Qi(e,t=!1,n="Timeout"){return new Promise((o,a)=>{setTimeout(t?()=>a(n):o,e)})}function Af(e,t,n={}){const{eventFilter:o=Cu,...a}=n;return ke(e,If(o,t),a)}function Hn(e,t,n={}){const{eventFilter:o,...a}=n,{eventFilter:l,pause:r,resume:i,isActive:s}=Vf(o);return{stop:Af(e,t,{...a,eventFilter:l}),pause:r,resume:i,isActive:s}}function Xf(e,t={}){if(!_o(e))return mu(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=jp(()=>({get(){return e.value[o]},set(a){var l;if((l=Kt(t.replaceRef))!=null?l:!0)if(Array.isArray(e.value)){const i=[...e.value];i[o]=a,e.value=i}else{const i={...e.value,[o]:a};Object.setPrototypeOf(i,Object.getPrototypeOf(e.value)),e.value=i}else e.value[o]=a}}));return n}function dr(e,t=!1){function n(d,{flush:p="sync",deep:f=!1,timeout:g,throwOnTimeout:w}={}){let m=null;const k=[new Promise(Q=>{m=ke(e,$=>{d($)!==t&&(m==null||m(),Q($))},{flush:p,deep:f,immediate:!0})})];return g!=null&&k.push(Qi(g,w).then(()=>Kt(e)).finally(()=>m==null?void 0:m())),Promise.race(k)}function o(d,p){if(!_o(d))return n($=>$===d,p);const{flush:f="sync",deep:g=!1,timeout:w,throwOnTimeout:m}=p??{};let v=null;const Q=[new Promise($=>{v=ke([e,d],([S,E])=>{t!==(S===E)&&(v==null||v(),$(S))},{flush:f,deep:g,immediate:!0})})];return w!=null&&Q.push(Qi(w,m).then(()=>Kt(e)).finally(()=>(v==null||v(),Kt(e)))),Promise.race(Q)}function a(d){return n(p=>!!p,d)}function l(d){return o(null,d)}function r(d){return o(void 0,d)}function i(d){return n(Number.isNaN,d)}function s(d,p){return n(f=>{const g=Array.from(f);return g.includes(d)||g.includes(Kt(d))},p)}function u(d){return c(1,d)}function c(d=1,p){let f=-1;return n(()=>(f+=1,f>=d),p)}return Array.isArray(Kt(e))?{toMatch:n,toContains:s,changed:u,changedTimes:c,get not(){return dr(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:a,toBeNull:l,toBeNaN:i,toBeUndefined:r,changed:u,changedTimes:c,get not(){return dr(e,!t)}}}function Fa(e){return dr(e)}function Uf(e){var t;const n=Kt(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Du=zf?window:void 0;function zu(...e){let t,n,o,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,a]=e,t=Du):[t,n,o,a]=e,!t)return Rf;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const l=[],r=()=>{l.forEach(c=>c()),l.length=0},i=(c,d,p,f)=>(c.addEventListener(d,p,f),()=>c.removeEventListener(d,p,f)),s=ke(()=>[Uf(t),Kt(a)],([c,d])=>{if(r(),!c)return;const p=Mf(d)?{...d}:d;l.push(...n.flatMap(f=>o.map(g=>i(c,f,g,p))))},{immediate:!0,flush:"post"}),u=()=>{s(),r()};return gl(u),u}function Wf(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Pi(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:a=Du,eventName:l="keydown",passive:r=!1,dedupe:i=!1}=o,s=Wf(t);return zu(a,l,c=>{c.repeat&&Kt(i)||s(c)&&n(c)},r)}function jf(e){return JSON.parse(JSON.stringify(e))}function Po(e,t,n,o={}){var a,l,r;const{clone:i=!1,passive:s=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:p}=o,f=Gn(),g=n||(f==null?void 0:f.emit)||((a=f==null?void 0:f.$emit)==null?void 0:a.bind(f))||((r=(l=f==null?void 0:f.proxy)==null?void 0:l.$emit)==null?void 0:r.bind(f==null?void 0:f.proxy));let w=u;t||(t="modelValue"),w=w||`update:${t.toString()}`;const m=Q=>i?typeof i=="function"?i(Q):jf(Q):Q,v=()=>qf(e[t])?m(e[t]):d,k=Q=>{p?p(Q)&&g(w,Q):g(w,Q)};if(s){const Q=v(),$=j(Q);let S=!1;return ke(()=>e[t],E=>{S||(S=!0,$.value=m(E),St(()=>S=!1))}),ke($,E=>{!S&&(E!==e[t]||c)&&k(E)},{deep:c}),$}else return we({get(){return v()},set(Q){k(Q)}})}var Ff={value:()=>{}};function yl(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Qa(n)}function Qa(e){this._=e}function Lf(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",a=n.indexOf(".");if(a>=0&&(o=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Qa.prototype=yl.prototype={constructor:Qa,on:function(e,t){var n=this._,o=Lf(e+"",n),a,l=-1,r=o.length;if(arguments.length<2){for(;++l<r;)if((a=(e=o[l]).type)&&(a=Gf(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<r;)if(a=(e=o[l]).type)n[a]=Ci(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Ci(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Qa(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),o=0,a,l;o<a;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],o=0,a=l.length;o<a;++o)l[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],a=0,l=o.length;a<l;++a)o[a].value.apply(t,n)}};function Gf(e,t){for(var n=0,o=e.length,a;n<o;++n)if((a=e[n]).name===t)return a.value}function Ci(e,t,n){for(var o=0,a=e.length;o<a;++o)if(e[o].name===t){e[o]=Ff,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var pr="http://www.w3.org/1999/xhtml";const Di={svg:"http://www.w3.org/2000/svg",xhtml:pr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ol(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Di.hasOwnProperty(t)?{space:Di[t],local:e}:e}function Bf(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===pr&&t.documentElement.namespaceURI===pr?t.createElement(e):t.createElementNS(n,e)}}function Hf(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function qu(e){var t=Ol(e);return(t.local?Hf:Bf)(t)}function Yf(){}function Zr(e){return e==null?Yf:function(){return this.querySelector(e)}}function Zf(e){typeof e!="function"&&(e=Zr(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var l=t[a],r=l.length,i=o[a]=new Array(r),s,u,c=0;c<r;++c)(s=l[c])&&(u=e.call(s,s.__data__,c,l))&&("__data__"in s&&(u.__data__=s.__data__),i[c]=u);return new yt(o,this._parents)}function Jf(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Kf(){return[]}function Nu(e){return e==null?Kf:function(){return this.querySelectorAll(e)}}function em(e){return function(){return Jf(e.apply(this,arguments))}}function tm(e){typeof e=="function"?e=em(e):e=Nu(e);for(var t=this._groups,n=t.length,o=[],a=[],l=0;l<n;++l)for(var r=t[l],i=r.length,s,u=0;u<i;++u)(s=r[u])&&(o.push(e.call(s,s.__data__,u,r)),a.push(s));return new yt(o,a)}function Mu(e){return function(){return this.matches(e)}}function Ru(e){return function(t){return t.matches(e)}}var nm=Array.prototype.find;function om(e){return function(){return nm.call(this.children,e)}}function am(){return this.firstElementChild}function lm(e){return this.select(e==null?am:om(typeof e=="function"?e:Ru(e)))}var rm=Array.prototype.filter;function im(){return Array.from(this.children)}function sm(e){return function(){return rm.call(this.children,e)}}function um(e){return this.selectAll(e==null?im:sm(typeof e=="function"?e:Ru(e)))}function cm(e){typeof e!="function"&&(e=Mu(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var l=t[a],r=l.length,i=o[a]=[],s,u=0;u<r;++u)(s=l[u])&&e.call(s,s.__data__,u,l)&&i.push(s);return new yt(o,this._parents)}function Iu(e){return new Array(e.length)}function dm(){return new yt(this._enter||this._groups.map(Iu),this._parents)}function La(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}La.prototype={constructor:La,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function pm(e){return function(){return e}}function fm(e,t,n,o,a,l){for(var r=0,i,s=t.length,u=l.length;r<u;++r)(i=t[r])?(i.__data__=l[r],o[r]=i):n[r]=new La(e,l[r]);for(;r<s;++r)(i=t[r])&&(a[r]=i)}function mm(e,t,n,o,a,l,r){var i,s,u=new Map,c=t.length,d=l.length,p=new Array(c),f;for(i=0;i<c;++i)(s=t[i])&&(p[i]=f=r.call(s,s.__data__,i,t)+"",u.has(f)?a[i]=s:u.set(f,s));for(i=0;i<d;++i)f=r.call(e,l[i],i,l)+"",(s=u.get(f))?(o[i]=s,s.__data__=l[i],u.delete(f)):n[i]=new La(e,l[i]);for(i=0;i<c;++i)(s=t[i])&&u.get(p[i])===s&&(a[i]=s)}function hm(e){return e.__data__}function vm(e,t){if(!arguments.length)return Array.from(this,hm);var n=t?mm:fm,o=this._parents,a=this._groups;typeof e!="function"&&(e=pm(e));for(var l=a.length,r=new Array(l),i=new Array(l),s=new Array(l),u=0;u<l;++u){var c=o[u],d=a[u],p=d.length,f=_m(e.call(c,c&&c.__data__,u,o)),g=f.length,w=i[u]=new Array(g),m=r[u]=new Array(g),v=s[u]=new Array(p);n(c,d,w,m,v,f,t);for(var k=0,Q=0,$,S;k<g;++k)if($=w[k]){for(k>=Q&&(Q=k+1);!(S=m[Q])&&++Q<g;);$._next=S||null}}return r=new yt(r,o),r._enter=i,r._exit=s,r}function _m(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gm(){return new yt(this._exit||this._groups.map(Iu),this._parents)}function ym(e,t,n){var o=this.enter(),a=this,l=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?l.remove():n(l),o&&a?o.merge(a).order():a}function Om(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,a=n.length,l=o.length,r=Math.min(a,l),i=new Array(a),s=0;s<r;++s)for(var u=n[s],c=o[s],d=u.length,p=i[s]=new Array(d),f,g=0;g<d;++g)(f=u[g]||c[g])&&(p[g]=f);for(;s<a;++s)i[s]=n[s];return new yt(i,this._parents)}function bm(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],a=o.length-1,l=o[a],r;--a>=0;)(r=o[a])&&(l&&r.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(r,l),l=r);return this}function wm(e){e||(e=Sm);function t(d,p){return d&&p?e(d.__data__,p.__data__):!d-!p}for(var n=this._groups,o=n.length,a=new Array(o),l=0;l<o;++l){for(var r=n[l],i=r.length,s=a[l]=new Array(i),u,c=0;c<i;++c)(u=r[c])&&(s[c]=u);s.sort(t)}return new yt(a,this._parents).order()}function Sm(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function xm(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function $m(){return Array.from(this)}function km(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,l=o.length;a<l;++a){var r=o[a];if(r)return r}return null}function Tm(){let e=0;for(const t of this)++e;return e}function Em(){return!this.node()}function Qm(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var a=t[n],l=0,r=a.length,i;l<r;++l)(i=a[l])&&e.call(i,i.__data__,l,a);return this}function Pm(e){return function(){this.removeAttribute(e)}}function Cm(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Dm(e,t){return function(){this.setAttribute(e,t)}}function zm(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function qm(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Nm(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Mm(e,t){var n=Ol(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Cm:Pm:typeof t=="function"?n.local?Nm:qm:n.local?zm:Dm)(n,t))}function Vu(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Rm(e){return function(){this.style.removeProperty(e)}}function Im(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Vm(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Am(e,t,n){return arguments.length>1?this.each((t==null?Rm:typeof t=="function"?Vm:Im)(e,t,n??"")):uo(this.node(),e)}function uo(e,t){return e.style.getPropertyValue(t)||Vu(e).getComputedStyle(e,null).getPropertyValue(t)}function Xm(e){return function(){delete this[e]}}function Um(e,t){return function(){this[e]=t}}function Wm(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function jm(e,t){return arguments.length>1?this.each((t==null?Xm:typeof t=="function"?Wm:Um)(e,t)):this.node()[e]}function Au(e){return e.trim().split(/^|\s+/)}function Jr(e){return e.classList||new Xu(e)}function Xu(e){this._node=e,this._names=Au(e.getAttribute("class")||"")}Xu.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Uu(e,t){for(var n=Jr(e),o=-1,a=t.length;++o<a;)n.add(t[o])}function Wu(e,t){for(var n=Jr(e),o=-1,a=t.length;++o<a;)n.remove(t[o])}function Fm(e){return function(){Uu(this,e)}}function Lm(e){return function(){Wu(this,e)}}function Gm(e,t){return function(){(t.apply(this,arguments)?Uu:Wu)(this,e)}}function Bm(e,t){var n=Au(e+"");if(arguments.length<2){for(var o=Jr(this.node()),a=-1,l=n.length;++a<l;)if(!o.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?Gm:t?Fm:Lm)(n,t))}function Hm(){this.textContent=""}function Ym(e){return function(){this.textContent=e}}function Zm(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Jm(e){return arguments.length?this.each(e==null?Hm:(typeof e=="function"?Zm:Ym)(e)):this.node().textContent}function Km(){this.innerHTML=""}function eh(e){return function(){this.innerHTML=e}}function th(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function nh(e){return arguments.length?this.each(e==null?Km:(typeof e=="function"?th:eh)(e)):this.node().innerHTML}function oh(){this.nextSibling&&this.parentNode.appendChild(this)}function ah(){return this.each(oh)}function lh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function rh(){return this.each(lh)}function ih(e){var t=typeof e=="function"?e:qu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function sh(){return null}function uh(e,t){var n=typeof e=="function"?e:qu(e),o=t==null?sh:typeof t=="function"?t:Zr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function ch(){var e=this.parentNode;e&&e.removeChild(this)}function dh(){return this.each(ch)}function ph(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fh(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function mh(e){return this.select(e?fh:ph)}function hh(e){return arguments.length?this.property("__data__",e):this.node().__data__}function vh(e){return function(t){e.call(this,t,this.__data__)}}function _h(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function gh(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,a=t.length,l;n<a;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++o]=l;++o?t.length=o:delete this.__on}}}function yh(e,t,n){return function(){var o=this.__on,a,l=vh(t);if(o){for(var r=0,i=o.length;r<i;++r)if((a=o[r]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=t;return}}this.addEventListener(e.type,l,n),a={type:e.type,name:e.name,value:t,listener:l,options:n},o?o.push(a):this.__on=[a]}}function Oh(e,t,n){var o=_h(e+""),a,l=o.length,r;if(arguments.length<2){var i=this.node().__on;if(i){for(var s=0,u=i.length,c;s<u;++s)for(a=0,c=i[s];a<l;++a)if((r=o[a]).type===c.type&&r.name===c.name)return c.value}return}for(i=t?yh:gh,a=0;a<l;++a)this.each(i(o[a],t,n));return this}function ju(e,t,n){var o=Vu(e),a=o.CustomEvent;typeof a=="function"?a=new a(t,n):(a=o.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function bh(e,t){return function(){return ju(this,e,t)}}function wh(e,t){return function(){return ju(this,e,t.apply(this,arguments))}}function Sh(e,t){return this.each((typeof t=="function"?wh:bh)(e,t))}function*xh(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,l=o.length,r;a<l;++a)(r=o[a])&&(yield r)}var Fu=[null];function yt(e,t){this._groups=e,this._parents=t}function Ko(){return new yt([[document.documentElement]],Fu)}function $h(){return this}yt.prototype=Ko.prototype={constructor:yt,select:Zf,selectAll:tm,selectChild:lm,selectChildren:um,filter:cm,data:vm,enter:dm,exit:gm,join:ym,merge:Om,selection:$h,order:bm,sort:wm,call:xm,nodes:$m,node:km,size:Tm,empty:Em,each:Qm,attr:Mm,style:Am,property:jm,classed:Bm,text:Jm,html:nh,raise:ah,lower:rh,append:ih,insert:uh,remove:dh,clone:mh,datum:hh,on:Oh,dispatch:Sh,[Symbol.iterator]:xh};function Tt(e){return typeof e=="string"?new yt([[document.querySelector(e)]],[document.documentElement]):new yt([[e]],Fu)}function kh(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Nt(e,t){if(e=kh(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const Th={passive:!1},Ao={capture:!0,passive:!1};function Rl(e){e.stopImmediatePropagation()}function no(e){e.preventDefault(),e.stopImmediatePropagation()}function Lu(e){var t=e.document.documentElement,n=Tt(e).on("dragstart.drag",no,Ao);"onselectstart"in t?n.on("selectstart.drag",no,Ao):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Gu(e,t){var n=e.document.documentElement,o=Tt(e).on("dragstart.drag",null);t&&(o.on("click.drag",no,Ao),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const sa=e=>()=>e;function fr(e,{sourceEvent:t,subject:n,target:o,identifier:a,active:l,x:r,y:i,dx:s,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:i,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}fr.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Eh(e){return!e.ctrlKey&&!e.button}function Qh(){return this.parentNode}function Ph(e,t){return t??{x:e.x,y:e.y}}function Ch(){return navigator.maxTouchPoints||"ontouchstart"in this}function Dh(){var e=Eh,t=Qh,n=Ph,o=Ch,a={},l=yl("start","drag","end"),r=0,i,s,u,c,d=0;function p($){$.on("mousedown.drag",f).filter(o).on("touchstart.drag",m).on("touchmove.drag",v,Th).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f($,S){if(!(c||!e.call(this,$,S))){var E=Q(this,t.call(this,$,S),$,S,"mouse");E&&(Tt($.view).on("mousemove.drag",g,Ao).on("mouseup.drag",w,Ao),Lu($.view),Rl($),u=!1,i=$.clientX,s=$.clientY,E("start",$))}}function g($){if(no($),!u){var S=$.clientX-i,E=$.clientY-s;u=S*S+E*E>d}a.mouse("drag",$)}function w($){Tt($.view).on("mousemove.drag mouseup.drag",null),Gu($.view,u),no($),a.mouse("end",$)}function m($,S){if(e.call(this,$,S)){var E=$.changedTouches,x=t.call(this,$,S),I=E.length,U,R;for(U=0;U<I;++U)(R=Q(this,x,$,S,E[U].identifier,E[U]))&&(Rl($),R("start",$,E[U]))}}function v($){var S=$.changedTouches,E=S.length,x,I;for(x=0;x<E;++x)(I=a[S[x].identifier])&&(no($),I("drag",$,S[x]))}function k($){var S=$.changedTouches,E=S.length,x,I;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),x=0;x<E;++x)(I=a[S[x].identifier])&&(Rl($),I("end",$,S[x]))}function Q($,S,E,x,I,U){var R=l.copy(),L=Nt(U||E,S),ee,G,_;if((_=n.call($,new fr("beforestart",{sourceEvent:E,target:p,identifier:I,active:r,x:L[0],y:L[1],dx:0,dy:0,dispatch:R}),x))!=null)return ee=_.x-L[0]||0,G=_.y-L[1]||0,function C(O,N,M){var P=L,D;switch(O){case"start":a[I]=C,D=r++;break;case"end":delete a[I],--r;case"drag":L=Nt(M||N,S),D=r;break}R.call(O,$,new fr(O,{sourceEvent:N,subject:_,target:p,identifier:I,active:D,x:L[0]+ee,y:L[1]+G,dx:L[0]-P[0],dy:L[1]-P[1],dispatch:R}),x)}}return p.filter=function($){return arguments.length?(e=typeof $=="function"?$:sa(!!$),p):e},p.container=function($){return arguments.length?(t=typeof $=="function"?$:sa($),p):t},p.subject=function($){return arguments.length?(n=typeof $=="function"?$:sa($),p):n},p.touchable=function($){return arguments.length?(o=typeof $=="function"?$:sa(!!$),p):o},p.on=function(){var $=l.on.apply(l,arguments);return $===l?p:$},p.clickDistance=function($){return arguments.length?(d=($=+$)*$,p):Math.sqrt(d)},p}function Kr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Bu(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function ea(){}var Xo=.7,Ga=1/Xo,oo="\\s*([+-]?\\d+)\\s*",Uo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",It="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zh=/^#([0-9a-f]{3,8})$/,qh=new RegExp(`^rgb\\(${oo},${oo},${oo}\\)$`),Nh=new RegExp(`^rgb\\(${It},${It},${It}\\)$`),Mh=new RegExp(`^rgba\\(${oo},${oo},${oo},${Uo}\\)$`),Rh=new RegExp(`^rgba\\(${It},${It},${It},${Uo}\\)$`),Ih=new RegExp(`^hsl\\(${Uo},${It},${It}\\)$`),Vh=new RegExp(`^hsla\\(${Uo},${It},${It},${Uo}\\)$`),zi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Kr(ea,Wo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:qi,formatHex:qi,formatHex8:Ah,formatHsl:Xh,formatRgb:Ni,toString:Ni});function qi(){return this.rgb().formatHex()}function Ah(){return this.rgb().formatHex8()}function Xh(){return Hu(this).formatHsl()}function Ni(){return this.rgb().formatRgb()}function Wo(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=zh.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Mi(t):n===3?new ft(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ua(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ua(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=qh.exec(e))?new ft(t[1],t[2],t[3],1):(t=Nh.exec(e))?new ft(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Mh.exec(e))?ua(t[1],t[2],t[3],t[4]):(t=Rh.exec(e))?ua(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ih.exec(e))?Vi(t[1],t[2]/100,t[3]/100,1):(t=Vh.exec(e))?Vi(t[1],t[2]/100,t[3]/100,t[4]):zi.hasOwnProperty(e)?Mi(zi[e]):e==="transparent"?new ft(NaN,NaN,NaN,0):null}function Mi(e){return new ft(e>>16&255,e>>8&255,e&255,1)}function ua(e,t,n,o){return o<=0&&(e=t=n=NaN),new ft(e,t,n,o)}function Uh(e){return e instanceof ea||(e=Wo(e)),e?(e=e.rgb(),new ft(e.r,e.g,e.b,e.opacity)):new ft}function mr(e,t,n,o){return arguments.length===1?Uh(e):new ft(e,t,n,o??1)}function ft(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Kr(ft,mr,Bu(ea,{brighter(e){return e=e==null?Ga:Math.pow(Ga,e),new ft(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Xo:Math.pow(Xo,e),new ft(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ft(qn(this.r),qn(this.g),qn(this.b),Ba(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ri,formatHex:Ri,formatHex8:Wh,formatRgb:Ii,toString:Ii}));function Ri(){return`#${Pn(this.r)}${Pn(this.g)}${Pn(this.b)}`}function Wh(){return`#${Pn(this.r)}${Pn(this.g)}${Pn(this.b)}${Pn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ii(){const e=Ba(this.opacity);return`${e===1?"rgb(":"rgba("}${qn(this.r)}, ${qn(this.g)}, ${qn(this.b)}${e===1?")":`, ${e})`}`}function Ba(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Pn(e){return e=qn(e),(e<16?"0":"")+e.toString(16)}function Vi(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Et(e,t,n,o)}function Hu(e){if(e instanceof Et)return new Et(e.h,e.s,e.l,e.opacity);if(e instanceof ea||(e=Wo(e)),!e)return new Et;if(e instanceof Et)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,a=Math.min(t,n,o),l=Math.max(t,n,o),r=NaN,i=l-a,s=(l+a)/2;return i?(t===l?r=(n-o)/i+(n<o)*6:n===l?r=(o-t)/i+2:r=(t-n)/i+4,i/=s<.5?l+a:2-l-a,r*=60):i=s>0&&s<1?0:r,new Et(r,i,s,e.opacity)}function jh(e,t,n,o){return arguments.length===1?Hu(e):new Et(e,t,n,o??1)}function Et(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Kr(Et,jh,Bu(ea,{brighter(e){return e=e==null?Ga:Math.pow(Ga,e),new Et(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xo:Math.pow(Xo,e),new Et(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,a=2*n-o;return new ft(Il(e>=240?e-240:e+120,a,o),Il(e,a,o),Il(e<120?e+240:e-120,a,o),this.opacity)},clamp(){return new Et(Ai(this.h),ca(this.s),ca(this.l),Ba(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ba(this.opacity);return`${e===1?"hsl(":"hsla("}${Ai(this.h)}, ${ca(this.s)*100}%, ${ca(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ai(e){return e=(e||0)%360,e<0?e+360:e}function ca(e){return Math.max(0,Math.min(1,e||0))}function Il(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Yu=e=>()=>e;function Fh(e,t){return function(n){return e+n*t}}function Lh(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Gh(e){return(e=+e)==1?Zu:function(t,n){return n-t?Lh(t,n,e):Yu(isNaN(t)?n:t)}}function Zu(e,t){var n=t-e;return n?Fh(e,n):Yu(isNaN(e)?t:e)}const Xi=function e(t){var n=Gh(t);function o(a,l){var r=n((a=mr(a)).r,(l=mr(l)).r),i=n(a.g,l.g),s=n(a.b,l.b),u=Zu(a.opacity,l.opacity);return function(c){return a.r=r(c),a.g=i(c),a.b=s(c),a.opacity=u(c),a+""}}return o.gamma=e,o}(1);function pn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var hr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vl=new RegExp(hr.source,"g");function Bh(e){return function(){return e}}function Hh(e){return function(t){return e(t)+""}}function Yh(e,t){var n=hr.lastIndex=Vl.lastIndex=0,o,a,l,r=-1,i=[],s=[];for(e=e+"",t=t+"";(o=hr.exec(e))&&(a=Vl.exec(t));)(l=a.index)>n&&(l=t.slice(n,l),i[r]?i[r]+=l:i[++r]=l),(o=o[0])===(a=a[0])?i[r]?i[r]+=a:i[++r]=a:(i[++r]=null,s.push({i:r,x:pn(o,a)})),n=Vl.lastIndex;return n<t.length&&(l=t.slice(n),i[r]?i[r]+=l:i[++r]=l),i.length<2?s[0]?Hh(s[0].x):Bh(t):(t=s.length,function(u){for(var c=0,d;c<t;++c)i[(d=s[c]).i]=d.x(u);return i.join("")})}var Ui=180/Math.PI,vr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ju(e,t,n,o,a,l){var r,i,s;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(i=Math.sqrt(n*n+o*o))&&(n/=i,o/=i,s/=i),e*o<t*n&&(e=-e,t=-t,s=-s,r=-r),{translateX:a,translateY:l,rotate:Math.atan2(t,e)*Ui,skewX:Math.atan(s)*Ui,scaleX:r,scaleY:i}}var da;function Zh(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?vr:Ju(t.a,t.b,t.c,t.d,t.e,t.f)}function Jh(e){return e==null||(da||(da=document.createElementNS("http://www.w3.org/2000/svg","g")),da.setAttribute("transform",e),!(e=da.transform.baseVal.consolidate()))?vr:(e=e.matrix,Ju(e.a,e.b,e.c,e.d,e.e,e.f))}function Ku(e,t,n,o){function a(u){return u.length?u.pop()+" ":""}function l(u,c,d,p,f,g){if(u!==d||c!==p){var w=f.push("translate(",null,t,null,n);g.push({i:w-4,x:pn(u,d)},{i:w-2,x:pn(c,p)})}else(d||p)&&f.push("translate("+d+t+p+n)}function r(u,c,d,p){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),p.push({i:d.push(a(d)+"rotate(",null,o)-2,x:pn(u,c)})):c&&d.push(a(d)+"rotate("+c+o)}function i(u,c,d,p){u!==c?p.push({i:d.push(a(d)+"skewX(",null,o)-2,x:pn(u,c)}):c&&d.push(a(d)+"skewX("+c+o)}function s(u,c,d,p,f,g){if(u!==d||c!==p){var w=f.push(a(f)+"scale(",null,",",null,")");g.push({i:w-4,x:pn(u,d)},{i:w-2,x:pn(c,p)})}else(d!==1||p!==1)&&f.push(a(f)+"scale("+d+","+p+")")}return function(u,c){var d=[],p=[];return u=e(u),c=e(c),l(u.translateX,u.translateY,c.translateX,c.translateY,d,p),r(u.rotate,c.rotate,d,p),i(u.skewX,c.skewX,d,p),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,p),u=c=null,function(f){for(var g=-1,w=p.length,m;++g<w;)d[(m=p[g]).i]=m.x(f);return d.join("")}}}var Kh=Ku(Zh,"px, ","px)","deg)"),ev=Ku(Jh,", ",")",")"),tv=1e-12;function Wi(e){return((e=Math.exp(e))+1/e)/2}function nv(e){return((e=Math.exp(e))-1/e)/2}function ov(e){return((e=Math.exp(2*e))-1)/(e+1)}const av=function e(t,n,o){function a(l,r){var i=l[0],s=l[1],u=l[2],c=r[0],d=r[1],p=r[2],f=c-i,g=d-s,w=f*f+g*g,m,v;if(w<tv)v=Math.log(p/u)/t,m=function(x){return[i+x*f,s+x*g,u*Math.exp(t*x*v)]};else{var k=Math.sqrt(w),Q=(p*p-u*u+o*w)/(2*u*n*k),$=(p*p-u*u-o*w)/(2*p*n*k),S=Math.log(Math.sqrt(Q*Q+1)-Q),E=Math.log(Math.sqrt($*$+1)-$);v=(E-S)/t,m=function(x){var I=x*v,U=Wi(S),R=u/(n*k)*(U*ov(t*I+S)-nv(S));return[i+R*f,s+R*g,u*U/Wi(t*I+S)]}}return m.duration=v*1e3*t/Math.SQRT2,m}return a.rho=function(l){var r=Math.max(.001,+l),i=r*r,s=i*i;return e(r,i,s)},a}(Math.SQRT2,2,4);var co=0,So=0,yo=0,ec=1e3,Ha,xo,Ya=0,Un=0,bl=0,jo=typeof performance=="object"&&performance.now?performance:Date,tc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ei(){return Un||(tc(lv),Un=jo.now()+bl)}function lv(){Un=0}function Za(){this._call=this._time=this._next=null}Za.prototype=nc.prototype={constructor:Za,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ei():+n)+(t==null?0:+t),!this._next&&xo!==this&&(xo?xo._next=this:Ha=this,xo=this),this._call=e,this._time=n,_r()},stop:function(){this._call&&(this._call=null,this._time=1/0,_r())}};function nc(e,t,n){var o=new Za;return o.restart(e,t,n),o}function rv(){ei(),++co;for(var e=Ha,t;e;)(t=Un-e._time)>=0&&e._call.call(void 0,t),e=e._next;--co}function ji(){Un=(Ya=jo.now())+bl,co=So=0;try{rv()}finally{co=0,sv(),Un=0}}function iv(){var e=jo.now(),t=e-Ya;t>ec&&(bl-=t,Ya=e)}function sv(){for(var e,t=Ha,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ha=n);xo=e,_r(o)}function _r(e){if(!co){So&&(So=clearTimeout(So));var t=e-Un;t>24?(e<1/0&&(So=setTimeout(ji,e-jo.now()-bl)),yo&&(yo=clearInterval(yo))):(yo||(Ya=jo.now(),yo=setInterval(iv,ec)),co=1,tc(ji))}}function Fi(e,t,n){var o=new Za;return t=t==null?0:+t,o.restart(a=>{o.stop(),e(a+t)},t,n),o}var uv=yl("start","end","cancel","interrupt"),cv=[],oc=0,Li=1,gr=2,Pa=3,Gi=4,yr=5,Ca=6;function wl(e,t,n,o,a,l){var r=e.__transition;if(!r)e.__transition={};else if(n in r)return;dv(e,n,{name:t,index:o,group:a,on:uv,tween:cv,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:oc})}function ti(e,t){var n=Ct(e,t);if(n.state>oc)throw new Error("too late; already scheduled");return n}function Wt(e,t){var n=Ct(e,t);if(n.state>Pa)throw new Error("too late; already running");return n}function Ct(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function dv(e,t,n){var o=e.__transition,a;o[t]=n,n.timer=nc(l,0,n.time);function l(u){n.state=Li,n.timer.restart(r,n.delay,n.time),n.delay<=u&&r(u-n.delay)}function r(u){var c,d,p,f;if(n.state!==Li)return s();for(c in o)if(f=o[c],f.name===n.name){if(f.state===Pa)return Fi(r);f.state===Gi?(f.state=Ca,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[c]):+c<t&&(f.state=Ca,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[c])}if(Fi(function(){n.state===Pa&&(n.state=Gi,n.timer.restart(i,n.delay,n.time),i(u))}),n.state=gr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===gr){for(n.state=Pa,a=new Array(p=n.tween.length),c=0,d=-1;c<p;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(a[++d]=f);a.length=d+1}}function i(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=yr,1),d=-1,p=a.length;++d<p;)a[d].call(e,c);n.state===yr&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Ca,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Da(e,t){var n=e.__transition,o,a,l=!0,r;if(n){t=t==null?null:t+"";for(r in n){if((o=n[r]).name!==t){l=!1;continue}a=o.state>gr&&o.state<yr,o.state=Ca,o.timer.stop(),o.on.call(a?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[r]}l&&delete e.__transition}}function pv(e){return this.each(function(){Da(this,e)})}function fv(e,t){var n,o;return function(){var a=Wt(this,e),l=a.tween;if(l!==n){o=n=l;for(var r=0,i=o.length;r<i;++r)if(o[r].name===t){o=o.slice(),o.splice(r,1);break}}a.tween=o}}function mv(e,t,n){var o,a;if(typeof n!="function")throw new Error;return function(){var l=Wt(this,e),r=l.tween;if(r!==o){a=(o=r).slice();for(var i={name:t,value:n},s=0,u=a.length;s<u;++s)if(a[s].name===t){a[s]=i;break}s===u&&a.push(i)}l.tween=a}}function hv(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Ct(this.node(),n).tween,a=0,l=o.length,r;a<l;++a)if((r=o[a]).name===e)return r.value;return null}return this.each((t==null?fv:mv)(n,e,t))}function ni(e,t,n){var o=e._id;return e.each(function(){var a=Wt(this,o);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Ct(a,o).value[t]}}function ac(e,t){var n;return(typeof t=="number"?pn:t instanceof Wo?Xi:(n=Wo(t))?(t=n,Xi):Yh)(e,t)}function vv(e){return function(){this.removeAttribute(e)}}function _v(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gv(e,t,n){var o,a=n+"",l;return function(){var r=this.getAttribute(e);return r===a?null:r===o?l:l=t(o=r,n)}}function yv(e,t,n){var o,a=n+"",l;return function(){var r=this.getAttributeNS(e.space,e.local);return r===a?null:r===o?l:l=t(o=r,n)}}function Ov(e,t,n){var o,a,l;return function(){var r,i=n(this),s;return i==null?void this.removeAttribute(e):(r=this.getAttribute(e),s=i+"",r===s?null:r===o&&s===a?l:(a=s,l=t(o=r,i)))}}function bv(e,t,n){var o,a,l;return function(){var r,i=n(this),s;return i==null?void this.removeAttributeNS(e.space,e.local):(r=this.getAttributeNS(e.space,e.local),s=i+"",r===s?null:r===o&&s===a?l:(a=s,l=t(o=r,i)))}}function wv(e,t){var n=Ol(e),o=n==="transform"?ev:ac;return this.attrTween(e,typeof t=="function"?(n.local?bv:Ov)(n,o,ni(this,"attr."+e,t)):t==null?(n.local?_v:vv)(n):(n.local?yv:gv)(n,o,t))}function Sv(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function xv(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function $v(e,t){var n,o;function a(){var l=t.apply(this,arguments);return l!==o&&(n=(o=l)&&xv(e,l)),n}return a._value=t,a}function kv(e,t){var n,o;function a(){var l=t.apply(this,arguments);return l!==o&&(n=(o=l)&&Sv(e,l)),n}return a._value=t,a}function Tv(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Ol(e);return this.tween(n,(o.local?$v:kv)(o,t))}function Ev(e,t){return function(){ti(this,e).delay=+t.apply(this,arguments)}}function Qv(e,t){return t=+t,function(){ti(this,e).delay=t}}function Pv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ev:Qv)(t,e)):Ct(this.node(),t).delay}function Cv(e,t){return function(){Wt(this,e).duration=+t.apply(this,arguments)}}function Dv(e,t){return t=+t,function(){Wt(this,e).duration=t}}function zv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Cv:Dv)(t,e)):Ct(this.node(),t).duration}function qv(e,t){if(typeof t!="function")throw new Error;return function(){Wt(this,e).ease=t}}function Nv(e){var t=this._id;return arguments.length?this.each(qv(t,e)):Ct(this.node(),t).ease}function Mv(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Wt(this,e).ease=n}}function Rv(e){if(typeof e!="function")throw new Error;return this.each(Mv(this._id,e))}function Iv(e){typeof e!="function"&&(e=Mu(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var l=t[a],r=l.length,i=o[a]=[],s,u=0;u<r;++u)(s=l[u])&&e.call(s,s.__data__,u,l)&&i.push(s);return new on(o,this._parents,this._name,this._id)}function Vv(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,a=n.length,l=Math.min(o,a),r=new Array(o),i=0;i<l;++i)for(var s=t[i],u=n[i],c=s.length,d=r[i]=new Array(c),p,f=0;f<c;++f)(p=s[f]||u[f])&&(d[f]=p);for(;i<o;++i)r[i]=t[i];return new on(r,this._parents,this._name,this._id)}function Av(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Xv(e,t,n){var o,a,l=Av(t)?ti:Wt;return function(){var r=l(this,e),i=r.on;i!==o&&(a=(o=i).copy()).on(t,n),r.on=a}}function Uv(e,t){var n=this._id;return arguments.length<2?Ct(this.node(),n).on.on(e):this.each(Xv(n,e,t))}function Wv(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function jv(){return this.on("end.remove",Wv(this._id))}function Fv(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Zr(e));for(var o=this._groups,a=o.length,l=new Array(a),r=0;r<a;++r)for(var i=o[r],s=i.length,u=l[r]=new Array(s),c,d,p=0;p<s;++p)(c=i[p])&&(d=e.call(c,c.__data__,p,i))&&("__data__"in c&&(d.__data__=c.__data__),u[p]=d,wl(u[p],t,n,p,u,Ct(c,n)));return new on(l,this._parents,t,n)}function Lv(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Nu(e));for(var o=this._groups,a=o.length,l=[],r=[],i=0;i<a;++i)for(var s=o[i],u=s.length,c,d=0;d<u;++d)if(c=s[d]){for(var p=e.call(c,c.__data__,d,s),f,g=Ct(c,n),w=0,m=p.length;w<m;++w)(f=p[w])&&wl(f,t,n,w,p,g);l.push(p),r.push(c)}return new on(l,r,t,n)}var Gv=Ko.prototype.constructor;function Bv(){return new Gv(this._groups,this._parents)}function Hv(e,t){var n,o,a;return function(){var l=uo(this,e),r=(this.style.removeProperty(e),uo(this,e));return l===r?null:l===n&&r===o?a:a=t(n=l,o=r)}}function lc(e){return function(){this.style.removeProperty(e)}}function Yv(e,t,n){var o,a=n+"",l;return function(){var r=uo(this,e);return r===a?null:r===o?l:l=t(o=r,n)}}function Zv(e,t,n){var o,a,l;return function(){var r=uo(this,e),i=n(this),s=i+"";return i==null&&(s=i=(this.style.removeProperty(e),uo(this,e))),r===s?null:r===o&&s===a?l:(a=s,l=t(o=r,i))}}function Jv(e,t){var n,o,a,l="style."+t,r="end."+l,i;return function(){var s=Wt(this,e),u=s.on,c=s.value[l]==null?i||(i=lc(t)):void 0;(u!==n||a!==c)&&(o=(n=u).copy()).on(r,a=c),s.on=o}}function Kv(e,t,n){var o=(e+="")=="transform"?Kh:ac;return t==null?this.styleTween(e,Hv(e,o)).on("end.style."+e,lc(e)):typeof t=="function"?this.styleTween(e,Zv(e,o,ni(this,"style."+e,t))).each(Jv(this._id,e)):this.styleTween(e,Yv(e,o,t),n).on("end.style."+e,null)}function e_(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function t_(e,t,n){var o,a;function l(){var r=t.apply(this,arguments);return r!==a&&(o=(a=r)&&e_(e,r,n)),o}return l._value=t,l}function n_(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,t_(e,t,n??""))}function o_(e){return function(){this.textContent=e}}function a_(e){return function(){var t=e(this);this.textContent=t??""}}function l_(e){return this.tween("text",typeof e=="function"?a_(ni(this,"text",e)):o_(e==null?"":e+""))}function r_(e){return function(t){this.textContent=e.call(this,t)}}function i_(e){var t,n;function o(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&r_(a)),t}return o._value=e,o}function s_(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,i_(e))}function u_(){for(var e=this._name,t=this._id,n=rc(),o=this._groups,a=o.length,l=0;l<a;++l)for(var r=o[l],i=r.length,s,u=0;u<i;++u)if(s=r[u]){var c=Ct(s,t);wl(s,e,n,u,r,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new on(o,this._parents,e,n)}function c_(){var e,t,n=this,o=n._id,a=n.size();return new Promise(function(l,r){var i={value:r},s={value:function(){--a===0&&l()}};n.each(function(){var u=Wt(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(i),t._.interrupt.push(i),t._.end.push(s)),u.on=t}),a===0&&l()})}var d_=0;function on(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function rc(){return++d_}var Lt=Ko.prototype;on.prototype={constructor:on,select:Fv,selectAll:Lv,selectChild:Lt.selectChild,selectChildren:Lt.selectChildren,filter:Iv,merge:Vv,selection:Bv,transition:u_,call:Lt.call,nodes:Lt.nodes,node:Lt.node,size:Lt.size,empty:Lt.empty,each:Lt.each,on:Uv,attr:wv,attrTween:Tv,style:Kv,styleTween:n_,text:l_,textTween:s_,remove:jv,tween:hv,delay:Pv,duration:zv,ease:Nv,easeVarying:Rv,end:c_,[Symbol.iterator]:Lt[Symbol.iterator]};function p_(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var f_={time:null,delay:0,duration:250,ease:p_};function m_(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function h_(e){var t,n;e instanceof on?(t=e._id,e=e._name):(t=rc(),(n=f_).time=ei(),e=e==null?null:e+"");for(var o=this._groups,a=o.length,l=0;l<a;++l)for(var r=o[l],i=r.length,s,u=0;u<i;++u)(s=r[u])&&wl(s,e,t,u,r,n||m_(s,t));return new on(o,this._parents,e,t)}Ko.prototype.interrupt=pv;Ko.prototype.transition=h_;const pa=e=>()=>e;function v_(e,{sourceEvent:t,target:n,transform:o,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:a}})}function en(e,t,n){this.k=e,this.x=t,this.y=n}en.prototype={constructor:en,scale:function(e){return e===1?this:new en(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new en(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var po=new en(1,0,0);en.prototype;function Al(e){e.stopImmediatePropagation()}function Oo(e){e.preventDefault(),e.stopImmediatePropagation()}function __(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function g_(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Bi(){return this.__zoom||po}function y_(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function O_(){return navigator.maxTouchPoints||"ontouchstart"in this}function b_(e,t,n){var o=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],l=e.invertY(t[0][1])-n[0][1],r=e.invertY(t[1][1])-n[1][1];return e.translate(a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a),r>l?(l+r)/2:Math.min(0,l)||Math.max(0,r))}function w_(){var e=__,t=g_,n=b_,o=y_,a=O_,l=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],i=250,s=av,u=yl("start","zoom","end"),c,d,p,f=500,g=150,w=0,m=10;function v(_){_.property("__zoom",Bi).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",R).filter(a).on("touchstart.zoom",L).on("touchmove.zoom",ee).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(_,C,O,N){var M=_.selection?_.selection():_;M.property("__zoom",Bi),_!==M?S(_,C,O,N):M.interrupt().each(function(){E(this,arguments).event(N).start().zoom(null,typeof C=="function"?C.apply(this,arguments):C).end()})},v.scaleBy=function(_,C,O,N){v.scaleTo(_,function(){var M=this.__zoom.k,P=typeof C=="function"?C.apply(this,arguments):C;return M*P},O,N)},v.scaleTo=function(_,C,O,N){v.transform(_,function(){var M=t.apply(this,arguments),P=this.__zoom,D=O==null?$(M):typeof O=="function"?O.apply(this,arguments):O,q=P.invert(D),K=typeof C=="function"?C.apply(this,arguments):C;return n(Q(k(P,K),D,q),M,r)},O,N)},v.translateBy=function(_,C,O,N){v.transform(_,function(){return n(this.__zoom.translate(typeof C=="function"?C.apply(this,arguments):C,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),r)},null,N)},v.translateTo=function(_,C,O,N,M){v.transform(_,function(){var P=t.apply(this,arguments),D=this.__zoom,q=N==null?$(P):typeof N=="function"?N.apply(this,arguments):N;return n(po.translate(q[0],q[1]).scale(D.k).translate(typeof C=="function"?-C.apply(this,arguments):-C,typeof O=="function"?-O.apply(this,arguments):-O),P,r)},N,M)};function k(_,C){return C=Math.max(l[0],Math.min(l[1],C)),C===_.k?_:new en(C,_.x,_.y)}function Q(_,C,O){var N=C[0]-O[0]*_.k,M=C[1]-O[1]*_.k;return N===_.x&&M===_.y?_:new en(_.k,N,M)}function $(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function S(_,C,O,N){_.on("start.zoom",function(){E(this,arguments).event(N).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(N).end()}).tween("zoom",function(){var M=this,P=arguments,D=E(M,P).event(N),q=t.apply(M,P),K=O==null?$(q):typeof O=="function"?O.apply(M,P):O,te=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),B=M.__zoom,ae=typeof C=="function"?C.apply(M,P):C,Y=s(B.invert(K).concat(te/B.k),ae.invert(K).concat(te/ae.k));return function(pe){if(pe===1)pe=ae;else{var re=Y(pe),se=te/re[2];pe=new en(se,K[0]-re[0]*se,K[1]-re[1]*se)}D.zoom(null,pe)}})}function E(_,C,O){return!O&&_.__zooming||new x(_,C)}function x(_,C){this.that=_,this.args=C,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,C),this.taps=0}x.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,C){return this.mouse&&_!=="mouse"&&(this.mouse[1]=C.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=C.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=C.invert(this.touch1[0])),this.that.__zoom=C,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var C=Tt(this.that).datum();u.call(_,this.that,new v_(_,{sourceEvent:this.sourceEvent,target:v,type:_,transform:this.that.__zoom,dispatch:u}),C)}};function I(_,...C){if(!e.apply(this,arguments))return;var O=E(this,C).event(_),N=this.__zoom,M=Math.max(l[0],Math.min(l[1],N.k*Math.pow(2,o.apply(this,arguments)))),P=Nt(_);if(O.wheel)(O.mouse[0][0]!==P[0]||O.mouse[0][1]!==P[1])&&(O.mouse[1]=N.invert(O.mouse[0]=P)),clearTimeout(O.wheel);else{if(N.k===M)return;O.mouse=[P,N.invert(P)],Da(this),O.start()}Oo(_),O.wheel=setTimeout(D,g),O.zoom("mouse",n(Q(k(N,M),O.mouse[0],O.mouse[1]),O.extent,r));function D(){O.wheel=null,O.end()}}function U(_,...C){if(p||!e.apply(this,arguments))return;var O=_.currentTarget,N=E(this,C,!0).event(_),M=Tt(_.view).on("mousemove.zoom",K,!0).on("mouseup.zoom",te,!0),P=Nt(_,O),D=_.clientX,q=_.clientY;Lu(_.view),Al(_),N.mouse=[P,this.__zoom.invert(P)],Da(this),N.start();function K(B){if(Oo(B),!N.moved){var ae=B.clientX-D,Y=B.clientY-q;N.moved=ae*ae+Y*Y>w}N.event(B).zoom("mouse",n(Q(N.that.__zoom,N.mouse[0]=Nt(B,O),N.mouse[1]),N.extent,r))}function te(B){M.on("mousemove.zoom mouseup.zoom",null),Gu(B.view,N.moved),Oo(B),N.event(B).end()}}function R(_,...C){if(e.apply(this,arguments)){var O=this.__zoom,N=Nt(_.changedTouches?_.changedTouches[0]:_,this),M=O.invert(N),P=O.k*(_.shiftKey?.5:2),D=n(Q(k(O,P),N,M),t.apply(this,C),r);Oo(_),i>0?Tt(this).transition().duration(i).call(S,D,N,_):Tt(this).call(v.transform,D,N,_)}}function L(_,...C){if(e.apply(this,arguments)){var O=_.touches,N=O.length,M=E(this,C,_.changedTouches.length===N).event(_),P,D,q,K;for(Al(_),D=0;D<N;++D)q=O[D],K=Nt(q,this),K=[K,this.__zoom.invert(K),q.identifier],M.touch0?!M.touch1&&M.touch0[2]!==K[2]&&(M.touch1=K,M.taps=0):(M.touch0=K,P=!0,M.taps=1+!!c);c&&(c=clearTimeout(c)),P&&(M.taps<2&&(d=K[0],c=setTimeout(function(){c=null},f)),Da(this),M.start())}}function ee(_,...C){if(this.__zooming){var O=E(this,C).event(_),N=_.changedTouches,M=N.length,P,D,q,K;for(Oo(_),P=0;P<M;++P)D=N[P],q=Nt(D,this),O.touch0&&O.touch0[2]===D.identifier?O.touch0[0]=q:O.touch1&&O.touch1[2]===D.identifier&&(O.touch1[0]=q);if(D=O.that.__zoom,O.touch1){var te=O.touch0[0],B=O.touch0[1],ae=O.touch1[0],Y=O.touch1[1],pe=(pe=ae[0]-te[0])*pe+(pe=ae[1]-te[1])*pe,re=(re=Y[0]-B[0])*re+(re=Y[1]-B[1])*re;D=k(D,Math.sqrt(pe/re)),q=[(te[0]+ae[0])/2,(te[1]+ae[1])/2],K=[(B[0]+Y[0])/2,(B[1]+Y[1])/2]}else if(O.touch0)q=O.touch0[0],K=O.touch0[1];else return;O.zoom("touch",n(Q(D,q,K),O.extent,r))}}function G(_,...C){if(this.__zooming){var O=E(this,C).event(_),N=_.changedTouches,M=N.length,P,D;for(Al(_),p&&clearTimeout(p),p=setTimeout(function(){p=null},f),P=0;P<M;++P)D=N[P],O.touch0&&O.touch0[2]===D.identifier?delete O.touch0:O.touch1&&O.touch1[2]===D.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(D=Nt(D,this),Math.hypot(d[0]-D[0],d[1]-D[1])<m)){var q=Tt(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return v.wheelDelta=function(_){return arguments.length?(o=typeof _=="function"?_:pa(+_),v):o},v.filter=function(_){return arguments.length?(e=typeof _=="function"?_:pa(!!_),v):e},v.touchable=function(_){return arguments.length?(a=typeof _=="function"?_:pa(!!_),v):a},v.extent=function(_){return arguments.length?(t=typeof _=="function"?_:pa([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),v):t},v.scaleExtent=function(_){return arguments.length?(l[0]=+_[0],l[1]=+_[1],v):[l[0],l[1]]},v.translateExtent=function(_){return arguments.length?(r[0][0]=+_[0][0],r[1][0]=+_[1][0],r[0][1]=+_[0][1],r[1][1]=+_[1][1],v):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},v.constrain=function(_){return arguments.length?(n=_,v):n},v.duration=function(_){return arguments.length?(i=+_,v):i},v.interpolate=function(_){return arguments.length?(s=_,v):s},v.on=function(){var _=u.on.apply(u,arguments);return _===u?v:_},v.clickDistance=function(_){return arguments.length?(w=(_=+_)*_,v):Math.sqrt(w)},v.tapDistance=function(_){return arguments.length?(m=+_,v):m},v}var ve=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(ve||{}),oi=(e=>(e.Partial="partial",e.Full="full",e))(oi||{}),En=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(En||{}),Wn=(e=>(e.Strict="strict",e.Loose="loose",e))(Wn||{}),Or=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Or||{}),Co=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Co||{}),ic=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(ic||{});function ai(){return typeof window<"u"?window:{chrome:!1,addEventListener(...e){}}}function br(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,a=typeof(o==null?void 0:o.hasAttribute)=="function"?o.hasAttribute("contenteditable"):!1,l=typeof(o==null?void 0:o.closest)=="function"?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(o==null?void 0:o.nodeName)||a||!!l}function S_(e){return e.ctrlKey||e.metaKey||e.shiftKey}function Hi(e,t,n,o){const a=t.split("+").map(l=>l.trim().toLowerCase());return a.length===1?e.toLowerCase()===t.toLowerCase():(o?n.delete(e.toLowerCase()):n.add(e.toLowerCase()),a.every((l,r)=>n.has(l)&&Array.from(n.values())[r]===a[r]))}function x_(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=$_(n.code,e);return Array.isArray(e)?e.some(a=>Hi(n[o],a,t,n.type==="keyup")):Hi(n[o],e,t,n.type==="keyup")}}function $_(e,t){return typeof t=="string"?e===t?"code":"key":t.includes(e)?"code":"key"}function Do(e,t,n={actInsideInputWithModifier:!0}){const o=ai(),a=j(Me(e)===!0);let l=!1;const r=new Set;let i=u(Me(e));return ke(a,(c,d)=>{c!==d&&(t==null||t(c))}),ke(()=>Me(e),(c,d)=>{typeof d=="boolean"&&typeof c!="boolean"&&s(),i=u(c)},{immediate:!0}),zu(o,"blur",()=>{Me(e)!==!0&&(a.value=!1)}),Pi((...c)=>i(...c),c=>{l=S_(c),!((!l||l&&!n.actInsideInputWithModifier)&&br(c))&&(c.preventDefault(),a.value=!0)},{eventName:"keydown"}),Pi((...c)=>i(...c),c=>{if(a.value){if((!l||l&&!n.actInsideInputWithModifier)&&br(c))return;s()}},{eventName:"keyup"}),a;function s(){l=!1,r.clear(),a.value=!1}function u(c){return c===null?(s(),()=>!1):typeof c=="boolean"?(s(),a.value=c,()=>!1):Array.isArray(c)||typeof c=="string"?x_(c,r):c}}const sc="vue-flow__node-desc",uc="vue-flow__edge-desc",k_="vue-flow__aria-live",cc=["Enter"," ","Escape"],ao={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function dc(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:a,nodes:l,nodeExtent:r,nodeDragThreshold:i,viewport:s,autoPanOnNodeDrag:u,nodesDraggable:c,panBy:d,findNode:p,multiSelectionActive:f,nodesSelectionActive:g,selectNodesOnDrag:w,removeSelectedElements:m,addSelectedNodes:v,updateNodePositions:k,emits:Q}=Xe(),{onStart:$,onDrag:S,onStop:E,el:x,disabled:I,id:U,selectable:R,dragHandle:L}=e,ee=j(!1);let G=[],_,C=null,O={x:void 0,y:void 0},N={x:0,y:0},M=null,P=!1,D=0,q=!1;const K=fc(),te=({x:se,y:H})=>{O={x:se,y:H};let me=!1;if(G=G.map(_e=>{const De={x:se-_e.distance.x,y:H-_e.distance.y};n.value&&(De.x=o.value[0]*Math.round(De.x/o.value[0]),De.y=o.value[1]*Math.round(De.y/o.value[1]));const{computedPosition:z}=ii(_e,De,Q.error,r.value,_e.parentNode?p(_e.parentNode):void 0);return me=me||_e.position.x!==z.x||_e.position.y!==z.y,_e.position=z,_e}),!!me&&(k(G,!0,!0),ee.value=!0,M)){const[_e,De]=Fl({id:U,dragItems:G,findNode:p});S({event:M,node:_e,nodes:De})}},B=()=>{if(!C)return;const[se,H]=$c(N,C);if(se!==0||H!==0){const me={x:(O.x??0)-se/s.value.zoom,y:(O.y??0)-H/s.value.zoom};d({x:se,y:H})&&te(me)}D=requestAnimationFrame(B)},ae=(se,H)=>{P=!0;const me=p(U);!w.value&&!f.value&&me&&(me.selected||m()),me&&Me(R)&&w.value&&$r(me,f.value,v,m,g,!1,H);const _e=K(se);if(O=_e,G=F_(l.value,c.value,_e,p,U),G.length){const[De,z]=Fl({id:U,dragItems:G,findNode:p});$({event:se.sourceEvent,node:De,nodes:z})}},Y=(se,H)=>{var me;i.value===0&&ae(se,H),O=K(se),C=((me=t.value)==null?void 0:me.getBoundingClientRect())||null,N=Mn(se.sourceEvent,C)},pe=(se,H)=>{const me=K(se);if(!q&&P&&u.value&&(q=!0,B()),!P){const _e=me.xSnapped-(O.x??0),De=me.ySnapped-(O.y??0);Math.sqrt(_e*_e+De*De)>i.value&&ae(se,H)}(O.x!==me.xSnapped||O.y!==me.ySnapped)&&G.length&&P&&(M=se.sourceEvent,N=Mn(se.sourceEvent,C),te(me))},re=se=>{if(P&&(ee.value=!1,q=!1,P=!1,cancelAnimationFrame(D),G.length)){k(G,!1,!1);const[H,me]=Fl({id:U,dragItems:G,findNode:p});E({event:se.sourceEvent,node:H,nodes:me})}};return ke([()=>Me(I),x],([se,H],me,_e)=>{if(H){const De=Tt(H);se||(_=Dh().on("start",z=>Y(z,H)).on("drag",z=>pe(z,H)).on("end",z=>re(z)).filter(z=>{const A=z.target,W=Me(L);return!z.button&&(!a.value||!ls(A,`.${a.value}`,H)&&(!W||ls(A,W,H)))}),De.call(_)),_e(()=>{De.on(".drag",null),_&&(_.on("start",null),_.on("drag",null),_.on("end",null))})}}),ee}const Yi=Symbol("vueFlow"),li=Symbol("nodeId"),pc=Symbol("nodeRef"),T_=Symbol("edgeId"),E_=Symbol("edgeRef"),Sl=Symbol("slots");function Q_(){return{doubleClick:ue(),click:ue(),mouseEnter:ue(),mouseMove:ue(),mouseLeave:ue(),contextMenu:ue(),updateStart:ue(),update:ue(),updateEnd:ue()}}function P_(e,t){const n=Q_();return n.doubleClick.on(o=>{var a,l;t.edgeDoubleClick(o),(l=(a=e.events)==null?void 0:a.doubleClick)==null||l.call(a,o)}),n.click.on(o=>{var a,l;t.edgeClick(o),(l=(a=e.events)==null?void 0:a.click)==null||l.call(a,o)}),n.mouseEnter.on(o=>{var a,l;t.edgeMouseEnter(o),(l=(a=e.events)==null?void 0:a.mouseEnter)==null||l.call(a,o)}),n.mouseMove.on(o=>{var a,l;t.edgeMouseMove(o),(l=(a=e.events)==null?void 0:a.mouseMove)==null||l.call(a,o)}),n.mouseLeave.on(o=>{var a,l;t.edgeMouseLeave(o),(l=(a=e.events)==null?void 0:a.mouseLeave)==null||l.call(a,o)}),n.contextMenu.on(o=>{var a,l;t.edgeContextMenu(o),(l=(a=e.events)==null?void 0:a.contextMenu)==null||l.call(a,o)}),n.updateStart.on(o=>{var a,l;t.edgeUpdateStart(o),(l=(a=e.events)==null?void 0:a.updateStart)==null||l.call(a,o)}),n.update.on(o=>{var a,l;t.edgeUpdate(o),(l=(a=e.events)==null?void 0:a.update)==null||l.call(a,o)}),n.updateEnd.on(o=>{var a,l;t.edgeUpdateEnd(o),(l=(a=e.events)==null?void 0:a.updateEnd)==null||l.call(a,o)}),Object.entries(n).reduce((o,[a,l])=>(o.emit[a]=l.trigger,o.on[a]=l.on,o),{emit:{},on:{}})}function fc(){const{viewport:e,snapGrid:t,snapToGrid:n}=Xe();return({sourceEvent:o})=>{const a=o.touches?o.touches[0].clientX:o.clientX,l=o.touches?o.touches[0].clientY:o.clientY,r={x:(a-e.value.x)/e.value.zoom,y:(l-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(r.x/t.value[0]):r.x,ySnapped:n.value?t.value[1]*Math.round(r.y/t.value[1]):r.y,...r}}}function fa(){return!0}function mc({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:a,onEdgeUpdate:l,onEdgeUpdateEnd:r}){const{vueFlowRef:i,connectionMode:s,connectionRadius:u,connectOnClick:c,connectionClickStartHandle:d,nodesConnectable:p,autoPanOnConnect:f,findNode:g,panBy:w,startConnection:m,updateConnection:v,endConnection:k,emits:Q,viewport:$,edges:S,nodes:E,isValidConnection:x}=Xe();let I=null,U=!1,R=null;function L(G){var _;const C=Me(n)==="target",O=si(G),N=Ji(G.target);if(O&&G.button===0||!O){let M=function(z){H=Mn(z,re);const{handle:A,validHandleResult:W}=J_(z,N,Sr(H,$.value,!1,[1,1]),u.value,_e,F=>us(z,F,s.value,Me(t),Me(e),C?"target":"source",q,N,S.value,E.value,g));if(K=A,me||(De(),me=!0),I=W.connection,U=W.isValid,R=W.handleDomNode,v(K&&U?Oc({x:K.x,y:K.y},$.value):H,W.endHandle,eg(!!K,U)),!K&&!U&&!R)return Ll(se);I&&I.source!==I.target&&R&&(Ll(se),se=R,R.classList.add("connecting","vue-flow__handle-connecting"),R.classList.toggle("valid",U),R.classList.toggle("vue-flow__handle-valid",U))},P=function(z){(K||R)&&I&&U&&(l?l(z,I):Q.connect(I)),Q.connectEnd(z),a&&(r==null||r(z)),Ll(se),cancelAnimationFrame(te),k(z),me=!1,U=!1,I=null,R=null,N.removeEventListener("mousemove",M),N.removeEventListener("mouseup",P),N.removeEventListener("touchmove",M),N.removeEventListener("touchend",P)};const D=g(Me(t));let q=Me(o)||x.value||fa;!q&&D&&(q=(C?D.isValidSourcePos:D.isValidTargetPos)||fa);let K,te=0;const{x:B,y:ae}=Mn(G),Y=N==null?void 0:N.elementFromPoint(B,ae),pe=ui(Me(a),Y),re=(_=i.value)==null?void 0:_.getBoundingClientRect();if(!re||!pe)return;let se,H=Mn(G,re),me=!1;const _e=K_({nodes:E.value,nodeId:Me(t),handleId:Me(e),handleType:pe}),De=()=>{if(!f)return;const[z,A]=$c(H,re);w({x:z,y:A}),te=requestAnimationFrame(De)};m({nodeId:Me(t),handleId:Me(e),type:pe},{x:B-re.left,y:ae-re.top},G),Q.connectStart({event:G,nodeId:Me(t),handleId:Me(e),handleType:pe}),N.addEventListener("mousemove",M),N.addEventListener("mouseup",P),N.addEventListener("touchmove",M),N.addEventListener("touchend",P)}}function ee(G){if(!c.value)return;const _=Me(n)==="target";if(!d.value)Q.clickConnectStart({event:G,nodeId:Me(t),handleId:Me(e)}),m({nodeId:Me(t),type:Me(n),handleId:Me(e)},void 0,G,!0);else{let C=Me(o)||x.value||fa;const O=g(Me(t));if(!C&&O&&(C=(_?O.isValidSourcePos:O.isValidTargetPos)||fa),O&&(typeof O.connectable>"u"?p.value:O.connectable)===!1)return;const N=Ji(G.target),{connection:M,isValid:P}=us(G,{nodeId:Me(t),id:Me(e),type:Me(n)},s.value,d.value.nodeId,d.value.handleId||null,d.value.type,C,N,S.value,E.value,g),D=M.source===M.target;P&&!D&&Q.connect(M),Q.clickConnectEnd(G),k(G,!0)}}return{handlePointerDown:L,handleClick:ee}}function C_(){return On(li,"")}function D_(e){const t=C_()??"",n=On(pc,j(null)),{findNode:o,edges:a,emits:l}=Xe(),r=o(t);return r||l.error(new it(at.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:r,parentNode:we(()=>o(r.parentNode)),connectedEdges:we(()=>hn([r],a.value))}}function z_(){return{doubleClick:ue(),click:ue(),mouseEnter:ue(),mouseMove:ue(),mouseLeave:ue(),contextMenu:ue(),dragStart:ue(),drag:ue(),dragStop:ue()}}function q_(e,t){const n=z_();return n.doubleClick.on(o=>{var a,l;t.nodeDoubleClick(o),(l=(a=e.events)==null?void 0:a.doubleClick)==null||l.call(a,o)}),n.click.on(o=>{var a,l;t.nodeClick(o),(l=(a=e.events)==null?void 0:a.click)==null||l.call(a,o)}),n.mouseEnter.on(o=>{var a,l;t.nodeMouseEnter(o),(l=(a=e.events)==null?void 0:a.mouseEnter)==null||l.call(a,o)}),n.mouseMove.on(o=>{var a,l;t.nodeMouseMove(o),(l=(a=e.events)==null?void 0:a.mouseMove)==null||l.call(a,o)}),n.mouseLeave.on(o=>{var a,l;t.nodeMouseLeave(o),(l=(a=e.events)==null?void 0:a.mouseLeave)==null||l.call(a,o)}),n.contextMenu.on(o=>{var a,l;t.nodeContextMenu(o),(l=(a=e.events)==null?void 0:a.contextMenu)==null||l.call(a,o)}),n.dragStart.on(o=>{var a,l;t.nodeDragStart(o),(l=(a=e.events)==null?void 0:a.dragStart)==null||l.call(a,o)}),n.drag.on(o=>{var a,l;t.nodeDrag(o),(l=(a=e.events)==null?void 0:a.drag)==null||l.call(a,o)}),n.dragStop.on(o=>{var a,l;t.nodeDragStop(o),(l=(a=e.events)==null?void 0:a.dragStop)==null||l.call(a,o)}),Object.entries(n).reduce((o,[a,l])=>(o.emit[a]=l.trigger,o.on[a]=l.on,o),{emit:{},on:{}})}function hc(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:a,snapToGrid:l,nodesDraggable:r,emits:i}=Xe();return(s,u=!1)=>{const c=l.value?a.value[0]:5,d=l.value?a.value[1]:5,p=u?4:1,f=s.x*c*p,g=s.y*d*p,w=e.value.filter(m=>m.draggable||r&&typeof m.draggable>"u").map(m=>{const v={x:m.computedPosition.x+f,y:m.computedPosition.y+g},{computedPosition:k}=ii(m,v,i.error,t.value,m.parentNode?o(m.parentNode):void 0);return{id:m.id,position:k,from:m.position,distance:{x:s.x,y:s.y},dimensions:m.dimensions}});n(w,!0,!1)}}const Xl=.1;function cn(){return $l("Viewport not initialized yet."),Promise.resolve(!1)}const N_={zoomIn:cn,zoomOut:cn,zoomTo:cn,fitView:cn,setCenter:cn,fitBounds:cn,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:cn,setTransform:cn,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function M_(e){function t(o,a){return new Promise(l=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleBy(Ul(e.d3Selection,a,()=>{l(!0)}),o):l(!1)})}function n(o,a,l,r){return new Promise(i=>{const{x:s,y:u}=vc({x:-o,y:-a},e.translateExtent),c=po.translate(-s,-u).scale(l);e.d3Selection&&e.d3Zoom?e.d3Zoom.transform(Ul(e.d3Selection,r,()=>{i(!0)}),c):i(!1)})}return we(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:a=>t(1.2,a==null?void 0:a.duration),zoomOut:a=>t(1/1.2,a==null?void 0:a.duration),zoomTo:(a,l)=>new Promise(r=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleTo(Ul(e.d3Selection,l==null?void 0:l.duration,()=>{r(!0)}),a):r(!1)}),setViewport:(a,l)=>n(a.x,a.y,a.zoom,l==null?void 0:l.duration),setTransform:(a,l)=>n(a.x,a.y,a.zoom,l==null?void 0:l.duration),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(a={padding:Xl,includeHiddenNodes:!1,duration:0})=>{const l=e.nodes.filter(c=>{var d;const p=c.dimensions.width&&c.dimensions.height&&((a==null?void 0:a.includeHiddenNodes)||!c.hidden);return(d=a.nodes)!=null&&d.length?p&&a.nodes.includes(c.id):p});if(!l.length)return Promise.resolve(!1);const r=ri(l),{x:i,y:s,zoom:u}=Ki(r,e.dimensions.width,e.dimensions.height,a.minZoom??e.minZoom,a.maxZoom??e.maxZoom,a.padding??Xl,a.offset);return n(i,s,u,a==null?void 0:a.duration)},setCenter:(a,l,r)=>{const i=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:e.maxZoom,s=e.dimensions.width/2-a*i,u=e.dimensions.height/2-l*i;return n(s,u,i,r==null?void 0:r.duration)},fitBounds:(a,l={padding:Xl})=>{const{x:r,y:i,zoom:s}=Ki(a,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,l.padding);return n(r,i,s,l==null?void 0:l.duration)},project:a=>Sr(a,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:a=>{if(e.vueFlowRef){const{x:l,y:r}=e.vueFlowRef.getBoundingClientRect(),i={x:a.x-l,y:a.y-r};return Sr(i,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:a=>{if(e.vueFlowRef){const{x:l,y:r}=e.vueFlowRef.getBoundingClientRect(),i={x:a.x+l,y:a.y+r};return Oc(i,e.viewport)}return{x:0,y:0}}}:N_)}function Ul(e,t=0,n){return e.transition().duration(t).on("end",n)}function R_(e,t,n){const o=du(!0);return o.run(()=>{const a=()=>{o.run(()=>{let w,m,v=!!(n.nodes.value.length||n.edges.value.length);w=Hn([e.modelValue,()=>{var k,Q;return(Q=(k=e.modelValue)==null?void 0:k.value)==null?void 0:Q.length}],([k])=>{k&&Array.isArray(k)&&(m==null||m.pause(),n.setElements(k),!m&&!v&&k.length?v=!0:m==null||m.resume())}),m=Hn([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([k,Q])=>{var $;($=e.modelValue)!=null&&$.value&&Array.isArray(e.modelValue.value)&&(w==null||w.pause(),e.modelValue.value=[...k,...Q],St(()=>{w==null||w.resume()}))},{immediate:v}),Ea(()=>{w==null||w.stop(),m==null||m.stop()})})},l=()=>{o.run(()=>{let w,m,v=!!n.nodes.value.length;w=Hn([e.nodes,()=>{var k,Q;return(Q=(k=e.nodes)==null?void 0:k.value)==null?void 0:Q.length}],([k])=>{k&&Array.isArray(k)&&(m==null||m.pause(),n.setNodes(k),!m&&!v&&k.length?v=!0:m==null||m.resume())}),m=Hn([n.nodes,()=>n.nodes.value.length],([k])=>{var Q;(Q=e.nodes)!=null&&Q.value&&Array.isArray(e.nodes.value)&&(w==null||w.pause(),e.nodes.value=[...k],St(()=>{w==null||w.resume()}))},{immediate:v}),Ea(()=>{w==null||w.stop(),m==null||m.stop()})})},r=()=>{o.run(()=>{let w,m,v=!!n.edges.value.length;w=Hn([e.edges,()=>{var k,Q;return(Q=(k=e.edges)==null?void 0:k.value)==null?void 0:Q.length}],([k])=>{k&&Array.isArray(k)&&(m==null||m.pause(),n.setEdges(k),!m&&!v&&k.length?v=!0:m==null||m.resume())}),m=Hn([n.edges,()=>n.edges.value.length],([k])=>{var Q;(Q=e.edges)!=null&&Q.value&&Array.isArray(e.edges.value)&&(w==null||w.pause(),e.edges.value=[...k],St(()=>{w==null||w.resume()}))},{immediate:v}),Ea(()=>{w==null||w.stop(),m==null||m.stop()})})},i=()=>{o.run(()=>{ke(()=>t.maxZoom,()=>{t.maxZoom&&Ke(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},s=()=>{o.run(()=>{ke(()=>t.minZoom,()=>{t.minZoom&&Ke(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{ke(()=>t.translateExtent,()=>{t.translateExtent&&Ke(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{ke(()=>t.nodeExtent,()=>{t.nodeExtent&&Ke(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{o.run(()=>{ke(()=>t.applyDefault,()=>{Ke(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},p=()=>{o.run(()=>{const w=async m=>{let v=m;typeof t.autoConnect=="function"&&(v=await t.autoConnect(m)),v!==!1&&n.addEdges([v])};ke(()=>t.autoConnect,()=>{Ke(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),ke(n.autoConnect,(m,v,k)=>{m?n.onConnect(w):n.hooks.value.connect.off(w),k(()=>{n.hooks.value.connect.off(w)})},{immediate:!0})})},f=()=>{const w=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const m of Object.keys(t)){const v=m;if(!w.includes(v)){const k=Ue(()=>t[v]),Q=n[v];_o(Q)&&o.run(()=>{ke(k,$=>{Ke($)&&(Q.value=$)},{immediate:!0,flush:"pre"})})}}};(()=>{a(),l(),r(),s(),i(),u(),c(),d(),p(),f()})()}),()=>o.stop()}function Zi(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function wr(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function xl(e){return{width:e.offsetWidth,height:e.offsetHeight}}function an(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function vc(e,t){return{x:an(e.x,t[0][0],t[1][0]),y:an(e.y,t[0][1],t[1][1])}}function Ji(e){const t=e.getRootNode();return"elementFromPoint"in t?t:ai().document}function jn(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function Nn(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!jn(e)}function Kn(e){return Nn(e)&&"computedPosition"in e}function ma(e){return!Number.isNaN(e)&&Number.isFinite(e)}function I_(e){return ma(e.width)&&ma(e.height)&&ma(e.x)&&ma(e.y)}function V_(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:zn({width:0,height:0}),handleBounds:{source:[],target:[]},computedPosition:zn({z:0,...e.position}),draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Ke(e.data)?e.data:{},events:zn(Ke(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function _c(e,t,n){var o,a;const l={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(a=e.targetHandle)==null?void 0:a.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:Ke(e.data)?e.data:{},events:zn(Ke(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??l,e,{id:e.id.toString()})}function gc(e,t,n,o){const a=typeof e=="string"?e:e.id,l=new Set,r=o==="source"?"target":"source";for(const i of n)i[r]===a&&l.add(i[o]);return t.filter(i=>l.has(i.id))}function A_(...e){if(e.length===3){const[l,r,i]=e;return gc(l,r,i,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(l=>jn(l)&&l.source===o).map(l=>n.find(r=>Nn(r)&&r.id===l.target))}function X_(...e){if(e.length===3){const[l,r,i]=e;return gc(l,r,i,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(l=>jn(l)&&l.target===o).map(l=>n.find(r=>Nn(r)&&r.id===l.source))}function yc({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function U_(e,t){return t.some(n=>jn(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Oc({x:e,y:t},{x:n,y:o,zoom:a}){return{x:e*a+n,y:t*a+o}}function Sr({x:e,y:t},{x:n,y:o,zoom:a},l,[r,i]){const s={x:(e-n)/a,y:(t-o)/a};return l?{x:r*Math.round(s.x/r),y:i*Math.round(s.y/i)}:s}function bc(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Ja({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function wc({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function W_(e,t){return wc(bc(Ja(e),Ja(t)))}function ri(e){const t=e.reduce((n,{computedPosition:o={x:0,y:0},dimensions:a={width:0,height:0}}={})=>bc(n,Ja({...o,...a})),{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY});return wc(t)}function Sc(e,t,{x:n,y:o,zoom:a}={x:0,y:0,zoom:1},l=!1,r=!1){const i={x:(t.x-n)/a,y:(t.y-o)/a,width:t.width/a,height:t.height/a};return e.filter(s=>{const{computedPosition:u={x:0,y:0},dimensions:c={width:0,height:0},selectable:d}=s;if(r&&!d)return!1;const p={...u,width:c.width||0,height:c.height||0},f=wr(i,p),g=typeof c.width>"u"||typeof c.height>"u"||c.width===0||c.height===0,w=l&&f>0,m=c.width*c.height;return g||w||f>=m})}function hn(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function Ki(e,t,n,o,a,l=.1,r={x:0,y:0}){const i=t/(e.width*(1+l)),s=n/(e.height*(1+l)),u=Math.min(i,s),c=an(u,o,a),d=e.x+e.width/2,p=e.y+e.height/2,f=t/2-d*c+(r.x??0),g=n/2-p*c+(r.y??0);return{x:f,y:g,zoom:c}}function j_(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function xc(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:xc(n,t):!1}function Cn(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function es(e,t,n){return e<t?an(Math.abs(e-t),1,50)/50:e>n?-an(Math.abs(e-n),1,50)/50:0}function $c(e,t){const n=es(e.x,35,t.width-35)*20,o=es(e.y,35,t.height-35)*20;return[n,o]}function Wl(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let a={};if(typeof t.style=="function"?a={...t.style(t)}:t.style&&(a={...t.style}),a.width=a.width??`${t.dimensions.width}px`,a.height=a.height??`${t.dimensions.height}px`,n>0)if(typeof a.width=="string"){const l=Number(a.width.replace("px",""));a.width=`${l+n}px`}else a.width+=n;if(o>0)if(typeof a.height=="string"){const l=Number(a.height.replace("px",""));a.height=`${l+o}px`}else a.height+=o;if(e.position.x<0){const l=Math.abs(e.position.x);if(t.position.x=t.position.x-l,typeof a.width=="string"){const r=Number(a.width.replace("px",""));a.width=`${r+l}px`}else a.width+=l;e.position.x=0}if(e.position.y<0){const l=Math.abs(e.position.y);if(t.position.y=t.position.y-l,typeof a.height=="string"){const r=Number(a.height.replace("px",""));a.height=`${r+l}px`}else a.height+=l;e.position.y=0}t.dimensions.width=Number(a.width.toString().replace("px","")),t.dimensions.height=Number(a.height.toString().replace("px","")),typeof t.style=="function"?t.style=l=>{const r=t.style;return{...r(l),...a}}:t.style={...t.style,...a}}}}function ts(e,t){var n,o;const a=e.filter(r=>r.type==="add"||r.type==="remove");for(const r of a)if(r.type==="add")t.findIndex(s=>s.id===r.item.id)===-1&&t.push(r.item);else if(r.type==="remove"){const i=t.findIndex(s=>s.id===r.id);i!==-1&&t.splice(i,1)}const l=t.map(r=>r.id);for(const r of t){const i=e.filter(s=>s.id===r.id);for(const s of i)switch(s.type){case"select":r.selected=s.selected;break;case"position":if(Kn(r)&&(typeof s.position<"u"&&(r.position=s.position),typeof s.dragging<"u"&&(r.dragging=s.dragging),r.expandParent&&r.parentNode)){const u=t[l.indexOf(r.parentNode)];u&&Kn(u)&&Wl(r,u)}break;case"dimensions":if(Kn(r)){if(typeof s.dimensions<"u"&&(r.dimensions=s.dimensions),typeof s.updateStyle<"u"&&(r.style={...r.style||{},width:`${(n=s.dimensions)==null?void 0:n.width}px`,height:`${(o=s.dimensions)==null?void 0:o.height}px`}),typeof s.resizing<"u"&&(r.resizing=s.resizing),r.expandParent&&r.parentNode){const u=t[l.indexOf(r.parentNode)];u&&Kn(u)&&(u.initialized?Wl(r,u):St(()=>{Wl(r,u)}))}r.initialized||(r.initialized=!0)}break}}return t}function Jt(e,t){return{id:e,type:"select",selected:t}}function ns(e){return{item:e,type:"add"}}function os(e){return{id:e,type:"remove"}}function as(e,t,n,o,a){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:a||null,type:"remove"}}function jl(e,t){return e.reduce((n,o)=>{let a=t.includes(o.id);Ke(o.selectable)&&!o.selectable&&(a=!1);const l=Kn(o)?"changedNodes":"changedEdges";return!o.selected&&a?n[l].push(Jt(o.id,!0)):o.selected&&!a&&n[l].push(Jt(o.id,!1)),n},{changedNodes:[],changedEdges:[]})}function ue(e){const t=new Set;let n=!1;const o=()=>t.size>0;e&&(n=!0,t.add(e));const a=i=>{t.delete(i)};return{on:i=>{e&&n&&t.delete(e),t.add(i);const s=()=>{a(i),e&&n&&t.add(e)};return gl(s),{off:s}},off:a,trigger:i=>Promise.all(Array.from(t).map(s=>s(i))),hasListeners:o,fns:t}}function ls(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function F_(e,t,n,o,a){return e.filter(l=>(l.selected||l.id===a)&&(!l.parentNode||!xc(l,o))&&(l.draggable||t&&typeof l.draggable>"u")).map(l=>{var r,i;return zn({id:l.id,position:l.position||{x:0,y:0},distance:{x:n.x-((r=l.computedPosition)==null?void 0:r.x)||0,y:n.y-((i=l.computedPosition)==null?void 0:i.y)||0},from:l.computedPosition,extent:l.extent,parentNode:l.parentNode,dimensions:l.dimensions,expandParent:l.expandParent})})}function Fl({id:e,dragItems:t,findNode:n}){const o=t.reduce((a,l)=>{const r=n(l.id);return r&&a.push(r),a},[]);return[e?o.find(a=>a.id===e):o[0],o]}function kc(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function L_(e,t,n){const[o,a,l,r]=typeof e!="string"?kc(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+r,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-a,n.computedPosition.y+n.dimensions.height-l]]:!1}function G_(e,t,n,o){let a=e.extent||n;if((a==="parent"||!Array.isArray(a)&&(a==null?void 0:a.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const l=L_(a,e,o);l&&(a=l)}else t(new it(at.NODE_EXTENT_INVALID,e.id)),a=n;else if(Array.isArray(a)){const l=(o==null?void 0:o.computedPosition.x)||0,r=(o==null?void 0:o.computedPosition.y)||0;a=[[a[0][0]+l,a[0][1]+r],[a[1][0]+l,a[1][1]+r]]}else if(a!=="parent"&&(a!=null&&a.range)&&Array.isArray(a.range)){const[l,r,i,s]=kc(a.padding),u=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;a=[[a.range[0][0]+u+s,a.range[0][1]+c+l],[a.range[1][0]+u-r,a.range[1][1]+c-i]]}return a==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:a}function B_({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function ii(e,t,n,o,a){const l=B_(e.dimensions,G_(e,n,o,a)),r=vc(t,l);return{position:{x:r.x-((a==null?void 0:a.computedPosition.x)||0),y:r.y-((a==null?void 0:a.computedPosition.y)||0)},computedPosition:r}}function xr(e,t,n){const o=((n==null?void 0:n.x)??0)+t.x,a=((n==null?void 0:n.y)??0)+t.y,l=(n==null?void 0:n.width)??t.width,r=(n==null?void 0:n.height)??t.height;switch(e){case ve.Top:return{x:o+l/2,y:a};case ve.Right:return{x:o+l,y:a+r/2};case ve.Bottom:return{x:o+l/2,y:a+r};case ve.Left:return{x:o,y:a+r/2}}}function rs(e=[],t){return e.length&&(t?e.find(n=>n.id===t):e[0])||null}function H_(e,t,n,o,a,l){const r=xr(n,{...e.dimensions,...e.computedPosition},t),i=xr(l,{...o.dimensions,...o.computedPosition},a);return{sourceX:r.x,sourceY:r.y,targetX:i.x,targetY:i.y}}function Y_({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:a,targetHeight:l,width:r,height:i,viewport:s}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+a),y2:Math.max(e.y+o,t.y+l)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Ja({x:(0-s.x)/s.zoom,y:(0-s.y)/s.zoom,width:r/s.zoom,height:i/s.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),p=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*p)>0}function Z_(e,t,n=!1){const o=typeof e.zIndex=="number";let a=o?e.zIndex:0;const l=t(e.source),r=t(e.target);return!l||!r?0:(n&&(a=o?e.zIndex:Math.max(l.computedPosition.z||0,r.computedPosition.z||0)),a)}var at=(e=>(e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e))(at||{});const is={MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`};class it extends Error{constructor(t,...n){var o;super((o=is[t])==null?void 0:o.call(is,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function si(e){return"clientX"in e}function Mn(e,t){var n,o;const a=si(e),l=a?e.clientX:(n=e.touches)==null?void 0:n[0].clientX,r=a?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:l-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}}const Ka=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Tc(){return{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}}function Ll(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function ss(e,t,n,o){return(t[n]||[]).reduce((a,l)=>{var r,i;return`${e.id}-${l.id}-${n}`!==o&&a.push({id:l.id||null,type:n,nodeId:e.id,x:(((r=e.computedPosition)==null?void 0:r.x)??0)+l.x+l.width/2,y:(((i=e.computedPosition)==null?void 0:i.y)??0)+l.y+l.height/2,width:l.width,height:l.height}),a},[])}function J_(e,t,n,o,a,l){const{x:r,y:i}=Mn(e),u=t.elementsFromPoint(r,i).find(g=>g.classList.contains("vue-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const w=ui(void 0,u),m=u.getAttribute("data-handleid"),v=l({nodeId:g,id:m,type:w});if(v){const k=a.find(Q=>Q.nodeId===g&&Q.type===w&&Q.id===m);return{handle:{id:m,type:w,nodeId:g,x:(k==null?void 0:k.x)||n.x,y:(k==null?void 0:k.y)||n.y},validHandleResult:v}}}}let c=[],d=Number.POSITIVE_INFINITY;for(const g of a){const w=Math.sqrt((g.x-n.x)**2+(g.y-n.y)**2);if(w<=o){const m=l(g);w<=d&&(w<d?c=[{handle:g,validHandleResult:m}]:w===d&&c.push({handle:g,validHandleResult:m}),d=w)}}if(!c.length)return{handle:null,validHandleResult:Tc()};if(c.length===1)return c[0];const p=c.some(({validHandleResult:g})=>g.isValid),f=c.some(({handle:g})=>g.type==="target");return c.find(({handle:g,validHandleResult:w})=>f?g.type==="target":p?w.isValid:!0)||c[0]}function us(e,t,n,o,a,l,r,i,s,u,c){const d=l==="target",p=i.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:f,y:g}=Mn(e),w=i.elementFromPoint(f,g),m=w!=null&&w.classList.contains("vue-flow__handle")?w:p,v=Tc();if(m){v.handleDomNode=m;const k=ui(void 0,m),Q=m.getAttribute("data-nodeid"),$=m.getAttribute("data-handleid"),S=m.classList.contains("connectable"),E=m.classList.contains("connectableend"),x={source:d?Q:o,sourceHandle:d?$:a,target:d?o:Q,targetHandle:d?a:$};v.connection=x;const U=S&&E&&(n===Wn.Strict?d&&k==="source"||!d&&k==="target":Q!==o||$!==a);v.endHandle={nodeId:Q,handleId:$,type:k},U&&(v.isValid=r(x,{edges:s,nodes:u,sourceNode:c(x.source),targetNode:c(x.target)}))}return v}function K_({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((a,l)=>{const{handleBounds:r}=l;let i=[],s=[];return r&&(i=ss(l,r,"source",`${t}-${n}-${o}`),s=ss(l,r,"target",`${t}-${n}-${o}`)),a.push(...i,...s),a},[])}function ui(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function eg(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const tg=["production","prod"];function $l(e,...t){tg.includes("production")||console.warn(`[Vue Flow]: ${e}`,...t)}function cs(e,t,n){const o=t.querySelectorAll(`.vue-flow__handle${e}`);if(!o||!o.length)return;const a=Array.from(o),l=t.getBoundingClientRect();return a.map(r=>{const i=r.getBoundingClientRect();return{id:r.getAttribute("data-handleid"),position:r.getAttribute("data-handlepos"),x:(i.left-l.left)/n,y:(i.top-l.top)/n,...xl(r)}})}function $r(e,t,n,o,a,l=!1,r){a.value=!1,e.selected?(l||e.selected&&t)&&(o([e]),St(()=>{r.blur()})):n([e])}function Ke(e){return typeof y(e)<"u"}function ng(e,t,n,o){if(!e||!e.source||!e.target)return n(new it(at.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let a;return jn(e)?a=e:a={...e,id:yc(e)},a=_c(a,void 0,o),U_(a,t)?!1:a}function og(e,t,n,o,a,l){if(!t.source||!t.target)return l(new it(at.EDGE_INVALID,e.id)),!1;const r=o(e.id);if(!r)return l(new it(at.EDGE_NOT_FOUND,e.id)),!1;const{id:i,...s}=e,u={...s,id:a?yc(t):i,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(r),1,u),u}function ds(e,t,n,o){const a={},l=e.reduce((i,s,u)=>{if(!Nn(s))return o(new it(at.NODE_INVALID,s==null?void 0:s.id)||`[ID UNKNOWN|INDEX ${u}]`),i;const c=V_(s,n(s.id),s.parentNode);return s.parentNode&&(a[s.parentNode]=!0),i.concat(c)},[]),r=[...l,...t];for(const i of l){const s=r.find(u=>u.id===i.parentNode);i.parentNode&&!s&&o(new it(at.NODE_MISSING_PARENT,i.id,i.parentNode)),(i.parentNode||a[i.id])&&(a[i.id]&&(i.isParent=!0),s&&(s.isParent=!0))}return l}function ps(e,t){e.clear();for(const n of t){const{id:o,source:a,target:l,sourceHandle:r=null,targetHandle:i=null}=n,s=`${a}-source-${r}`,u=`${l}-target-${i}`,c=e.get(s)||new Map,d=e.get(u)||new Map,p=zn({edgeId:o,source:a,target:l,sourceHandle:r,targetHandle:i});e.set(s,c.set(`${l}-${i}`,p)),e.set(u,d.set(`${a}-${r}`,p))}}function ag(){return{edgesChange:ue(),nodesChange:ue(),nodeDoubleClick:ue(),nodeClick:ue(),nodeMouseEnter:ue(),nodeMouseMove:ue(),nodeMouseLeave:ue(),nodeContextMenu:ue(),nodeDragStart:ue(),nodeDrag:ue(),nodeDragStop:ue(),nodesInitialized:ue(),miniMapNodeClick:ue(),miniMapNodeDoubleClick:ue(),miniMapNodeMouseEnter:ue(),miniMapNodeMouseMove:ue(),miniMapNodeMouseLeave:ue(),connect:ue(),connectStart:ue(),connectEnd:ue(),clickConnectStart:ue(),clickConnectEnd:ue(),paneReady:ue(),init:ue(),move:ue(),moveStart:ue(),moveEnd:ue(),selectionDragStart:ue(),selectionDrag:ue(),selectionDragStop:ue(),selectionContextMenu:ue(),selectionStart:ue(),selectionEnd:ue(),viewportChangeStart:ue(),viewportChange:ue(),viewportChangeEnd:ue(),paneScroll:ue(),paneClick:ue(),paneContextMenu:ue(),paneMouseEnter:ue(),paneMouseMove:ue(),paneMouseLeave:ue(),edgeContextMenu:ue(),edgeMouseEnter:ue(),edgeMouseMove:ue(),edgeMouseLeave:ue(),edgeDoubleClick:ue(),edgeClick:ue(),edgeUpdateStart:ue(),edgeUpdate:ue(),edgeUpdateEnd:ue(),updateNodeInternals:ue(),error:ue(e=>$l(e.message))}}function lg(e,t){Fr(()=>{for(const[n,o]of Object.entries(t.value)){const a=l=>{e(n,l)};o.fns.add(a),gl(()=>{o.off(a)})}})}function Ec(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:oi.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Co.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:En.Bezier,style:{}},connectionMode:Wn.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:Ka()?"Meta":"Control",zoomActivationKeyCode:Ka()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:ag(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,disableKeyboardA11y:!1,ariaLiveMessage:""}}const rg=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function ig(e,t,n,o){const a=M_(t),l=z=>{const A=z??n.value??[];t.hooks.updateNodeInternals.trigger(A)},r=z=>X_(z,t.nodes,t.edges),i=z=>A_(z,t.nodes,t.edges),s=z=>hn(z,t.edges),u=z=>{if(z)return t.nodes&&!n.value.length?t.nodes.find(A=>A.id===z):t.nodes[n.value.indexOf(z)]},c=z=>{if(z)return t.edges&&!o.value.length?t.edges.find(A=>A.id===z):t.edges[o.value.indexOf(z)]},d=(z,A,W)=>{var F,oe;const fe=[];for(const he of z){const Te={id:he.id,type:"position",dragging:W,from:he.from};if(A&&(Te.position=he.position,he.parentNode)){const Pe=u(he.parentNode);Te.position={x:Te.position.x-(((F=Pe==null?void 0:Pe.computedPosition)==null?void 0:F.x)??0),y:Te.position.y-(((oe=Pe==null?void 0:Pe.computedPosition)==null?void 0:oe.y)??0)}}fe.push(Te)}fe!=null&&fe.length&&t.hooks.nodesChange.trigger(fe)},p=z=>{if(!t.vueFlowRef)return;const A=t.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!A)return;const W=window.getComputedStyle(A),{m22:F}=new window.DOMMatrixReadOnly(W.transform),oe=z.reduce((fe,he)=>{const Te=u(he.id);if(Te){const Pe=xl(he.nodeElement);!!(Pe.width&&Pe.height&&(Te.dimensions.width!==Pe.width||Te.dimensions.height!==Pe.height||he.forceUpdate))&&(Te.handleBounds.source=cs(".source",he.nodeElement,F),Te.handleBounds.target=cs(".target",he.nodeElement,F),Te.dimensions=Pe,Te.initialized=!0,fe.push({id:Te.id,type:"dimensions",dimensions:Pe}))}return fe},[]);!t.fitViewOnInitDone&&t.fitViewOnInit&&St(()=>{a.value.fitView(),t.fitViewOnInitDone=!0}),oe.length&&t.hooks.nodesChange.trigger(oe)},f=(z,A)=>{const W=z.map(fe=>fe.id);let F,oe=[];if(t.multiSelectionActive)F=W.map(fe=>Jt(fe,A));else{const fe=jl([...t.nodes,...t.edges],W);F=fe.changedNodes,oe=fe.changedEdges}F.length&&t.hooks.nodesChange.trigger(F),oe.length&&t.hooks.edgesChange.trigger(oe)},g=(z,A)=>{const W=z.map(fe=>fe.id);let F=[],oe;if(t.multiSelectionActive)oe=W.map(fe=>Jt(fe,A));else{const fe=jl([...t.nodes,...t.edges],W);F=fe.changedNodes,oe=fe.changedEdges}F.length&&t.hooks.nodesChange.trigger(F),oe.length&&t.hooks.edgesChange.trigger(oe)},w=(z,A)=>{const W=z.filter(Nn).map(he=>he.id),F=z.filter(jn).map(he=>he.id);let{changedNodes:oe,changedEdges:fe}=jl([...t.nodes,...t.edges],[...W,...F]);t.multiSelectionActive&&(oe=W.map(he=>Jt(he,A)),fe=F.map(he=>Jt(he,A))),oe.length&&t.hooks.nodesChange.trigger(oe),fe.length&&t.hooks.edgesChange.trigger(fe)},m=z=>{f(z,!0)},v=z=>{g(z,!0)},k=z=>{w(z,!0)},Q=z=>{if(!z.length)return f(z,!1);const W=z.map(F=>F.id).map(F=>Jt(F,!1));W.length&&t.hooks.nodesChange.trigger(W)},$=z=>{if(!z.length)return g(z,!1);const W=z.map(F=>F.id).map(F=>Jt(F,!1));W.length&&t.hooks.edgesChange.trigger(W)},S=z=>{if(!z||!z.length)return w([],!1);const A=z.reduce((W,F)=>{const oe=Jt(F.id,!1);return Nn(F)?W.nodes.push(oe):W.edges.push(oe),W},{nodes:[],edges:[]});A.nodes.length&&t.hooks.nodesChange.trigger(A.nodes),A.edges.length&&t.hooks.edgesChange.trigger(A.edges)},E=z=>{var A;(A=t.d3Zoom)==null||A.scaleExtent([z,t.maxZoom]),t.minZoom=z},x=z=>{var A;(A=t.d3Zoom)==null||A.scaleExtent([t.minZoom,z]),t.maxZoom=z},I=z=>{var A;(A=t.d3Zoom)==null||A.translateExtent(z),t.translateExtent=z},U=z=>{t.nodeExtent=z,l(n.value)},R=z=>{t.nodesDraggable=z,t.nodesConnectable=z,t.elementsSelectable=z},L=z=>{const A=z instanceof Function?z(t.nodes):z;!t.initialized&&!A.length||(t.nodes=ds(A,t.nodes,u,t.hooks.error.trigger))},ee=z=>{const A=z instanceof Function?z(t.edges):z;if(!t.initialized&&!A.length)return;const W=t.isValidConnection?A.filter(F=>t.isValidConnection(F,{edges:t.edges,nodes:t.nodes,sourceNode:u(F.source),targetNode:u(F.target)})):A;ps(t.connectionLookup,W),t.edges=W.reduce((F,oe)=>{const fe=u(oe.source),he=u(oe.target),Te=!fe||typeof fe>"u",Pe=!he||typeof he>"u";if(Te&&Pe?t.hooks.error.trigger(new it(at.EDGE_SOURCE_TARGET_MISSING,oe.id,oe.source,oe.target)):(Te&&t.hooks.error.trigger(new it(at.EDGE_SOURCE_MISSING,oe.id,oe.source)),Pe&&t.hooks.error.trigger(new it(at.EDGE_TARGET_MISSING,oe.id,oe.target))),Te||Pe)return F;const Ge=c(oe.id);return F.push({..._c(oe,Ge,t.defaultEdgeOptions),sourceNode:fe,targetNode:he}),F},[])},G=z=>{const A=z instanceof Function?z([...t.nodes,...t.edges]):z;!t.initialized&&!A.length||(L(A.filter(Nn)),ee(A.filter(jn)))},_=z=>{let A=z instanceof Function?z(t.nodes):z;A=Array.isArray(A)?A:[A];const F=ds(A,t.nodes,u,t.hooks.error.trigger).map(ns);F.length&&t.hooks.nodesChange.trigger(F)},C=z=>{let A=z instanceof Function?z(t.edges):z;A=Array.isArray(A)?A:[A];const F=(t.isValidConnection?A.filter(oe=>{var fe;return(fe=t.isValidConnection)==null?void 0:fe.call(t,oe,{edges:t.edges,nodes:t.nodes,sourceNode:u(oe.source),targetNode:u(oe.target)})}):A).reduce((oe,fe)=>{const he=ng(fe,t.edges,t.hooks.error.trigger,t.defaultEdgeOptions);if(he){const Te=u(he.source),Pe=u(he.target);oe.push(ns({...he,sourceNode:Te,targetNode:Pe}))}return oe},[]);F.length&&t.hooks.edgesChange.trigger(F)},O=(z,A=!0,W=!1)=>{const F=z instanceof Function?z(t.nodes):z,oe=Array.isArray(F)?F:[F],fe=[],he=[];function Te(Ge){const We=s(Ge).filter(je=>Ke(je.deletable)?je.deletable:!0);he.push(...We.map(je=>as(je.id,je.source,je.target,je.sourceHandle,je.targetHandle)))}function Pe(Ge){const We=t.nodes.filter(je=>je.parentNode===Ge);if(We.length){const je=We.map(bt=>bt.id);fe.push(...je.map(bt=>os(bt))),A&&Te(We);for(const bt of We)Pe(bt.id)}}for(const Ge of oe){const We=typeof Ge=="string"?u(Ge):Ge;We&&(Ke(We.deletable)&&!We.deletable||(fe.push(os(We.id)),A&&Te([We]),W&&Pe(We.id)))}he.length&&t.hooks.edgesChange.trigger(he),fe.length&&t.hooks.nodesChange.trigger(fe)},N=z=>{const A=z instanceof Function?z(t.edges):z,W=Array.isArray(A)?A:[A],F=[];for(const oe of W){const fe=typeof oe=="string"?c(oe):oe;fe&&(Ke(fe.deletable)&&!fe.deletable||F.push(as(typeof oe=="string"?oe:oe.id,fe.source,fe.target,fe.sourceHandle,fe.targetHandle)))}t.hooks.edgesChange.trigger(F)},M=(z,A,W=!0)=>og(z,A,t.edges,c,W,t.hooks.error.trigger),P=z=>ts(z,t.nodes),D=z=>{const A=ts(z,t.edges);return ps(t.connectionLookup,A),A},q=(z,A,W={replace:!1})=>{const F=u(z);if(!F)return;const oe=typeof A=="function"?A(F):A;W.replace?t.nodes.splice(t.nodes.indexOf(F),1,oe):Object.assign(F,oe)},K=(z,A,W={replace:!1})=>{q(z,F=>{const oe=typeof A=="function"?A(F):A;return W.replace?{...F,data:oe}:{...F,data:{...F.data,...oe}}},W)},te=(z,A,W,F=!1)=>{F?t.connectionClickStartHandle=z:t.connectionStartHandle=z,t.connectionEndHandle=null,t.connectionStatus=null,A&&(t.connectionPosition=A)},B=(z,A=null,W=null)=>{t.connectionStartHandle&&(t.connectionPosition=z,t.connectionEndHandle=A,t.connectionStatus=W)},ae=(z,A)=>{t.connectionPosition={x:Number.NaN,y:Number.NaN},t.connectionEndHandle=null,t.connectionStatus=null,A?t.connectionClickStartHandle=null:t.connectionStartHandle=null},Y=z=>{const A=I_(z),W=A?null:Kn(z)?z:u(z.id);return!A&&!W?[null,null,A]:[A?z:Zi(W),W,A]},pe=(z,A=!0,W=t.nodes)=>{const[F,oe,fe]=Y(z);return F?(W||t.nodes).filter(he=>{if(!fe&&(he.id===oe.id||!he.computedPosition))return!1;const Te=Zi(he),Pe=wr(Te,F);return A&&Pe>0||Pe>=Number(F.width)*Number(F.height)}):[]},re=(z,A,W=!0)=>{const[F]=Y(z);if(!F)return!1;const oe=wr(F,A);return W&&oe>0||oe>=Number(F.width)*Number(F.height)},se=z=>{const{viewport:A,dimensions:W,d3Zoom:F,d3Selection:oe,translateExtent:fe}=t;if(!F||!oe||!z.x&&!z.y)return!1;const he=po.translate(A.x+z.x,A.y+z.y).scale(A.zoom),Te=[[0,0],[W.width,W.height]],Pe=F.constrain()(he,Te,fe),Ge=t.viewport.x!==Pe.x||t.viewport.y!==Pe.y||t.viewport.zoom!==Pe.k;return F.transform(oe,Pe),Ge},H=z=>{const A=z instanceof Function?z(t):z,W=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Ke(A.defaultEdgeOptions)&&(t.defaultEdgeOptions=A.defaultEdgeOptions);const F=A.modelValue||A.nodes||A.edges?[]:void 0;F&&(A.modelValue&&F.push(...A.modelValue),A.nodes&&F.push(...A.nodes),A.edges&&F.push(...A.edges),G(F));const oe=()=>{Ke(A.maxZoom)&&x(A.maxZoom),Ke(A.minZoom)&&E(A.minZoom),Ke(A.translateExtent)&&I(A.translateExtent)};for(const fe of Object.keys(A)){const he=fe,Te=A[he];![...rg,...W].includes(he)&&Ke(Te)&&(t[he]=Te)}Fa(()=>t.d3Zoom).not.toBeNull().then(oe),t.initialized||(t.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:p,setElements:G,setNodes:L,setEdges:ee,addNodes:_,addEdges:C,removeNodes:O,removeEdges:N,findNode:u,findEdge:c,updateEdge:M,updateNode:q,updateNodeData:K,applyEdgeChanges:D,applyNodeChanges:P,addSelectedElements:k,addSelectedNodes:m,addSelectedEdges:v,setMinZoom:E,setMaxZoom:x,setTranslateExtent:I,setNodeExtent:U,removeSelectedElements:S,removeSelectedNodes:Q,removeSelectedEdges:$,startConnection:te,updateConnection:B,endConnection:ae,setInteractive:R,setState:H,getIntersectingNodes:pe,getIncomers:r,getOutgoers:i,getConnectedEdges:s,isNodeIntersecting:re,panBy:se,fitView:z=>a.value.fitView(z),zoomIn:z=>a.value.zoomIn(z),zoomOut:z=>a.value.zoomOut(z),zoomTo:(z,A)=>a.value.zoomTo(z,A),setViewport:(z,A)=>a.value.setViewport(z,A),setTransform:(z,A)=>a.value.setTransform(z,A),getViewport:()=>a.value.getViewport(),getTransform:()=>a.value.getTransform(),setCenter:(z,A,W)=>a.value.setCenter(z,A,W),fitBounds:(z,A)=>a.value.fitBounds(z,A),project:z=>a.value.project(z),screenToFlowCoordinate:z=>a.value.screenToFlowCoordinate(z),flowToScreenCoordinate:z=>a.value.flowToScreenCoordinate(z),toObject:()=>JSON.parse(JSON.stringify({nodes:t.nodes.map(z=>{const{computedPosition:A,handleBounds:W,selected:F,dimensions:oe,isParent:fe,resizing:he,dragging:Te,initialized:Pe,events:Ge,...We}=z;return We}),edges:t.edges.map(z=>{const{selected:A,sourceNode:W,targetNode:F,events:oe,...fe}=z;return fe}),position:[t.viewport.x,t.viewport.y],zoom:t.viewport.zoom,viewport:t.viewport})),fromObject:z=>new Promise(A=>{const{nodes:W,edges:F,position:oe,zoom:fe,viewport:he}=z;if(W&&L(W),F&&ee(F),he!=null&&he.x&&(he!=null&&he.y)||oe){const Te=(he==null?void 0:he.x)||oe[0],Pe=(he==null?void 0:he.y)||oe[1],Ge=(he==null?void 0:he.zoom)||fe||t.viewport.zoom;return Fa(()=>a.value.viewportInitialized).toBe(!0).then(()=>{a.value.setViewport({x:Te,y:Pe,zoom:Ge}).then(()=>{A(!0)})})}else A(!0)}),updateNodeInternals:l,viewportHelper:a,$reset:()=>{const z=Ec();if(t.edges=[],t.nodes=[],t.d3Zoom&&t.d3Selection){const A=po.translate(z.defaultViewport.x??0,z.defaultViewport.y??0).scale(an(z.defaultViewport.zoom??1,z.minZoom,z.maxZoom)),W=t.viewportRef.getBoundingClientRect(),F=[[0,0],[W.width,W.height]],oe=t.d3Zoom.constrain()(A,F,z.translateExtent);t.d3Zoom.transform(t.d3Selection,oe)}H(z)},$destroy:()=>{}}}const sg=["data-id","data-handleid","data-nodeid","data-handlepos"],ug={name:"Handle",compatConfig:{MODE:3}},gn=Re({...ug,props:{id:{},type:{},position:{default:()=>ve.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=hu(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Ue(()=>n.type??"source"),a=Ue(()=>n.isValidConnection??null),{connectionStartHandle:l,connectionClickStartHandle:r,connectionEndHandle:i,vueFlowRef:s,nodesConnectable:u,noDragClassName:c,noPanClassName:d}=Xe(),{id:p,node:f,nodeEl:g,connectedEdges:w}=D_(),m=j(),v=Ue(()=>e.id??`${p}__handle-${e.position}`),k=Ue(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),Q=Ue(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),$=Ue(()=>{var L,ee,G,_,C,O;return((L=l.value)==null?void 0:L.nodeId)===p&&((ee=l.value)==null?void 0:ee.handleId)===v.value&&((G=l.value)==null?void 0:G.type)===o.value||((_=i.value)==null?void 0:_.nodeId)===p&&((C=i.value)==null?void 0:C.handleId)===v.value&&((O=i.value)==null?void 0:O.type)===o.value}),S=Ue(()=>{var L,ee,G;return((L=r.value)==null?void 0:L.nodeId)===p&&((ee=r.value)==null?void 0:ee.handleId)===v.value&&((G=r.value)==null?void 0:G.type)===o.value}),{handlePointerDown:E,handleClick:x}=mc({nodeId:p,handleId:v,isValidConnection:a,type:o}),I=we(()=>typeof e.connectable=="string"&&e.connectable==="single"?!w.value.some(L=>{const ee=L[`${o.value}Handle`];return L[o.value]!==p?!1:ee?ee===v.value:!0}):typeof e.connectable=="number"?w.value.filter(L=>{const ee=L[`${o.value}Handle`];return L[o.value]!==p?!1:ee?ee===v.value:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(f,w.value):Ke(e.connectable)?e.connectable:u.value);Fa(()=>f.initialized).toBe(!0,{flush:"post"}).then(()=>{var L;const ee=(L=f.handleBounds[o.value])==null?void 0:L.find(P=>P.id===v.value);if(!s.value||ee)return;const G=s.value.querySelector(".vue-flow__transformationpane");if(!g.value||!m.value||!G||!v.value)return;const _=g.value.getBoundingClientRect(),C=m.value.getBoundingClientRect(),O=window.getComputedStyle(G),{m22:N}=new window.DOMMatrixReadOnly(O.transform),M={id:v.value,position:e.position,x:(C.left-_.left)/N,y:(C.top-_.top)/N,...xl(m.value)};f.handleBounds[o.value]=[...f.handleBounds[o.value]??[],M]}),fl(()=>{const L=f.handleBounds[o.value];L&&(f.handleBounds[o.value]=L.filter(ee=>ee.id!==v.value))});function U(L){const ee=si(L);I.value&&k.value&&(ee&&L.button===0||!ee)&&E(L)}function R(L){!p||!r.value&&!k.value||I.value&&x(L)}return t({handleClick:x,handlePointerDown:E,onClick:R,onPointerDown:U}),(L,ee)=>(T(),Z("div",{ref_key:"handle",ref:m,"data-id":`${y(p)}-${v.value}-${o.value}`,"data-handleid":v.value,"data-nodeid":y(p),"data-handlepos":L.position,class:tt(["vue-flow__handle",[`vue-flow__handle-${L.position}`,`vue-flow__handle-${v.value}`,y(c),y(d),o.value,{connectable:I.value,connecting:S.value,connectablestart:k.value,connectableend:Q.value,connectionindicator:I.value&&(k.value&&!$.value||Q.value&&$.value)}]]),onMousedown:U,onTouchstartPassive:U,onClick:R},[Ve(L.$slots,"default",{id:L.id})],42,sg))}}),kl=function({sourcePosition:e=ve.Bottom,targetPosition:t=ve.Top,label:n,connectable:o=!0,isValidTargetPos:a,isValidSourcePos:l,data:r}){const i=r.label||n;return[Ne(gn,{type:"target",position:t,connectable:o,isValidConnection:a}),typeof i!="string"&&i?Ne(i):Ne("div",{innerHTML:i}),Ne(gn,{type:"source",position:e,connectable:o,isValidConnection:l})]};kl.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];kl.inheritAttrs=!1;kl.compatConfig={MODE:3};const cg=kl,Tl=function({targetPosition:e=ve.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:a}){const l=a.label||t;return[Ne(gn,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof l!="string"&&l?Ne(l):Ne("div",{innerHTML:l})]};Tl.props=["targetPosition","label","isValidTargetPos","connectable","data"];Tl.inheritAttrs=!1;Tl.compatConfig={MODE:3};const dg=Tl,El=function({sourcePosition:e=ve.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:a}){const l=a.label||t;return[typeof l!="string"&&l?Ne(l):Ne("div",{innerHTML:l}),Ne(gn,{type:"source",position:e,connectable:n,isValidConnection:o})]};El.props=["sourcePosition","label","isValidSourcePos","connectable","data"];El.inheritAttrs=!1;El.compatConfig={MODE:3};const pg=El,fg=["transform"],mg=["width","height","x","y","rx","ry"],hg=["y"],vg={name:"EdgeText",compatConfig:{MODE:3}},_g=Re({...vg,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=j({x:0,y:0,width:0,height:0}),n=j(null),o=we(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);bn(a),ke([()=>e.x,()=>e.y,n,()=>e.label],a);function a(){if(!n.value)return;const l=n.value.getBBox();(l.width!==t.value.width||l.height!==t.value.height)&&(t.value=l)}return(l,r)=>(T(),Z("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[l.labelShowBg?(T(),Z("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*l.labelBgPadding[0]}px`,height:`${t.value.height+2*l.labelBgPadding[1]}px`,x:-l.labelBgPadding[0],y:-l.labelBgPadding[1],style:lt(l.labelBgStyle),rx:l.labelBgBorderRadius,ry:l.labelBgBorderRadius},null,12,mg)):ce("",!0),Ce("text",vu(l.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:l.labelStyle}),[Ve(l.$slots,"default",{},()=>[typeof l.label!="string"?(T(),X(Tn(l.label),{key:0})):(T(),Z(ge,{key:1},[ne(J(l.label),1)],64))])],16,hg)],8,fg))}}),gg=["id","d","marker-end","marker-start"],yg=["d","stroke-width"],Og={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},Ql=Re({...Og,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},style:{},labelStyle:{},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=hu(e,["interactionWidth","labelShowBg"]),o=j(null),a=j(null),l=j(null),r=ml();return t({pathEl:o,interactionEl:a,labelEl:l}),(i,s)=>(T(),Z(ge,null,[Ce("path",{id:i.id,ref_key:"pathEl",ref:o,d:i.path,style:lt(n.style),class:tt(["vue-flow__edge-path",y(r).class]),"marker-end":i.markerEnd,"marker-start":i.markerStart},null,14,gg),i.interactionWidth?(T(),Z("path",{key:0,ref_key:"interactionEl",ref:a,fill:"none",d:i.path,"stroke-width":i.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,yg)):ce("",!0),i.label&&i.labelX&&i.labelY?(T(),X(_g,{key:1,ref_key:"labelEl",ref:l,x:i.labelX,y:i.labelY,label:i.label,"label-show-bg":i.labelShowBg,"label-bg-style":i.labelBgStyle,"label-bg-padding":i.labelBgPadding,"label-bg-border-radius":i.labelBgBorderRadius,"label-style":i.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):ce("",!0)],64))}});function Qc({sourceX:e,sourceY:t,targetX:n,targetY:o}){const a=Math.abs(n-e)/2,l=n<e?n+a:n-a,r=Math.abs(o-t)/2,i=o<t?o+r:o-r;return[l,i,a,r]}function Pc({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:a,sourceControlY:l,targetControlX:r,targetControlY:i}){const s=e*.125+a*.375+r*.375+n*.125,u=t*.125+l*.375+i*.375+o*.125,c=Math.abs(s-e),d=Math.abs(u-t);return[s,u,c,d]}function ha(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function fs({pos:e,x1:t,y1:n,x2:o,y2:a,c:l}){let r,i;switch(e){case ve.Left:r=t-ha(t-o,l),i=n;break;case ve.Right:r=t+ha(o-t,l),i=n;break;case ve.Top:r=t,i=n-ha(n-a,l);break;case ve.Bottom:r=t,i=n+ha(a-n,l);break}return[r,i]}function Cc({sourceX:e,sourceY:t,sourcePosition:n=ve.Bottom,targetX:o,targetY:a,targetPosition:l=ve.Top,curvature:r=.25}){const[i,s]=fs({pos:n,x1:e,y1:t,x2:o,y2:a,c:r}),[u,c]=fs({pos:l,x1:o,y1:a,x2:e,y2:t,c:r}),[d,p,f,g]=Pc({sourceX:e,sourceY:t,targetX:o,targetY:a,sourceControlX:i,sourceControlY:s,targetControlX:u,targetControlY:c});return[`M${e},${t} C${i},${s} ${u},${c} ${o},${a}`,d,p,f,g]}function ms({pos:e,x1:t,y1:n,x2:o,y2:a}){let l,r;switch(e){case ve.Left:case ve.Right:l=.5*(t+o),r=n;break;case ve.Top:case ve.Bottom:l=t,r=.5*(n+a);break}return[l,r]}function Dc({sourceX:e,sourceY:t,sourcePosition:n=ve.Bottom,targetX:o,targetY:a,targetPosition:l=ve.Top}){const[r,i]=ms({pos:n,x1:e,y1:t,x2:o,y2:a}),[s,u]=ms({pos:l,x1:o,y1:a,x2:e,y2:t}),[c,d,p,f]=Pc({sourceX:e,sourceY:t,targetX:o,targetY:a,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:u});return[`M${e},${t} C${r},${i} ${s},${u} ${o},${a}`,c,d,p,f]}const hs={[ve.Left]:{x:-1,y:0},[ve.Right]:{x:1,y:0},[ve.Top]:{x:0,y:-1},[ve.Bottom]:{x:0,y:1}};function bg({source:e,sourcePosition:t=ve.Bottom,target:n}){return t===ve.Left||t===ve.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function vs(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function wg({source:e,sourcePosition:t=ve.Bottom,target:n,targetPosition:o=ve.Top,center:a,offset:l}){const r=hs[t],i=hs[o],s={x:e.x+r.x*l,y:e.y+r.y*l},u={x:n.x+i.x*l,y:n.y+i.y*l},c=bg({source:s,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",p=c[d];let f,g,w;const m={x:0,y:0},v={x:0,y:0},[k,Q,$,S]=Qc({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(r[d]*i[d]===-1){g=a.x??k,w=a.y??Q;const x=[{x:g,y:s.y},{x:g,y:u.y}],I=[{x:s.x,y:w},{x:u.x,y:w}];r[d]===p?f=d==="x"?x:I:f=d==="x"?I:x}else{const x=[{x:s.x,y:u.y}],I=[{x:u.x,y:s.y}];if(d==="x"?f=r.x===p?I:x:f=r.y===p?x:I,t===o){const G=Math.abs(e[d]-n[d]);if(G<=l){const _=Math.min(l-1,l-G);r[d]===p?m[d]=(s[d]>e[d]?-1:1)*_:v[d]=(u[d]>n[d]?-1:1)*_}}if(t!==o){const G=d==="x"?"y":"x",_=r[d]===i[G],C=s[G]>u[G],O=s[G]<u[G];(r[d]===1&&(!_&&C||_&&O)||r[d]!==1&&(!_&&O||_&&C))&&(f=d==="x"?x:I)}const U={x:s.x+m.x,y:s.y+m.y},R={x:u.x+v.x,y:u.y+v.y},L=Math.max(Math.abs(U.x-f[0].x),Math.abs(R.x-f[0].x)),ee=Math.max(Math.abs(U.y-f[0].y),Math.abs(R.y-f[0].y));L>=ee?(g=(U.x+R.x)/2,w=f[0].y):(g=f[0].x,w=(U.y+R.y)/2)}return[[e,{x:s.x+m.x,y:s.y+m.y},...f,{x:u.x+v.x,y:u.y+v.y},n],g,w,$,S]}function Sg(e,t,n,o){const a=Math.min(vs(e,t)/2,vs(t,n)/2,o),{x:l,y:r}=t;if(e.x===l&&l===n.x||e.y===r&&r===n.y)return`L${l} ${r}`;if(e.y===r){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${l+a*u},${r}Q ${l},${r} ${l},${r+a*c}`}const i=e.x<n.x?1:-1,s=e.y<n.y?-1:1;return`L ${l},${r+a*s}Q ${l},${r} ${l+a*i},${r}`}function kr({sourceX:e,sourceY:t,sourcePosition:n=ve.Bottom,targetX:o,targetY:a,targetPosition:l=ve.Top,borderRadius:r=5,centerX:i,centerY:s,offset:u=20}){const[c,d,p,f,g]=wg({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:a},targetPosition:l,center:{x:i,y:s},offset:u});return[c.reduce((m,v,k)=>{let Q;return k>0&&k<c.length-1?Q=Sg(c[k-1],v,c[k+1],r):Q=`${k===0?"M":"L"}${v.x} ${v.y}`,m+=Q,m},""),d,p,f,g]}function xg({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[a,l,r,i]=Qc({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,a,l,r,i]}const $g=Re({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,a]=xg(e);return Ne(Ql,{path:n,labelX:o,labelY:a,...t,...e})}}}),kg=$g,Tg=Re({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,a]=kr({...e,sourcePosition:e.sourcePosition??ve.Bottom,targetPosition:e.targetPosition??ve.Top});return Ne(Ql,{path:n,labelX:o,labelY:a,...t,...e})}}}),zc=Tg,Eg=Re({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>Ne(zc,{...e,...t,borderRadius:0})}}),Qg=Eg,Pg=Re({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,a]=Cc({...e,sourcePosition:e.sourcePosition??ve.Bottom,targetPosition:e.targetPosition??ve.Top});return Ne(Ql,{path:n,labelX:o,labelY:a,...t,...e})}}}),Cg=Pg,Dg=Re({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,a]=Dc({...e,sourcePosition:e.sourcePosition??ve.Bottom,targetPosition:e.targetPosition??ve.Top});return Ne(Ql,{path:n,labelX:o,labelY:a,...t,...e})}}}),zg=Dg,qg={input:pg,default:cg,output:dg},Ng={default:Cg,straight:kg,step:Qg,smoothstep:zc,simplebezier:zg};function Mg(e,t,n){const o=we(()=>m=>e.nodes&&!t.value.length?e.nodes.find(v=>v.id===m):e.nodes[t.value.indexOf(m)]),a=we(()=>m=>e.edges&&!n.value.length?e.edges.find(v=>v.id===m):e.edges[n.value.indexOf(m)]),l=we(()=>{const m={...Ng,...e.edgeTypes},v=Object.keys(m);for(const k of e.edges)k.type&&!v.includes(k.type)&&(m[k.type]=k.type);return m}),r=we(()=>{const m={...qg,...e.nodeTypes},v=Object.keys(m);for(const k of e.nodes)k.type&&!v.includes(k.type)&&(m[k.type]=k.type);return m}),i=we(()=>{const m=e.nodes.filter(v=>!v.hidden);return e.onlyRenderVisibleElements?m&&Sc(m,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):m??[]}),s=(m,v,k)=>{if(v=v??o.value(m.source),k=k??o.value(m.target),!v||!k){e.hooks.error.trigger(new it(at.EDGE_ORPHANED,m.id));return}return!m.hidden&&!k.hidden&&!v.hidden},u=we(()=>e.onlyRenderVisibleElements?e.edges.filter(m=>{const v=o.value(m.source),k=o.value(m.target);return s(m,v,k)&&Y_({sourcePos:v.computedPosition||{x:0,y:0},targetPos:k.computedPosition||{x:0,y:0},sourceWidth:v.dimensions.width,sourceHeight:v.dimensions.height,targetWidth:k.dimensions.width,targetHeight:k.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})}):e.edges.filter(m=>s(m))),c=we(()=>[...i.value,...u.value]),d=we(()=>e.nodes.filter(m=>m.selected)),p=we(()=>e.edges.filter(m=>m.selected)),f=we(()=>[...d.value??[],...p.value??[]]),g=we(()=>i.value.filter(m=>m.initialized&&m.handleBounds!==void 0)),w=we(()=>i.value.length>0&&g.value.length===i.value.length);return{getNode:o,getEdge:a,getElements:c,getEdgeTypes:l,getNodeTypes:r,getEdges:u,getNodes:i,getSelectedElements:f,getSelectedNodes:d,getSelectedEdges:p,getNodesInitialized:g,areNodesInitialized:w}}class Qn{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=Gn())==null?void 0:t.appContext.app,o=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??Qn.instance;return Qn.instance=o??new Qn,n&&(n.config.globalProperties.$vueFlowStorage=Qn.instance),Qn.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=Ec(),a=ut(o),l={};for(const[p,f]of Object.entries(a.hooks)){const g=`on${p.charAt(0).toUpperCase()+p.slice(1)}`;l[g]=f.on}const r={};for(const[p,f]of Object.entries(a.hooks))r[p]=f.trigger;const i=we(()=>a.nodes.map(p=>p.id)),s=we(()=>a.edges.map(p=>p.id)),u=Mg(a,i,s),c=ig(t,a,i,s);c.setState({...a,...n});const d={...l,...u,...c,...Xf(a),emits:r,id:t,vueFlowVersion:"1.33.6",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function Xe(e){const t=Qn.getInstance(),n=fu(),o=e==null?void 0:e.id,a=(n==null?void 0:n.vueFlowId)||o;let l;if(n){const r=On(Yi,null);typeof r<"u"&&r!==null&&(l=r)}if(l||a&&(l=t.get(a)),!l||l&&o&&o!==l.id){const r=o??t.getId(),i=t.create(r,e);l=i,(n??du(!0)).run(()=>{ke(i.applyDefault,(u,c,d)=>{const p=g=>{i.applyNodeChanges(g)},f=g=>{i.applyEdgeChanges(g)};u?(i.onNodesChange(p),i.onEdgesChange(f)):(i.hooks.value.nodesChange.off(p),i.hooks.value.edgesChange.off(f)),d(()=>{i.hooks.value.nodesChange.off(p),i.hooks.value.edgesChange.off(f)})},{immediate:!0}),gl(()=>{if(l){const u=t.get(l.id);u?u.$destroy():$l(`No store instance found for id ${l.id} in storage.`)}})})}else e&&l.setState(e);return n&&(In(Yi,l),n.vueFlowId=l.id),l}function Rg(e){const t=ai(),{emits:n,dimensions:o}=Xe();let a;bn(()=>{const l=e.value,r=()=>{if(!l)return;const i=xl(l);(i.width===0||i.height===0)&&n.error(new it(at.MISSING_VIEWPORT_DIMENSIONS)),o.value={width:i.width||500,height:i.height||500}};r(),t.addEventListener("resize",r),l&&(a=new ResizeObserver(()=>r()),a.observe(l)),Lr(()=>{t.removeEventListener("resize",r),a&&l&&a.unobserve(l)})})}const Ig={name:"UserSelection",compatConfig:{MODE:3}},Vg=Re({...Ig,props:{userSelectionRect:{}},setup(e){return(t,n)=>(T(),Z("div",{class:"vue-flow__selection vue-flow__container",style:lt({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),Ag=["tabIndex"],Xg={name:"NodesSelection",compatConfig:{MODE:3}},Ug=Re({...Xg,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:a,disableKeyboardA11y:l,userSelectionActive:r}=Xe(),i=hc(),s=j(null),u=dc({el:s,onStart(g){t.selectionDragStart(g)},onDrag(g){t.selectionDrag(g)},onStop(g){t.selectionDragStop(g)}});bn(()=>{var g;l.value||(g=s.value)==null||g.focus({preventScroll:!0})});const c=we(()=>ri(o.value)),d=we(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function p(g){t.selectionContextMenu({event:g,nodes:o.value})}function f(g){l||ao[g.key]&&i({x:ao[g.key].x,y:ao[g.key].y},g.shiftKey)}return(g,w)=>!y(r)&&c.value.width&&c.value.height?(T(),Z("div",{key:0,class:tt(["vue-flow__nodesselection vue-flow__container",y(a)]),style:lt({transform:`translate(${y(n).x}px,${y(n).y}px) scale(${y(n).zoom})`})},[Ce("div",{ref_key:"el",ref:s,class:tt([{dragging:y(u)},"vue-flow__nodesselection-rect"]),style:lt(d.value),tabIndex:y(l)?void 0:-1,onContextmenu:p,onKeydown:f},null,46,Ag)],6)):ce("",!0)}});function _s(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Wg={name:"Pane",compatConfig:{MODE:3}},jg=Re({...Wg,props:{isSelecting:{type:Boolean}},setup(e){const{vueFlowRef:t,getNodes:n,getEdges:o,viewport:a,emits:l,userSelectionActive:r,removeSelectedElements:i,panOnDrag:s,userSelectionRect:u,elementsSelectable:c,nodesSelectionActive:d,addSelectedElements:p,getSelectedEdges:f,getSelectedNodes:g,removeNodes:w,removeEdges:m,selectionMode:v,deleteKeyCode:k,multiSelectionKeyCode:Q,multiSelectionActive:$}=Xe(),S=j(null),E=j(0),x=j(0),I=j(),U=Ue(()=>c.value&&(e.isSelecting||r.value));Do(k,P=>{if(!P)return;const D=n.value.reduce((q,K)=>((!K.selected&&K.parentNode&&q.find(te=>te.id===K.parentNode)||K.selected)&&q.push(K),q),[]);(D||f.value)&&(f.value.length>0&&m(f.value),D.length>0&&w(D),d.value=!1,i())},{actInsideInputWithModifier:!1}),Do(Q,P=>{$.value=P});function R(){r.value=!1,u.value=null,E.value=0,x.value=0}function L(P){P.target!==S.value||U.value||(l.paneClick(P),i(),d.value=!1)}function ee(P){var D;if(P.target===S.value){if(Array.isArray(s.value)&&((D=s.value)!=null&&D.includes(2))){P.preventDefault();return}l.paneContextMenu(P)}}function G(P){P.target===S.value&&l.paneScroll(P)}function _(P){if(I.value=t.value.getBoundingClientRect(),!U.value||!c||!e.isSelecting||P.button!==0||P.target!==S.value||!I.value)return;const{x:D,y:q}=_s(P,I.value);i(),u.value={width:0,height:0,startX:D,startY:q,x:D,y:q},r.value=!0,l.selectionStart(P)}function C(P){if(!U.value)return l.paneMouseMove(P);if(!e.isSelecting||!I.value||!u.value)return;r.value||(r.value=!0),d.value&&(d.value=!1);const D=_s(P,I.value),q=u.value.startX??0,K=u.value.startY??0,te={...u.value,x:D.x<q?D.x:q,y:D.y<K?D.y:K,width:Math.abs(D.x-q),height:Math.abs(D.y-K)},B=Sc(n.value,u.value,a.value,v.value===oi.Partial),ae=hn(B,o.value);E.value=B.length,x.value=ae.length,u.value=te,p([...B,...ae])}function O(P){U.value&&P.button===0&&(!r.value&&u.value&&P.target===S.value&&L(P),d.value=E.value>0,R(),l.selectionEnd(P))}function N(P){var D;if(!U.value)return l.paneMouseLeave(P);r.value&&(d.value=E.value>0,(D=l.selectionEnd)==null||D.call(l,P)),R()}function M(P){U.value||l.paneMouseEnter(P)}return(P,D)=>(T(),Z("div",{ref_key:"container",ref:S,class:tt(["vue-flow__pane vue-flow__container",{selection:P.isSelecting}]),onClick:L,onContextmenu:ee,onWheelPassive:G,onMouseenter:M,onMousedown:_,onMousemove:C,onMouseup:O,onMouseleave:N},[Ve(P.$slots,"default"),y(r)&&y(u)?(T(),X(Vg,{key:0,"user-selection-rect":y(u)},null,8,["user-selection-rect"])):ce("",!0),y(d)&&y(g).length?(T(),X(Ug,{key:1})):ce("",!0)],34))}}),Fg={name:"Transform",compatConfig:{MODE:3}},Lg=Re({...Fg,setup(e){const{viewport:t}=Xe();return(n,o)=>(T(),Z("div",{class:"vue-flow__transformationpane vue-flow__container",style:lt({transform:`translate(${y(t).x}px,${y(t).y}px) scale(${y(t).zoom})`})},[Ve(n.$slots,"default")],4))}}),Gg={name:"Viewport",compatConfig:{MODE:3}},Bg=Re({...Gg,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:a,zoomActivationKeyCode:l,selectionKeyCode:r,panActivationKeyCode:i,panOnScroll:s,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:p,zoomOnPinch:f,zoomOnScroll:g,preventScrolling:w,noWheelClassName:m,noPanClassName:v,emits:k,connectionStartHandle:Q,userSelectionActive:$,paneDragging:S,d3Zoom:E,d3Selection:x,d3ZoomHandler:I,viewport:U,viewportRef:R}=Xe();Rg(R);const L=j(!1),ee=j(!1);let G=null,_=!1,C=0,O={x:0,y:0,zoom:0};const N=Do(i),M=Do(r),P=Do(l),D=Ue(()=>N.value||d.value),q=Ue(()=>N.value||s.value),K=Ue(()=>M.value||r.value===!0&&D.value!==!0);bn(()=>{if(!R.value){$l("Viewport element is missing");return}const re=R.value,se=re.getBoundingClientRect(),H=w_().scaleExtent([t.value,n.value]).translateExtent(a.value),me=Tt(re).call(H),_e=me.on("wheel.zoom"),De=po.translate(o.value.x??0,o.value.y??0).scale(an(o.value.zoom??1,t.value,n.value)),z=[[0,0],[se.width,se.height]],A=H.constrain()(De,z,a.value);H.transform(me,A),H.wheelDelta(B),E.value=H,x.value=me,I.value=_e,U.value={x:A.x,y:A.y,zoom:A.k},H.on("start",W=>{var F;if(!W.sourceEvent)return null;C=W.sourceEvent.button,L.value=!0;const oe=Y(W.transform);((F=W.sourceEvent)==null?void 0:F.type)==="mousedown"&&(S.value=!0),O=oe,k.viewportChangeStart(oe),k.moveStart({event:W,flowTransform:oe})}),H.on("end",W=>{if(!W.sourceEvent)return null;if(L.value=!1,S.value=!1,te(D.value,C??0)&&!_&&k.paneContextMenu(W.sourceEvent),_=!1,ae(O,W.transform)){const F=Y(W.transform);O=F,k.viewportChangeEnd(F),k.moveEnd({event:W,flowTransform:F})}}),H.filter(W=>{var F,oe;const fe=P.value||g.value,he=f.value&&W.ctrlKey;if((D.value===!0||Array.isArray(D.value)&&D.value.includes(1))&&W.button===1&&W.type==="mousedown"&&((F=W.target)!=null&&F.closest(".vue-flow__node")||(oe=W.target)!=null&&oe.closest(".vue-flow__edge")))return!0;if(!D.value&&!fe&&!q.value&&!p.value&&!f.value||$.value||!p.value&&W.type==="dblclick"||pe(W,m.value)&&W.type==="wheel"||pe(W,v.value)&&(W.type!=="wheel"||q.value&&W.type==="wheel"&&!P.value)||!f.value&&W.ctrlKey&&W.type==="wheel"||!fe&&!q.value&&!he&&W.type==="wheel"||!D.value&&(W.type==="mousedown"||W.type==="touchstart")||Array.isArray(D.value)&&!D.value.includes(W.button)&&(W.type==="mousedown"||W.type==="touchstart"))return!1;const Te=Array.isArray(D.value)&&D.value.includes(W.button)||!W.button||W.button<=1;return(!W.ctrlKey||W.type==="wheel")&&Te}),ke([$,D],()=>{$.value&&!L.value?H.on("zoom",null):$.value||H.on("zoom",W=>{U.value={x:W.transform.x,y:W.transform.y,zoom:W.transform.k};const F=Y(W.transform);_=te(D.value,C??0),k.viewportChange(F),k.move({event:W,flowTransform:F})})},{immediate:!0}),ke([$,q,u,P,f,w,m],()=>{q.value&&!P.value&&!$.value?me.on("wheel.zoom",W=>{if(pe(W,m.value))return!1;const F=P.value||g.value,oe=f.value&&W.ctrlKey;if(!(!w.value||q.value||F||oe))return!1;W.preventDefault(),W.stopImmediatePropagation();const he=me.property("__zoom").k||1,Te=Ka();if(W.ctrlKey&&f.value&&Te){const bt=Nt(W),zt=B(W),de=he*2**zt;H.scaleTo(me,de,bt,W);return}const Pe=W.deltaMode===1?20:1;let Ge=u.value===Co.Vertical?0:W.deltaX*Pe,We=u.value===Co.Horizontal?0:W.deltaY*Pe;!Te&&W.shiftKey&&u.value!==Co.Vertical&&!Ge&&We&&(Ge=We,We=0),H.translateBy(me,-(Ge/he)*c.value,-(We/he)*c.value);const je=Y(me.property("__zoom"));G&&clearTimeout(G),ee.value?(k.move({event:W,flowTransform:je}),k.viewportChange(je),G=setTimeout(()=>{k.moveEnd({event:W,flowTransform:je}),k.viewportChangeEnd(je),ee.value=!1},150)):(ee.value=!0,k.moveStart({event:W,flowTransform:je}),k.viewportChangeStart(je))},{passive:!1}):typeof _e<"u"&&me.on("wheel.zoom",function(W,F){if(!w.value&&W.type==="wheel"&&!W.ctrlKey||pe(W,m.value))return null;W.preventDefault(),_e.call(this,W,F)},{passive:!1})},{immediate:!0})});function te(re,se){return se===2&&Array.isArray(re)&&re.includes(2)}function B(re){const se=re.ctrlKey&&Ka()?10:1;return-re.deltaY*(re.deltaMode===1?.05:re.deltaMode?1:.002)*se}function ae(re,se){return re.x!==se.x&&!Number.isNaN(se.x)||re.y!==se.y&&!Number.isNaN(se.y)||re.zoom!==se.k&&!Number.isNaN(se.k)}function Y(re){return{x:re.x,y:re.y,zoom:re.k}}function pe(re,se){return re.target.closest(`.${se}`)}return(re,se)=>(T(),Z("div",{ref_key:"viewportRef",ref:R,class:"vue-flow__viewport vue-flow__container"},[h(jg,{"is-selecting":K.value,class:tt({connecting:!!y(Q),dragging:y(S),draggable:D.value})},{default:b(()=>[h(Lg,null,{default:b(()=>[Ve(re.$slots,"default")]),_:3})]),_:3},8,["is-selecting","class"])],512))}}),Hg=["id"],Yg=["id"],Zg=["id"],Jg={name:"A11yDescriptions",compatConfig:{MODE:3}},Kg=Re({...Jg,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Xe();return(a,l)=>(T(),Z(ge,null,[Ce("div",{id:`${y(sc)}-${y(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+J(y(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Hg),Ce("div",{id:`${y(uc)}-${y(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Yg),y(n)?ce("",!0):(T(),Z("div",{key:0,id:`${y(k_)}-${y(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},J(y(o)),9,Zg))],64))}});function ey(){const e=Xe();ke(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function ty(e,t,n){return n===ve.Left?e-t:n===ve.Right?e+t:e}function ny(e,t,n){return n===ve.Top?e-t:n===ve.Bottom?e+t:e}const ci=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=ve.Top,type:a}){return Ne("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${a}`,cx:ty(t,e,o),cy:ny(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};ci.props=["radius","centerX","centerY","position","type"];ci.compatConfig={MODE:3};const gs=ci,oy=Re({name:"Edge",compatConfig:{MODE:3},props:["name","type","id","updatable","selectable","focusable","edge"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:a,emits:l,nodesSelectionActive:r,noPanClassName:i,getEdgeTypes:s,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:p,multiSelectionActive:f,disableKeyboardA11y:g}=Xe(),w=P_(e.edge,l),m=Po(e,"edge"),v=j(!1),k=j(!1),Q=j(""),$=j(null),S=j("source"),E=j(null);In(T_,e.id),In(E_,E);const x=we(()=>m.value.class instanceof Function?m.value.class(m.value):m.value.class),I=we(()=>m.value.style instanceof Function?m.value.style(m.value):m.value.style),{handlePointerDown:U}=mc({nodeId:Q,handleId:$,type:S,isValidConnection:p,edgeUpdaterType:S,onEdgeUpdate:ee,onEdgeUpdateEnd:G});return()=>{const B=d(m.value.source),ae=d(m.value.target),Y="pathOptions"in m.value?m.value.pathOptions:{};if(!B&&!ae)return l.error(new it(at.EDGE_SOURCE_TARGET_MISSING,m.value.id,m.value.source,m.value.target)),null;if(!B)return l.error(new it(at.EDGE_SOURCE_MISSING,m.value.id,m.value.source)),null;if(!ae)return l.error(new it(at.EDGE_TARGET_MISSING,m.value.id,m.value.target)),null;if(!m||B.hidden||ae.hidden)return null;let pe;o.value===Wn.Strict?pe=B.handleBounds.source:pe=[...B.handleBounds.source||[],...B.handleBounds.target||[]];const re=rs(pe,m.value.sourceHandle);let se;o.value===Wn.Strict?se=ae.handleBounds.target:se=[...ae.handleBounds.target||[],...ae.handleBounds.source||[]];const H=rs(se,m.value.targetHandle),me=re?re.position:ve.Bottom,_e=H?H.position:ve.Top,{sourceX:De,sourceY:z,targetY:A,targetX:W}=H_(B,re,me,ae,H,_e);return m.value.sourceX=De,m.value.sourceY=z,m.value.targetX=W,m.value.targetY=A,Ne("g",{ref:E,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${e.type===!1?"default":e.name}`,i.value,x.value,{updating:v.value,selected:m.value.selected,animated:m.value.animated,inactive:!e.selectable}],onClick:C,onContextmenu:O,onDblclick:N,onMouseenter:M,onMousemove:P,onMouseleave:D,onKeyDown:e.focusable?te:void 0,tabIndex:e.focusable?0:void 0,"aria-label":m.value.ariaLabel===null?void 0:m.value.ariaLabel||`Edge from ${m.value.source} to ${m.value.target}`,"aria-describedby":e.focusable?`${uc}-${t}`:void 0,role:e.focusable?"button":"img"},[k.value?null:Ne(e.type===!1?s.value.default:e.type,{id:e.id,sourceNode:B,targetNode:ae,source:m.value.source,target:m.value.target,type:m.value.type,updatable:e.updatable,selected:m.value.selected,animated:m.value.animated,label:m.value.label,labelStyle:m.value.labelStyle,labelShowBg:m.value.labelShowBg,labelBgStyle:m.value.labelBgStyle,labelBgPadding:m.value.labelBgPadding,labelBgBorderRadius:m.value.labelBgBorderRadius,data:m.value.data,events:{...m.value.events,...w.on},style:I.value,markerStart:`url('#${Cn(m.value.markerStart,t)}')`,markerEnd:`url('#${Cn(m.value.markerEnd,t)}')`,sourcePosition:me,targetPosition:_e,sourceX:De,sourceY:z,targetX:W,targetY:A,sourceHandleId:m.value.sourceHandle,targetHandleId:m.value.targetHandle,interactionWidth:m.value.interactionWidth,...Y}),[e.updatable==="source"||e.updatable===!0?[Ne("g",{onMousedown:q,onMouseenter:R,onMouseout:L},Ne(gs,{position:me,centerX:De,centerY:z,radius:a.value,type:"source","data-type":"source"}))]:null,e.updatable==="target"||e.updatable===!0?[Ne("g",{onMousedown:K,onMouseenter:R,onMouseout:L},Ne(gs,{position:_e,centerX:W,centerY:A,radius:a.value,type:"target","data-type":"target"}))]:null]])};function R(){v.value=!0}function L(){v.value=!1}function ee(B,ae){w.emit.update({event:B,edge:m.value,connection:ae})}function G(B){w.emit.updateEnd({event:B,edge:m.value}),k.value=!1}function _(B,ae){B.button===0&&(k.value=!0,Q.value=ae?m.value.target:m.value.source,$.value=(ae?m.value.targetHandle:m.value.sourceHandle)??"",S.value=ae?"target":"source",w.emit.updateStart({event:B,edge:m.value}),U(B))}function C(B){var ae;const Y={event:B,edge:m.value};e.selectable&&(r.value=!1,m.value.selected&&f.value?(u([m.value]),(ae=E.value)==null||ae.blur()):n([m.value])),w.emit.click(Y)}function O(B){w.emit.contextMenu({event:B,edge:m.value})}function N(B){w.emit.doubleClick({event:B,edge:m.value})}function M(B){w.emit.mouseEnter({event:B,edge:m.value})}function P(B){w.emit.mouseMove({event:B,edge:m.value})}function D(B){w.emit.mouseLeave({event:B,edge:m.value})}function q(B){_(B,!0)}function K(B){_(B,!1)}function te(B){var ae;!g.value&&cc.includes(B.key)&&e.selectable&&(B.key==="Escape"?((ae=E.value)==null||ae.blur(),u([c(e.id)])):n([c(e.id)]))}}}),ay=oy,ly={[ve.Left]:ve.Right,[ve.Right]:ve.Left,[ve.Top]:ve.Bottom,[ve.Bottom]:ve.Top},ry=Re({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:a,connectionPosition:l,connectionLineType:r,connectionLineStyle:i,connectionLineOptions:s,connectionStatus:u,viewport:c,findNode:d}=Xe(),p=(e=On(Sl))==null?void 0:e["connection-line"];return()=>{var f,g,w,m,v;if(!o.value)return null;const k=d(o.value.nodeId);if(!k)return null;const Q=o.value.handleId,$=o.value.type,S=((f=a.value)==null?void 0:f.handleId)&&d(a.value.nodeId)||null,E=(l.value.x-c.value.x)/c.value.zoom,x=(l.value.y-c.value.y)/c.value.zoom,I=k.handleBounds;let U=I==null?void 0:I[$];if(n.value===Wn.Loose&&(U=U||(I==null?void 0:I[$==="source"?"target":"source"])),!U)return null;const R=(Q?U.find(P=>P.id===Q):U[0])??null,L=(R==null?void 0:R.position)||ve.Top,{x:ee,y:G}=xr(L,{...k.dimensions,...k.computedPosition},R),_=S&&((g=a.value)==null?void 0:g.handleId)&&((n.value===Wn.Strict?(w=S.handleBounds[$==="source"?"target":"source"])==null?void 0:w.find(P=>{var D;return P.id===((D=a.value)==null?void 0:D.handleId)}):(m=[...S.handleBounds.source||[],...S.handleBounds.target||[]])==null?void 0:m.find(P=>{var D;return P.id===((D=a.value)==null?void 0:D.handleId)}))||((v=S.handleBounds[$??"target"])==null?void 0:v[0]))||null,C=L?ly[L]:null;if(!L||!C)return null;const O=r.value??s.value.type??En.Bezier;let N="";const M={sourceX:ee,sourceY:G,sourcePosition:L,targetX:E,targetY:x,targetPosition:C};return O===En.Bezier?[N]=Cc(M):O===En.Step?[N]=kr({...M,borderRadius:0}):O===En.SmoothStep?[N]=kr(M):O===En.SimpleBezier?[N]=Dc(M):N=`M${ee},${G} ${E},${x}`,Ne("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},Ne("g",{class:"vue-flow__connection"},p?Ne(p,{sourceX:ee,sourceY:G,sourcePosition:L,targetX:E,targetY:x,targetPosition:C,sourceNode:k,sourceHandle:R,targetNode:S,targetHandle:_,markerEnd:`url(#${Cn(s.value.markerEnd,t)})`,markerStart:`url(#${Cn(s.value.markerStart,t)})`,connectionStatus:u.value}):Ne("path",{d:N,class:[s.value.class,u,"vue-flow__connection-path"],style:{...i.value,...s.value.style},"marker-end":`url(#${Cn(s.value.markerEnd,t)})`,"marker-start":`url(#${Cn(s.value.markerStart,t)})`})))}}}),iy=ry,sy=["id","markerWidth","markerHeight","markerUnits","orient"],uy={name:"MarkerType",compatConfig:{MODE:3}},cy=Re({...uy,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(T(),Z("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===y(Or).ArrowClosed?(T(),Z("polyline",{key:0,style:lt({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):ce("",!0),t.type===y(Or).Arrow?(T(),Z("polyline",{key:1,style:lt({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):ce("",!0)],8,sy))}}),dy={name:"MarkerDefinitions",compatConfig:{MODE:3}},py=Re({...dy,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:a}=Xe(),l=we(()=>{const r=[],i=[],s=u=>{if(u){const c=Cn(u,t);r.includes(c)||(typeof u=="object"?i.push({...u,id:c,color:u.color||a.value}):i.push({id:c,color:a.value,type:u}),r.push(c))}};for(const u of[o.value.markerEnd,o.value.markerStart])s(u);return n.value.reduce((u,c)=>{for(const d of[c.markerStart,c.markerEnd])s(d);return u.sort((d,p)=>d.id.localeCompare(p.id))},i),i});return(r,i)=>(T(),Z("defs",null,[(T(!0),Z(ge,null,Ae(l.value,s=>(T(),X(cy,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,"stroke-width":s.strokeWidth,orient:s.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))]))}}),fy={class:"vue-flow__edges vue-flow__container"},my={name:"Edges",compatConfig:{MODE:3}},hy=Re({...my,setup(e){const t=On(Sl),{edgesUpdatable:n,edgesFocusable:o,elementsSelectable:a,findNode:l,getEdges:r,getEdgeTypes:i,elevateEdgesOnSelect:s,dimensions:u,emits:c}=Xe(),d=Gn();function p(m){return typeof m>"u"?a.value:m}function f(m){return typeof m>"u"?n.value:m}function g(m){return typeof m>"u"?o.value:m}function w(m,v){const k=m||"default",Q=t==null?void 0:t[`edge-${k}`];if(Q)return Q;let $=v??i.value[k];if(typeof $=="string"&&d){const S=Object.keys(d.appContext.components);S&&S.includes(k)&&($=V(k,!1))}return $&&typeof $!="string"?$:(c.error(new it(at.EDGE_TYPE_MISSING,$)),!1)}return(m,v)=>y(u).width&&y(u).height?(T(),Z(ge,{key:0},[(T(),Z("svg",fy,[h(py)])),(T(!0),Z(ge,null,Ae(y(r),k=>(T(),Z("svg",{key:k.id,class:"vue-flow__edges vue-flow__container",style:lt({zIndex:y(Z_)(k,y(l),y(s))})},[h(y(ay),{id:k.id,edge:k,type:w(k.type,k.template),name:k.type||"default",selectable:p(k.selectable),updatable:f(k.updatable),focusable:g(k.focusable)},null,8,["id","edge","type","name","selectable","updatable","focusable"])],4))),128)),h(y(iy))],64)):ce("",!0)}}),vy=Re({name:"Node",compatConfig:{MODE:3},props:["name","type","id","draggable","selectable","focusable","connectable","node","resizeObserver"],setup(e){In(li,e.id);const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:a,multiSelectionActive:l,emits:r,findNode:i,removeSelectedNodes:s,addSelectedNodes:u,updateNodeDimensions:c,onUpdateNodeInternals:d,getIntersectingNodes:p,getNodeTypes:f,nodeExtent:g,elevateNodesOnSelect:w,disableKeyboardA11y:m,ariaLiveMessage:v,snapToGrid:k,snapGrid:Q,nodeDragThreshold:$,getConnectedEdges:S}=Xe(),E=hc(),x=Po(e,"node"),I=we(()=>{var Y;return i((Y=x.value)==null?void 0:Y.parentNode)}),U=we(()=>S(x.value?[x.value]:[])),R=j(null);In(pc,R);const{emit:L,on:ee}=q_(x.value,r),G=dc({id:e.id,el:R,disabled:()=>!e.draggable,selectable:()=>e.selectable,dragHandle:()=>x.value.dragHandle,onStart(Y){L.dragStart({...Y,intersections:p(x.value)})},onDrag(Y){L.drag({...Y,intersections:p(x.value)})},onStop(Y){L.dragStop({...Y,intersections:p(x.value)})}}),_=we(()=>x.value.class instanceof Function?x.value.class(x.value):x.value.class),C=we(()=>{const Y=(x.value.style instanceof Function?x.value.style(x.value):x.value.style)||{},pe=x.value.width instanceof Function?x.value.width(x.value):x.value.width,re=x.value.height instanceof Function?x.value.height(x.value):x.value.height;return pe&&(Y.width=typeof pe=="string"?pe:`${pe}px`),re&&(Y.height=typeof re=="string"?re:`${re}px`),Y}),O=Ue(()=>Number(x.value.zIndex??C.value.zIndex??0));return d(Y=>{Y.includes(e.id)&&M()}),bn(()=>{e.resizeObserver.observe(R.value)}),Lr(()=>{e.resizeObserver.unobserve(R.value)}),ke([()=>x.value.type,()=>x.value.sourcePosition,()=>x.value.targetPosition],()=>{St(()=>{c([{id:e.id,nodeElement:R.value,forceUpdate:!0}])})}),ke([()=>x.value.position.x,()=>x.value.position.y,()=>{var Y;return(Y=I.value)==null?void 0:Y.computedPosition.x},()=>{var Y;return(Y=I.value)==null?void 0:Y.computedPosition.y},()=>{var Y;return(Y=I.value)==null?void 0:Y.computedPosition.z},O,()=>x.value.selected,()=>x.value.dimensions.height,()=>x.value.dimensions.width,()=>{var Y;return(Y=I.value)==null?void 0:Y.dimensions.height},()=>{var Y;return(Y=I.value)==null?void 0:Y.dimensions.width}],([Y,pe,re,se,H,me])=>{const _e={x:Y,y:pe,z:me+(w.value&&x.value.selected?1e3:0)};typeof re<"u"&&typeof se<"u"?x.value.computedPosition=j_({x:re,y:se,z:H},_e):x.value.computedPosition=_e},{flush:"post",immediate:!0}),ke([()=>x.value.extent,g],([Y,pe],[re,se])=>{(Y!==re||pe!==se)&&N()}),x.value.extent==="parent"||typeof x.value.extent=="object"&&"range"in x.value.extent&&x.value.extent.range==="parent"?Fa(()=>x.value.initialized).toBe(!0).then(N):N(),()=>Ne("div",{ref:R,"data-id":x.value.id,class:["vue-flow__node",`vue-flow__node-${e.type===!1?"default":e.name}`,{[n.value]:e.draggable,dragging:G==null?void 0:G.value,draggable:e.draggable,selected:x.value.selected,selectable:e.selectable,parent:x.value.isParent},_.value],style:{visibility:x.value.initialized?"visible":"hidden",zIndex:x.value.computedPosition.z??O.value,transform:`translate(${x.value.computedPosition.x}px,${x.value.computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none",...C.value},tabIndex:e.focusable?0:void 0,role:e.focusable?"button":void 0,"aria-describedby":m.value?void 0:`${sc}-${t}`,"aria-label":x.value.ariaLabel,onMouseenter:P,onMousemove:D,onMouseleave:q,onContextmenu:K,onClick:B,onDblclick:te,onKeydown:ae},[Ne(e.type===!1?f.value.default:e.type,{id:x.value.id,type:x.value.type,data:x.value.data,events:{...x.value.events,...ee},selected:x.value.selected,resizing:x.value.resizing,dragging:G.value,connectable:e.connectable,position:x.value.computedPosition,dimensions:x.value.dimensions,isValidTargetPos:x.value.isValidTargetPos,isValidSourcePos:x.value.isValidSourcePos,parent:x.value.parentNode,parentNodeId:x.value.parentNode,zIndex:x.value.computedPosition.z??O.value,targetPosition:x.value.targetPosition,sourcePosition:x.value.sourcePosition,label:x.value.label,dragHandle:x.value.dragHandle,onUpdateNodeInternals:M})]);function N(){const Y=x.value.computedPosition;k.value&&(Y.x=Q.value[0]*Math.round(Y.x/Q.value[0]),Y.y=Q.value[1]*Math.round(Y.y/Q.value[1]));const{computedPosition:pe,position:re}=ii(x.value,Y,r.error,g.value,I.value);(x.value.computedPosition.x!==pe.x||x.value.computedPosition.y!==pe.y)&&(x.value.computedPosition={...x.value.computedPosition,...pe}),(x.value.position.x!==re.x||x.value.position.y!==re.y)&&(x.value.position=re)}function M(){R.value&&c([{id:e.id,nodeElement:R.value,forceUpdate:!0}])}function P(Y){G!=null&&G.value||L.mouseEnter({event:Y,node:x.value,connectedEdges:U.value})}function D(Y){G!=null&&G.value||L.mouseMove({event:Y,node:x.value,connectedEdges:U.value})}function q(Y){G!=null&&G.value||L.mouseLeave({event:Y,node:x.value,connectedEdges:U.value})}function K(Y){return L.contextMenu({event:Y,node:x.value,connectedEdges:U.value})}function te(Y){return L.doubleClick({event:Y,node:x.value,connectedEdges:U.value})}function B(Y){e.selectable&&(!o.value||!e.draggable||$.value>0)&&$r(x.value,l.value,u,s,a,!1,R.value),L.click({event:Y,node:x.value,connectedEdges:U.value})}function ae(Y){if(!(br(Y)||m.value))if(cc.includes(Y.key)&&e.selectable){const pe=Y.key==="Escape";$r(x.value,l.value,u,s,a,pe,R.value)}else e.draggable&&x.value.selected&&ao[Y.key]&&(v.value=`Moved selected node ${Y.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~x.value.position.x}, y: ${~~x.value.position.y}`,E({x:ao[Y.key].x,y:ao[Y.key].y},Y.shiftKey))}}}),_y=vy;function gy(e={includeHiddenNodes:!1}){const{nodes:t}=Xe();return we(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const yy={class:"vue-flow__nodes vue-flow__container"},Oy={name:"Nodes",compatConfig:{MODE:3}},by=Re({...Oy,setup(e){const{nodes:t,nodesDraggable:n,nodesFocusable:o,elementsSelectable:a,nodesConnectable:l,getNodes:r,getNodeTypes:i,updateNodeDimensions:s,emits:u}=Xe(),c=gy(),d=On(Sl),p=j(),f=Gn();ke(c,Q=>{Q&&St(()=>{u.nodesInitialized(t.value)})},{immediate:!0}),bn(()=>{p.value=new ResizeObserver(Q=>{const $=Q.map(S=>({id:S.target.getAttribute("data-id"),nodeElement:S.target,forceUpdate:!0}));St(()=>s($))})}),Lr(()=>{var Q;return(Q=p.value)==null?void 0:Q.disconnect()});function g(Q){return typeof Q>"u"?n.value:Q}function w(Q){return typeof Q>"u"?a.value:Q}function m(Q){return typeof Q>"u"?l.value:Q}function v(Q){return typeof Q>"u"?o.value:Q}function k(Q,$){const S=Q||"default",E=d==null?void 0:d[`node-${S}`];if(E)return E;let x=$??i.value[S];if(typeof x=="string"&&f){const I=Object.keys(f.appContext.components);I&&I.includes(S)&&(x=V(S,!1))}return x&&typeof x!="string"?x:(u.error(new it(at.NODE_TYPE_MISSING,x)),!1)}return(Q,$)=>(T(),Z("div",yy,[p.value?(T(!0),Z(ge,{key:0},Ae(y(r),S=>(T(),X(y(_y),{id:S.id,key:S.id,"resize-observer":p.value,type:k(S.type,S.template),name:S.type||"default",draggable:g(S.draggable),selectable:w(S.selectable),connectable:m(S.connectable),focusable:v(S.focusable),node:S},null,8,["id","resize-observer","type","name","draggable","selectable","connectable","focusable","node"]))),128)):ce("",!0)]))}}),wy=Ce("div",{class:"vue-flow__edge-labels"},null,-1),Sy={name:"VueFlow",compatConfig:{MODE:3}},xy=Re({...Sy,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0}},emits:["nodesChange","edgesChange","nodesInitialized","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneReady","init","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","updateNodeInternals","error","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,a=pu(),l=Po(o,"modelValue",n),r=Po(o,"nodes",n),i=Po(o,"edges",n),{vueFlowRef:s,hooks:u,getNodeTypes:c,getEdgeTypes:d,...p}=Xe(o),f=R_({modelValue:l,nodes:r,edges:i},o,{vueFlowRef:s,hooks:u,getNodeTypes:c,getEdgeTypes:d,...p});return lg(n,u),ey(),In(Sl,a),fl(()=>{f()}),t({vueFlowRef:s,hooks:u,getNodeTypes:c,getEdgeTypes:d,...p}),(g,w)=>(T(),Z("div",{ref_key:"vueFlowRef",ref:s,class:"vue-flow"},[h(Bg,null,{default:b(()=>[h(hy),wy,h(by),Ve(g.$slots,"zoom-pane")]),_:3}),Ve(g.$slots,"default"),h(Kg)],512))}}),$y={name:"Panel",compatConfig:{MODE:3}},qc=Re({...$y,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=Xe(),o=we(()=>`${t.position}`.split("-"));return(a,l)=>(T(),Z("div",{class:tt(["vue-flow__panel",o.value]),style:lt({pointerEvents:y(n)?"none":"all"})},[Ve(a.$slots,"default")],6))}});var Tr="http://www.w3.org/1999/xhtml";const ys={svg:"http://www.w3.org/2000/svg",xhtml:Tr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Nc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ys.hasOwnProperty(t)?{space:ys[t],local:e}:e}function ky(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Tr&&t.documentElement.namespaceURI===Tr?t.createElement(e):t.createElementNS(n,e)}}function Ty(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Mc(e){var t=Nc(e);return(t.local?Ty:ky)(t)}function Ey(){}function Rc(e){return e==null?Ey:function(){return this.querySelector(e)}}function Qy(e){typeof e!="function"&&(e=Rc(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var l=t[a],r=l.length,i=o[a]=new Array(r),s,u,c=0;c<r;++c)(s=l[c])&&(u=e.call(s,s.__data__,c,l))&&("__data__"in s&&(u.__data__=s.__data__),i[c]=u);return new xt(o,this._parents)}function Py(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Cy(){return[]}function Dy(e){return e==null?Cy:function(){return this.querySelectorAll(e)}}function zy(e){return function(){return Py(e.apply(this,arguments))}}function qy(e){typeof e=="function"?e=zy(e):e=Dy(e);for(var t=this._groups,n=t.length,o=[],a=[],l=0;l<n;++l)for(var r=t[l],i=r.length,s,u=0;u<i;++u)(s=r[u])&&(o.push(e.call(s,s.__data__,u,r)),a.push(s));return new xt(o,a)}function Ny(e){return function(){return this.matches(e)}}function Ic(e){return function(t){return t.matches(e)}}var My=Array.prototype.find;function Ry(e){return function(){return My.call(this.children,e)}}function Iy(){return this.firstElementChild}function Vy(e){return this.select(e==null?Iy:Ry(typeof e=="function"?e:Ic(e)))}var Ay=Array.prototype.filter;function Xy(){return Array.from(this.children)}function Uy(e){return function(){return Ay.call(this.children,e)}}function Wy(e){return this.selectAll(e==null?Xy:Uy(typeof e=="function"?e:Ic(e)))}function jy(e){typeof e!="function"&&(e=Ny(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var l=t[a],r=l.length,i=o[a]=[],s,u=0;u<r;++u)(s=l[u])&&e.call(s,s.__data__,u,l)&&i.push(s);return new xt(o,this._parents)}function Vc(e){return new Array(e.length)}function Fy(){return new xt(this._enter||this._groups.map(Vc),this._parents)}function el(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}el.prototype={constructor:el,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ly(e){return function(){return e}}function Gy(e,t,n,o,a,l){for(var r=0,i,s=t.length,u=l.length;r<u;++r)(i=t[r])?(i.__data__=l[r],o[r]=i):n[r]=new el(e,l[r]);for(;r<s;++r)(i=t[r])&&(a[r]=i)}function By(e,t,n,o,a,l,r){var i,s,u=new Map,c=t.length,d=l.length,p=new Array(c),f;for(i=0;i<c;++i)(s=t[i])&&(p[i]=f=r.call(s,s.__data__,i,t)+"",u.has(f)?a[i]=s:u.set(f,s));for(i=0;i<d;++i)f=r.call(e,l[i],i,l)+"",(s=u.get(f))?(o[i]=s,s.__data__=l[i],u.delete(f)):n[i]=new el(e,l[i]);for(i=0;i<c;++i)(s=t[i])&&u.get(p[i])===s&&(a[i]=s)}function Hy(e){return e.__data__}function Yy(e,t){if(!arguments.length)return Array.from(this,Hy);var n=t?By:Gy,o=this._parents,a=this._groups;typeof e!="function"&&(e=Ly(e));for(var l=a.length,r=new Array(l),i=new Array(l),s=new Array(l),u=0;u<l;++u){var c=o[u],d=a[u],p=d.length,f=Zy(e.call(c,c&&c.__data__,u,o)),g=f.length,w=i[u]=new Array(g),m=r[u]=new Array(g),v=s[u]=new Array(p);n(c,d,w,m,v,f,t);for(var k=0,Q=0,$,S;k<g;++k)if($=w[k]){for(k>=Q&&(Q=k+1);!(S=m[Q])&&++Q<g;);$._next=S||null}}return r=new xt(r,o),r._enter=i,r._exit=s,r}function Zy(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Jy(){return new xt(this._exit||this._groups.map(Vc),this._parents)}function Ky(e,t,n){var o=this.enter(),a=this,l=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?l.remove():n(l),o&&a?o.merge(a).order():a}function eO(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,a=n.length,l=o.length,r=Math.min(a,l),i=new Array(a),s=0;s<r;++s)for(var u=n[s],c=o[s],d=u.length,p=i[s]=new Array(d),f,g=0;g<d;++g)(f=u[g]||c[g])&&(p[g]=f);for(;s<a;++s)i[s]=n[s];return new xt(i,this._parents)}function tO(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],a=o.length-1,l=o[a],r;--a>=0;)(r=o[a])&&(l&&r.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(r,l),l=r);return this}function nO(e){e||(e=oO);function t(d,p){return d&&p?e(d.__data__,p.__data__):!d-!p}for(var n=this._groups,o=n.length,a=new Array(o),l=0;l<o;++l){for(var r=n[l],i=r.length,s=a[l]=new Array(i),u,c=0;c<i;++c)(u=r[c])&&(s[c]=u);s.sort(t)}return new xt(a,this._parents).order()}function oO(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function aO(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function lO(){return Array.from(this)}function rO(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,l=o.length;a<l;++a){var r=o[a];if(r)return r}return null}function iO(){let e=0;for(const t of this)++e;return e}function sO(){return!this.node()}function uO(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var a=t[n],l=0,r=a.length,i;l<r;++l)(i=a[l])&&e.call(i,i.__data__,l,a);return this}function cO(e){return function(){this.removeAttribute(e)}}function dO(e){return function(){this.removeAttributeNS(e.space,e.local)}}function pO(e,t){return function(){this.setAttribute(e,t)}}function fO(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function mO(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function hO(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function vO(e,t){var n=Nc(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?dO:cO:typeof t=="function"?n.local?hO:mO:n.local?fO:pO)(n,t))}function Ac(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _O(e){return function(){this.style.removeProperty(e)}}function gO(e,t,n){return function(){this.style.setProperty(e,t,n)}}function yO(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function OO(e,t,n){return arguments.length>1?this.each((t==null?_O:typeof t=="function"?yO:gO)(e,t,n??"")):bO(this.node(),e)}function bO(e,t){return e.style.getPropertyValue(t)||Ac(e).getComputedStyle(e,null).getPropertyValue(t)}function wO(e){return function(){delete this[e]}}function SO(e,t){return function(){this[e]=t}}function xO(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function $O(e,t){return arguments.length>1?this.each((t==null?wO:typeof t=="function"?xO:SO)(e,t)):this.node()[e]}function Xc(e){return e.trim().split(/^|\s+/)}function di(e){return e.classList||new Uc(e)}function Uc(e){this._node=e,this._names=Xc(e.getAttribute("class")||"")}Uc.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Wc(e,t){for(var n=di(e),o=-1,a=t.length;++o<a;)n.add(t[o])}function jc(e,t){for(var n=di(e),o=-1,a=t.length;++o<a;)n.remove(t[o])}function kO(e){return function(){Wc(this,e)}}function TO(e){return function(){jc(this,e)}}function EO(e,t){return function(){(t.apply(this,arguments)?Wc:jc)(this,e)}}function QO(e,t){var n=Xc(e+"");if(arguments.length<2){for(var o=di(this.node()),a=-1,l=n.length;++a<l;)if(!o.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?EO:t?kO:TO)(n,t))}function PO(){this.textContent=""}function CO(e){return function(){this.textContent=e}}function DO(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function zO(e){return arguments.length?this.each(e==null?PO:(typeof e=="function"?DO:CO)(e)):this.node().textContent}function qO(){this.innerHTML=""}function NO(e){return function(){this.innerHTML=e}}function MO(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function RO(e){return arguments.length?this.each(e==null?qO:(typeof e=="function"?MO:NO)(e)):this.node().innerHTML}function IO(){this.nextSibling&&this.parentNode.appendChild(this)}function VO(){return this.each(IO)}function AO(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function XO(){return this.each(AO)}function UO(e){var t=typeof e=="function"?e:Mc(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function WO(){return null}function jO(e,t){var n=typeof e=="function"?e:Mc(e),o=t==null?WO:typeof t=="function"?t:Rc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function FO(){var e=this.parentNode;e&&e.removeChild(this)}function LO(){return this.each(FO)}function GO(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function BO(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function HO(e){return this.select(e?BO:GO)}function YO(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ZO(e){return function(t){e.call(this,t,this.__data__)}}function JO(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function KO(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,a=t.length,l;n<a;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++o]=l;++o?t.length=o:delete this.__on}}}function e0(e,t,n){return function(){var o=this.__on,a,l=ZO(t);if(o){for(var r=0,i=o.length;r<i;++r)if((a=o[r]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=t;return}}this.addEventListener(e.type,l,n),a={type:e.type,name:e.name,value:t,listener:l,options:n},o?o.push(a):this.__on=[a]}}function t0(e,t,n){var o=JO(e+""),a,l=o.length,r;if(arguments.length<2){var i=this.node().__on;if(i){for(var s=0,u=i.length,c;s<u;++s)for(a=0,c=i[s];a<l;++a)if((r=o[a]).type===c.type&&r.name===c.name)return c.value}return}for(i=t?e0:KO,a=0;a<l;++a)this.each(i(o[a],t,n));return this}function Fc(e,t,n){var o=Ac(e),a=o.CustomEvent;typeof a=="function"?a=new a(t,n):(a=o.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function n0(e,t){return function(){return Fc(this,e,t)}}function o0(e,t){return function(){return Fc(this,e,t.apply(this,arguments))}}function a0(e,t){return this.each((typeof t=="function"?o0:n0)(e,t))}function*l0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,l=o.length,r;a<l;++a)(r=o[a])&&(yield r)}var r0=[null];function xt(e,t){this._groups=e,this._parents=t}function i0(){return this}xt.prototype={constructor:xt,select:Qy,selectAll:qy,selectChild:Vy,selectChildren:Wy,filter:jy,data:Yy,enter:Fy,exit:Jy,join:Ky,merge:eO,selection:i0,order:tO,sort:nO,call:aO,nodes:lO,node:rO,size:iO,empty:sO,each:uO,attr:vO,style:OO,property:$O,classed:QO,text:zO,html:RO,raise:VO,lower:XO,append:UO,insert:jO,remove:LO,clone:HO,datum:YO,on:t0,dispatch:a0,[Symbol.iterator]:l0};function Fo(e){return typeof e=="string"?new xt([[document.querySelector(e)]],[document.documentElement]):new xt([[e]],r0)}function s0(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Os(e,t){if(e=s0(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}var u0={value:()=>{}};function Lc(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new za(n)}function za(e){this._=e}function c0(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",a=n.indexOf(".");if(a>=0&&(o=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}za.prototype=Lc.prototype={constructor:za,on:function(e,t){var n=this._,o=c0(e+"",n),a,l=-1,r=o.length;if(arguments.length<2){for(;++l<r;)if((a=(e=o[l]).type)&&(a=d0(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<r;)if(a=(e=o[l]).type)n[a]=bs(n[a],e.name,t);else if(t==null)for(a in n)n[a]=bs(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new za(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),o=0,a,l;o<a;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],o=0,a=l.length;o<a;++o)l[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],a=0,l=o.length;a<l;++a)o[a].value.apply(t,n)}};function d0(e,t){for(var n=0,o=e.length,a;n<o;++n)if((a=e[n]).name===t)return a.value}function bs(e,t,n){for(var o=0,a=e.length;o<a;++o)if(e[o].name===t){e[o]=u0,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}const p0={passive:!1},Lo={capture:!0,passive:!1};function Gl(e){e.stopImmediatePropagation()}function lo(e){e.preventDefault(),e.stopImmediatePropagation()}function f0(e){var t=e.document.documentElement,n=Fo(e).on("dragstart.drag",lo,Lo);"onselectstart"in t?n.on("selectstart.drag",lo,Lo):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function m0(e,t){var n=e.document.documentElement,o=Fo(e).on("dragstart.drag",null);t&&(o.on("click.drag",lo,Lo),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const va=e=>()=>e;function Er(e,{sourceEvent:t,subject:n,target:o,identifier:a,active:l,x:r,y:i,dx:s,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:i,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Er.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function h0(e){return!e.ctrlKey&&!e.button}function v0(){return this.parentNode}function _0(e,t){return t??{x:e.x,y:e.y}}function g0(){return navigator.maxTouchPoints||"ontouchstart"in this}function y0(){var e=h0,t=v0,n=_0,o=g0,a={},l=Lc("start","drag","end"),r=0,i,s,u,c,d=0;function p($){$.on("mousedown.drag",f).filter(o).on("touchstart.drag",m).on("touchmove.drag",v,p0).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f($,S){if(!(c||!e.call(this,$,S))){var E=Q(this,t.call(this,$,S),$,S,"mouse");E&&(Fo($.view).on("mousemove.drag",g,Lo).on("mouseup.drag",w,Lo),f0($.view),Gl($),u=!1,i=$.clientX,s=$.clientY,E("start",$))}}function g($){if(lo($),!u){var S=$.clientX-i,E=$.clientY-s;u=S*S+E*E>d}a.mouse("drag",$)}function w($){Fo($.view).on("mousemove.drag mouseup.drag",null),m0($.view,u),lo($),a.mouse("end",$)}function m($,S){if(e.call(this,$,S)){var E=$.changedTouches,x=t.call(this,$,S),I=E.length,U,R;for(U=0;U<I;++U)(R=Q(this,x,$,S,E[U].identifier,E[U]))&&(Gl($),R("start",$,E[U]))}}function v($){var S=$.changedTouches,E=S.length,x,I;for(x=0;x<E;++x)(I=a[S[x].identifier])&&(lo($),I("drag",$,S[x]))}function k($){var S=$.changedTouches,E=S.length,x,I;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),x=0;x<E;++x)(I=a[S[x].identifier])&&(Gl($),I("end",$,S[x]))}function Q($,S,E,x,I,U){var R=l.copy(),L=Os(U||E,S),ee,G,_;if((_=n.call($,new Er("beforestart",{sourceEvent:E,target:p,identifier:I,active:r,x:L[0],y:L[1],dx:0,dy:0,dispatch:R}),x))!=null)return ee=_.x-L[0]||0,G=_.y-L[1]||0,function C(O,N,M){var P=L,D;switch(O){case"start":a[I]=C,D=r++;break;case"end":delete a[I],--r;case"drag":L=Os(M||N,S),D=r;break}R.call(O,$,new Er(O,{sourceEvent:N,subject:_,target:p,identifier:I,active:D,x:L[0]+ee,y:L[1]+G,dx:L[0]-P[0],dy:L[1]-P[1],dispatch:R}),x)}}return p.filter=function($){return arguments.length?(e=typeof $=="function"?$:va(!!$),p):e},p.container=function($){return arguments.length?(t=typeof $=="function"?$:va($),p):t},p.subject=function($){return arguments.length?(n=typeof $=="function"?$:va($),p):n},p.touchable=function($){return arguments.length?(o=typeof $=="function"?$:va(!!$),p):o},p.on=function(){var $=l.on.apply(l,arguments);return $===l?p:$},p.clickDistance=function($){return arguments.length?(d=($=+$)*$,p):Math.sqrt(d)},p}var fo=(e=>(e.Line="line",e.Handle="handle",e))(fo||{});function O0({width:e,prevWidth:t,height:n,prevHeight:o,invertX:a,invertY:l}){const r=e-t,i=n-o,s=[r>0?1:r<0?-1:0,i>0?1:i<0?-1:0];return r&&a&&(s[0]=s[0]*-1),i&&l&&(s[1]=s[1]*-1),s}const b0={[fo.Line]:"right",[fo.Handle]:"bottom-right"},w0={[fo.Line]:"borderColor",[fo.Handle]:"backgroundColor"},S0={name:"ResizeControl",compatConfig:{MODE:3}},ws=Re({...S0,props:{nodeId:{},color:{},minWidth:{default:10},minHeight:{default:10},maxWidth:{default:Number.MAX_VALUE},maxHeight:{default:Number.MAX_VALUE},position:{},variant:{default:"handle"},shouldResize:{},keepAspectRatio:{type:[Boolean,Number],default:!1}},emits:["resizeStart","resize","resizeEnd"],setup(e,{emit:t}){const n=e,o={width:0,height:0,x:0,y:0},a={...o,pointerX:0,pointerY:0,aspectRatio:1},{findNode:l,emits:r}=Xe(),i=fc(),s=j();let u=a,c=o;const d=Ue(()=>n.position??b0[n.variant]),p=Ue(()=>d.value.split("-")),f=Ue(()=>n.color?{[w0[n.variant]]:n.color}:{});return _u(g=>{if(!s.value||!n.nodeId)return;const w=Fo(s.value),m=d.value.includes("right")||d.value.includes("left"),v=d.value.includes("bottom")||d.value.includes("top"),k=d.value.includes("left"),Q=d.value.includes("top"),$=y0().on("start",S=>{const E=l(n.nodeId),{xSnapped:x,ySnapped:I}=i(S);c={width:(E==null?void 0:E.dimensions.width)??0,height:(E==null?void 0:E.dimensions.height)??0,x:(E==null?void 0:E.position.x)??0,y:(E==null?void 0:E.position.y)??0},u={...c,pointerX:x,pointerY:I,aspectRatio:c.width/c.height},t("resizeStart",{event:S,params:c})}).on("drag",S=>{var E;const{xSnapped:x,ySnapped:I}=i(S),U=l(n.nodeId);if(U){const R=[],{pointerX:L,pointerY:ee,width:G,height:_,x:C,y:O,aspectRatio:N}=u,{x:M,y:P,width:D,height:q}=c,K=Math.floor(m?x-L:0),te=Math.floor(v?I-ee:0);let B=an(G+(k?-K:K),n.minWidth,n.maxWidth),ae=an(_+(Q?-te:te),n.minHeight,n.maxHeight);if(n.keepAspectRatio){const me=B/ae;let _e=N;typeof n.keepAspectRatio=="number"&&me!==n.keepAspectRatio&&(_e=n.keepAspectRatio);const De=m&&v,z=m&&!v,A=v&&!m;B=me<=_e&&De||A?ae*_e:B,ae=me>_e&&De||z?B/_e:ae,B>=n.maxWidth?(B=n.maxWidth,ae=n.maxWidth/_e):B<=n.minWidth&&(B=n.minWidth,ae=n.minWidth/_e),ae>=n.maxHeight?(ae=n.maxHeight,B=n.maxHeight*_e):ae<=n.minHeight&&(ae=n.minHeight,B=n.minHeight*_e)}const Y=B!==D,pe=ae!==q;if(k||Q){const me=k?C-(B-G):C,_e=Q?O-(ae-_):O,De=me!==M&&Y,z=_e!==P&&pe;if(De||z){const A={id:U.id,type:"position",from:U.position,position:{x:De?me:M,y:z?_e:P}};R.push(A),c.x=A.position.x,c.y=A.position.y}}if(n.nodeId&&(Y||pe)){const me={id:n.nodeId,type:"dimensions",updateStyle:!0,resizing:!0,dimensions:{width:B,height:ae}};R.push(me),c.width=B,c.height=ae}if(R.length===0)return;const re=O0({width:c.width,prevWidth:D,height:c.height,prevHeight:q,invertX:k,invertY:Q}),se={...c,direction:re};if(((E=n.shouldResize)==null?void 0:E.call(n,S,se))===!1)return;t("resize",{event:S,params:se}),r.nodesChange(R)}}).on("end",S=>{if(n.nodeId){const E={id:n.nodeId,type:"dimensions",resizing:!1};t("resizeEnd",{event:S,params:c}),r.nodesChange([E])}});w.call($),g(()=>{w.on(".drag",null)})}),(g,w)=>(T(),Z("div",{ref_key:"resizeControlRef",ref:s,class:tt(["vue-flow__resize-control nodrag",[...p.value,g.variant]]),style:lt(f.value)},[Ve(g.$slots,"default")],6))}}),x0={name:"NodeResizer",compatConfig:{MODE:3},inheritAttrs:!1},$0=Re({...x0,props:{nodeId:{},color:{},handleClassName:{},handleStyle:{},lineClassName:{},lineStyle:{},isVisible:{type:Boolean,default:!0},minWidth:{},minHeight:{},maxWidth:{},maxHeight:{},shouldResize:{},keepAspectRatio:{type:[Boolean,Number]}},emits:["resizeStart","resize","resizeEnd"],setup(e,{emit:t}){const n=e,{findNode:o,emits:a}=Xe(),l=["top-left","top-right","bottom-left","bottom-right"],r=["top","right","bottom","left"],i=On(li,null),s=Ue(()=>typeof n.nodeId=="string"?n.nodeId:i),u=Ue(()=>o(s.value));return ke([()=>n.minWidth,()=>n.minHeight,()=>n.maxWidth,()=>n.maxHeight,()=>{var c;return(c=u.value)==null?void 0:c.initialized}],([c,d,p,f,g])=>{const w=u.value;if(w&&g){const m={id:w.id,type:"dimensions",updateStyle:!0,dimensions:{width:w.dimensions.width,height:w.dimensions.height}};c&&w.dimensions.width<c&&(m.dimensions.width=c),d&&w.dimensions.height<d&&(m.dimensions.height=d),p&&w.dimensions.width>p&&(m.dimensions.width=p),f&&w.dimensions.height>f&&(m.dimensions.height=f),(m.dimensions.width!==w.dimensions.width||m.dimensions.height!==w.dimensions.height)&&a.nodesChange([m])}},{flush:"post",immediate:!0}),(c,d)=>c.isVisible?(T(),Z(ge,{key:0},[(T(),Z(ge,null,Ae(r,p=>h(ws,{key:p,class:tt(c.lineClassName),style:lt(c.lineStyle),"node-id":s.value,position:p,variant:y(fo).Line,"keep-aspect-ratio":c.keepAspectRatio,color:c.color,"min-width":c.minWidth,"min-height":c.minHeight,"max-width":c.maxWidth,"max-height":c.maxHeight,"should-resize":c.shouldResize,onResizeStart:d[0]||(d[0]=f=>t("resizeStart",f)),onResize:d[1]||(d[1]=f=>t("resize",f)),onResizeEnd:d[2]||(d[2]=f=>t("resizeEnd",f))},null,8,["class","style","node-id","position","variant","keep-aspect-ratio","color","min-width","min-height","max-width","max-height","should-resize"])),64)),(T(),Z(ge,null,Ae(l,p=>h(ws,{key:p,class:tt(c.handleClassName),style:lt(c.handleStyle),"node-id":s.value,position:p,color:c.color,"min-width":c.minWidth,"min-height":c.minHeight,"max-width":c.maxWidth,"max-height":c.maxHeight,"should-resize":c.shouldResize,"keep-aspect-ratio":c.keepAspectRatio,onResizeStart:d[3]||(d[3]=f=>t("resizeStart",f)),onResize:d[4]||(d[4]=f=>t("resize",f)),onResizeEnd:d[5]||(d[5]=f=>t("resizeEnd",f))},null,8,["class","style","node-id","position","color","min-width","min-height","max-width","max-height","should-resize","keep-aspect-ratio"])),64))],64)):ce("",!0)}});function Gc(){return{description:"description",has_inputs:!1,template:{comment:{required:!1,placeholder:"",show:!1,value:"",name:"comment",display_name:"comment",type:"str",list:!1,field_type:"textarea"}}}}const k0=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Gc},Symbol.toStringTag,{value:"Module"})),T0={class:"comment-node"},E0={style:{width:"100%"}},Q0={class:"title-container"},P0={__name:"CommentNode",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=_l(),o=(r,i)=>{n.push({action:r,data:i,nodeId:t.id})},a=j(t.data.template),l=Gc();return Object.entries(l.template).forEach(([r,i])=>{a.value[r]=a.value[r]||i,i.is_output&&(a.value[r].is_output=!0)}),(r,i)=>{const s=V("a-typography-title"),u=V("a-typography-link");return T(),Z("div",T0,[h(y($0),{"min-width":"100","min-height":"30"}),Ce("div",E0,[Ce("div",Q0,[h(s,{level:5,editable:"",content:a.value.comment.value,"onUpdate:content":i[0]||(i[0]=c=>a.value.comment.value=c),class:"comment-text"},null,8,["content"]),h(u,{onClick:i[1]||(i[1]=c=>o("delete")),class:"delete-button"},{default:b(()=>[h(y(Gr))]),_:1})])])])}}},C0=wn(P0,[["__scopeId","data-v-d4f90fb7"]]),D0=Object.freeze(Object.defineProperty({__proto__:null,default:C0},Symbol.toStringTag,{value:"Module"})),z0={class:"template-item-field-text"},q0={style:{position:"relative"}},N0={class:"template-item-field-content"},M0={__name:"BaseField",props:{name:{type:String,required:!0},required:{type:Boolean,default:!1},type:{type:String,required:!0},nameOnly:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},style:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})}},emits:["delete","update:data","edit"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ye(),l=j(n.data),r=j(l.value.id||l.value.name),i=()=>{l.value.show=!l.value.show,o("update:data",l.value)};ke(()=>n.data,c=>{l.value=c,r.value=c.id||c.name},{deep:!0});const s=()=>{o("delete",r)},u=()=>{o("edit",r)};return(c,d)=>{const p=V("a-typography-text"),f=V("a-button"),g=V("a-checkbox"),w=V("a-tooltip"),m=V("a-select"),v=V("a-textarea"),k=V("a-input"),Q=V("a-input-number"),$=V("a-radio-group");return T(),Z("div",{class:tt(["template-item-field",n.type=="source"?"template-item-output-field":""]),style:lt(n.style)},[Ce("div",z0,[h(p,{class:"field-name dark-color-text"},{default:b(()=>[ne(J(n.name),1)]),_:1}),n.required?(T(),X(p,{key:0,type:"danger"},{default:b(()=>[ne(" *")]),_:1})):ce("",!0),e.editable?(T(),X(f,{key:1,type:"text",size:"small",onClick:u},{icon:b(()=>[h(y(so))]),_:1})):ce("",!0),Ve(c.$slots,"inline",{},void 0,!0),!c.$slots.inline&&!l.value.is_output?(T(),Z(ge,{key:2},[l.value.field_type=="checkbox"?(T(),X(g,{key:0,checked:l.value.value,"onUpdate:checked":d[0]||(d[0]=S=>l.value.value=S)},null,8,["checked"])):ce("",!0)],64)):ce("",!0),n.type=="target"?(T(),Z("div",{key:3,class:tt(["show-in-use-interface-checkbox",{"always-show":l.value.show}])},[h(w,{title:y(a)("components.nodes.baseField.show_in_use_interface")},{default:b(()=>[h(f,{type:"text",size:"small",onClick:i},{icon:b(()=>[l.value.show?(T(),X(y(Df),{key:0,fill:"#28c5e5"})):(T(),X(y(Cf),{key:1,fill:"#28c5e5"}))]),_:1})]),_:1},8,["title"])],2)):ce("",!0),n.deletable?(T(),X(f,{key:4,type:"text",size:"small",class:"delete-field-button",onClick:d[1]||(d[1]=S=>s())},{icon:b(()=>[h(y(rf),{fill:"#ff4d4f"})]),_:1})):ce("",!0)]),e.nameOnly?(T(),X(y(gn),{key:0,class:tt(["handle",`${n.type}-handle`]),id:r.value,type:n.type,position:n.type=="target"?y(ve).Left:y(ve).Right,"connectable-start":n.type!="target","connectable-end":n.type=="target"},null,8,["class","id","type","position","connectable-start","connectable-end"])):ce("",!0),Ce("div",q0,[Ce("div",N0,[Ve(c.$slots,"default",{},void 0,!0),!c.$slots.default&&!l.value.is_output?(T(),Z(ge,{key:0},[l.value.field_type=="select"?(T(),X(m,{key:0,value:l.value.value,"onUpdate:value":d[2]||(d[2]=S=>l.value.value=S),options:l.value.options,style:{width:"100%"}},null,8,["value","options"])):l.value.field_type=="textarea"?(T(),X(v,{key:1,value:l.value.value,"onUpdate:value":d[3]||(d[3]=S=>l.value.value=S),autoSize:{minRows:2,maxRows:30},showCount:!0,placeholder:l.value.placeholder},null,8,["value","placeholder"])):l.value.field_type=="input"?(T(),X(k,{key:2,value:l.value.value,"onUpdate:value":d[4]||(d[4]=S=>l.value.value=S),placeholder:l.value.placeholder},null,8,["value","placeholder"])):l.value.field_type=="number"?(T(),X(Q,{key:3,value:l.value.value,"onUpdate:value":d[5]||(d[5]=S=>l.value.value=S),placeholder:l.value.placeholder,style:{width:"100%"}},null,8,["value","placeholder"])):l.value.field_type=="radio"?(T(),X($,{key:4,"option-type":"button",value:l.value.value,"onUpdate:value":d[6]||(d[6]=S=>l.value.value=S),options:l.value.options},null,8,["value","options"])):l.value.field_type=="temperature"?(T(),X(Br,{key:5,modelValue:l.value.value,"onUpdate:modelValue":d[7]||(d[7]=S=>l.value.value=S)},null,8,["modelValue"])):ce("",!0)],64)):ce("",!0)]),n.type=="target"?(T(),Z(ge,{key:0},[e.nameOnly?ce("",!0):(T(),X(y(gn),{key:0,class:tt(["handle","target-handle"]),id:r.value,type:"target",position:y(ve).Left,"connectable-start":!1,"connectable-end":!0},null,8,["id","position"])),e.nameOnly?ce("",!0):(T(),X(y(gn),{key:1,class:tt(["handle","source-handle"]),id:r.value,type:"source",position:y(ve).Right,"connectable-start":!0,"connectable-end":!1},null,8,["id","position"]))],64)):(T(),Z(ge,{key:1},[e.nameOnly?ce("",!0):(T(),X(y(gn),{key:0,class:tt(["handle",`${n.type}-handle`]),id:r.value,type:n.type,position:y(ve).Right,"connectable-start":!0,"connectable-end":!1},null,8,["class","id","type","position"]))],64))])],6)}}},Ee=wn(M0,[["__scopeId","data-v-e311960b"]]),Bc={__name:"BaseFieldsCollapse",props:{id:{type:String,required:!0},collapse:{type:Boolean,required:!1,default:!0},name:{type:[String,void 0],required:!1,default:void 0}},emits:["collapseChanged"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ye(),l=n.name||a("common.more_settings"),r=j(n.collapse?[]:[l]),i=s=>{s.length>0?o("collapseChanged",{id:n.id,collpased:!1}):o("collapseChanged",{id:n.id,collpased:!0})};return(s,u)=>{const c=V("a-collapse-panel"),d=V("a-collapse");return T(),X(d,{activeKey:r.value,"onUpdate:activeKey":u[0]||(u[0]=p=>r.value=p),bordered:!1,onChange:i},{default:b(()=>[(T(),X(c,{key:y(l),header:y(l),class:"base-fields-collapse-content"},{default:b(()=>[Ve(s.$slots,"default")]),_:3},8,["header"]))]),_:3},8,["activeKey"])}}},Ss={__name:"ListField",props:{name:{type:String,required:!0},required:{type:Boolean,default:!1},type:{type:String,required:!0},nameOnly:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},style:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})}},emits:["delete","update:data"],setup(e,{emit:t}){const n=e,{t:o}=Ye(),a=t,l=j(n.data),r=l.value.name;ke(()=>n.data,u=>{l.value=u},{deep:!0});const i=(u,c)=>{l.value.value[c]=u,a("update:data",l.value)},s=u=>{l.value.value.splice(u,1),a("update:data",l.value)};return(u,c)=>{const d=V("a-input"),p=V("a-button"),f=V("a-flex");return T(),X(Ee,{name:n.name,required:n.required,type:n.type,nameOnly:n.nameOnly,deletable:n.deletable,style:lt(n.style),data:l.value,"onUpdate:data":c[1]||(c[1]=g=>l.value=g),onDelete:c[2]||(c[2]=g=>a("delete",y(r)))},{default:b(()=>[h(f,{vertical:"",gap:"small"},{default:b(()=>[(T(!0),Z(ge,null,Ae(l.value.value,(g,w)=>(T(),X(f,{key:w,align:"center",gap:"small"},{default:b(()=>[h(d,{value:g,onInput:m=>i(m.target.value,w)},null,8,["value","onInput"]),h(p,{type:"text",onClick:m=>s(w)},{icon:b(()=>[h(y(Vo))]),_:2},1032,["onClick"])]),_:2},1024))),128)),h(p,{type:"dashed",style:{width:"100%"},onClick:c[0]||(c[0]=g=>l.value.value.push(""))},{default:b(()=>[h(y(Xn)),ne(" "+J(y(o)("components.nodes.listField.add_item")),1)]),_:1})]),_:1})]),_:1},8,["name","required","type","nameOnly","deletable","style","data"])}}},R0={style:{width:"100%"}},I0={class:"title-container"},V0={class:"main-container"},A0={key:1,class:"output-container"},Qe={__name:"BaseNode",props:{nodeId:{type:String,required:!0},title:{type:String,required:!1,default:""},description:{type:String,required:!1,default:""},documentLink:{type:String,required:!1,default:""},width:{type:[Number,String,null],required:!1,default:null},translatePrefix:{type:String,required:!1,default:""},fieldsData:{type:Object,required:!1,default:()=>({})},debug:{type:[Object,null],required:!1,default:null}},setup(e){const t=e,n=j(t.fieldsData);ke(()=>t.fieldsData,v=>{n.value=v},{deep:!0});const o=_l(),a=(v,k)=>{o.push({action:v,data:k,nodeId:t.nodeId})},{t:l}=Ye(),r=t.title.length==0?l(`${t.translatePrefix}.title`):t.title,i=t.description.length==0?l(`${t.translatePrefix}.description`):t.description;let s={};t.width&&(typeof t.width=="number"?s={width:`${t.width}px`}:typeof t.width=="string"&&(s={width:t.width}));const u=()=>{const v=[],k={},Q=[];return Object.keys(n.value).forEach($=>{if(n.value[$].is_output)if(n.value[$].condition){const S=n.value[$].condition;S(n.value)&&Q.push($)}else Q.push($);else{if(n.value[$].condition){const S=n.value[$].condition;if(!S(n.value))return}n.value[$].group?(k[n.value[$].group]||(k[n.value[$].group]=[]),k[n.value[$].group].push($)):v.push($)}}),{inputs:v,inputGroups:k,outputs:Q}},c=j([]),d=j({}),p=j([]),{inputs:f,inputGroups:g,outputs:w}=u();c.value=f,d.value=g,p.value=w,ke(()=>n.value,()=>{const{inputs:v,inputGroups:k,outputs:Q}=u();c.value=v,d.value=k,p.value=Q},{deep:!0});const m=v=>{for(const k in n.value)n.value[k].group===v.id&&(n.value[k].group_collpased=v.collpased)};return(v,k)=>{const Q=V("a-typography-text"),$=V("a-flex"),S=V("a-typography-title"),E=V("a-button"),x=V("a-tooltip");return T(),Z("div",{class:"node",style:lt(y(s))},[Ce("div",R0,[e.debug?(T(),Z("div",{key:0,class:tt(["debug-info",e.debug.run_time>=0?"executed-node":"not-executed-node"])},[h($,{justify:"space-between"},{default:b(()=>[e.debug.run_time>=0?(T(),X(Q,{key:0},{default:b(()=>[h(y(Tf),{theme:"filled",fill:"#52c41a"}),ne(" "+J(y(l)("components.nodes.baseNode.run_time",{time:e.debug.run_time.toFixed(2)})),1)]),_:1})):(T(),X(Q,{key:1},{default:b(()=>[h(y(Lp),{theme:"filled",fill:"#faad14"}),ne(" "+J(y(l)("components.nodes.baseNode.no_run_record")),1)]),_:1}))]),_:1})],2)):ce("",!0),Ce("div",I0,[h($,{justify:"space-between",align:"center",gap:"10"},{default:b(()=>[h(S,{class:"title",level:3,style:{"flex-grow":"1"}},{default:b(()=>[ne(J(y(r))+" ",1),t.documentLink.length>0?(T(),X(tf,{key:0,contents:[y(i),{type:"link",text:y(l)("components.nodes.baseNode.document_link"),url:t.documentLink}],class:"hint-popover"},null,8,["contents"])):ce("",!0)]),_:1}),h(x,{color:"blue",title:y(l)("components.nodes.baseNode.clone_node")},{default:b(()=>[h(E,{type:"text",size:"small",onClick:k[0]||(k[0]=I=>a("clone"))},{icon:b(()=>[h(y(sf),{fill:"#28c5e5"})]),_:1})]),_:1},8,["title"]),h(x,{color:"red",title:y(l)("components.nodes.baseNode.delete_node")},{default:b(()=>[h(E,{type:"text",size:"small",onClick:k[1]||(k[1]=I=>a("delete"))},{icon:b(()=>[h(y(Gr),{fill:"#28c5e5"})]),_:1})]),_:1},8,["title"])]),_:1})]),Ce("div",V0,[Ve(v.$slots,"main"),v.$slots.main?ce("",!0):(T(),X($,{key:0,vertical:"",gap:"small"},{default:b(()=>[(T(!0),Z(ge,null,Ae(c.value,I=>(T(),X(x,{title:n.value[I].has_tooltip?y(l)(`${e.translatePrefix}.${I}_tip`):"",placement:"left"},{default:b(()=>[n.value[I].field_type=="list"?(T(),X(Ss,{key:0,name:y(l)(`${e.translatePrefix}.${I}`),required:n.value[I].required,type:"target",data:n.value[I],"onUpdate:data":U=>n.value[I]=U},null,8,["name","required","data","onUpdate:data"])):(T(),X(Ee,{key:1,name:y(l)(`${e.translatePrefix}.${I}`),required:n.value[I].required,type:"target",data:n.value[I],"onUpdate:data":U=>n.value[I]=U,nameOnly:["","checkbox"].includes(n.value[I].field_type)},null,8,["name","required","data","onUpdate:data","nameOnly"]))]),_:2},1032,["title"]))),256)),(T(!0),Z(ge,null,Ae(d.value,(I,U)=>(T(),X(Bc,{id:U,collapse:n.value[I[0]].group_collpased,name:U==="default"?y(l)("common.more_settings"):y(l)(`${e.translatePrefix}.group_${U}`),onCollapseChanged:m},{default:b(()=>[(T(!0),Z(ge,null,Ae(I,R=>(T(),X(x,{title:n.value[R].has_tooltip?y(l)(`${e.translatePrefix}.${R}_tip`):"",placement:"left"},{default:b(()=>[n.value[R].field_type=="list"?(T(),X(Ss,{key:0,name:y(l)(`${e.translatePrefix}.${R}`),required:n.value[R].required,type:"target",data:n.value[R],"onUpdate:data":L=>n.value[R]=L},null,8,["name","required","data","onUpdate:data"])):(T(),X(Ee,{key:1,name:y(l)(`${e.translatePrefix}.${R}`),required:n.value[R].required,type:"target",data:n.value[R],"onUpdate:data":L=>n.value[R]=L,nameOnly:["","checkbox"].includes(n.value[R].field_type)},null,8,["name","required","data","onUpdate:data","nameOnly"]))]),_:2},1032,["title"]))),256))]),_:2},1032,["id","collapse","name"]))),256))]),_:1}))]),p.value.length>0?(T(),Z("div",A0,[Ve(v.$slots,"output"),v.$slots.output?ce("",!0):(T(),X($,{key:0,vertical:"",style:{width:"100%"}},{default:b(()=>[(T(!0),Z(ge,null,Ae(p.value,I=>(T(),X(x,{title:n.value[I].has_tooltip?y(l)(`${e.translatePrefix}.${I}_tip`):"",placement:"right"},{default:b(()=>[h(Ee,{name:y(l)(`${e.translatePrefix}.${I}`),data:n.value[I],"onUpdate:data":U=>n.value[I]=U,type:"source",nameOnly:""},null,8,["name","data","onUpdate:data"])]),_:2},1032,["title"]))),256))]),_:1}))])):ce("",!0)])],4)}}};function Hc(){return{description:"description",task_name:"control_flows.conditional",has_inputs:!0,template:{field_type:{required:!0,placeholder:"",show:!1,value:"string",options:[{value:"string",label:"Str"},{value:"number",label:"Number"}],name:"field_type",display_name:"field_type",type:"str",list:!0,field_type:"select"},left_field:{required:!0,placeholder:"",show:!1,value:"",name:"left_field",display_name:"left_field",type:"str|float|int",list:!1,field_type:"input"},operator:{required:!0,placeholder:"",show:!1,value:"equal",options:[{value:"equal",label:"equal",field_type:["string","number"]},{value:"not_equal",label:"not_equal",field_type:["string","number"]},{value:"greater_than",label:"greater_than",field_type:["number"]},{value:"less_than",label:"less_than",field_type:["number"]},{value:"greater_than_or_equal",label:"greater_than_or_equal",field_type:["number"]},{value:"less_than_or_equal",label:"less_than_or_equal",field_type:["number"]},{value:"include",label:"include",field_type:["string"]},{value:"not_include",label:"not_include",field_type:["string"]},{value:"is_empty",label:"is_empty",field_type:["string"]},{value:"is_not_empty",label:"is_not_empty",field_type:["string"]},{value:"starts_with",label:"starts_with",field_type:["string"]},{value:"ends_with",label:"ends_with",field_type:["string"]}],name:"operator",display_name:"operator",type:"str",list:!1,field_type:"select"},right_field:{required:!0,placeholder:"",show:!1,value:"",name:"right_field",display_name:"right_field",type:"str|float|int",list:!1,field_type:"input"},true_output:{required:!0,placeholder:"",show:!1,value:"",name:"true_output",display_name:"true_output",type:"str",list:!1,field_type:""},false_output:{required:!0,placeholder:"",show:!1,value:"",name:"false_output",display_name:"false_output",type:"str",list:!1,field_type:""},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const X0=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Hc},Symbol.toStringTag,{value:"Module"})),U0={__name:"Conditional",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Ye(),o=j(t.data.template),a=Hc(),l=JSON.parse(JSON.stringify(a.template.operator.options));return Object.entries(a.template).forEach(([r,i])=>{o.value[r]=o.value[r]||i,i.is_output&&(o.value[r].is_output=!0)}),l.forEach(r=>{r.label=n(`components.nodes.controlFlows.Conditional.operator_${r.value}`)}),o.value.operator.options=l.filter(r=>r.field_type.includes("string")),ke(()=>o.value.field_type.value,()=>{o.value.field_type.value=="string"?(o.value.left_field.field_type="input",o.value.right_field.field_type="input",o.value.operator.options=l.filter(r=>r.field_type.includes("string"))):o.value.field_type.value=="number"&&(o.value.left_field.field_type="number",o.value.right_field.field_type="number",o.value.operator.options=l.filter(r=>r.field_type.includes("number")))}),(r,i)=>(T(),X(Qe,{nodeId:e.id,debug:t.data.debug,fieldsData:o.value,translatePrefix:"components.nodes.controlFlows.Conditional",documentLink:"https://vectorvein.com/help/docs/control-flows#h2-0"},null,8,["nodeId","debug","fieldsData"]))}},W0=Object.freeze(Object.defineProperty({__proto__:null,default:U0},Symbol.toStringTag,{value:"Module"}));function Yc(){return{description:"description",task_name:"control_flows.empty",has_inputs:!0,template:{input:{required:!0,placeholder:"",show:!1,value:"",name:"input",display_name:"input",type:"str",list:!1,field_type:"input"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const j0=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Yc},Symbol.toStringTag,{value:"Module"})),F0={__name:"Empty",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=Yc();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.controlFlows.Empty",documentLink:"https://vectorvein.com/help/docs/control-flows#h2-4"},null,8,["nodeId","debug","fieldsData"]))}},L0=Object.freeze(Object.defineProperty({__proto__:null,default:F0},Symbol.toStringTag,{value:"Module"}));function Zc(){return{description:"description",task_name:"control_flows.json_process",has_inputs:!0,template:{input:{required:!0,placeholder:"",show:!1,value:"",name:"input",display_name:"input",type:"str|dict",list:!1,field_type:"input"},process_mode:{required:!1,placeholder:"",show:!1,value:"get_value",options:[{value:"get_value",label:"get_value"},{value:"get_multiple_values",label:"get_multiple_values"},{value:"list_values",label:"list_values"},{value:"list_keys",label:"list_keys"}],name:"process_mode",display_name:"process_mode",type:"str",clear_after_run:!1,list:!0,field_type:"select"},key:{required:!0,placeholder:"",show:!1,value:"",name:"key",display_name:"key",type:"str",list:!1,field_type:"input",condition:e=>e.process_mode.value=="get_value"},keys:{required:!1,placeholder:"",show:!1,value:[],name:"keys",display_name:"keys",type:"list",list:!1,field_type:"input"},default_value:{required:!0,placeholder:"",show:!1,value:"",name:"default_value",display_name:"default_value",type:"str",list:!1,field_type:"input",condition:e=>e.process_mode.value=="get_value"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const G0=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Zc},Symbol.toStringTag,{value:"Module"})),B0={__name:"JsonProcess",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Ye(),o=j(t.data.template),a=Zc();Object.entries(a.template).forEach(([i,s])=>{o.value[i]=o.value[i]||s,s.is_output&&(o.value[i].is_output=!0)});const l=i=>{o.value.keys.value.splice(i,1)},r=()=>{o.value.keys.value.push("Key")};return(i,s)=>{const u=V("a-textarea"),c=V("a-select"),d=V("a-input"),p=V("a-typography-text"),f=V("a-space"),g=V("a-flex"),w=V("a-button");return T(),X(Qe,{nodeId:e.id,debug:t.data.debug,fieldsData:o.value,translatePrefix:"components.nodes.controlFlows.JsonProcess",documentLink:"https://vectorvein.com/help/docs/control-flows#h2-6"},{main:b(()=>[h(g,{vertical:"",gap:"small"},{default:b(()=>[h(Ee,{name:y(n)("components.nodes.common.input"),required:"",type:"target",data:o.value.input,"onUpdate:data":s[1]||(s[1]=m=>o.value.input=m)},{default:b(()=>[h(u,{class:"field-content",value:o.value.input.value,"onUpdate:value":s[0]||(s[0]=m=>o.value.input.value=m),autoSize:{minRows:1,maxRows:10},showCount:!0,placeholder:o.value.input.placeholder},null,8,["value","placeholder"])]),_:1},8,["name","data"]),h(Ee,{name:y(n)("components.nodes.controlFlows.JsonProcess.process_mode"),required:"",type:"target",data:o.value.process_mode,"onUpdate:data":s[3]||(s[3]=m=>o.value.process_mode=m)},{default:b(()=>[h(c,{style:{width:"100%"},value:o.value.process_mode.value,"onUpdate:value":s[2]||(s[2]=m=>o.value.process_mode.value=m),options:o.value.process_mode.options},null,8,["value","options"])]),_:1},8,["name","data"]),o.value.process_mode.value=="get_value"?(T(),Z(ge,{key:0},[h(Ee,{name:y(n)("components.nodes.controlFlows.JsonProcess.key"),required:"",type:"target",data:o.value.key,"onUpdate:data":s[5]||(s[5]=m=>o.value.key=m)},{default:b(()=>[h(d,{class:"field-content",value:o.value.key.value,"onUpdate:value":s[4]||(s[4]=m=>o.value.key.value=m),placeholder:o.value.key.placeholder},null,8,["value","placeholder"])]),_:1},8,["name","data"]),h(Ee,{name:y(n)("components.nodes.controlFlows.JsonProcess.default_value"),type:"target",data:o.value.default_value,"onUpdate:data":s[7]||(s[7]=m=>o.value.default_value=m)},{default:b(()=>[h(d,{class:"field-content",value:o.value.default_value.value,"onUpdate:value":s[6]||(s[6]=m=>o.value.default_value.value=m),placeholder:o.value.default_value.placeholder},null,8,["value","placeholder"])]),_:1},8,["name","data"])],64)):ce("",!0),o.value.process_mode.value=="get_multiple_values"?(T(),Z(ge,{key:1},[h(Ee,{name:y(n)("components.nodes.controlFlows.JsonProcess.keys"),required:"",type:"target",data:o.value.keys,"onUpdate:data":s[8]||(s[8]=m=>o.value.keys=m)},{default:b(()=>[h(g,{vertical:"",gap:"small"},{default:b(()=>[(T(!0),Z(ge,null,Ae(o.value.keys.value,(m,v)=>(T(),X(f,{key:v},{default:b(()=>[h(p,{content:o.value.keys.value[v],"onUpdate:content":k=>o.value.keys.value[v]=k,editable:""},null,8,["content","onUpdate:content"]),h(y(Vo),{class:"clickable-icon",fill:"#ff4d4f",onClick:k=>l(v)},null,8,["onClick"])]),_:2},1024))),128))]),_:1}),h(w,{block:"",type:"dashed",class:"add-field-button",onClick:r},{default:b(()=>[h(y(Xn)),ne(" "+J(y(n)("components.nodes.controlFlows.JsonProcess.add_key")),1)]),_:1})]),_:1},8,["name","data"]),h(Ee,{name:y(n)("components.nodes.controlFlows.JsonProcess.default_value"),type:"target",data:o.value.default_value,"onUpdate:data":s[10]||(s[10]=m=>o.value.default_value=m)},{default:b(()=>[h(d,{class:"field-content",value:o.value.default_value.value,"onUpdate:value":s[9]||(s[9]=m=>o.value.default_value.value=m),placeholder:o.value.default_value.placeholder},null,8,["value","placeholder"])]),_:1},8,["name","data"])],64)):ce("",!0)]),_:1})]),output:b(()=>[h(g,{vertical:"",style:{width:"100%"}},{default:b(()=>[o.value.process_mode.value!="get_multiple_values"?(T(),X(Ee,{key:0,data:o.value.output,"onUpdate:data":s[11]||(s[11]=m=>o.value.output=m),name:y(n)("components.nodes.common.output"),type:"source",nameOnly:""},null,8,["data","name"])):(T(!0),Z(ge,{key:1},Ae(o.value.keys.value,(m,v)=>(T(),X(Ee,{key:v,name:m,type:"source",nameOnly:"",data:{name:`output-${m}`}},null,8,["name","data"]))),128))]),_:1})]),_:1},8,["nodeId","debug","fieldsData"])}}},H0=Object.freeze(Object.defineProperty({__proto__:null,default:B0},Symbol.toStringTag,{value:"Module"}));function Jc(){return{description:"description",task_name:"control_flows.random_choice",has_inputs:!0,template:{input:{required:!0,placeholder:"",show:!1,value:[],name:"input",display_name:"input",type:"list",list:!1,field_type:"select"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const Y0=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Jc},Symbol.toStringTag,{value:"Module"})),Z0={__name:"RandomChoice",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=Jc();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.controlFlows.RandomChoice",documentLink:"https://vectorvein.com/help/docs/control-flows#h2-10"},null,8,["nodeId","debug","fieldsData"]))}},J0=Object.freeze(Object.defineProperty({__proto__:null,default:Z0},Symbol.toStringTag,{value:"Module"})),K0={__name:"FileLoader",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template);return(o,a)=>(T(),X(Qe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.fileProcessing.FileLoader",documentLink:"https://vectorvein.com/help/docs/file-processing#h2-0"},null,8,["nodeId","debug","fieldsData"]))}},e1=Object.freeze(Object.defineProperty({__proto__:null,default:K0},Symbol.toStringTag,{value:"Module"}));function Kc(){const e=["stable-diffusion-xl-1024-v0-9","stable-diffusion-xl-1024-v1-0"],t=["sd3","sd3-turbo","sd-core"];return{description:"description",task_name:"image_generation.stable_diffusion",has_inputs:!0,template:{prompt:{required:!0,placeholder:"",show:!1,value:"",name:"prompt",display_name:"prompt",type:"str",list:!1,field_type:"textarea"},negative_prompt:{required:!0,placeholder:"",show:!1,value:"",name:"negative_prompt",display_name:"negative_prompt",type:"str",list:!1,field_type:"textarea"},model:{required:!1,placeholder:"",show:!1,value:"stable-diffusion-xl-1024-v1-0",options:[{value:"sd3",label:"SD3"},{value:"sd3-turbo",label:"SD3 Turbo"},{value:"sd-core",label:"Core"},{value:"stable-diffusion-xl-1024-v1-0",label:"SDXL 1.0"},{value:"stable-diffusion-xl-1024-v0-9",label:"SDXL 0.9"},{value:"stable-diffusion-xl-beta-v2-2-2",label:"SDXL 0.8"}],name:"model",display_name:"model",type:"str",clear_after_run:!1,list:!0,field_type:"select"},cfg_scale:{required:!0,placeholder:"",show:!1,value:7,name:"cfg_scale",display_name:"cfg_scale",type:"float",list:!1,field_type:"number",condition:n=>!t.includes(n.model.value)},sampler:{required:!1,placeholder:"",show:!1,value:"k_dpmpp_2m",options:[{value:"ddim",label:"ddim"},{value:"plms",label:"plms"},{value:"k_euler",label:"k_euler"},{value:"k_euler_ancestral",label:"k_euler_ancestral"},{value:"k_heun",label:"k_heun"},{value:"k_dpm_2",label:"k_dpm_2"},{value:"k_dpm_2_ancestral",label:"k_dpm_2_ancestral"},{value:"k_dpmpp_2s_ancestral",label:"k_dpmpp_2s_ancestral"},{value:"k_dpmpp_2m",label:"k_dpmpp_2m"},{value:"k_dpmpp_sde",label:"k_dpmpp_sde"}],name:"sampler",display_name:"sampler",type:"str",clear_after_run:!1,list:!0,field_type:"select",condition:n=>!t.includes(n.model.value)},width:{required:!0,placeholder:"",show:!1,value:1024,name:"width",display_name:"width",type:"int",list:!1,field_type:"number",condition:n=>!e.includes(n.model.value)&&!t.includes(n.model.value)},height:{required:!0,placeholder:"",show:!1,value:1024,name:"height",display_name:"height",type:"int",list:!1,field_type:"number",condition:n=>!e.includes(n.model.value)&&!t.includes(n.model.value)},size:{required:!0,placeholder:"",show:!1,value:"1024 x 1024",options:[{value:"1024 x 1024",label:"1024 x 1024"},{value:"1152 x 896",label:"1152 x 896"},{value:"896 x 1152",label:"896 x 1152"},{value:"1216 x 832",label:"1216 x 832"},{value:"832 x 1216",label:"832 x 1216"},{value:"1344 x 768",label:"1344 x 768"},{value:"768 x 1344",label:"768 x 1344"},{value:"1536 x 640",label:"1536 x 640"},{value:"640 x 1536",label:"640 x 1536"}],name:"size",display_name:"size",type:"int",list:!1,field_type:"select",condition:n=>e.includes(n.model.value)&&!t.includes(n.model.value)},aspect_ratio:{required:!0,placeholder:"",show:!1,value:"1:1",options:[{value:"1:1",label:"1:1"},{value:"16:9",label:"16:9"},{value:"21:9",label:"21:9"},{value:"2:3",label:"2:3"},{value:"3:2",label:"3:2"},{value:"4:5",label:"4:5"},{value:"5:4",label:"5:4"},{value:"9:16",label:"9:16"},{value:"9:21",label:"9:21"}],name:"aspect_ratio",display_name:"aspect_ratio",type:"int",list:!1,field_type:"select",condition:n=>t.includes(n.model.value)},output_type:{required:!1,placeholder:"",show:!1,value:"markdown",options:[{value:"only_link",label:"only_link"},{value:"markdown",label:"markdown"},{value:"html",label:"html"}],name:"output_type",display_name:"output_type",type:"str",clear_after_run:!1,list:!0,field_type:"select"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const t1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Kc},Symbol.toStringTag,{value:"Module"})),n1={__name:"StableDiffusion",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=Kc();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),ke(()=>n.value.size.value,a=>{const[l,r]=a.split(" x ");n.value.width.value=parseInt(l),n.value.height.value=parseInt(r)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.imageGeneration.StableDiffusion",documentLink:"https://vectorvein.com/help/docs/image-generation#h2-0"},null,8,["nodeId","debug","fieldsData"]))}},o1=Object.freeze(Object.defineProperty({__proto__:null,default:n1},Symbol.toStringTag,{value:"Module"}));function ed(){return{description:"description",task_name:"llms.chat_glm",has_inputs:!0,template:{prompt:{required:!0,placeholder:"",show:!1,value:"",name:"prompt",display_name:"prompt",type:"str",list:!1,field_type:"textarea"},llm_model:{required:!1,placeholder:"",show:!1,value:"glm-3-turbo",options:[{value:"glm-3-turbo",label:"glm-3-turbo"},{value:"glm-4",label:"glm-4"}],name:"llm_model",display_name:"llm_model",type:"str",clear_after_run:!1,list:!0,field_type:"select"},temperature:{required:!0,placeholder:"",show:!1,value:.7,name:"temperature",display_name:"temperature",type:"float",list:!1,field_type:"temperature"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const a1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:ed},Symbol.toStringTag,{value:"Module"})),l1={__name:"ChatGLM",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=ed();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.llms.ChatGLM",documentLink:"https://vectorvein.com/help/docs/language-models#h2-4"},null,8,["nodeId","debug","fieldsData"]))}},r1=Object.freeze(Object.defineProperty({__proto__:null,default:l1},Symbol.toStringTag,{value:"Module"}));function td(){return{description:"description",task_name:"llms.claude",has_inputs:!0,template:{prompt:{required:!0,placeholder:"",show:!1,value:"",name:"prompt",display_name:"prompt",type:"str",list:!1,field_type:"textarea"},llm_model:{required:!1,placeholder:"",show:!1,value:"claude-3-haiku",options:[{value:"claude-3-opus",label:"claude-3-opus"},{value:"claude-3-sonnet",label:"claude-3-sonnet"},{value:"claude-3-haiku",label:"claude-3-haiku"},{value:"claude-2.1",label:"claude-2.1"},{value:"claude-instant-1.2",label:"claude-instant-1.2"}],name:"llm_model",display_name:"llm_model",type:"str",clear_after_run:!1,list:!0,field_type:"select"},temperature:{required:!0,placeholder:"",show:!1,value:.7,name:"temperature",display_name:"temperature",type:"float",list:!1,field_type:"temperature"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const i1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:td},Symbol.toStringTag,{value:"Module"})),s1={__name:"Claude",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=td();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.llms.Claude",documentLink:"https://vectorvein.com/help/docs/language-models#h2-24"},null,8,["nodeId","debug","fieldsData"]))}},u1=Object.freeze(Object.defineProperty({__proto__:null,default:s1},Symbol.toStringTag,{value:"Module"}));function nd(){return{description:"description",task_name:"llms.local_llm",has_inputs:!0,template:{prompt:{required:!0,placeholder:"",show:!1,value:"",name:"prompt",display_name:"prompt",type:"str",list:!1,field_type:"textarea"},model_family:{required:!1,placeholder:"",show:!1,value:"",options:[],name:"model_family",display_name:"model_family",type:"str",clear_after_run:!1,list:!0,field_type:"select"},llm_model:{required:!1,placeholder:"",show:!1,value:"",options:[],name:"llm_model",display_name:"llm_model",type:"str",clear_after_run:!1,list:!0,field_type:"select"},temperature:{required:!0,placeholder:"",show:!1,value:.7,name:"temperature",display_name:"temperature",type:"float",list:!1,field_type:"temperature"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const c1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:nd},Symbol.toStringTag,{value:"Module"})),d1={__name:"LocalLlm",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){var r,i;const t=e,n=j(t.data.template),o=nd();Object.entries(o.template).forEach(([s,u])=>{n.value[s]=n.value[s]||u,u.is_output&&(n.value[s].is_output=!0)});const a=gu(),{setting:l}=Pt(a);return n.value.model_family.options=(i=(r=l.value.data)==null?void 0:r.local_llms)==null?void 0:i.map(s=>({value:s.model_family,text:s.model_family})),n.value.llm_model.options=we(()=>{var c,d;const s=n.value.model_family.value,u=(d=(c=l.value.data)==null?void 0:c.local_llms)==null?void 0:d.find(p=>p.model_family===s);return u?u.models.map(p=>({value:p.model_id,text:p.model_label})):[]}),(s,u)=>(T(),X(Qe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.llms.LocalLlm"},null,8,["nodeId","debug","fieldsData"]))}},p1=Object.freeze(Object.defineProperty({__proto__:null,default:d1},Symbol.toStringTag,{value:"Module"}));function od(){return{description:"description",task_name:"llms.moonshot",has_inputs:!0,template:{prompt:{required:!0,placeholder:"",show:!1,value:"",name:"prompt",display_name:"prompt",type:"str",list:!1,field_type:"textarea"},llm_model:{required:!1,placeholder:"",show:!1,value:"moonshot-v1-8k",options:[{value:"moonshot-v1-8k",label:"moonshot-v1-8k"},{value:"moonshot-v1-32k",label:"moonshot-v1-32k"},{value:"moonshot-v1-128k",label:"moonshot-v1-128k"}],name:"llm_model",display_name:"llm_model",type:"str",clear_after_run:!1,list:!0,field_type:"select"},temperature:{required:!0,placeholder:"",show:!1,value:.7,name:"temperature",display_name:"temperature",type:"float",list:!1,field_type:"temperature"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const f1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:od},Symbol.toStringTag,{value:"Module"})),m1={__name:"Moonshot",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=od();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.llms.Moonshot",documentLink:"https://vectorvein.com/help/docs/language-models#h2-32"},null,8,["nodeId","debug","fieldsData"]))}},h1=Object.freeze(Object.defineProperty({__proto__:null,default:m1},Symbol.toStringTag,{value:"Module"}));function ad(){return{description:"description",task_name:"llms.open_ai",has_inputs:!0,template:{prompt:{required:!0,placeholder:"",show:!1,value:"",name:"prompt",display_name:"prompt",type:"str",list:!1,field_type:"textarea"},llm_model:{required:!1,placeholder:"",show:!1,value:"gpt-3.5",options:[{value:"gpt-3.5",label:"gpt-3.5-turbo"},{value:"gpt-4",label:"gpt-4-turbo"}],name:"llm_model",display_name:"llm_model",type:"str",clear_after_run:!1,list:!0,field_type:"select"},temperature:{required:!0,placeholder:"",show:!1,value:.7,name:"temperature",display_name:"temperature",type:"float",list:!1,field_type:"temperature"},response_format:{required:!1,placeholder:"",show:!1,value:"text",options:[{value:"text",label:"Text"},{value:"json_object",label:"JSON"}],name:"response_format",display_name:"response_format",type:"str",clear_after_run:!1,list:!0,field_type:"select"},use_function_call:{required:!1,placeholder:"",show:!1,value:!1,name:"use_function_call",display_name:"use_function_call",type:"bool",list:!1,field_type:"checkbox"},functions:{required:!1,placeholder:"",show:!1,value:[],name:"functions",display_name:"functions",type:"list",list:!1,field_type:"select"},function_call_mode:{required:!1,placeholder:"",show:!1,value:"auto",options:[{value:"auto",label:"auto"},{value:"none",label:"none"}],name:"function_call_mode",display_name:"function_call_mode",type:"str",clear_after_run:!1,list:!0,field_type:"select"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0},function_call_output:{required:!0,placeholder:"",show:!1,value:"",name:"function_call_output",display_name:"function_call_output",type:"str",list:!1,field_type:"",is_output:!0,condition:e=>e.use_function_call.value},function_call_arguments:{required:!0,placeholder:"",show:!1,value:"",name:"function_call_arguments",display_name:"function_call_arguments",type:"dict",list:!1,field_type:"",is_output:!0,condition:e=>e.use_function_call.value}}}}const v1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:ad},Symbol.toStringTag,{value:"Module"})),_1={__name:"OpenAI",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Ye(),o=j(t.data.template),a=ad();Object.entries(a.template).forEach(([C,O])=>{o.value[C]=o.value[C]||O,O.is_output&&(o.value[C].is_output=!0)});const l=()=>{o.value.function_call_mode.options=[{value:"auto",label:"auto"},{value:"none",label:"none"}],o.value.function_call_mode.options=o.value.function_call_mode.options.concat(o.value.functions.value.map(C=>({value:C.name,label:C.name})))},r=j(!1),i=j(-1),s=ut({name:"",description:"",parameters:{type:"object",properties:{},required:[]}}),u=j(!1),c=()=>{r.value=!1,s.name="",s.description="",s.parameters={type:"object",properties:{},required:[]},u.value=!0},d=()=>{o.value.functions.value.push(JSON.parse(JSON.stringify(s))),u.value=!1,s.name="",s.description="",s.parameters={type:"object",properties:{},required:[]},l()},p=C=>{o.value.functions.value.splice(C,1),l()},f=C=>{r.value=!0,i.value=C,s.name=o.value.functions.value[C].name,s.description=o.value.functions.value[C].description,s.parameters=JSON.parse(JSON.stringify(o.value.functions.value[C].parameters)),u.value=!0},g=()=>{o.value.functions.value[i.value].name=s.name,o.value.functions.value[i.value].description=s.description,o.value.functions.value[i.value].parameters=JSON.parse(JSON.stringify(s.parameters)),u.value=!1,l()},w=j(!1),m=j(""),v=ut({name:"",type:"string",description:""}),k=j("simple"),Q=j("string"),$=j('{"items": {"type": "string"}}'),S=j('{"properties": {}, "required": []}'),E=C=>{C=="array"&&(k.value="simple",Q.value="string")},x=[{value:"string",label:"string"},{value:"number",label:"number"},{value:"integer",label:"integer"},{value:"object",label:"object"},{value:"array",label:"array"},{value:"boolean",label:"boolean"},{value:"null",label:"null"}],I=j(!1),U=()=>{w.value=!1,I.value=!0},R=()=>{if(s.parameters.properties[v.name]={type:v.type,description:v.description},v.type=="array")if(k.value=="simple")s.parameters.properties[v.name].items={type:Q.value};else{try{JSON.parse($.value)}catch{dt.error(n("components.nodes.llms.common.array_items_manual_schema_error"));return}s.parameters.properties[v.name]={...s.parameters.properties[v.name],...JSON.parse($.value)}}else if(v.type=="object"){try{JSON.parse(S.value)}catch{dt.error(n("components.nodes.llms.common.object_items_manual_schema_error"));return}s.parameters.properties[v.name]={...s.parameters.properties[v.name],...JSON.parse(S.value)}}},L=()=>{R(),I.value=!1,v.name="",v.type="string",v.description=""},ee=C=>{delete s.parameters.properties[C]},G=C=>{w.value=!0,m.value=C,v.name=C,v.type=s.parameters.properties[C].type,v.description=s.parameters.properties[C].description,I.value=!0},_=()=>{delete s.parameters.properties[m.value],R(),I.value=!1,v.name="",v.type="string",v.description=""};return(C,O)=>{const N=V("a-textarea"),M=V("a-select"),P=V("a-checkbox"),D=V("a-button"),q=V("a-flex"),K=V("a-input"),te=V("a-form-item"),B=V("a-col"),ae=V("a-row"),Y=V("a-checkbox-group"),pe=V("a-form"),re=V("a-drawer"),se=V("a-select-option");return T(),X(Qe,{nodeId:e.id,fieldsData:o.value,translatePrefix:"components.nodes.llms.OpenAI",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/language-models#h2-0"},{main:b(()=>[h(q,{vertical:"",gap:"small"},{default:b(()=>[h(Ee,{name:y(n)("components.nodes.llms.common.prompt"),required:"",type:"target",data:o.value.prompt,"onUpdate:data":O[1]||(O[1]=H=>o.value.prompt=H)},{default:b(()=>[h(N,{class:"field-content",value:o.value.prompt.value,"onUpdate:value":O[0]||(O[0]=H=>o.value.prompt.value=H),autoSize:{minRows:2,maxRows:20},showCount:!0,placeholder:o.value.prompt.placeholder},null,8,["value","placeholder"])]),_:1},8,["name","data"]),h(Ee,{name:y(n)("components.nodes.llms.common.llm_model"),required:"",type:"target",data:o.value.llm_model,"onUpdate:data":O[3]||(O[3]=H=>o.value.llm_model=H)},{default:b(()=>[h(M,{style:{width:"100%"},value:o.value.llm_model.value,"onUpdate:value":O[2]||(O[2]=H=>o.value.llm_model.value=H),options:o.value.llm_model.options},null,8,["value","options"])]),_:1},8,["name","data"]),h(Ee,{name:y(n)("components.nodes.llms.common.temperature"),required:"",type:"target",data:o.value.temperature,"onUpdate:data":O[5]||(O[5]=H=>o.value.temperature=H)},{default:b(()=>[h(Br,{modelValue:o.value.temperature.value,"onUpdate:modelValue":O[4]||(O[4]=H=>o.value.temperature.value=H)},null,8,["modelValue"])]),_:1},8,["name","data"]),h(Ee,{name:y(n)("components.nodes.llms.common.response_format"),required:"",type:"target",data:o.value.response_format,"onUpdate:data":O[7]||(O[7]=H=>o.value.response_format=H)},{default:b(()=>[h(M,{style:{width:"100%"},value:o.value.response_format.value,"onUpdate:value":O[6]||(O[6]=H=>o.value.response_format.value=H),options:o.value.response_format.options},null,8,["value","options"])]),_:1},8,["name","data"]),h(Ee,{name:y(n)("components.nodes.llms.common.use_function_call"),"name-only":"",type:"target",data:o.value.use_function_call,"onUpdate:data":O[9]||(O[9]=H=>o.value.use_function_call=H)},{inline:b(()=>[h(P,{checked:o.value.use_function_call.value,"onUpdate:checked":O[8]||(O[8]=H=>o.value.use_function_call.value=H)},null,8,["checked"])]),_:1},8,["name","data"]),Vn(h(Ee,{name:y(n)("components.nodes.llms.common.functions"),type:"target",data:o.value.functions,"onUpdate:data":O[23]||(O[23]=H=>o.value.functions=H)},{default:b(()=>[h(q,{vertical:"",gap:"small"},{default:b(()=>[(T(!0),Z(ge,null,Ae(o.value.functions.value,(H,me)=>(T(),X(q,{gap:"small",align:"center",key:me},{default:b(()=>[h(D,{block:"",onClick:_e=>f(me)},{default:b(()=>[h(y(so)),ne(" "+J(H.name),1)]),_:2},1032,["onClick"]),h(D,{type:"text",danger:"",onClick:_e=>p(me)},{icon:b(()=>[h(y(Vo))]),_:2},1032,["onClick"])]),_:2},1024))),128)),h(D,{type:"dashed",block:"",onClick:c,class:"add-field-button"},{default:b(()=>[h(y(Xn)),ne(" "+J(y(n)("components.nodes.llms.common.add_function")),1)]),_:1})]),_:1}),h(re,{open:u.value,"onUpdate:open":O[14]||(O[14]=H=>u.value=H),title:y(n)("components.nodes.llms.common.add_function"),placement:"right",width:500},{extra:b(()=>[r.value?(T(),X(D,{key:0,type:"primary",onClick:O[10]||(O[10]=H=>g(i.value))},{default:b(()=>[ne(J(y(n)("common.edit")),1)]),_:1})):(T(),X(D,{key:1,type:"primary",onClick:d},{default:b(()=>[ne(J(y(n)("common.add")),1)]),_:1}))]),default:b(()=>[h(pe,null,{default:b(()=>[h(te,{label:y(n)("components.nodes.llms.common.function_name")},{default:b(()=>[h(K,{value:s.name,"onUpdate:value":O[11]||(O[11]=H=>s.name=H)},null,8,["value"])]),_:1},8,["label"]),h(te,{label:y(n)("components.nodes.llms.common.function_description")},{default:b(()=>[h(N,{value:s.description,"onUpdate:value":O[12]||(O[12]=H=>s.description=H),autoSize:{minRows:3,maxRows:20},showCount:!0},null,8,["value"])]),_:1},8,["label"]),h(te,{label:y(n)("components.nodes.llms.common.function_parameters")},{default:b(()=>[h(ae,{type:"flex",gutter:[12,12]},{default:b(()=>[(T(!0),Z(ge,null,Ae(Object.keys(s.parameters.properties),(H,me)=>(T(),X(B,{span:24,key:me},{default:b(()=>[h(q,{align:"center",gap:"5"},{default:b(()=>[h(D,{block:"",onClick:_e=>G(H)},{default:b(()=>[h(y(so)),ne(" "+J(H)+": "+J(s.parameters.properties[H].type),1)]),_:2},1032,["onClick"]),h(D,{type:"text",danger:"",onClick:_e=>ee(H)},{icon:b(()=>[h(y(Vo))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),h(B,{span:24},{default:b(()=>[h(D,{block:"",type:"dashed",style:{display:"flex",gap:"6px","align-items":"center","justify-content":"center"},onClick:U},{default:b(()=>[h(y(Xn)),ne(" "+J(y(n)("components.nodes.llms.common.add_parameter")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["label"]),h(te,{label:y(n)("components.nodes.llms.common.function_required_parameters")},{default:b(()=>[h(Y,{value:s.parameters.required,"onUpdate:value":O[13]||(O[13]=H=>s.parameters.required=H),name:"checkboxgroup",options:Object.keys(s.parameters.properties).map(H=>({label:H,value:H}))},null,8,["value","options"])]),_:1},8,["label"])]),_:1})]),_:1},8,["open","title"]),h(re,{open:I.value,"onUpdate:open":O[22]||(O[22]=H=>I.value=H),title:y(n)("components.nodes.llms.common.add_parameter"),placement:"right",width:450},{extra:b(()=>[w.value?(T(),X(D,{key:0,type:"primary",onClick:_},{default:b(()=>[ne(J(y(n)("common.edit")),1)]),_:1})):(T(),X(D,{key:1,type:"primary",onClick:L},{default:b(()=>[ne(J(y(n)("common.add")),1)]),_:1}))]),default:b(()=>[h(pe,null,{default:b(()=>[h(te,{label:y(n)("components.nodes.llms.common.parameter_name")},{default:b(()=>[h(K,{value:v.name,"onUpdate:value":O[15]||(O[15]=H=>v.name=H)},null,8,["value"])]),_:1},8,["label"]),h(te,{label:y(n)("components.nodes.llms.common.parameter_description")},{default:b(()=>[h(N,{value:v.description,"onUpdate:value":O[16]||(O[16]=H=>v.description=H),autoSize:{minRows:3,maxRows:20},showCount:!0},null,8,["value"])]),_:1},8,["label"]),h(te,{label:y(n)("components.nodes.llms.common.parameter_type")},{default:b(()=>[h(M,{ref:"select",value:v.type,"onUpdate:value":O[17]||(O[17]=H=>v.type=H),options:x,onChange:E},null,8,["value"])]),_:1},8,["label"]),v.type=="array"?(T(),Z(ge,{key:0},[h(te,{label:y(n)("components.nodes.llms.common.array_configuration_mode")},{default:b(()=>[h(M,{ref:"select",value:k.value,"onUpdate:value":O[18]||(O[18]=H=>k.value=H)},{default:b(()=>[h(se,{value:"simple"},{default:b(()=>[ne(J(y(n)("components.nodes.llms.common.array_configuration_mode_simple")),1)]),_:1}),h(se,{value:"manual"},{default:b(()=>[ne(J(y(n)("components.nodes.llms.common.array_configuration_mode_manual")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),k.value=="simple"?(T(),X(te,{key:0,label:y(n)("components.nodes.llms.common.array_items_type")},{default:b(()=>[h(M,{ref:"select",value:Q.value,"onUpdate:value":O[19]||(O[19]=H=>Q.value=H),options:x},null,8,["value"])]),_:1},8,["label"])):ce("",!0),k.value=="manual"?(T(),X(te,{key:1,label:y(n)("components.nodes.llms.common.array_items_manual_schema")},{default:b(()=>[h(N,{value:$.value,"onUpdate:value":O[20]||(O[20]=H=>$.value=H),autoSize:{minRows:3,maxRows:20},showCount:!0},null,8,["value"])]),_:1},8,["label"])):ce("",!0)],64)):v.type=="object"?(T(),X(te,{key:1,label:y(n)("components.nodes.llms.common.object_items_manual_schema")},{default:b(()=>[h(N,{value:S.value,"onUpdate:value":O[21]||(O[21]=H=>S.value=H),autoSize:{minRows:3,maxRows:20},showCount:!0},null,8,["value"])]),_:1},8,["label"])):ce("",!0)]),_:1})]),_:1},8,["open","title"])]),_:1},8,["name","data"]),[[An,o.value.use_function_call.value]]),Vn(h(Ee,{name:y(n)("components.nodes.llms.common.function_call_mode"),type:"target",data:o.value.function_call_mode,"onUpdate:data":O[25]||(O[25]=H=>o.value.function_call_mode=H)},{default:b(()=>[h(M,{style:{width:"100%"},value:o.value.function_call_mode.value,"onUpdate:value":O[24]||(O[24]=H=>o.value.function_call_mode.value=H),options:o.value.function_call_mode.options},null,8,["value","options"])]),_:1},8,["name","data"]),[[An,o.value.use_function_call.value]])]),_:1})]),_:1},8,["nodeId","fieldsData","debug"])}}},g1=Object.freeze(Object.defineProperty({__proto__:null,default:_1},Symbol.toStringTag,{value:"Module"}));function ld(){return{description:"description",task_name:"media_processing.glm_vision",has_inputs:!0,template:{text_prompt:{required:!0,placeholder:"",show:!1,value:"",name:"text_prompt",display_name:"text_prompt",type:"str",list:!1,field_type:"textarea"},images_or_urls:{required:!1,placeholder:"",show:!1,value:"images",options:[{value:"images",label:"images"},{value:"urls",label:"urls"}],name:"images_or_urls",display_name:"images_or_urls",type:"str",clear_after_run:!1,list:!0,field_type:"radio"},images:{required:!0,placeholder:"",show:!0,value:[],name:"images",display_name:"images",type:"str",list:!1,field_type:"file",support_file_types:".jpg, .jpeg, .png, .webp",condition:e=>e.images_or_urls.value=="images"},urls:{required:!0,placeholder:"",show:!1,value:"",name:"urls",display_name:"urls",type:"str",list:!1,field_type:"input",condition:e=>e.images_or_urls.value=="urls"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const y1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:ld},Symbol.toStringTag,{value:"Module"})),O1={__name:"GlmVision",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=ld();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),ke(()=>n.value.images_or_urls,()=>{n.value.images_or_urls.value=="images"?n.value.urls.show=!1:n.value.images.show=!1},{deep:!0}),(a,l)=>(T(),X(Qe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.mediaProcessing.GlmVision",documentLink:"https://vectorvein.com/help/docs/media-processing#h2-12"},null,8,["nodeId","debug","fieldsData"]))}},b1=Object.freeze(Object.defineProperty({__proto__:null,default:O1},Symbol.toStringTag,{value:"Module"}));function rd(){return{description:"description",task_name:"media_processing.gpt_vision",has_inputs:!0,template:{text_prompt:{required:!0,placeholder:"",show:!1,value:"",name:"text_prompt",display_name:"text_prompt",type:"str",list:!1,field_type:"textarea"},images_or_urls:{required:!1,placeholder:"",show:!1,value:"images",options:[{value:"images",label:"images"},{value:"urls",label:"urls"}],name:"images_or_urls",display_name:"images_or_urls",type:"str",clear_after_run:!1,list:!0,field_type:"radio"},images:{required:!0,placeholder:"",show:!0,value:[],name:"images",display_name:"images",type:"str",list:!1,field_type:"file",support_file_types:".jpg, .jpeg, .png, .webp",condition:e=>e.images_or_urls.value=="images"},urls:{required:!0,placeholder:"",show:!1,value:"",name:"urls",display_name:"urls",type:"str",list:!1,field_type:"input",condition:e=>e.images_or_urls.value=="urls"},detail_type:{required:!1,placeholder:"",show:!1,value:"auto",options:[{value:"auto",label:"auto"},{value:"low",label:"low"},{value:"high",label:"high"}],name:"detail_type",display_name:"detail_type",type:"str",clear_after_run:!1,list:!0,field_type:"select"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const w1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:rd},Symbol.toStringTag,{value:"Module"})),S1={__name:"GptVision",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=rd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),ke(()=>n.value.images_or_urls,()=>{n.value.images_or_urls.value=="images"?n.value.urls.show=!1:n.value.images.show=!1},{deep:!0}),(a,l)=>(T(),X(Qe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.mediaProcessing.GptVision",documentLink:"https://vectorvein.com/help/docs/media-processing#h2-4"},null,8,["nodeId","debug","fieldsData"]))}},x1=Object.freeze(Object.defineProperty({__proto__:null,default:S1},Symbol.toStringTag,{value:"Module"}));function id(){return{description:"description",task_name:"output.document",has_inputs:!0,template:{file_name:{required:!0,placeholder:"",show:!0,value:"",name:"file_name",display_name:"file_name",type:"str",list:!1,field_type:"input"},content:{required:!0,placeholder:"",show:!1,value:"",name:"content",display_name:"content",type:"str",list:!1,field_type:"textarea"},export_type:{required:!1,placeholder:"",show:!1,value:".docx",options:[{value:".docx",label:".docx"},{value:".xlsx",label:".xlsx"},{value:".txt",label:".txt"},{value:".md",label:".md"},{value:".json",label:".json"},{value:".csv",label:".csv"},{value:".html",label:".html"},{value:".srt",label:".srt"}],name:"export_type",display_name:"export_type",type:"str",clear_after_run:!1,list:!0,field_type:"select"},show_local_file:{required:!1,placeholder:"",show:!1,value:!0,name:"show_local_file",display_name:"show_local_file",type:"bool",clear_after_run:!1,list:!1,field_type:"checkbox"},output:{required:!1,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",clear_after_run:!1,list:!1,field_type:"local_file",is_output:!0}}}}const $1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:id},Symbol.toStringTag,{value:"Module"})),k1={__name:"Document",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=id();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,fieldsData:n.value,translatePrefix:"components.nodes.outputs.Document",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/outputs#h2-4"},null,8,["nodeId","fieldsData","debug"]))}},T1=Object.freeze(Object.defineProperty({__proto__:null,default:k1},Symbol.toStringTag,{value:"Module"}));function sd(){return{description:"description",task_name:"output.echarts",has_inputs:!0,template:{option:{required:!0,placeholder:"",show:!1,value:"",name:"option",display_name:"option",type:"str",list:!1,field_type:"textarea"},show_echarts:{required:!1,placeholder:"",show:!1,value:!0,name:"show_echarts",display_name:"show_echarts",type:"bool",clear_after_run:!1,list:!1,field_type:"checkbox"}}}}const E1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:sd},Symbol.toStringTag,{value:"Module"})),Q1={__name:"Echarts",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=sd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,fieldsData:n.value,translatePrefix:"components.nodes.outputs.Echarts",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/outputs#h2-27"},null,8,["nodeId","fieldsData","debug"]))}},P1=Object.freeze(Object.defineProperty({__proto__:null,default:Q1},Symbol.toStringTag,{value:"Module"}));function ud(){return{description:"description",task_name:"output.email",has_inputs:!0,template:{to_email:{required:!0,placeholder:"",show:!0,value:"",name:"to_email",display_name:"to_email",type:"str",list:!1,field_type:"input"},subject:{required:!0,placeholder:"",show:!0,value:"",name:"subject",display_name:"subject",type:"str",list:!1,field_type:"input"},content_html:{required:!0,placeholder:"",show:!1,value:"",name:"content_html",display_name:"content_html",type:"str",list:!1,field_type:"input"},attachments:{required:!1,placeholder:"",show:!1,value:"",name:"attachments",display_name:"attachments",type:"str",list:!1,field_type:"input"}}}}const C1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:ud},Symbol.toStringTag,{value:"Module"})),D1={__name:"Email",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=ud();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,fieldsData:n.value,translatePrefix:"components.nodes.outputs.Email",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/outputs#h2-8"},null,8,["nodeId","fieldsData","debug"]))}},z1=Object.freeze(Object.defineProperty({__proto__:null,default:D1},Symbol.toStringTag,{value:"Module"}));function cd(){return{description:"description",task_name:"output.mermaid",has_inputs:!0,template:{content:{required:!0,placeholder:"",show:!1,value:"",name:"content",display_name:"content",type:"str",list:!1,field_type:"textarea"},show_mermaid:{required:!1,placeholder:"",show:!1,value:!0,name:"show_mermaid",display_name:"show_mermaid",type:"bool",clear_after_run:!1,list:!1,field_type:"checkbox"}}}}const q1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:cd},Symbol.toStringTag,{value:"Module"})),N1={__name:"Mermaid",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=cd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,fieldsData:n.value,translatePrefix:"components.nodes.outputs.Mermaid",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/outputs#h2-24"},null,8,["nodeId","fieldsData","debug"]))}},M1=Object.freeze(Object.defineProperty({__proto__:null,default:N1},Symbol.toStringTag,{value:"Module"}));function dd(){return{description:"description",task_name:"output.mindmap",has_inputs:!0,template:{content:{required:!0,placeholder:"",show:!1,value:"",name:"content",display_name:"content",type:"str",list:!1,field_type:"textarea"},show_mind_map:{required:!1,placeholder:"",show:!1,value:!0,name:"show_mind_map",display_name:"show_mind_map",type:"bool",clear_after_run:!1,list:!1,field_type:"checkbox"}}}}const R1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:dd},Symbol.toStringTag,{value:"Module"})),I1={__name:"Mindmap",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=dd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,fieldsData:n.value,translatePrefix:"components.nodes.outputs.Mindmap",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/outputs#h2-11"},null,8,["nodeId","fieldsData","debug"]))}},V1=Object.freeze(Object.defineProperty({__proto__:null,default:I1},Symbol.toStringTag,{value:"Module"}));function pd(){return{description:"description",task_name:"output.text",has_inputs:!1,template:{text:{required:!0,placeholder:"",show:!0,value:"",name:"text",display_name:"text",type:"str",list:!1,field_type:"textarea"},output_title:{required:!0,placeholder:"",show:!1,value:"",name:"output_title",display_name:"output_title",type:"str",list:!1,field_type:"input",has_tooltip:!0},render_markdown:{required:!0,placeholder:"",show:!1,value:!0,name:"render_markdown",display_name:"render_markdown",type:"bool",list:!1,field_type:"checkbox"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str|dict",list:!1,field_type:"textarea",is_output:!0}}}}const A1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:pd},Symbol.toStringTag,{value:"Module"})),X1={__name:"Text",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=pd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,fieldsData:n.value,translatePrefix:"components.nodes.outputs.Text",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/outputs#h2-14"},null,8,["nodeId","fieldsData","debug"]))}},U1=Object.freeze(Object.defineProperty({__proto__:null,default:X1},Symbol.toStringTag,{value:"Module"}));function fd(){return{description:"description",task_name:"output.workflow_invoke_output",has_inputs:!1,template:{value:{required:!0,placeholder:"",show:!0,value:"",name:"value",display_name:"value",type:"any",list:!1,field_type:"textarea"},display_name:{required:!0,placeholder:"",show:!0,value:"",name:"display_name",display_name:"display_name",type:"any",list:!1,field_type:"input"}}}}const W1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:fd},Symbol.toStringTag,{value:"Module"})),j1={__name:"WorkflowInvokeOutput",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=fd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.outputs.WorkflowInvokeOutput",documentLink:"https://vectorvein.com/help/docs/outputs#h2-30"},null,8,["nodeId","debug","fieldsData"]))}},F1=Object.freeze(Object.defineProperty({__proto__:null,default:j1},Symbol.toStringTag,{value:"Module"}));function md(){return{description:"description",task_name:"relational_db.get_table_info",has_inputs:!0,template:{database:{required:!0,placeholder:"",show:!1,value:"",options:[],name:"database",display_name:"database",type:"str",list:!1,field_type:"select"},tables:{required:!0,placeholder:"",show:!1,value:[],options:[],name:"table",display_name:"table",type:"str",list:!1,field_type:"select"},output_sql:{required:!0,placeholder:"",show:!1,value:"",name:"output_sql",display_name:"output_sql",type:"list|str",list:!1,field_type:"",is_output:!0,has_tooltip:!0},output_json:{required:!0,placeholder:"",show:!1,value:[],name:"output_json",display_name:"output_json",type:"list|str",list:!1,field_type:"",is_output:!0}}}}const L1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:md},Symbol.toStringTag,{value:"Module"})),G1={__name:"GetTableInfo",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Ye(),o=hl(),{userRelationalDatabases:a}=Pt(o),l=j(t.data.template),r=md();Object.entries(r.template).forEach(([c,d])=>{l.value[c]=l.value[c]||d,d.is_output&&(l.value[c].is_output=!0)}),l.value.database.options=a.value.filter(c=>c.status=="VALID").map(c=>({value:c.rid,label:c.name}));const i=c=>{l.value.tables.options=[],l.value.tables.value=[],u(c)},s=j(!1),u=async c=>{if(!c){dt.error(n("components.nodes.relationalDb.GetTableInfo.select_database"));return}s.value=!0;const d=await Ou("list",{rid:c,status:["VA"],page_size:100});d.status==200&&(l.value.tables.options=d.data.tables.map(p=>({value:p.tid,label:p.name})),s.value=!1)};return(c,d)=>{const p=V("a-select"),f=V("a-button"),g=V("a-tooltip"),w=V("a-flex"),m=V("a-spin");return T(),X(Qe,{nodeId:e.id,debug:t.data.debug,fieldsData:l.value,translatePrefix:"components.nodes.relationalDb.GetTableInfo",documentLink:"https://vectorvein.com/help/docs/relational-db#h2-4"},{main:b(()=>[h(w,{vertical:"",gap:"small"},{default:b(()=>[h(Ee,{name:y(n)("components.nodes.relationalDb.GetTableInfo.database"),required:"",type:"target",data:l.value.database,"onUpdate:data":d[1]||(d[1]=v=>l.value.database=v)},{default:b(()=>[h(p,{style:{width:"100%"},class:"field-content",value:l.value.database.value,"onUpdate:value":d[0]||(d[0]=v=>l.value.database.value=v),options:l.value.database.options,onChange:i},null,8,["value","options"])]),_:1},8,["name","data"]),h(g,{placement:"left",title:y(n)("components.nodes.relationalDb.GetTableInfo.select_all_if_empty")},{default:b(()=>[h(Ee,{name:y(n)("components.nodes.relationalDb.GetTableInfo.tables"),required:"",type:"target",data:l.value.tables,"onUpdate:data":d[4]||(d[4]=v=>l.value.tables=v)},{default:b(()=>[h(m,{spinning:s.value},{default:b(()=>[h(w,{gap:"small",align:"center"},{default:b(()=>[h(p,{style:{width:"100%"},class:"field-content",value:l.value.tables.value,"onUpdate:value":d[2]||(d[2]=v=>l.value.tables.value=v),options:l.value.tables.options,mode:"tags"},null,8,["value","options"]),h(g,{title:y(n)("components.nodes.relationalDb.GetTableInfo.load_tables")},{default:b(()=>[h(f,{type:"text",onClick:d[3]||(d[3]=v=>u(l.value.database.value))},{icon:b(()=>[h(y(Pu))]),_:1})]),_:1},8,["title"])]),_:1})]),_:1},8,["spinning"])]),_:1},8,["name","data"])]),_:1},8,["title"])]),_:1})]),_:1},8,["nodeId","debug","fieldsData"])}}},B1=Object.freeze(Object.defineProperty({__proto__:null,default:G1},Symbol.toStringTag,{value:"Module"}));function hd(){return{description:"description",task_name:"relational_db.run_sql",has_inputs:!0,template:{database:{required:!0,placeholder:"",show:!1,value:"",options:[],name:"database",display_name:"database",type:"str",list:!1,field_type:"select"},sql:{required:!0,placeholder:"",show:!1,value:"",name:"sql",display_name:"sql",type:"str",list:!1,field_type:"textarea"},read_only:{required:!1,placeholder:"",show:!1,value:!1,name:"read_only",display_name:"read_only",type:"bool",list:!1,field_type:"checkbox",has_tooltip:!0},include_column_names:{required:!1,placeholder:"",show:!1,value:!0,name:"include_column_names",display_name:"include_column_names",type:"bool",list:!1,field_type:"checkbox",condition:e=>e.output_type.value=="list",has_tooltip:!0},max_count:{required:!0,placeholder:"",show:!1,value:100,name:"max_count",display_name:"max_count",type:"str",list:!1,field_type:"number"},output_type:{required:!0,placeholder:"",show:!1,value:"csv",options:[{value:"list",label:"list"},{value:"markdown",label:"markdown"},{value:"csv",label:"csv"}],name:"output_type",display_name:"output_type",type:"str",list:!1,field_type:"select"},output:{required:!0,placeholder:"",show:!1,value:[],name:"output",display_name:"output",type:"list|str",list:!1,field_type:"",is_output:!0}}}}const H1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:hd},Symbol.toStringTag,{value:"Module"})),Y1={__name:"RunSql",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=hl(),{userRelationalDatabases:o}=Pt(n),a=j(t.data.template),l=hd();return Object.entries(l.template).forEach(([r,i])=>{a.value[r]=a.value[r]||i,i.is_output&&(a.value[r].is_output=!0)}),a.value.database.options=o.value.filter(r=>r.status=="VALID").map(r=>({value:r.rid,label:r.name})),(r,i)=>(T(),X(Qe,{nodeId:e.id,fieldsData:a.value,translatePrefix:"components.nodes.relationalDb.RunSql",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/relational-db#h2-8"},null,8,["nodeId","fieldsData","debug"]))}},Z1=Object.freeze(Object.defineProperty({__proto__:null,default:Y1},Symbol.toStringTag,{value:"Module"}));function vd(){return{description:"description",task_name:"relational_db.smart_query",has_inputs:!0,template:{query:{required:!0,placeholder:"",show:!1,value:"",name:"query",display_name:"query",type:"str",list:!1,field_type:"textarea"},model:{required:!0,placeholder:"",show:!1,value:"OpenAI/gpt-35-turbo",options:Gp,name:"model",display_name:"model",type:"str",list:!1,field_type:"select"},database:{required:!0,placeholder:"",show:!1,value:"",options:[],name:"database",display_name:"database",type:"str",list:!1,field_type:"select"},tables:{required:!0,placeholder:"",show:!1,value:[],options:[],name:"table",display_name:"table",type:"str",list:!1,field_type:"select"},use_sample_data:{required:!1,placeholder:"",show:!1,value:!0,name:"use_sample_data",display_name:"use_sample_data",type:"bool",list:!1,field_type:"checkbox",group:"default"},include_column_names:{required:!1,placeholder:"",show:!1,value:!0,name:"include_column_names",display_name:"include_column_names",type:"bool",list:!1,field_type:"checkbox",group:"default"},max_count:{required:!0,placeholder:"",show:!1,value:100,name:"max_count",display_name:"max_count",type:"str",list:!1,field_type:"number",group:"default"},output_type:{required:!0,placeholder:"",show:!1,value:"csv",options:[{value:"list",label:"list"},{value:"markdown",label:"markdown"},{value:"csv",label:"csv"}],name:"output_type",display_name:"output_type",type:"str",list:!1,field_type:"select",group:"default"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"list|str",list:!1,field_type:"",is_output:!0},output_query_sql:{required:!0,placeholder:"",show:!1,value:"",name:"output_query_sql",display_name:"output_query_sql",type:"list|str",list:!1,field_type:"",is_output:!0}}}}const J1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:vd},Symbol.toStringTag,{value:"Module"})),K1={__name:"SmartQuery",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Ye(),o=hl(),{userRelationalDatabases:a}=Pt(o),l=j(t.data.template),r=vd();Object.entries(r.template).forEach(([d,p])=>{l.value[d]=l.value[d]||p,p.is_output&&(l.value[d].is_output=!0)}),l.value.database.options=a.value.filter(d=>d.status=="VALID").map(d=>({value:d.rid,label:d.name}));const i=d=>{l.value.tables.options=[],l.value.tables.value=[],u(d)},s=j(!1),u=async d=>{if(!d){dt.error(n("components.nodes.relationalDb.SmartQuery.select_database"));return}s.value=!0;const p=await Ou("list",{rid:d,status:["VA"],page_size:100});p.data.status==200&&(l.value.tables.options=p.data.data.tables.map(f=>({value:f.tid,label:f.name})),s.value=!1)},c=d=>{for(const p in l.value)l.value[p].group==="default"&&(l.value[p].group_collpased=d.collpased)};return(d,p)=>{const f=V("a-textarea"),g=V("a-select"),w=V("a-button"),m=V("a-tooltip"),v=V("a-flex"),k=V("a-spin"),Q=V("a-checkbox"),$=V("a-input-number");return T(),X(Qe,{nodeId:e.id,debug:t.data.debug,fieldsData:l.value,translatePrefix:"components.nodes.relationalDb.SmartQuery",documentLink:"https://vectorvein.com/help/docs/relational-db#h2-0"},{main:b(()=>[h(v,{vertical:"",gap:"small"},{default:b(()=>[h(Ee,{name:y(n)("components.nodes.relationalDb.SmartQuery.query"),required:"",type:"target",data:l.value.query,"onUpdate:data":p[1]||(p[1]=S=>l.value.query=S)},{default:b(()=>[h(f,{class:"field-content",value:l.value.query.value,"onUpdate:value":p[0]||(p[0]=S=>l.value.query.value=S),placeholder:l.value.query.placeholder},null,8,["value","placeholder"])]),_:1},8,["name","data"]),h(Ee,{name:y(n)("components.nodes.relationalDb.SmartQuery.model"),required:"",type:"target",data:l.value.model,"onUpdate:data":p[3]||(p[3]=S=>l.value.model=S)},{default:b(()=>[h(g,{style:{width:"100%"},class:"field-content",value:l.value.model.value,"onUpdate:value":p[2]||(p[2]=S=>l.value.model.value=S),options:l.value.model.options},null,8,["value","options"])]),_:1},8,["name","data"]),h(Ee,{name:y(n)("components.nodes.relationalDb.SmartQuery.database"),required:"",type:"target",data:l.value.database,"onUpdate:data":p[5]||(p[5]=S=>l.value.database=S)},{default:b(()=>[h(g,{style:{width:"100%"},class:"field-content",value:l.value.database.value,"onUpdate:value":p[4]||(p[4]=S=>l.value.database.value=S),options:l.value.database.options,onChange:i},null,8,["value","options"])]),_:1},8,["name","data"]),h(m,{placement:"left",title:y(n)("components.nodes.relationalDb.SmartQuery.select_all_if_empty")},{default:b(()=>[h(Ee,{name:y(n)("components.nodes.relationalDb.SmartQuery.tables"),type:"target",data:l.value.tables,"onUpdate:data":p[8]||(p[8]=S=>l.value.tables=S)},{default:b(()=>[h(k,{spinning:s.value},{default:b(()=>[h(v,{gap:"small",align:"center"},{default:b(()=>[h(g,{style:{width:"100%"},class:"field-content",value:l.value.tables.value,"onUpdate:value":p[6]||(p[6]=S=>l.value.tables.value=S),options:l.value.tables.options,mode:"tags"},null,8,["value","options"]),h(m,{title:y(n)("components.nodes.relationalDb.SmartQuery.load_tables")},{default:b(()=>[h(w,{type:"text",onClick:p[7]||(p[7]=S=>u(l.value.database.value))},{icon:b(()=>[h(y(Pu))]),_:1})]),_:1},8,["title"])]),_:1})]),_:1},8,["spinning"])]),_:1},8,["name","data"])]),_:1},8,["title"]),h(Bc,{id:"default",collapse:l.value.use_sample_data.group_collpased,name:y(n)("common.more_settings"),onCollapseChanged:c},{default:b(()=>[h(m,{placement:"left",title:y(n)("components.nodes.relationalDb.SmartQuery.use_sample_data_tip")},{default:b(()=>[h(Ee,{name:y(n)("components.nodes.relationalDb.SmartQuery.use_sample_data"),"name-only":"",type:"target",data:l.value.use_sample_data,"onUpdate:data":p[10]||(p[10]=S=>l.value.use_sample_data=S)},{inline:b(()=>[h(Q,{checked:l.value.use_sample_data.value,"onUpdate:checked":p[9]||(p[9]=S=>l.value.use_sample_data.value=S)},null,8,["checked"])]),_:1},8,["name","data"])]),_:1},8,["title"]),Vn(Ce("template",null,[h(m,{placement:"left",title:y(n)("components.nodes.relationalDb.SmartQuery.include_column_names_tip")},{default:b(()=>[h(Ee,{name:y(n)("components.nodes.relationalDb.SmartQuery.include_column_names"),"name-only":"",type:"target",data:l.value.include_column_names,"onUpdate:data":p[12]||(p[12]=S=>l.value.include_column_names=S)},{inline:b(()=>[h(Q,{checked:l.value.include_column_names.value,"onUpdate:checked":p[11]||(p[11]=S=>l.value.include_column_names.value=S)},null,8,["checked"])]),_:1},8,["name","data"])]),_:1},8,["title"])],512),[[An,l.value.output_type.value=="list"]]),h(Ee,{name:y(n)("components.nodes.relationalDb.SmartQuery.max_count"),type:"target",data:l.value.max_count,"onUpdate:data":p[14]||(p[14]=S=>l.value.max_count=S)},{default:b(()=>[h($,{style:{width:"100%"},class:"field-content",value:l.value.max_count.value,"onUpdate:value":p[13]||(p[13]=S=>l.value.max_count.value=S),placeholder:l.value.max_count.placeholder},null,8,["value","placeholder"])]),_:1},8,["name","data"]),h(Ee,{name:y(n)("components.nodes.relationalDb.SmartQuery.output_type"),type:"target",data:l.value.output_type,"onUpdate:data":p[16]||(p[16]=S=>l.value.output_type=S)},{default:b(()=>[h(g,{style:{width:"100%"},class:"field-content",value:l.value.output_type.value,"onUpdate:value":p[15]||(p[15]=S=>l.value.output_type.value=S),options:l.value.output_type.options},null,8,["value","options"])]),_:1},8,["name","data"])]),_:1},8,["collapse","name"])]),_:1})]),_:1},8,["nodeId","debug","fieldsData"])}}},eb=Object.freeze(Object.defineProperty({__proto__:null,default:K1},Symbol.toStringTag,{value:"Module"}));function _d(){return{description:"description",task_name:"text_processing.list_render",has_inputs:!0,template:{list:{required:!0,placeholder:"",show:!1,value:[],name:"list",display_name:"list",type:"str",list:!0,field_type:"list"},separator:{required:!1,placeholder:"",show:!1,value:"\\n\\n",name:"separator",display_name:"separator",type:"str",list:!0,field_type:"input"},output_type:{required:!0,placeholder:"",show:!1,value:"text",options:[{value:"text",label:"Text"},{value:"list",label:"List"}],name:"output_type",display_name:"output_type",type:"str",list:!1,field_type:"select"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"textarea",is_output:!0}}}}const tb=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:_d},Symbol.toStringTag,{value:"Module"})),nb={__name:"ListRender",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=_d();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,fieldsData:n.value,translatePrefix:"components.nodes.textProcessing.ListRender",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/text-processing#h2-0"},null,8,["nodeId","fieldsData","debug"]))}},ob=Object.freeze(Object.defineProperty({__proto__:null,default:nb},Symbol.toStringTag,{value:"Module"}));function gd(){return{description:"description",task_name:"text_processing.markdown_to_html",has_inputs:!0,template:{markdown:{required:!0,placeholder:"",show:!1,value:"",name:"markdown",display_name:"markdown",type:"str",list:!1,field_type:"textarea"},html:{required:!0,placeholder:"",show:!1,value:"",name:"html",display_name:"html",type:"str",list:!1,field_type:"textarea",is_output:!0}}}}const ab=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:gd},Symbol.toStringTag,{value:"Module"})),lb={__name:"MarkdownToHtml",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=gd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,fieldsData:n.value,translatePrefix:"components.nodes.textProcessing.MarkdownToHtml",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/text-processing#h2-4"},null,8,["nodeId","fieldsData","debug"]))}},rb=Object.freeze(Object.defineProperty({__proto__:null,default:lb},Symbol.toStringTag,{value:"Module"})),ib={__name:"TemplateEditorModal",props:{fields:{type:Object,required:!0,default:{}},open:{type:Boolean,required:!0,default:!1},template:{type:[String,Array],required:!0,default:""}},emits:["update:open","update:template"],setup(e,{emit:t}){const n=e,{t:o}=Ye(),a=t;let l=j(n.open),r=j(n.template);const i=()=>{l.value=!1,a("update:open",l.value),a("update:template",r.value)},s=()=>{l.value=!1,a("update:open",l.value)};ke(()=>n.open,c=>{l.value=c}),ke(()=>n.template,c=>{r.value=c});const u=(c,d)=>{c.dataTransfer.setData("text/plain",`{{${d}}}`)};return(c,d)=>{const p=V("a-typography-text"),f=V("a-button"),g=V("a-space"),w=V("a-card"),m=V("a-col"),v=V("a-textarea"),k=V("a-tab-pane"),Q=V("a-tabs"),$=V("a-row"),S=V("a-modal");return T(),X(S,{class:"template-editor",open:y(l),width:"80vw",onOk:i,onCancel:s,style:{"max-width":"1280px",width:"80vw"}},{title:b(()=>[h(y(so)),ne(" "+J(y(o)("components.templateEditorModal.title")),1)]),default:b(()=>[h($,{gutter:16},{default:b(()=>[h(m,{span:6},{default:b(()=>[h(w,null,{title:b(()=>[ne(J(y(o)("components.templateEditorModal.variable_fields"))+" ",1),h(p,{type:"secondary",style:{"font-size":"12px","font-weight":"normal"}},{default:b(()=>[ne(J(y(o)("components.templateEditorModal.drag_to_insert")),1)]),_:1})]),default:b(()=>[h(g,{direction:"vertical",style:{width:"100%"}},{default:b(()=>[(T(!0),Z(ge,null,Ae(Object.keys(n.fields),E=>(T(),Z(ge,{key:E},[["template","output"].includes(E)?ce("",!0):(T(),X(f,{key:0,class:"template-variable",block:"",draggable:"true",onDragstart:x=>u(x,E)},{default:b(()=>[ne(J(E),1)]),_:2},1032,["onDragstart"]))],64))),128))]),_:1})]),_:1})]),_:1}),h(m,{span:18},{default:b(()=>[h(w,{title:y(o)("components.templateEditorModal.template")},{default:b(()=>[typeof n.template=="string"?(T(),X(v,{key:0,class:"template-textarea",value:y(r),"onUpdate:value":d[0]||(d[0]=E=>_o(r)?r.value=E:r=E),rows:20,showCount:""},null,8,["value"])):(T(),X(Q,{key:1},{default:b(()=>[(T(!0),Z(ge,null,Ae(n.template,(E,x)=>(T(),X(k,{key:x},{tab:b(()=>[h(y(kf)),ne(" "+J(x),1)]),default:b(()=>[h(v,{class:"template-textarea",value:y(r)[x],"onUpdate:value":I=>y(r)[x]=I,rows:20,showCount:""},null,8,["value","onUpdate:value"])]),_:2},1024))),128))]),_:1}))]),_:1},8,["title"])]),_:1})]),_:1})]),_:1},8,["open"])}}};function yd(){return{description:"description",task_name:"text_processing.template_compose",has_inputs:!0,template:{template:{required:!0,placeholder:"",show:!1,value:"",name:"template",display_name:"template",type:"str",list:!1,field_type:"textarea"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"textarea",is_output:!0}}}}const sb=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:yd},Symbol.toStringTag,{value:"Module"})),ub={class:"add-field-button-container"},cb={style:{display:"flex",gap:"5px"}},db={__name:"TemplateCompose",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Ye(),o=_l(),a=(S,E)=>{o.push({action:S,data:E,nodeId:t.id})},l=j(t.data.template),r=yd();Object.entries(r.template).forEach(([S,E])=>{l.value[S]=l.value[S]||E,E.is_output&&(l.value[S].is_output=!0)});const i=j(Object.keys(l.value)),s=["template","output"],u=ut({required:!0,placeholder:"",show:!1,value:"",options:[],name:"",display_name:"",type:"str",list:!1,field_type:"input"}),c=j(!1),d=()=>{g.value=!1,u.display_name="",u.options=[],c.value=!0},p=()=>{if(s.includes(u.display_name)){dt.error(n("components.nodes.textProcessing.TemplateCompose.name_reserved"));return}const S=i.value.indexOf(w.value);u.name=u.display_name,l.value[u.name]=JSON.parse(JSON.stringify(u)),u.display_name="",u.options=[],g.value&&w.value!=u.name?(delete l.value[w.value],i.value[S]=u.name,l.value.template.value=l.value.template.value.replace(`{{${w.value}}}`,`{{${u.name}}}`),a("change",{event:"editField",oldFieldName:w.value,newFieldName:u.name})):g.value&&m.value!=u.field_type?(l.value[u.name].field_type=u.field_type,a("change",{event:"editFieldType",fieldName:u.name,fieldType:u.field_type})):i.value.push(u.name),c.value=!1},f=S=>{i.value=i.value.filter(E=>E!=S),delete l.value[S],a("change",{event:"removeField",fieldName:S})},g=j(!1),w=j(""),m=j(""),v=S=>{w.value=S,m.value=l.value[S].field_type,u.display_name=S,u.name=S,u.value=l.value[S].value,u.show=l.value[S].show,u.options=l.value[S].options,u.field_type=l.value[S].field_type,c.value=!0,g.value=!0},k=(S,E)=>{u.options[E]={value:S,label:S}},Q=S=>{u.options.splice(S,1)},$=j(!1);return(S,E)=>{const x=V("a-select"),I=V("a-textarea"),U=V("a-input"),R=V("a-button"),L=V("a-select-option"),ee=V("a-form-item"),G=V("a-col"),_=V("a-row"),C=V("a-form"),O=V("a-drawer"),N=V("a-flex"),M=V("a-typography-paragraph");return T(),X(Qe,{nodeId:e.id,debug:t.data.debug,width:300,fieldsData:l.value,translatePrefix:"components.nodes.textProcessing.TemplateCompose",documentLink:"https://vectorvein.com/help/docs/text-processing#h2-8"},{main:b(()=>[h(N,{vertical:"",gap:"small"},{default:b(()=>[(T(!0),Z(ge,null,Ae(i.value,(P,D)=>(T(),Z(ge,{key:D},[["template","output"].includes(P)?ce("",!0):(T(),X(Ee,{key:0,name:l.value[P].display_name,required:"",type:"target",deletable:"",editable:"",onDelete:q=>f(P),onEdit:q=>v(P),data:l.value[P],"onUpdate:data":q=>l.value[P]=q},{default:b(()=>[l.value[P].field_type=="select"?(T(),X(x,{key:0,class:"field-content",style:{width:"100%"},value:l.value[P].value,"onUpdate:value":q=>l.value[P].value=q,options:l.value[P].options,placeholder:l.value[P].placeholder},null,8,["value","onUpdate:value","options","placeholder"])):l.value[P].field_type=="textarea"?(T(),X(I,{key:1,class:"field-content",value:l.value[P].value,"onUpdate:value":q=>l.value[P].value=q,autoSize:{minRows:2,maxRows:10},showCount:!0,placeholder:l.value[P].placeholder},null,8,["value","onUpdate:value","placeholder"])):l.value[P].field_type=="input"?(T(),X(U,{key:2,class:"field-content",value:l.value[P].value,"onUpdate:value":q=>l.value[P].value=q,placeholder:l.value[P].placeholder},null,8,["value","onUpdate:value","placeholder"])):ce("",!0)]),_:2},1032,["name","onDelete","onEdit","data","onUpdate:data"]))],64))),128)),Ce("div",ub,[h(R,{type:"dashed",block:"",onClick:d,class:"add-field-button"},{icon:b(()=>[h(y(Xn))]),default:b(()=>[ne(" "+J(y(n)("components.nodes.textProcessing.TemplateCompose.add_field")),1)]),_:1}),h(O,{open:c.value,"onUpdate:open":E[3]||(E[3]=P=>c.value=P),title:y(n)(`components.nodes.textProcessing.TemplateCompose.${g.value?"edit":"add"}_field`),placement:"right"},{extra:b(()=>[h(R,{type:"primary",onClick:p},{default:b(()=>[ne(J(y(n)(g.value?"common.save":"common.add")),1)]),_:1})]),default:b(()=>[h(C,null,{default:b(()=>[h(ee,{label:y(n)("components.nodes.textProcessing.TemplateCompose.add_field_type")},{default:b(()=>[h(x,{ref:"select",value:u.field_type,"onUpdate:value":E[0]||(E[0]=P=>u.field_type=P),style:{width:"100%"}},{default:b(()=>[h(L,{value:"input"},{default:b(()=>[ne(J(y(n)("components.nodes.textProcessing.TemplateCompose.field_type_input")),1)]),_:1}),h(L,{value:"textarea"},{default:b(()=>[ne(J(y(n)("components.nodes.textProcessing.TemplateCompose.field_type_textarea")),1)]),_:1}),h(L,{value:"select"},{default:b(()=>[ne(J(y(n)("components.nodes.textProcessing.TemplateCompose.field_type_select")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),h(ee,{label:y(n)("components.nodes.textProcessing.TemplateCompose.add_field_display_name")},{default:b(()=>[h(U,{value:u.display_name,"onUpdate:value":E[1]||(E[1]=P=>u.display_name=P)},null,8,["value"])]),_:1},8,["label"]),u.field_type=="select"?(T(),X(ee,{key:0,label:y(n)("components.nodes.textProcessing.TemplateCompose.add_field_list_options")},{default:b(()=>[h(_,{type:"flex",gutter:[12,12]},{default:b(()=>[(T(!0),Z(ge,null,Ae(u.options,(P,D)=>(T(),X(G,{span:24,key:D},{default:b(()=>[Ce("div",cb,[h(U,{value:P.value,onInput:q=>k(q.target.value,D)},null,8,["value","onInput"]),h(y(Vo),{onClick:q=>Q(D)},null,8,["onClick"])])]),_:2},1024))),128)),h(G,{span:24},{default:b(()=>[h(R,{type:"dashed",style:{width:"100%"},onClick:E[2]||(E[2]=P=>u.options.push({value:"",label:""}))},{default:b(()=>[h(y(Xn)),ne(" "+J(y(n)("components.nodes.listField.add_item")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["label"])):ce("",!0)]),_:1})]),_:1},8,["open","title"])])]),_:1}),h(Ee,{name:y(n)("components.nodes.textProcessing.TemplateCompose.template"),required:"",type:"target",data:l.value.template,"onUpdate:data":E[7]||(E[7]=P=>l.value.template=P)},{default:b(()=>[h(M,{ellipsis:{row:1,expandable:!1},content:l.value.template.value},null,8,["content"]),h(R,{block:"",type:"dashed",class:"open-template-editor-button",onClick:E[4]||(E[4]=P=>$.value=!0)},{icon:b(()=>[h(y(so))]),default:b(()=>[ne(" "+J(y(n)("components.nodes.textProcessing.TemplateCompose.open_template_editor")),1)]),_:1}),h(ib,{open:$.value,"onUpdate:open":E[5]||(E[5]=P=>$.value=P),template:l.value.template.value,"onUpdate:template":E[6]||(E[6]=P=>l.value.template.value=P),fields:l.value},null,8,["open","template","fields"])]),_:1},8,["name","data"])]),_:1},8,["nodeId","debug","fieldsData"])}}},pb=wn(db,[["__scopeId","data-v-cc1795ab"]]),fb=Object.freeze(Object.defineProperty({__proto__:null,default:pb},Symbol.toStringTag,{value:"Module"}));function Od(){return{description:"description",task_name:"text_processing.text_in_out",has_inputs:!0,template:{text:{required:!0,placeholder:"",show:!0,value:"",name:"text",display_name:"text",type:"str",list:!1,field_type:"textarea"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const mb=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Od},Symbol.toStringTag,{value:"Module"})),hb={__name:"TextInOut",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Ye(),o=j(t.data.template),a=Od();Object.entries(a.template).forEach(([r,i])=>{o.value[r]=o.value[r]||i,i.is_output&&(o.value[r].is_output=!0)});const l=j(!1);return(r,i)=>{const s=V("a-textarea"),u=V("a-input"),c=V("a-modal");return T(),X(Qe,{nodeId:e.id,fieldsData:o.value,translatePrefix:"components.nodes.textProcessing.TextInOut",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/text-processing#h2-12"},{main:b(()=>[h(Ee,{name:o.value.text.display_name,required:"",editable:"",onEdit:i[3]||(i[3]=d=>l.value=!0),type:"target",data:o.value.text,"onUpdate:data":i[4]||(i[4]=d=>o.value.text=d)},{default:b(()=>[h(s,{class:"field-content",value:o.value.text.value,"onUpdate:value":i[0]||(i[0]=d=>o.value.text.value=d),placeholder:o.value.text.placeholder,autoSize:{minRows:2,maxRows:10}},null,8,["value","placeholder"]),h(c,{open:l.value,"onUpdate:open":i[2]||(i[2]=d=>l.value=d),title:y(n)("components.nodes.textProcessing.TextInOut.edit_name"),footer:null},{default:b(()=>[h(u,{value:o.value.text.display_name,"onUpdate:value":i[1]||(i[1]=d=>o.value.text.display_name=d)},null,8,["value"])]),_:1},8,["open","title"])]),_:1},8,["name","data"])]),_:1},8,["nodeId","fieldsData","debug"])}}},vb=Object.freeze(Object.defineProperty({__proto__:null,default:hb},Symbol.toStringTag,{value:"Module"}));function bd(){return{description:"description",task_name:"text_processing.text_splitters",has_inputs:!0,template:{text:{required:!0,placeholder:"",show:!1,value:"",name:"text",display_name:"text",type:"str",list:!1,field_type:"textarea"},split_method:{required:!0,placeholder:"",show:!1,value:"general",options:[{value:"general",label:"general"},{value:"delimiter",label:"delimiter"},{value:"markdown",label:"markdown"}],name:"split_method",display_name:"split_method",type:"str",list:!1,field_type:"select"},chunk_length:{required:!0,placeholder:"",show:!1,value:500,name:"chunk_length",display_name:"chunk_length",type:"str",list:!1,field_type:"number",condition:e=>["general","markdown"].includes(e.split_method.value)},chunk_overlap:{required:!0,placeholder:"",show:!1,value:30,name:"chunk_overlap",display_name:"chunk_overlap",type:"str",list:!1,field_type:"number",condition:e=>["general","markdown"].includes(e.split_method.value)},delimiter:{required:!1,placeholder:"",show:!1,value:"\\n",name:"delimiter",display_name:"delimiter",type:"str",list:!0,field_type:"input",condition:e=>e.split_method.value=="delimiter"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"list",list:!0,field_type:"textarea",is_output:!0}}}}const _b=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:bd},Symbol.toStringTag,{value:"Module"})),gb={__name:"TextSplitters",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=bd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.textProcessing.TextSplitters",documentLink:"https://vectorvein.com/help/docs/text-processing#h2-16"},null,8,["nodeId","debug","fieldsData"]))}},yb=Object.freeze(Object.defineProperty({__proto__:null,default:gb},Symbol.toStringTag,{value:"Module"}));function wd(){return{description:"description",task_name:"text_processing.text_truncation",has_inputs:!0,template:{text:{required:!0,placeholder:"",show:!1,value:"",name:"text",display_name:"text",type:"str",list:!1,field_type:"textarea"},truncate_method:{required:!0,placeholder:"",show:!1,value:"general",options:[{value:"general",label:"general"},{value:"markdown",label:"markdown"}],name:"truncate_method",display_name:"truncate_method",type:"str",list:!1,field_type:"select"},truncate_length:{required:!0,placeholder:"",show:!1,value:2e3,name:"truncate_length",display_name:"truncate_length",type:"str",list:!1,field_type:"number"},floating_range:{required:!0,placeholder:"",show:!1,value:100,name:"floating_range",display_name:"floating_range",type:"str",list:!1,field_type:"number"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"list",list:!0,field_type:"textarea",is_output:!0}}}}const Ob=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:wd},Symbol.toStringTag,{value:"Module"})),bb={__name:"TextTruncation",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=wd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.textProcessing.TextTruncation",documentLink:"https://vectorvein.com/help/docs/text-processing#h2-20"},null,8,["nodeId","debug","fieldsData"]))}},wb=Object.freeze(Object.defineProperty({__proto__:null,default:bb},Symbol.toStringTag,{value:"Module"}));function Sd(){return{description:"description",task_name:"tools.image_search",has_inputs:!0,template:{search_text:{required:!0,placeholder:"",show:!1,value:"",name:"search_text",display_name:"search_text",type:"str",list:!1,field_type:"input"},search_engine:{required:!0,placeholder:"",show:!1,value:"bing",options:[{value:"bing",label:"bing"},{value:"pexels",label:"pexels"},{value:"unsplash",label:"unsplash"}],name:"search_engine",display_name:"search_engine",type:"str",list:!1,field_type:"select"},count:{required:!0,placeholder:"",show:!1,value:5,name:"count",display_name:"count",type:"str",list:!1,field_type:"number"},output_type:{required:!0,placeholder:"",show:!1,value:"markdown",options:[{value:"text",label:"text"},{value:"markdown",label:"markdown"}],name:"output_type",display_name:"output_type",type:"str",list:!1,field_type:"select"},output:{required:!0,placeholder:"",show:!1,value:[],name:"output",display_name:"output",type:"list|str",list:!1,field_type:"",is_output:!0}}}}const Sb=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Sd},Symbol.toStringTag,{value:"Module"})),xb={__name:"ImageSearch",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=Sd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,fieldsData:n.value,translatePrefix:"components.nodes.tools.ImageSearch",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/tools#h2-0"},null,8,["nodeId","fieldsData","debug"]))}},$b=Object.freeze(Object.defineProperty({__proto__:null,default:xb},Symbol.toStringTag,{value:"Module"})),kb=bu({String:Se.string,Number:Se.number,"True False":Se.bool,PropertyName:Se.propertyName,Null:Se.null,",":Se.separator,"[ ]":Se.squareBracket,"{ }":Se.brace}),Tb=wu.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"⚠ JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[kb],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oc~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Oe~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zOh~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yOg~~'OO]~~'TO[~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),Eb=xu.define({name:"json",parser:Tb.configure({props:[$u.add({Object:ki({except:/^\s*\}/}),Array:ki({except:/^\s*\]/})}),ku.add({"Object Array":Tu})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Qb(){return new Su(Eb)}const Pb=1,xd=194,$d=195,Cb=196,xs=197,Db=198,zb=199,qb=200,Nb=2,kd=3,$s=201,Mb=24,Rb=25,Ib=49,Vb=50,Ab=55,Xb=56,Ub=57,Wb=59,jb=60,Fb=61,Lb=62,Gb=63,Bb=65,Hb=238,Yb=71,Zb=241,Jb=242,Kb=243,ew=244,tw=245,nw=246,ow=247,aw=248,Td=72,lw=249,rw=250,iw=251,sw=252,uw=253,cw=254,dw=255,pw=256,fw=73,mw=77,hw=264,vw=112,_w=130,gw=151,yw=152,Ow=155,Fn=10,Go=13,pi=32,Pl=9,fi=35,bw=40,ww=46,Qr=123,ks=125,Ed=39,Qd=34,Sw=92,xw=111,$w=120,kw=78,Tw=117,Ew=85,Qw=new Set([Rb,Ib,Vb,hw,Bb,_w,Xb,Ub,Hb,Lb,Gb,Td,fw,mw,jb,Fb,gw,yw,Ow,vw]);function Bl(e){return e==Fn||e==Go}function Hl(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}const Pw=new vl((e,t)=>{let n;if(e.next<0)e.acceptToken(zb);else if(t.context.flags&qa)Bl(e.next)&&e.acceptToken(Db,1);else if(((n=e.peek(-1))<0||Bl(n))&&t.canShift(xs)){let o=0;for(;e.next==pi||e.next==Pl;)e.advance(),o++;(e.next==Fn||e.next==Go||e.next==fi)&&e.acceptToken(xs,-o)}else Bl(e.next)&&e.acceptToken(Cb,1)},{contextual:!0}),Cw=new vl((e,t)=>{let n=t.context;if(n.flags)return;let o=e.peek(-1);if(o==Fn||o==Go){let a=0,l=0;for(;;){if(e.next==pi)a++;else if(e.next==Pl)a+=8-a%8;else break;e.advance(),l++}a!=n.indent&&e.next!=Fn&&e.next!=Go&&e.next!=fi&&(a<n.indent?e.acceptToken($d,-l):e.acceptToken(xd))}}),qa=1,Pd=2,Bt=4,Ht=8,Yt=16,Zt=32;function Na(e,t,n){this.parent=e,this.indent=t,this.flags=n,this.hash=(e?e.hash+e.hash<<8:0)+t+(t<<4)+n+(n<<6)}const Dw=new Na(null,0,0);function zw(e){let t=0;for(let n=0;n<e.length;n++)t+=e.charCodeAt(n)==Pl?8-t%8:1;return t}const Ts=new Map([[Zb,0],[Jb,Bt],[Kb,Ht],[ew,Ht|Bt],[tw,Yt],[nw,Yt|Bt],[ow,Yt|Ht],[aw,Yt|Ht|Bt],[lw,Zt],[rw,Zt|Bt],[iw,Zt|Ht],[sw,Zt|Ht|Bt],[uw,Zt|Yt],[cw,Zt|Yt|Bt],[dw,Zt|Yt|Ht],[pw,Zt|Yt|Ht|Bt]].map(([e,t])=>[e,t|Pd])),qw=new pf({start:Dw,reduce(e,t,n,o){return e.flags&qa&&Qw.has(t)||(t==Yb||t==Td)&&e.flags&Pd?e.parent:e},shift(e,t,n,o){return t==xd?new Na(e,zw(o.read(o.pos,n.pos)),0):t==$d?e.parent:t==Mb||t==Ab||t==Wb||t==kd?new Na(e,0,qa):Ts.has(t)?new Na(e,0,Ts.get(t)|e.flags&qa):e},hash(e){return e.hash}}),Nw=new vl(e=>{for(let t=0;t<5;t++){if(e.next!="print".charCodeAt(t))return;e.advance()}if(!/\w/.test(String.fromCharCode(e.next)))for(let t=0;;t++){let n=e.peek(t);if(!(n==pi||n==Pl)){n!=bw&&n!=ww&&n!=Fn&&n!=Go&&n!=fi&&e.acceptToken(Pb);return}}}),Mw=new vl((e,t)=>{let{flags:n}=t.context,o=n&Bt?Qd:Ed,a=(n&Ht)>0,l=!(n&Yt),r=(n&Zt)>0,i=e.pos;for(;!(e.next<0);)if(r&&e.next==Qr)if(e.peek(1)==Qr)e.advance(2);else{if(e.pos==i){e.acceptToken(kd,1);return}break}else if(l&&e.next==Sw){if(e.pos==i){e.advance();let s=e.next;s>=0&&(e.advance(),Rw(e,s)),e.acceptToken(Nb);return}break}else if(e.next==o&&(!a||e.peek(1)==o&&e.peek(2)==o)){if(e.pos==i){e.acceptToken($s,a?3:1);return}break}else if(e.next==Fn){if(a)e.advance();else if(e.pos==i){e.acceptToken($s);return}break}else e.advance();e.pos>i&&e.acceptToken(qb)});function Rw(e,t){if(t==xw)for(let n=0;n<2&&e.next>=48&&e.next<=55;n++)e.advance();else if(t==$w)for(let n=0;n<2&&Hl(e.next);n++)e.advance();else if(t==Tw)for(let n=0;n<4&&Hl(e.next);n++)e.advance();else if(t==Ew)for(let n=0;n<8&&Hl(e.next);n++)e.advance();else if(t==kw&&e.next==Qr){for(e.advance();e.next>=0&&e.next!=ks&&e.next!=Ed&&e.next!=Qd&&e.next!=Fn;)e.advance();e.next==ks&&e.advance()}}const Iw=bu({'async "*" "**" FormatConversion FormatSpec':Se.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":Se.controlKeyword,"in not and or is del":Se.operatorKeyword,"from def class global nonlocal lambda":Se.definitionKeyword,import:Se.moduleKeyword,"with as print":Se.keyword,Boolean:Se.bool,None:Se.null,VariableName:Se.variableName,"CallExpression/VariableName":Se.function(Se.variableName),"FunctionDefinition/VariableName":Se.function(Se.definition(Se.variableName)),"ClassDefinition/VariableName":Se.definition(Se.className),PropertyName:Se.propertyName,"CallExpression/MemberExpression/PropertyName":Se.function(Se.propertyName),Comment:Se.lineComment,Number:Se.number,String:Se.string,FormatString:Se.special(Se.string),Escape:Se.escape,UpdateOp:Se.updateOperator,"ArithOp!":Se.arithmeticOperator,BitOp:Se.bitwiseOperator,CompareOp:Se.compareOperator,AssignOp:Se.definitionOperator,Ellipsis:Se.punctuation,At:Se.meta,"( )":Se.paren,"[ ]":Se.squareBracket,"{ }":Se.brace,".":Se.derefOperator,", ;":Se.separator}),Vw={__proto__:null,await:44,or:54,and:56,in:60,not:62,is:64,if:70,else:72,lambda:76,yield:94,from:96,async:102,for:104,None:162,True:164,False:164,del:178,pass:182,break:186,continue:190,return:194,raise:202,import:206,as:208,global:212,nonlocal:214,assert:218,type:223,elif:236,while:240,try:246,except:248,finally:250,with:254,def:258,class:268,match:279,case:285},Aw=wu.deserialize({version:14,states:"##pO`QeOOP$}OSOOO&WQtO'#HUOOQS'#Co'#CoOOQS'#Cp'#CpO'vQdO'#CnO*UQtO'#HTOOQS'#HU'#HUOOQS'#DU'#DUOOQS'#HT'#HTO*rQdO'#D_O+VQdO'#DfO+gQdO'#DjO+zOWO'#DuO,VOWO'#DvO.[QtO'#GuOOQS'#Gu'#GuO'vQdO'#GtO0ZQtO'#GtOOQS'#Eb'#EbO0rQdO'#EcOOQS'#Gs'#GsO0|QdO'#GrOOQV'#Gr'#GrO1XQdO'#FYOOQS'#G^'#G^O1^QdO'#FXOOQV'#IS'#ISOOQV'#Gq'#GqOOQV'#Fq'#FqQ`QeOOO'vQdO'#CqO1lQdO'#C}O1sQdO'#DRO2RQdO'#HYO2cQtO'#EVO'vQdO'#EWOOQS'#EY'#EYOOQS'#E['#E[OOQS'#E^'#E^O2wQdO'#E`O3_QdO'#EdO1XQdO'#EfO3rQtO'#EfO1XQdO'#EiO0rQdO'#ElO1XQdO'#EnO0rQdO'#EtO0rQdO'#EwO3}QdO'#EyO4UQdO'#FOO4aQdO'#EzO0rQdO'#FOO1XQdO'#FQO1XQdO'#FVO4fQdO'#F[P4mOdO'#GpPOOO)CBd)CBdOOQS'#Ce'#CeOOQS'#Cf'#CfOOQS'#Cg'#CgOOQS'#Ch'#ChOOQS'#Ci'#CiOOQS'#Cj'#CjOOQS'#Cl'#ClO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO4xQdO'#DoOOQS,5:Y,5:YO5]QdO'#HdOOQS,5:],5:]O5jQ!fO,5:]O5oQtO,59YO1lQdO,59bO1lQdO,59bO1lQdO,59bO8_QdO,59bO8dQdO,59bO8kQdO,59jO8rQdO'#HTO9xQdO'#HSOOQS'#HS'#HSOOQS'#D['#D[O:aQdO,59aO'vQdO,59aO:oQdO,59aOOQS,59y,59yO:tQdO,5:RO'vQdO,5:ROOQS,5:Q,5:QO;SQdO,5:QO;XQdO,5:XO'vQdO,5:XO'vQdO,5:VOOQS,5:U,5:UO;jQdO,5:UO;oQdO,5:WOOOW'#Fy'#FyO;tOWO,5:aOOQS,5:a,5:aO<PQdO'#HwOOOW'#Dw'#DwOOOW'#Fz'#FzO<aOWO,5:bOOQS,5:b,5:bOOQS'#F}'#F}O<oQtO,5:iO?aQtO,5=`O?zQ#xO,5=`O@kQtO,5=`OOQS,5:},5:}OASQeO'#GWOBfQdO,5;^OOQV,5=^,5=^OBqQtO'#H}OCYQdO,5;tOOQS-E:[-E:[OOQV,5;s,5;sO4[QdO'#FQOOQV-E9o-E9oOCbQtO,59]OEiQtO,59iOFSQdO'#HVOF_QdO'#HVO1XQdO'#HVOFjQdO'#DTOFrQdO,59mOFwQdO'#HZO'vQdO'#HZO0rQdO,5=tOOQS,5=t,5=tO0rQdO'#EROOQS'#ES'#ESOGfQdO'#GPOGvQdO,58|OGvQdO,58|O*xQdO,5:oOHUQtO'#H]OOQS,5:r,5:rOOQS,5:z,5:zOHiQdO,5;OOHzQdO,5;QOOQS'#GS'#GSOIYQtO,5;QOIhQdO,5;QOImQdO'#IQOOQS,5;T,5;TOI{QdO'#H|OOQS,5;W,5;WOJ^QdO,5;YO4aQdO,5;`O4aQdO,5;cOJfQtO'#ITO'vQdO'#ITOJpQdO,5;eO3}QdO,5;eO0rQdO,5;jO1XQdO,5;lOJuQeO'#EuOLRQgO,5;fO!!SQdO'#IUO4aQdO,5;jO!!_QdO,5;lO!!gQdO,5;qO!!rQtO,5;vO'vQdO,5;vPOOO,5=[,5=[P!!yOSO,5=[P!#OOdO,5=[O!%sQtO1G.jO!%zQtO1G.jO!(kQtO1G.jO!(uQtO1G.jO!+`QtO1G.jO!+sQtO1G.jO!,WQdO'#HcO!,fQtO'#GuO0rQdO'#HcO!,pQdO'#HbOOQS,5:Z,5:ZO!,xQdO,5:ZO!,}QdO'#HeO!-YQdO'#HeO!-mQdO,5>OOOQS'#Ds'#DsOOQS1G/w1G/wOOQS1G.|1G.|O!.mQtO1G.|O!.tQtO1G.|O1lQdO1G.|O!/aQdO1G/UOOQS'#DZ'#DZO0rQdO,59tOOQS1G.{1G.{O!/hQdO1G/eO!/xQdO1G/eO!0QQdO1G/fO'vQdO'#H[O!0VQdO'#H[O!0[QtO1G.{O!0lQdO,59iO!1rQdO,5=zO!2SQdO,5=zO!2[QdO1G/mO!2aQtO1G/mOOQS1G/l1G/lO!2qQdO,5=uO!3hQdO,5=uO0rQdO1G/qO!4VQdO1G/sO!4[QtO1G/sO!4lQtO1G/qOOQS1G/p1G/pOOQS1G/r1G/rOOOW-E9w-E9wOOQS1G/{1G/{O!4|QdO'#HxO0rQdO'#HxO!5_QdO,5>cOOOW-E9x-E9xOOQS1G/|1G/|OOQS-E9{-E9{O!5mQ#xO1G2zO!6^QtO1G2zO'vQdO,5<jOOQS,5<j,5<jOOQS-E9|-E9|OOQS,5<r,5<rOOQS-E:U-E:UOOQV1G0x1G0xO1XQdO'#GRO!6uQtO,5>iOOQS1G1`1G1`O!7^QdO1G1`OOQS'#DV'#DVO0rQdO,5=qOOQS,5=q,5=qO!7cQdO'#FrO!7nQdO,59oO!7vQdO1G/XO!8QQtO,5=uOOQS1G3`1G3`OOQS,5:m,5:mO!8qQdO'#GtOOQS,5<k,5<kOOQS-E9}-E9}O!9SQdO1G.hOOQS1G0Z1G0ZO!9bQdO,5=wO!9rQdO,5=wO0rQdO1G0jO0rQdO1G0jO1XQdO1G0lOOQS-E:Q-E:QO!:TQdO1G0lO!:`QdO1G0lO!:eQdO,5>lO!:sQdO,5>lO!;RQdO,5>hO!;iQdO,5>hO!;zQdO'#EpO0rQdO1G0tO!<VQdO1G0tO!<[QgO1G0zO!@YQgO1G0}O!DTQdO,5>oO!D_QdO,5>oO!DgQtO,5>oO0rQdO1G1PO!DqQdO1G1PO4aQdO1G1UO!!_QdO1G1WOOQV,5;a,5;aO!DvQfO,5;aO!D{QgO1G1QO!H|QdO'#GZO4aQdO1G1QO4aQdO1G1QO!I^QdO,5>pO!IkQdO,5>pO1XQdO,5>pOOQV1G1U1G1UO!IsQdO'#FSO!JUQ!fO1G1WO!J^QdO1G1WOOQV1G1]1G1]O4aQdO1G1]O!JcQdO1G1]O!JkQdO'#F^OOQV1G1b1G1bO!!rQtO1G1bPOOO1G2v1G2vP!JpOSO1G2vOOQS,5=},5=}OOQS'#Dp'#DpO0rQdO,5=}O!JuQdO,5=|O!KYQdO,5=|OOQS1G/u1G/uO!KbQdO,5>PO!KrQdO,5>PO!KzQdO,5>PO!L_QdO,5>PO!LoQdO,5>POOQS1G3j1G3jOOQS7+$h7+$hO!7vQdO7+$pO!NbQdO1G.|O!NiQdO1G.|OOQS1G/`1G/`OOQS,5<`,5<`O'vQdO,5<`OOQS7+%P7+%PO!NpQdO7+%POOQS-E9r-E9rOOQS7+%Q7+%QO# QQdO,5=vO'vQdO,5=vOOQS7+$g7+$gO# VQdO7+%PO# _QdO7+%QO# dQdO1G3fOOQS7+%X7+%XO# tQdO1G3fO# |QdO7+%XOOQS,5<_,5<_O'vQdO,5<_O#!RQdO1G3aOOQS-E9q-E9qO#!xQdO7+%]OOQS7+%_7+%_O##WQdO1G3aO##uQdO7+%_O##zQdO1G3gO#$[QdO1G3gO#$dQdO7+%]O#$iQdO,5>dO#%SQdO,5>dO#%SQdO,5>dOOQS'#Dx'#DxO#%eO&jO'#DzO#%pO`O'#HyOOOW1G3}1G3}O#%uQdO1G3}O#%}QdO1G3}O#&YQ#xO7+(fO#&yQtO1G2UP#'dQdO'#GOOOQS,5<m,5<mOOQS-E:P-E:POOQS7+&z7+&zOOQS1G3]1G3]OOQS,5<^,5<^OOQS-E9p-E9pOOQS7+$s7+$sO#'qQdO,5=`O#([QdO,5=`O#(mQtO,5<aO#)QQdO1G3cOOQS-E9s-E9sOOQS7+&U7+&UO#)bQdO7+&UOOQS7+&W7+&WO#)pQdO'#IPO1XQdO'#IOO#*UQdO7+&WOOQS,5<p,5<pO#*aQdO1G4WOOQS-E:S-E:SOOQS,5<l,5<lO#*oQdO1G4SOOQS-E:O-E:OO1XQdO'#EqO#+VQdO'#EqO#+bQdO'#IRO#+jQdO,5;[OOQS7+&`7+&`O0rQdO7+&`O#+oQgO7+&fO!IPQdO'#GXO4aQdO7+&fO4aQdO7+&iO#/mQtO,5<tO'vQdO,5<tO#/wQdO1G4ZOOQS-E:W-E:WO#0RQdO1G4ZO4aQdO7+&kO0rQdO7+&kOOQV7+&p7+&pO!JUQ!fO7+&rO!J^QdO7+&rO`QeO1G0{OOQV-E:X-E:XO4aQdO7+&lO4aQdO7+&lOOQV,5<u,5<uO#0ZQdO,5<uO!IPQdO,5<uOOQV7+&l7+&lO#0fQgO7+&lO#4aQdO,5<vO#4lQdO1G4[OOQS-E:Y-E:YO#4yQdO1G4[O#5RQdO'#IWO#5aQdO'#IWO1XQdO'#IWOOQS'#IW'#IWO#5lQdO'#IVOOQS,5;n,5;nO#5tQdO,5;nO0rQdO'#FUOOQV7+&r7+&rO4aQdO7+&rOOQV7+&w7+&wO4aQdO7+&wO#5yQfO,5;xOOQV7+&|7+&|POOO7+(b7+(bO#6OQdO1G3iOOQS,5<c,5<cO#6^QdO1G3hOOQS-E9u-E9uO#6qQdO,5<dO#6|QdO,5<dO#7aQdO1G3kOOQS-E9v-E9vO#7qQdO1G3kO#7yQdO1G3kO#8ZQdO1G3kO#7qQdO1G3kOOQS<<H[<<H[O#8fQtO1G1zOOQS<<Hk<<HkP#8sQdO'#FtO8kQdO1G3bO#9QQdO1G3bO#9VQdO<<HkOOQS<<Hl<<HlO#9gQdO7+)QOOQS<<Hs<<HsO#9wQtO1G1yP#:hQdO'#FsO#:uQdO7+)RO#;VQdO7+)RO#;_QdO<<HwO#;dQdO7+({OOQS<<Hy<<HyO#<ZQdO,5<bO'vQdO,5<bOOQS-E9t-E9tOOQS<<Hw<<HwOOQS,5<g,5<gO0rQdO,5<gO#<`QdO1G4OOOQS-E9y-E9yO#<yQdO1G4OO<PQdO'#H{OOOO'#D{'#D{OOOO'#F|'#F|O#=[O&jO,5:fOOOW,5>e,5>eOOOW7+)i7+)iO#=gQdO7+)iO#=oQdO1G2zO#>YQdO1G2zP'vQdO'#FuO0rQdO<<IpO#>kQdO,5>kO#>|QdO,5>kO1XQdO,5>kO#?_QdO,5>jOOQS<<Ir<<IrP1XQdO'#GUP0rQdO'#GQOOQS,5;],5;]O#?dQdO,5>mO#?rQdO,5>mOOQS1G0v1G0vOOQS<<Iz<<IzOOQV-E:V-E:VO4aQdO<<JQOOQV,5<s,5<sO4aQdO,5<sOOQV<<JQ<<JQOOQV<<JT<<JTO#?zQtO1G2`P#@UQdO'#GYO#@]QdO7+)uO#@gQgO<<JVO4aQdO<<JVOOQV<<J^<<J^O4aQdO<<J^O!JUQ!fO<<J^O#DbQgO7+&gOOQV<<JW<<JWO#DlQgO<<JWOOQV1G2a1G2aO1XQdO1G2aO#HgQdO1G2aO4aQdO<<JWO1XQdO1G2bP0rQdO'#G[O#HrQdO7+)vO#IPQdO7+)vOOQS'#FT'#FTO0rQdO,5>rO#IXQdO,5>rOOQS,5>r,5>rO#IdQdO,5>qO#IuQdO,5>qOOQS1G1Y1G1YOOQS,5;p,5;pOOQV<<Jc<<JcO#I}QdO1G1dOOQS7+)T7+)TP#JSQdO'#FwO#JdQdO1G2OO#JwQdO1G2OO#KXQdO1G2OP#KdQdO'#FxO#KqQdO7+)VO#LRQdO7+)VO#LRQdO7+)VO#LZQdO7+)VO#LkQdO7+(|O8kQdO7+(|OOQSAN>VAN>VO#MUQdO<<LmOOQSAN>cAN>cO0rQdO1G1|O#MfQtO1G1|P#MpQdO'#FvOOQS1G2R1G2RP#M}QdO'#F{O#N[QdO7+)jO#NuQdO,5>gOOOO-E9z-E9zOOOW<<MT<<MTO$ TQdO7+(fOOQSAN?[AN?[O$ nQdO,5<oO$!SQdO1G4VOOQS-E:R-E:RO$!eQdO1G4VOOQS1G4U1G4UOOQS,5<q,5<qO$!vQdO1G4XOOQS-E:T-E:TOOQVAN?lAN?lOOQV1G2_1G2_O4aQdOAN?qO$#UQgOAN?qOOQVAN?xAN?xO4aQdOAN?xOOQV<<JR<<JRO4aQdOAN?rO4aQdO7+'{OOQV7+'{7+'{O1XQdO7+'{OOQVAN?rAN?rOOQS7+'|7+'|O$'PQdO<<MbOOQS1G4^1G4^O0rQdO1G4^OOQS,5<w,5<wO$'^QdO1G4]OOQS-E:Z-E:ZOOQU'#G_'#G_O$'oQfO7+'OO$'zQdO'#F_O$)RQdO7+'jO$)cQdO7+'jOOQS7+'j7+'jO$)nQdO<<LqO$*OQdO<<LqO$*OQdO<<LqO$*WQdO'#H^OOQS<<Lh<<LhO$*bQdO<<LhOOQS7+'h7+'hOOQS'#D|'#D|OOOO1G4R1G4RO$*{QdO1G4RO$+TQdO1G4RO1XQdO1G2ZP1XQdO'#GTO$+`QdO7+)qO$+qQdO7+)qP!;zQdO'#GVOOQVG25]G25]O4aQdOG25]OOQVG25dG25dOOQVG25^G25^OOQV<<Kg<<KgO4aQdO<<KgOOQS7+)x7+)xP$,SQdO'#G]OOQU-E:]-E:]OOQV<<Jj<<JjO$,vQtO'#FaOOQS'#Fc'#FcO$-WQdO'#FbO$-xQdO'#FbOOQS'#Fb'#FbO$-}QdO'#IYO$'zQdO'#FiO$'zQdO'#FiO$.fQdO'#FjO$'zQdO'#FkO$.mQdO'#IZOOQS'#IZ'#IZO$/[QdO,5;yOOQS<<KU<<KUO$/dQdO<<KUO$/tQdOANB]O$0UQdOANB]O$0^QdO'#H_OOQS'#H_'#H_O1sQdO'#DcO$0wQdO,5=xOOQSANBSANBSOOOO7+)m7+)mO$1`QdO7+)mOOQS7+'u7+'uO$1hQdO<<M]OOQVLD*wLD*wOOQVANARANARO5jQ!fO'#GaO$1yQtO,5<SO$'zQdO'#FmOOQS,5<W,5<WOOQS'#Fd'#FdO$2kQdO,5;|O$2pQdO,5;|OOQS'#Fg'#FgO$'zQdO'#G`O$3bQdO,5<QO$3|QdO,5>tO$4^QdO,5>tO1XQdO,5<PO$4oQdO,5<TO$4tQdO,5<TO$'zQdO'#I[O$4yQdO'#I[O$5OQdO,5<UOOQS,5<V,5<VO'vQdO'#FpOOQU1G1e1G1eO4aQdO1G1eOOQSAN@pAN@pO$5TQdOG27wO$5eQdO,59}OOQS1G3d1G3dOOOO<<MX<<MXOOQS,5<{,5<{OOQS-E:_-E:_O$5jQtO'#FaO$5qQdO'#I]O$6PQdO'#I]O$6XQdO,5<XOOQS1G1h1G1hO$6^QdO1G1hO$6cQdO,5<zOOQS-E:^-E:^O$6}QdO,5=OO$7fQdO1G4`OOQS-E:b-E:bOOQS1G1k1G1kOOQS1G1o1G1oO$7vQdO,5>vO$'zQdO,5>vOOQS1G1p1G1pO$8UQtO,5<[OOQU7+'P7+'PO$*WQdO1G/iO$'zQdO,5<YO$8]QdO,5>wO$8dQdO,5>wOOQS1G1s1G1sOOQS7+'S7+'SP$'zQdO'#GdO$8lQdO1G4bO$8vQdO1G4bO$9OQdO1G4bOOQS7+%T7+%TO$9^QdO1G1tO$9lQtO'#FaO$9sQdO,5<}OOQS,5<},5<}O$:RQdO1G4cOOQS-E:a-E:aO$'zQdO,5<|O$:YQdO,5<|O$:_QdO7+)|OOQS-E:`-E:`O$:iQdO7+)|O$'zQdO,5<ZP$'zQdO'#GcO$:qQdO1G2hO$'zQdO1G2hP$;PQdO'#GbO$;WQdO<<MhO$;bQdO1G1uO$;pQdO7+(SO8kQdO'#C}O8kQdO,59bO8kQdO,59bO8kQdO,59bO$<OQtO,5=`O8kQdO1G.|O0rQdO1G/XO0rQdO7+$pP$<cQdO'#GOO'vQdO'#GtO$<pQdO,59bO$<uQdO,59bO$<|QdO,59mO$=RQdO1G/UO1sQdO'#DRO8kQdO,59j",stateData:"$=l~O%cOS%^OSSOS%]PQ~OPdOVaOfoOhYOopOs!POvqO!PrO!Q{O!T!SO!U!RO!XZO!][O!h`O!r`O!s`O!t`O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#l!QO#o!TO#s!UO#u!VO#z!WO#}hO$P!XO%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~O%]!YO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%j![O%k!]O%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aO~Ok%xXl%xXm%xXn%xXo%xXp%xXs%xXz%xX{%xX!x%xX#g%xX%[%xX%_%xX%z%xXg%xX!T%xX!U%xX%{%xX!W%xX![%xX!Q%xX#[%xXt%xX!m%xX~P%SOfoOhYO!XZO!][O!h`O!r`O!s`O!t`O%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~Oz%wX{%wX#g%wX%[%wX%_%wX%z%wX~Ok!pOl!qOm!oOn!oOo!rOp!sOs!tO!x%wX~P)pOV!zOg!|Oo0dOv0rO!PrO~P'vOV#OOo0dOv0rO!W#PO~P'vOV#SOa#TOo0dOv0rO![#UO~P'vOQ#XO%`#XO%a#ZO~OQ#^OR#[O%`#^O%a#`O~OV%iX_%iXa%iXh%iXk%iXl%iXm%iXn%iXo%iXp%iXs%iXz%iX!X%iX!f%iX%j%iX%k%iX%l%iX%m%iX%n%iX%o%iX%p%iX%q%iX%r%iX%s%iXg%iX!T%iX!U%iX~O&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O{%iX!x%iX#g%iX%[%iX%_%iX%z%iX%{%iX!W%iX![%iX!Q%iX#[%iXt%iX!m%iX~P,eOz#dO{%hX!x%hX#g%hX%[%hX%_%hX%z%hX~Oo0dOv0rO~P'vO#g#gO%[#iO%_#iO~O%uWO~O!T#nO#u!VO#z!WO#}hO~OopO~P'vOV#sOa#tO%uWO{wP~OV#xOo0dOv0rO!Q#yO~P'vO{#{O!x$QO%z#|O#g!yX%[!yX%_!yX~OV#xOo0dOv0rO#g#SX%[#SX%_#SX~P'vOo0dOv0rO#g#WX%[#WX%_#WX~P'vO!f$WO!r$WO%uWO~OV$cO~P'vO!U$eO#s$fO#u$gO~O{$hO~OV$oO~P'vOS$qO%[$pO%c$rO~OV${Oa${Og$}Oo0dOv0rO~P'vOo0dOv0rO{%QO~P'vO&Y%SO~Oa!bOh!iO!X!kO!f!mOVba_bakbalbambanbaobapbasbazba{ba!xba#gba%[ba%_ba%jba%kba%lba%mba%nba%oba%pba%qba%rba%sba%zbagba!Tba!Uba%{ba!Wba![ba!Qba#[batba!mba~On%XO~Oo%XO~P'vOo0dO~P'vOk0fOl0gOm0eOn0eOo0nOp0oOs0sOg%wX!T%wX!U%wX%{%wX!W%wX![%wX!Q%wX#[%wX!m%wX~P)pO%{%ZOg%vXz%vX!T%vX!U%vX!W%vX{%vX~Og%]Oz%^O!T%bO!U%aO~Og%]O~Oz%eO!T%bO!U%aO!W&SX~O!W%iO~Oz%jO{%lO!T%bO!U%aO![%}X~O![%pO~O![%qO~OQ#XO%`#XO%a%sO~OV%uOo0dOv0rO!PrO~P'vOQ#^OR#[O%`#^O%a%xO~OV!qa_!qaa!qah!qak!qal!qam!qan!qao!qap!qas!qaz!qa{!qa!X!qa!f!qa!x!qa#g!qa%[!qa%_!qa%j!qa%k!qa%l!qa%m!qa%n!qa%o!qa%p!qa%q!qa%r!qa%s!qa%z!qag!qa!T!qa!U!qa%{!qa!W!qa![!qa!Q!qa#[!qat!qa!m!qa~P#yOz%zO{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P%SOV%|OopOvqO{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P'vOz%zO{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#g$zX%[$zX%_$zX~P'vO#g#gO%[&RO%_&RO~O!f&SOh&qX%[&qX#[&qX#g&qX%_&qX#Z&qX~Oh!iO%[&UO~Okealeameaneaoeapeaseazea{ea!xea#gea%[ea%_ea%zeagea!Tea!Uea%{ea!Wea![ea!Qea#[eatea!mea~P%SOsqazqa{qa#gqa%[qa%_qa%zqa~Ok!pOl!qOm!oOn!oOo!rOp!sO!xqa~PEQO%z&WOz%yX{%yX~O%uWOz%yX{%yX~Oz&ZO{wX~O{&]O~Oz%jO#g%}X%[%}X%_%}Xg%}X{%}X![%}X!m%}X%z%}X~OV0mOo0dOv0rO!PrO~P'vO%z#|O#gUa%[Ua%_Ua~Oz&fO#g&PX%[&PX%_&PXn&PX~P%SOz&iO!Q&hO#g#Wa%[#Wa%_#Wa~O#[&jO#g#Ya%[#Ya%_#Ya~O!f$WO!r$WO#Z&lO%uWO~O#Z&lO~Oz&nO#g&tX%[&tX%_&tX~Oz&pO#g&pX%[&pX%_&pX{&pX~O!X&rO%z&sO~Oz&wOn&wX~P%SOn&zO~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO%['PO~P'vOt'TO#p'RO#q'SOP#naV#naf#nah#nao#nas#nav#na!P#na!Q#na!T#na!U#na!X#na!]#na!h#na!r#na!s#na!t#na!{#na!}#na#P#na#R#na#T#na#X#na#Z#na#^#na#_#na#a#na#c#na#l#na#o#na#s#na#u#na#z#na#}#na$P#na%X#na%o#na%p#na%t#na%u#na&Z#na&[#na&]#na&^#na&_#na&`#na&a#na&b#na&c#na&d#na&e#na&f#na&g#na&h#na&i#na&j#na%Z#na%_#na~Oz'UO#['WO{&xX~Oh'YO!X&rO~Oh!iO{$hO!X&rO~O{'`O~P%SO%['cO~OS'dO%['cO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%k!]O~P!#WO%kWi~P!#WOV!aO_!aOa!bOh!iO!X!kO!f!mO%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%m!_O%n!_O~P!&RO%mWi%nWi~P!&ROa!bOh!iO!X!kO!f!mOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%mWi%nWi%oWi%pWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~OV!aO_!aO%q!aO%r!aO%s!aO~P!)POVWi_Wi%qWi%rWi%sWi~P!)PO!T%bO!U%aOg&VXz&VX~O%z'fO%{'fO~P,eOz'hOg&UX~Og'jO~Oz'kO{'mO!W&XX~Oo0dOv0rOz'kO{'nO!W&XX~P'vO!W'pO~Om!oOn!oOo!rOp!sOkjisjizji{ji!xji#gji%[ji%_ji%zji~Ol!qO~P!-rOlji~P!-rOk0fOl0gOm0eOn0eOo0nOp0oO~Ot'rO~P!.{OV'wOg'xOo0dOv0rO~P'vOg'xOz'yO~Og'{O~O!U'}O~Og(OOz'yO!T%bO!U%aO~P%SOk0fOl0gOm0eOn0eOo0nOp0oOgqa!Tqa!Uqa%{qa!Wqa![qa!Qqa#[qatqa!mqa~PEQOV'wOo0dOv0rO!W&Sa~P'vOz(RO!W&Sa~O!W(SO~Oz(RO!T%bO!U%aO!W&Sa~P%SOV(WOo0dOv0rO![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~P'vOz(XO![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~O![([O~Oz(XO!T%bO!U%aO![%}a~P%SOz(_O!T%bO!U%aO![&Ta~P%SOz(bO{&lX![&lX!m&lX%z&lX~O{(fO![(hO!m(iO%z(eO~OV%|OopOvqO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~P'vOz(kO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~O!f&SOh&qa%[&qa#[&qa#g&qa%_&qa#Z&qa~O%[(pO~OV#sOa#tO%uWO~Oz&ZO{wa~OopOvqO~P'vOz(XO#g%}a%[%}a%_%}ag%}a{%}a![%}a!m%}a%z%}a~P%SOz(uO#g%hX%[%hX%_%hX%z%hX~O%z#|O#gUi%[Ui%_Ui~O#g&Pa%[&Pa%_&Pan&Pa~P'vOz(xO#g&Pa%[&Pa%_&Pan&Pa~OV(|Oh)OO%uWO~O#Z)PO~O%uWO#g&ta%[&ta%_&ta~Oz)RO#g&ta%[&ta%_&ta~Oo0dOv0rO#g&pa%[&pa%_&pa{&pa~P'vOz)UO#g&pa%[&pa%_&pa{&pa~OV)WOa)WO%uWO~O%z)]O~Ot)`O#j)_OP#hiV#hif#hih#hio#his#hiv#hi!P#hi!Q#hi!T#hi!U#hi!X#hi!]#hi!h#hi!r#hi!s#hi!t#hi!{#hi!}#hi#P#hi#R#hi#T#hi#X#hi#Z#hi#^#hi#_#hi#a#hi#c#hi#l#hi#o#hi#s#hi#u#hi#z#hi#}#hi$P#hi%X#hi%o#hi%p#hi%t#hi%u#hi&Z#hi&[#hi&]#hi&^#hi&_#hi&`#hi&a#hi&b#hi&c#hi&d#hi&e#hi&f#hi&g#hi&h#hi&i#hi&j#hi%Z#hi%_#hi~Ot)aOP#kiV#kif#kih#kio#kis#kiv#ki!P#ki!Q#ki!T#ki!U#ki!X#ki!]#ki!h#ki!r#ki!s#ki!t#ki!{#ki!}#ki#P#ki#R#ki#T#ki#X#ki#Z#ki#^#ki#_#ki#a#ki#c#ki#l#ki#o#ki#s#ki#u#ki#z#ki#}#ki$P#ki%X#ki%o#ki%p#ki%t#ki%u#ki&Z#ki&[#ki&]#ki&^#ki&_#ki&`#ki&a#ki&b#ki&c#ki&d#ki&e#ki&f#ki&g#ki&h#ki&i#ki&j#ki%Z#ki%_#ki~OV)cOn&wa~P'vOz)dOn&wa~Oz)dOn&wa~P%SOn)hO~O%Y)lO~Ot)oO#p'RO#q)nOP#niV#nif#nih#nio#nis#niv#ni!P#ni!Q#ni!T#ni!U#ni!X#ni!]#ni!h#ni!r#ni!s#ni!t#ni!{#ni!}#ni#P#ni#R#ni#T#ni#X#ni#Z#ni#^#ni#_#ni#a#ni#c#ni#l#ni#o#ni#s#ni#u#ni#z#ni#}#ni$P#ni%X#ni%o#ni%p#ni%t#ni%u#ni&Z#ni&[#ni&]#ni&^#ni&_#ni&`#ni&a#ni&b#ni&c#ni&d#ni&e#ni&f#ni&g#ni&h#ni&i#ni&j#ni%Z#ni%_#ni~OV)rOo0dOv0rO{$hO~P'vOo0dOv0rO{&xa~P'vOz)vO{&xa~OV)zOa){Og*OO%q)|O%uWO~O{$hO&{*QO~Oh'YO~Oh!iO{$hO~O%[*VO~O%[*XO~OV${Oa${Oo0dOv0rOg&Ua~P'vOz*[Og&Ua~Oo0dOv0rO{*_O!W&Xa~P'vOz*`O!W&Xa~Oo0dOv0rOz*`O{*cO!W&Xa~P'vOo0dOv0rOz*`O!W&Xa~P'vOz*`O{*cO!W&Xa~Om0eOn0eOo0nOp0oOgjikjisjizji!Tji!Uji%{ji!Wji{ji![ji#gji%[ji%_ji!Qji#[jitji!mji%zji~Ol0gO~P!LzOlji~P!LzOV'wOg*hOo0dOv0rO~P'vOn*jO~Og*hOz*lO~Og*mO~OV'wOo0dOv0rO!W&Si~P'vOz*nO!W&Si~O!W*oO~OV(WOo0dOv0rO![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~P'vOz*rO!T%bO!U%aO![&Ti~Oz*uO![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~O![*vO~Oa*xOo0dOv0rO![&Ti~P'vOz*rO![&Ti~O![*zO~OV*|Oo0dOv0rO{&la![&la!m&la%z&la~P'vOz*}O{&la![&la!m&la%z&la~O!]+QO&n+SO![!nX~O![+UO~O{(fO![+VO~O{(fO![+VO!m+WO~OV%|OopOvqO{%hq!x%hq#g%hq%[%hq%_%hq%z%hq~P'vOz$ri{$ri!x$ri#g$ri%[$ri%_$ri%z$ri~P%SOV%|OopOvqO~P'vOV%|Oo0dOv0rO#g%ha%[%ha%_%ha%z%ha~P'vOz+XO#g%ha%[%ha%_%ha%z%ha~Oz$ia#g$ia%[$ia%_$ian$ia~P%SO#g&Pi%[&Pi%_&Pin&Pi~P'vOz+[O#g#Wq%[#Wq%_#Wq~Oz+]O#[+_O#g&sX%[&sX%_&sXg&sX~OV+aOh)OO%uWO~O%uWO#g&ti%[&ti%_&ti~Oo0dOv0rO#g&pi%[&pi%_&pi{&pi~P'vO{#{Oz#eX!W#eX~Oz+eO!W&uX~O!W+gO~Ot+jO#j)_OP#hqV#hqf#hqh#hqo#hqs#hqv#hq!P#hq!Q#hq!T#hq!U#hq!X#hq!]#hq!h#hq!r#hq!s#hq!t#hq!{#hq!}#hq#P#hq#R#hq#T#hq#X#hq#Z#hq#^#hq#_#hq#a#hq#c#hq#l#hq#o#hq#s#hq#u#hq#z#hq#}#hq$P#hq%X#hq%o#hq%p#hq%t#hq%u#hq&Z#hq&[#hq&]#hq&^#hq&_#hq&`#hq&a#hq&b#hq&c#hq&d#hq&e#hq&f#hq&g#hq&h#hq&i#hq&j#hq%Z#hq%_#hq~On$|az$|a~P%SOV)cOn&wi~P'vOz+qOn&wi~Oz+{O{$hO#[+{O~O#q+}OP#nqV#nqf#nqh#nqo#nqs#nqv#nq!P#nq!Q#nq!T#nq!U#nq!X#nq!]#nq!h#nq!r#nq!s#nq!t#nq!{#nq!}#nq#P#nq#R#nq#T#nq#X#nq#Z#nq#^#nq#_#nq#a#nq#c#nq#l#nq#o#nq#s#nq#u#nq#z#nq#}#nq$P#nq%X#nq%o#nq%p#nq%t#nq%u#nq&Z#nq&[#nq&]#nq&^#nq&_#nq&`#nq&a#nq&b#nq&c#nq&d#nq&e#nq&f#nq&g#nq&h#nq&i#nq&j#nq%Z#nq%_#nq~O#[,OOz%Oa{%Oa~Oo0dOv0rO{&xi~P'vOz,QO{&xi~O{#{O%z,SOg&zXz&zX~O%uWOg&zXz&zX~Oz,WOg&yX~Og,YO~O%Y,]O~O!T%bO!U%aOg&Viz&Vi~OV${Oa${Oo0dOv0rOg&Ui~P'vO{,`Oz$la!W$la~Oo0dOv0rO{,aOz$la!W$la~P'vOo0dOv0rO{*_O!W&Xi~P'vOz,dO!W&Xi~Oo0dOv0rOz,dO!W&Xi~P'vOz,dO{,gO!W&Xi~Og$hiz$hi!W$hi~P%SOV'wOo0dOv0rO~P'vOn,iO~OV'wOg,jOo0dOv0rO~P'vOV'wOo0dOv0rO!W&Sq~P'vOz$gi![$gi#g$gi%[$gi%_$gig$gi{$gi!m$gi%z$gi~P%SOV(WOo0dOv0rO~P'vOa*xOo0dOv0rO![&Tq~P'vOz,kO![&Tq~O![,lO~OV(WOo0dOv0rO![%}q#g%}q%[%}q%_%}qg%}q{%}q!m%}q%z%}q~P'vO{,mO~OV*|Oo0dOv0rO{&li![&li!m&li%z&li~P'vOz,rO{&li![&li!m&li%z&li~O!]+QO&n+SO![!na~O{(fO![,uO~OV%|Oo0dOv0rO#g%hi%[%hi%_%hi%z%hi~P'vOz,vO#g%hi%[%hi%_%hi%z%hi~O%uWO#g&sa%[&sa%_&sag&sa~Oz,yO#g&sa%[&sa%_&sag&sa~Og,|O~OV)WOa)WO%uWO!W&ua~Oz-OO!W&ua~On$|iz$|i~P%SOV)cO~P'vOV)cOn&wq~P'vOt-SOP#myV#myf#myh#myo#mys#myv#my!P#my!Q#my!T#my!U#my!X#my!]#my!h#my!r#my!s#my!t#my!{#my!}#my#P#my#R#my#T#my#X#my#Z#my#^#my#_#my#a#my#c#my#l#my#o#my#s#my#u#my#z#my#}#my$P#my%X#my%o#my%p#my%t#my%u#my&Z#my&[#my&]#my&^#my&_#my&`#my&a#my&b#my&c#my&d#my&e#my&f#my&g#my&h#my&i#my&j#my%Z#my%_#my~O%Z-WO%_-WO~P`O#q-XOP#nyV#nyf#nyh#nyo#nys#nyv#ny!P#ny!Q#ny!T#ny!U#ny!X#ny!]#ny!h#ny!r#ny!s#ny!t#ny!{#ny!}#ny#P#ny#R#ny#T#ny#X#ny#Z#ny#^#ny#_#ny#a#ny#c#ny#l#ny#o#ny#s#ny#u#ny#z#ny#}#ny$P#ny%X#ny%o#ny%p#ny%t#ny%u#ny&Z#ny&[#ny&]#ny&^#ny&_#ny&`#ny&a#ny&b#ny&c#ny&d#ny&e#ny&f#ny&g#ny&h#ny&i#ny&j#ny%Z#ny%_#ny~Oz-[O{$hO#[-[O~Oo0dOv0rO{&xq~P'vOz-_O{&xq~O%z,SOg&zaz&za~OV)zOa){O%q)|O%uWOg&ya~Oz-cOg&ya~O$S-gO~OV${Oa${Oo0dOv0rO~P'vOo0dOv0rO{-hOz$li!W$li~P'vOo0dOv0rOz$li!W$li~P'vO{-hOz$li!W$li~Oo0dOv0rO{*_O~P'vOo0dOv0rO{*_O!W&Xq~P'vOz-kO!W&Xq~Oo0dOv0rOz-kO!W&Xq~P'vOs-nO!T%bO!U%aOg&Oq!W&Oq![&Oqz&Oq~P!.{Oa*xOo0dOv0rO![&Ty~P'vOz$ji![$ji~P%SOa*xOo0dOv0rO~P'vOV*|Oo0dOv0rO~P'vOV*|Oo0dOv0rO{&lq![&lq!m&lq%z&lq~P'vO{(fO![-sO!m-tO%z-rO~OV%|Oo0dOv0rO#g%hq%[%hq%_%hq%z%hq~P'vO#[-vOz$wa#g$wa%[$wa%_$wag$wa~O%uWO#g&si%[&si%_&sig&si~Oz-xO#g&si%[&si%_&sig&si~OV)WOa)WO%uWO!W&ui~Ot-|OP#m!RV#m!Rf#m!Rh#m!Ro#m!Rs#m!Rv#m!R!P#m!R!Q#m!R!T#m!R!U#m!R!X#m!R!]#m!R!h#m!R!r#m!R!s#m!R!t#m!R!{#m!R!}#m!R#P#m!R#R#m!R#T#m!R#X#m!R#Z#m!R#^#m!R#_#m!R#a#m!R#c#m!R#l#m!R#o#m!R#s#m!R#u#m!R#z#m!R#}#m!R$P#m!R%X#m!R%o#m!R%p#m!R%t#m!R%u#m!R&Z#m!R&[#m!R&]#m!R&^#m!R&_#m!R&`#m!R&a#m!R&b#m!R&c#m!R&d#m!R&e#m!R&f#m!R&g#m!R&h#m!R&i#m!R&j#m!R%Z#m!R%_#m!R~Oo0dOv0rO{&xy~P'vOV)zOa){O%q)|O%uWOg&yi~O$S-gO%Z.UO%_.UO~OV.`Oh.^O!X.]O!]._O!h.XO!s.ZO!t.ZO%p.WO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O~Oo0dOv0rOz$lq!W$lq~P'vO{.eOz$lq!W$lq~Oo0dOv0rO{*_O!W&Xy~P'vOz.fO!W&Xy~Oo0dOv.jO~P'vOs-nO!T%bO!U%aOg&Oy!W&Oy![&Oyz&Oy~P!.{O{(fO![.mO~O{(fO![.mO!m.nO~O%uWO#g&sq%[&sq%_&sqg&sq~Oz.pO#g&sq%[&sq%_&sqg&sq~OV)zOa){O%q)|O%uWO~Oh.uO!f.sOz$TX#[$TX%j$TXg$TX~Os$TX{$TX!W$TX![$TX~P$,bO%o.wO%p.wOs$UXz$UX{$UX#[$UX%j$UX!W$UXg$UX![$UX~O!h.yO~Oz.}O#[/PO%j.zOs&|X{&|X!W&|Xg&|X~Oa/SO~P$(WOh.uOs&}Xz&}X{&}X#[&}X%j&}X!W&}Xg&}X![&}X~Os/WO{$hO~Oo0dOv0rOz$ly!W$ly~P'vOo0dOv0rO{*_O!W&X!R~P'vOz/[O!W&X!R~Og&RXs&RX!T&RX!U&RX!W&RX![&RXz&RX~P!.{Os-nO!T%bO!U%aOg&Qa!W&Qa![&Qaz&Qa~O{(fO![/_O~O%uWO#g&sy%[&sy%_&syg&sy~O!f.sOh$[as$[az$[a{$[a#[$[a%j$[a!W$[ag$[a![$[a~O!h/fO~O%o.wO%p.wOs$Uaz$Ua{$Ua#[$Ua%j$Ua!W$Uag$Ua![$Ua~O%j.zOs$Yaz$Ya{$Ya#[$Ya!W$Yag$Ya![$Ya~Os&|a{&|a!W&|ag&|a~P$'zOz/kOs&|a{&|a!W&|ag&|a~O!W/nO~Og/nO~O{/pO~O![/qO~Oo0dOv0rO{*_O!W&X!Z~P'vO{/tO~O%z/uO~P$,bOz/vO#[/PO%j.zOg'PX~Oz/vOg'PX~Og/xO~O!h/yO~O#[/POs%Saz%Sa{%Sa%j%Sa!W%Sag%Sa![%Sa~O#[/PO%j.zOs%Waz%Wa{%Wa!W%Wag%Wa~Os&|i{&|i!W&|ig&|i~P$'zOz/{O#[/PO%j.zO!['Oa~O{$da~P%SOg'Pa~P$'zOz0TOg'Pa~Oa0VO!['Oi~P$(WOz0XO!['Oi~Oz0XO#[/PO%j.zO!['Oi~O#[/PO%j.zOg$biz$bi~O%z0[O~P$,bO#[/PO%j.zOg%Vaz%Va~Og'Pi~P$'zO{0_O~Oa0VO!['Oq~P$(WOz0aO!['Oq~O#[/PO%j.zOz%Ui![%Ui~Oa0VO~P$(WOa0VO!['Oy~P$(WO#[/PO%j.zOg$ciz$ci~O#[/PO%j.zOz%Uq![%Uq~Oz+XO#g%ha%[%ha%_%ha%z%ha~P%SOV%|Oo0dOv0rO~P'vOn0iO~Oo0iO~P'vO{0jO~Ot0kO~P!.{O&]&Z&j&h&i&g&f&d&e&c&b&`&a&_&^&[%u~",goto:"!=c'QPPPPPP'RP'Z*s+]+v,b,}-kP.YP'Z.y.y'ZPPP'Z2cPPPPPP2c5VPP5VP7g7p>PPP>S>t>wPP'Z'ZPP?WPP'Z'ZPP'Z'Z'Z'Z'Z?[@U'ZP@XP@_DfHSHWPHZHeHi'ZPPPHlHu'RP'R'RP'RP'RP'RP'RP'R'R'RP'RPP'RPP'RP'RPH{IXIaPIhInPIhPIhIhPPPIhPK|PLVLaLgK|PIhLpPIhPLwL}PMRMgNUNoMRMRNu! SMRMRMRMR! h! n! q! v! y!!T!!Z!!g!!y!#P!#Z!#a!#}!$T!$Z!$e!$k!$q!%T!%_!%e!%k!%q!%{!&R!&X!&_!&e!&o!&u!'P!'V!'`!'f!'u!'}!(X!(`PPPPPPPPPPP!(f!(i!(o!(x!)S!)_PPPPPPPPPPPP!.R!/g!3g!6wPP!7P!7`!7i!8b!8X!8k!8q!8t!8w!8z!9S!9sPPPPPPPPPPPPPPPPP!9v!9z!:QP!:f!:j!:v!;S!;Y!;c!;f!;i!;o!;u!;{!<OP!<W!<a!=]!=`]eOn#g$h)l+w'}`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$c$e$f$h$o${%Q%X%[%^%a%e%j%l%u%z%|&X&]&f&h&i&p&s&w&z'R'U'g'h'k'm'n'r'w'y'}(R(W(X(_(b(k(m(u(x)U)])_)c)d)h)l)r)v*Q*[*_*`*c*i*j*l*n*q*r*u*x*|*}+Q+X+Z+[+c+p+q+w,P,Q,T,_,`,a,c,d,g,i,k,m,o,q,r,v-_-a-h-k-n.e.f/W/[/t0d0e0f0g0i0j0k0l0m0o0s}!cQ#c#p$R$b$n%c%h%n%o&^&y'b(l(w)b*g*p+o,n/r0h!P!dQ#c#p$R$b$n$s%c%h%n%o&^&y'b(l(w)b*g*p+o,n/r0h!R!eQ#c#p$R$b$n$s$t%c%h%n%o&^&y'b(l(w)b*g*p+o,n/r0h!T!fQ#c#p$R$b$n$s$t$u%c%h%n%o&^&y'b(l(w)b*g*p+o,n/r0h!V!gQ#c#p$R$b$n$s$t$u$v%c%h%n%o&^&y'b(l(w)b*g*p+o,n/r0h!X!hQ#c#p$R$b$n$s$t$u$v$w%c%h%n%o&^&y'b(l(w)b*g*p+o,n/r0h!]!hQ!n#c#p$R$b$n$s$t$u$v$w$x%c%h%n%o&^&y'b(l(w)b*g*p+o,n/r0h'}TOTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$c$e$f$h$o${%Q%X%[%^%a%e%j%l%u%z%|&X&]&f&h&i&p&s&w&z'R'U'g'h'k'm'n'r'w'y'}(R(W(X(_(b(k(m(u(x)U)])_)c)d)h)l)r)v*Q*[*_*`*c*i*j*l*n*q*r*u*x*|*}+Q+X+Z+[+c+p+q+w,P,Q,T,_,`,a,c,d,g,i,k,m,o,q,r,v-_-a-h-k-n.e.f/W/[/t0d0e0f0g0i0j0k0l0m0o0s&cVOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$f$h${%Q%X%[%^%e%j%l%u%z&X&]&h&i&p&s&z'R'U'g'h'k'm'n'r'y(R(X(_(b(k(m(u)U)])_)h)l)r)v*Q*[*_*`*c*i*j*l*n*q*r*u*|*}+Q+X+[+c+w,P,Q,T,_,`,a,c,d,g,i,k,m,o,q,r,v-_-a-h-k-n.e.f/[/t0d0e0f0g0i0j0k0l0o0s%mXOYZ[dnrxy}!P!Q!U!i!k#[#d#g#y#{#}$Q$f$h${%Q%[%^%e%j%l%u%z&X&]&h&i&p&s&z'R'U'g'h'k'm'n'r'y(R(X(_(b(k(m(u)U)])_)h)l)r)v*Q*[*_*`*c*i*l*n*q*r*u*|*}+Q+X+[+c+w,P,Q,T,_,`,a,c,d,g,k,m,o,q,r,v-_-a-h-k.e.f/[0j0k0lQ#vqQ/].jR0p0r't`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$c$e$f$h$o${%Q%X%[%^%a%e%j%l%u%z%|&X&]&f&h&i&p&s&w&z'R'U'g'k'm'n'r'w'y'}(R(W(X(_(b(k(m(u(x)U)])_)c)d)h)l)r)v*Q*_*`*c*i*j*l*n*q*r*u*x*|*}+Q+X+Z+[+c+p+q+w,P,Q,T,`,a,c,d,g,i,k,m,o,q,r,v-_-a-h-k-n.e.f/W/[/t0d0e0f0g0i0j0k0l0m0o0sW#jhz{$XW#rq&Z.j0rQ$Z|Q$_!OQ$l!VQ$m!WW$z!i'h*[,_S&Y#s#tQ&}$gQ(n&SQ(|&jU(}&l)O)PU)Q&n)R+bW)X&r+e-O-zQ)x'WW)y'Y,W-c.SQ+d)WS,V)z){Y,x+],y-w-x.pQ,{+_Q-Y+{Q-^,OQ.Q-[l.V-g.].^.`.{.}/S/k/p/u/z0V0[0_Q.o-vQ/T._Q/b.uQ/m/PU0Q/v0T0]X0W/{0X0`0aR&X#r!_!wYZ!P!Q!k%Q%^%e'k'm'n'y(R)_*_*`*c*i*l*n,`,a,c,d,g-h-k.e.f/[R%[!vQ!{YQ%v#[Q&b#}Q&e$QR,s+QT.i-n/t![!jQ!n#c#p$R$b$n$s$t$u$v$w$x%c%h%n%o&^&y'b(l(w)b*g*p+o,n/r0hQ&V#kQ'^$mR*U'_R'g$zQ%T!mR/`.s'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$c$e$f$h$o${%Q%X%[%^%a%e%j%l%u%z%|&X&]&f&h&i&p&s&w&z'R'U'g'h'k'm'n'r'w'y'}(R(W(X(_(b(k(m(u(x)U)])_)c)d)h)l)r)v*Q*[*_*`*c*i*j*l*n*q*r*u*x*|*}+Q+X+Z+[+c+p+q+w,P,Q,T,_,`,a,c,d,g,i,k,m,o,q,r,v-_-a-h-k-n.e.f/W/[/t0d0e0f0g0i0j0k0l0m0o0sS#a_#b!P.Z-g.].^._.`.u.{.}/S/k/p/u/v/z/{0T0V0X0[0]0_0`0a'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$c$e$f$h$o${%Q%X%[%^%a%e%j%l%u%z%|&X&]&f&h&i&p&s&w&z'R'U'g'h'k'm'n'r'w'y'}(R(W(X(_(b(k(m(u(x)U)])_)c)d)h)l)r)v*Q*[*_*`*c*i*j*l*n*q*r*u*x*|*}+Q+X+Z+[+c+p+q+w,P,Q,T,_,`,a,c,d,g,i,k,m,o,q,r,v-_-a-h-k-n.e.f/W/[/t0d0e0f0g0i0j0k0l0m0o0sT#a_#bT#^^#_R(j%va(g%v(i(j+W,s-t-u.nT+S(f+TR-u,sQ$PsQ+d)XR,U)yX#}s$O$P&dQ&t$_Q'[$lQ'_$mR)k&}Q)Y&rV,}+e-O-zZgOn$h)l+wXkOn)l+wQ$i!TQ&u$`Q&v$aQ'X$kQ']$mQ)i&|Q)p'RQ)s'SQ)t'TQ*R'ZS*T'^'_Q+k)_Q+m)`Q+n)aQ+r)gS+t)j*SQ+x)nQ+y)oS+z)q)rQ,[*UQ-Q+jQ-R+lQ-T+sS-U+u+vQ-Z+|Q-]+}Q-{-SQ-}-VQ.O-XQ.P-YQ.q-|Q.r.QQ/X.cR/s/YWkOn)l+wR#mjQ'Z$lS)j&}'[R+v)kQ,T)yR-a,UQ*S'ZQ+u)jR-V+vZiOjn)l+wQ'a$nR*W'bT-e,]-fu.b-g.].^.`.u.{.}/S/k/p/u/v/z0T0V0[0]0_t.b-g.].^.`.u.{.}/S/k/p/u/v/z0T0V0[0]0_Q/T._X0W/{0X0`0a!P.Y-g.].^._.`.u.{.}/S/k/p/u/v/z/{0T0V0X0[0]0_0`0aQ.x.XR/g.yg.{.[.|/c/j/o/}0P0R0^0b0cu.a-g.].^.`.u.{.}/S/k/p/u/v/z0T0V0[0]0_X.v.V.a/b0QR/d.uV0S/v0T0]R/Y.cQnOS#on+wR+w)lQ&[#uR(s&[S%k#R#wS(Y%k(]T(]%n&^Q%_!yQ%f!}W'z%_%f(P(TQ(P%cR(T%hQ&g$RR(y&gQ(`%oQ*s(ZT*y(`*sQ'i$|R*]'iS'l%P%QY*a'l*b,e-l.gU*b'm'n'oU,e*c*d*eS-l,f,gR.g-mQ#Y]R%r#YQ#_^R%w#_Q(c%tS+O(c+PR+P(dQ+T(fR,t+TQ#b_R%y#bQ#ebQ%{#cW&O#e%{(v+YQ(v&aR+Y0hQ$OsS&c$O&dR&d$PQ&q$]R)V&qQ&T#jR(o&TQ$X{R&k$XQ+^(}S,z+^-yR-y,{Q&o$ZR)S&oQ+f)YR-P+fQ#hfR&Q#hQ)^&uR+i)^Q&x$bS)e&x)fR)f&yQ'Q$iR)m'QQ'V$jS)w'V,RR,R)xQ,X)}R-d,XWjOn)l+wR#ljQ-f,]R.T-fd.|.[/c/j/o/}0P0R0^0b0cR/i.|U.t.V/b0QR/a.tQ/|/oS0Y/|0ZR0Z/}S/w/c/dR0U/wQ/O.[R/l/OR!ZPXmOn)l+wWlOn)l+wR'O$hYfOn$h)l+wR&P#g[sOn#g$h)l+wR&b#}&bQOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$f$h${%Q%X%[%^%e%j%l%u%z&X&]&h&i&p&s&z'R'U'g'h'k'm'n'r'y(R(X(_(b(k(m(u)U)])_)h)l)r)v*Q*[*_*`*c*i*j*l*n*q*r*u*|*}+Q+X+[+c+w,P,Q,T,_,`,a,c,d,g,i,k,m,o,q,r,v-_-a-h-k-n.e.f/[/t0d0e0f0g0i0j0k0l0o0sQ!nTQ#caQ#poU$Rt%a'}S$b!R$eQ$n!XQ$s!cQ$t!dQ$u!eQ$v!fQ$w!gQ$x!hQ%c!zQ%h#OQ%n#SQ%o#TQ&^#xQ&y$cQ'b$oQ(l%|U(w&f(x+ZW)b&w)d+p+qQ*g'wQ*p(WQ+o)cQ,n*xQ/r/WR0h0mQ!yYQ!}ZQ$`!PQ$a!QQ%P!kQ'o%Q^'v%^%e'y(R*i*l*n^*^'k*`,c,d-k.f/[Q*d'mQ*e'nQ+l)_Q,b*_Q,f*cQ-i,`Q-j,aQ-m,gQ.d-hR/Z.e[bOn#g$h)l+w!^!vYZ!P!Q!k%Q%^%e'k'm'n'y(R)_*_*`*c*i*l*n,`,a,c,d,g-h-k.e.f/[Q#R[Q#fdS#wrxQ$UyW$]}$Q&z)hS$j!U$fW$y!i'h*[,_S%t#[+Q`%}#d%z(k(m(u+X,v0lQ&_#yQ&`#{Q&a#}Q'e${Q'u%[W(V%j(X*q*uQ(Z%lQ(d%uQ(q&XS(t&]0jQ(z&hQ({&iU)T&p)U+cQ)[&sQ)q'RY)u'U)v,P,Q-_Q*Y'gS*f'r0kW*w(_*r,k,oW*{(b*},q,rQ+h)]Q+|)rQ,Z*QQ,p*|Q,w+[Q-`,TQ-q,mR.R-ahUOn#d#g$h%z&]'r(k(m)l+w%S!uYZ[drxy}!P!Q!U!i!k#[#y#{#}$Q$f${%Q%[%^%e%j%l%u&X&h&i&p&s&z'R'U'g'h'k'm'n'y(R(X(_(b(u)U)])_)h)r)v*Q*[*_*`*c*i*l*n*q*r*u*|*}+Q+X+[+c,P,Q,T,_,`,a,c,d,g,k,m,o,q,r,v-_-a-h-k.e.f/[0j0k0lQ#qpW%U!o!s0e0oQ%V!pQ%W!qQ%Y!tQ%d0dS'q%X0iQ's0fQ't0gQ,h*jQ-p,iS.h-n/tR0q0sU#uq.j0rR(r&Z[cOn#g$h)l+wZ!xY#[#}$Q+QQ#W[Q#zrR$TxQ%`!yQ%g!}Q%m#RQ'e$yQ(Q%cQ(U%hQ(^%nQ(a%oQ*t(ZQ,^*YQ-o,hQ.l-pR/^.kQ$StQ'|%aR*k'}Q.k-nR0O/tR#QZR#V[R%O!iQ$|!iV*Z'h*[,_!]!lQ!n#c#p$R$b$n$s$t$u$v$w$x%c%h%n%o&^&y'b(l(w)b*g*p+o,n/r0hR%R!kT#]^#_Q%v#[R,s+QQ(h%vS+V(i(jQ,u+WQ-s,sS.m-t-uR/_.nT+R(f+TQ$^}Q&e$QQ)g&zR+s)hQ#khQ$VzQ$Y{R&m$XQ(|&lR+a)PQ(|&lQ+`)OR+a)PR$[|R)Z&rXlOn)l+wQ$d!RR&{$eQ$k!UR&|$fR*P'YQ)}'YV-b,W-c.SQ.c-gQ/Q.]R/R.^U.[-g.].^Q/V.`Q/c.uQ/h.{U/j.}/k/zQ/o/SQ/}/pQ0P/uU0R/v0T0]Q0^0VQ0b0[R0c0_R/U._R/e.u",nodeNames:"⚠ print Escape { Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatSelfDoc FormatConversion FormatSpec FormatReplacement FormatSelfDoc ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert TypeDefinition type TypeParamList TypeParam StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:277,context:qw,nodeProps:[["isolate",-5,4,71,72,73,77,""],["group",-15,6,85,87,88,90,92,94,96,98,99,100,102,105,108,110,"Statement Statement",-22,8,18,21,25,40,49,50,56,57,60,61,62,63,64,67,70,71,72,79,80,81,82,"Expression",-10,114,116,119,121,122,126,128,133,135,138,"Statement",-9,143,144,147,148,150,151,152,153,154,"Pattern"],["openedBy",23,"(",54,"[",58,"{"],["closedBy",24,")",55,"]",59,"}"]],propSources:[Iw],skippedNodes:[0,4],repeatNodeCount:34,tokenData:"!2|~R!`OX%TXY%oY[%T[]%o]p%Tpq%oqr'ars)Yst*xtu%Tuv,dvw-hwx.Uxy/tyz0[z{0r{|2S|}2p}!O3W!O!P4_!P!Q:Z!Q!R;k!R![>_![!]Do!]!^Es!^!_FZ!_!`Gk!`!aHX!a!b%T!b!cIf!c!dJU!d!eK^!e!hJU!h!i!#f!i!tJU!t!u!,|!u!wJU!w!x!.t!x!}JU!}#O!0S#O#P&o#P#Q!0j#Q#R!1Q#R#SJU#S#T%T#T#UJU#U#VK^#V#YJU#Y#Z!#f#Z#fJU#f#g!,|#g#iJU#i#j!.t#j#oJU#o#p!1n#p#q!1s#q#r!2a#r#s!2f#s$g%T$g;'SJU;'S;=`KW<%lOJU`%YT&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T`%lP;=`<%l%To%v]&n`%c_OX%TXY%oY[%T[]%o]p%Tpq%oq#O%T#O#P&o#P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To&tX&n`OY%TYZ%oZ]%T]^%o^#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc'f[&n`O!_%T!_!`([!`#T%T#T#U(r#U#f%T#f#g(r#g#h(r#h#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(cTmR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(yT!mR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk)aV&n`&[ZOr%Trs)vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk){V&n`Or%Trs*bs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk*iT&n`&^ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To+PZS_&n`OY*xYZ%TZ]*x]^%T^#o*x#o#p+r#p#q*x#q#r+r#r;'S*x;'S;=`,^<%lO*x_+wTS_OY+rZ]+r^;'S+r;'S;=`,W<%lO+r_,ZP;=`<%l+ro,aP;=`<%l*xj,kV%rQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-XT!xY&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-oV%lQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.]V&n`&ZZOw%Twx.rx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.wV&n`Ow%Twx/^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/eT&n`&]ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/{ThZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc0cTgR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk0yXVZ&n`Oz%Tz{1f{!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk1mVaR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk2ZV%oZ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc2wTzR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To3_W%pZ&n`O!_%T!_!`-Q!`!a3w!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Td4OT&{S&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk4fX!fQ&n`O!O%T!O!P5R!P!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5WV&n`O!O%T!O!P5m!P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5tT!rZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti6[a!hX&n`O!Q%T!Q![6T![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S6T#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti7fZ&n`O{%T{|8X|}%T}!O8X!O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8^V&n`O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8z]!hX&n`O!Q%T!Q![8s![!l%T!l!m9s!m#R%T#R#S8s#S#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti9zT!hX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk:bX%qR&n`O!P%T!P!Q:}!Q!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj;UV%sQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti;ro!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!d%T!d!e?q!e!g%T!g!h7a!h!l%T!l!m9s!m!q%T!q!rA]!r!z%T!z!{Bq!{#R%T#R#S>_#S#U%T#U#V?q#V#X%T#X#Y7a#Y#^%T#^#_9s#_#c%T#c#dA]#d#l%T#l#mBq#m#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti=xV&n`O!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti>fc!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S>_#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti?vY&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti@mY!hX&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiAbX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBUX!hX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBv]&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiCv]!hX&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToDvV{_&n`O!_%T!_!`E]!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TcEdT%{R&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkEzT#gZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkFbXmR&n`O!^%T!^!_F}!_!`([!`!a([!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjGUV%mQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkGrV%zZ&n`O!_%T!_!`([!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkH`WmR&n`O!_%T!_!`([!`!aHx!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjIPV%nQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkIoV_Q#}P&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToJ_]&n`&YS%uZO!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoKZP;=`<%lJUoKge&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!tJU!t!uLx!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#gLx#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoMRa&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUkN_V&n`&`ZOr%TrsNts#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkNyV&n`Or%Trs! `s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! gT&n`&bZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! }V&n`&_ZOw%Twx!!dx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!!iV&n`Ow%Twx!#Ox#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!#VT&n`&aZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!#oe&n`&YS%uZOr%Trs!%Qsw%Twx!&px!Q%T!Q![JU![!c%T!c!tJU!t!u!(`!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#g!(`#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!%XV&n`&dZOr%Trs!%ns#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!%sV&n`Or%Trs!&Ys#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&aT&n`&fZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&wV&n`&cZOw%Twx!'^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!'cV&n`Ow%Twx!'xx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!(PT&n`&eZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!(ia&n`&YS%uZOr%Trs!)nsw%Twx!+^x!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!)uV&n`&hZOr%Trs!*[s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*aV&n`Or%Trs!*vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*}T&n`&jZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!+eV&n`&gZOw%Twx!+zx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,PV&n`Ow%Twx!,fx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,mT&n`&iZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!-Vi&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!dJU!d!eLx!e!hJU!h!i!(`!i!}JU!}#R%T#R#SJU#S#T%T#T#UJU#U#VLx#V#YJU#Y#Z!(`#Z#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUo!.}a&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!0ZT!XZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc!0qT!WR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj!1XV%kQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!1sO!]~k!1zV%jR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!2fO![~i!2mT%tX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T",tokenizers:[Nw,Cw,Pw,Mw,0,1,2,3,4],topRules:{Script:[0,5]},specialized:[{term:221,get:e=>Vw[e]||-1}],tokenPrec:7646}),Es=new _f,Cd=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function _a(e){return(t,n,o)=>{if(o)return!1;let a=t.node.getChild("VariableName");return a&&n(a,e),!0}}const Xw={FunctionDefinition:_a("function"),ClassDefinition:_a("class"),ForStatement(e,t,n){if(n){for(let o=e.node.firstChild;o;o=o.nextSibling)if(o.name=="VariableName")t(o,"variable");else if(o.name=="in")break}},ImportStatement(e,t){var n,o;let{node:a}=e,l=((n=a.firstChild)===null||n===void 0?void 0:n.name)=="from";for(let r=a.getChild("import");r;r=r.nextSibling)r.name=="VariableName"&&((o=r.nextSibling)===null||o===void 0?void 0:o.name)!="as"&&t(r,l?"variable":"namespace")},AssignStatement(e,t){for(let n=e.node.firstChild;n;n=n.nextSibling)if(n.name=="VariableName")t(n,"variable");else if(n.name==":"||n.name=="AssignOp")break},ParamList(e,t){for(let n=null,o=e.node.firstChild;o;o=o.nextSibling)o.name=="VariableName"&&(!n||!/\*|AssignOp/.test(n.name))&&t(o,"variable"),n=o},CapturePattern:_a("variable"),AsPattern:_a("variable"),__proto__:null};function Dd(e,t){let n=Es.get(t);if(n)return n;let o=[],a=!0;function l(r,i){let s=e.sliceString(r.from,r.to);o.push({label:s,type:i})}return t.cursor(hf.IncludeAnonymous).iterate(r=>{if(r.name){let i=Xw[r.name];if(i&&i(r,l,a)||!a&&Cd.has(r.name))return!1;a=!1}else if(r.to-r.from>8192){for(let i of Dd(e,r.node))o.push(i);return!1}}),Es.set(t,o),o}const Qs=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,zd=["String","FormatString","Comment","PropertyName"];function Uw(e){let t=ff(e.state).resolveInner(e.pos,-1);if(zd.indexOf(t.name)>-1)return null;let n=t.name=="VariableName"||t.to-t.from<20&&Qs.test(e.state.sliceDoc(t.from,t.to));if(!n&&!e.explicit)return null;let o=[];for(let a=t;a;a=a.parent)Cd.has(a.name)&&(o=o.concat(Dd(e.state.doc,a)));return{options:o,from:n?t.from:e.pos,validFor:Qs}}const Ww=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map(e=>({label:e,type:"constant"})).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map(e=>({label:e,type:"type"}))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map(e=>({label:e,type:"class"}))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map(e=>({label:e,type:"function"}))),jw=[Ft("def ${name}(${params}):\n	${}",{label:"def",detail:"function",type:"keyword"}),Ft("for ${name} in ${collection}:\n	${}",{label:"for",detail:"loop",type:"keyword"}),Ft("while ${}:\n	${}",{label:"while",detail:"loop",type:"keyword"}),Ft("try:\n	${}\nexcept ${error}:\n	${}",{label:"try",detail:"/ except block",type:"keyword"}),Ft(`if \${}:
	
`,{label:"if",detail:"block",type:"keyword"}),Ft("if ${}:\n	${}\nelse:\n	${}",{label:"if",detail:"/ else block",type:"keyword"}),Ft("class ${name}:\n	def __init__(self, ${params}):\n			${}",{label:"class",detail:"definition",type:"keyword"}),Ft("import ${module}",{label:"import",detail:"statement",type:"keyword"}),Ft("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],Fw=mf(zd,vf(Ww.concat(jw)));function Ps(e){let{node:t,pos:n}=e,o=e.lineIndent(n,-1),a=null;for(;;){let l=t.childBefore(n);if(l)if(l.name=="Comment")n=l.from;else if(l.name=="Body")e.baseIndentFor(l)+e.unit<=o&&(a=l),t=l;else if(l.type.is("Statement"))t=l;else break;else break}return a}function Cs(e,t){let n=e.baseIndentFor(t),o=e.lineAt(e.pos,-1),a=o.from+o.text.length;return/^\s*($|#)/.test(o.text)&&e.node.to<a+100&&!/\S/.test(e.state.sliceDoc(a,e.node.to))&&e.lineIndent(e.pos,-1)<=n||/^\s*(else:|elif |except |finally:)/.test(e.textAfter)&&e.lineIndent(e.pos,-1)>n?null:n+e.unit}const Yl=xu.define({name:"python",parser:Aw.configure({props:[$u.add({Body:e=>{var t;let n=Ps(e);return(t=Cs(e,n||e.node))!==null&&t!==void 0?t:e.continue()},IfStatement:e=>/^\s*(else:|elif )/.test(e.textAfter)?e.baseIndent:e.continue(),"ForStatement WhileStatement":e=>/^\s*else:/.test(e.textAfter)?e.baseIndent:e.continue(),TryStatement:e=>/^\s*(except |finally:|else:)/.test(e.textAfter)?e.baseIndent:e.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":Nl({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":Nl({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":Nl({closing:"]"}),"String FormatString":()=>null,Script:e=>{var t;let n=Ps(e);return(t=n&&Cs(e,n))!==null&&t!==void 0?t:e.continue()}}),ku.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":Tu,Body:(e,t)=>({from:e.from+1,to:e.to-(e.to==t.doc.length?0:1)})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/}});function Lw(){return new Su(Yl,[Yl.data.of({autocomplete:Uw}),Yl.data.of({autocomplete:Fw})])}const Gw={key:"copy-tooltip"},Bw={key:"copied-tooltip"},qd={__name:"CodeEditorModal",props:{code:{type:String,required:!0,default:""},open:{type:Boolean,required:!0,default:!1},language:{type:String,required:!1,default:"python"}},emits:["update:code","update:open","save"],setup(e,{emit:t}){const n=e,{t:o}=Ye(),a=t;let l=j(n.code),r=j(n.open);const i=f=>{l.value=f,a("update:code",l.value)},s=(f,g)=>{r.value=f,a("update:open",r.value),g&&a("save",l.value)};ke(()=>n.code,f=>{l.value=f}),ke(()=>n.open,f=>{r.value=f});const u=gf.theme({".cm-content":{fontFamily:"Cascadia Code, Consolas, Monaco, Menlo, Ubuntu Mono, Liberation Mono, DejaVu Sans Mono, Courier New, monospace",fontSize:"24px"}}),c={python:{extensions:[Lw(),Ti,u],tabSize:4},json:{extensions:[Qb(),Ti,u],tabSize:2}},d=Bp(),p=f=>{d.value=f.view};return(f,g)=>{const w=V("a-typography-text"),m=V("a-space"),v=V("a-modal");return T(),X(v,{open:y(r),width:"80vw",onOk:g[2]||(g[2]=k=>s(!1,!0)),onCancel:g[3]||(g[3]=k=>s(!1,!1))},{title:b(()=>[h(m,null,{default:b(()=>[h(y(Qf)),ne(" "+J(y(o)("components.codeEditorModal.title"))+" ",1),h(w,{copyable:{text:n.code}},{copyableTooltip:b(({copied:k})=>[k?(T(),Z("span",Bw,J(y(o)("components.codeEditorModal.copy_success")),1)):(T(),Z("span",Gw,J(y(o)("components.codeEditorModal.copy_code")),1))]),_:1},8,["copyable"])]),_:1})]),default:b(()=>[h(y(yf),{class:"code-editor",modelValue:y(l),"onUpdate:modelValue":g[0]||(g[0]=k=>_o(l)?l.value=k:l=k),placeholder:y(o)("components.codeEditorModal.please_enter_code"),style:{height:"80vh",minHeight:"400px"},autofocus:!0,"indent-with-tab":!0,"tab-size":c[n.language].tabSize,extensions:c[n.language].extensions,onReady:p,onChange:g[1]||(g[1]=k=>i(k))},null,8,["modelValue","placeholder","tab-size","extensions"])]),_:1},8,["open"])}}};function Nd(){return{description:"description",task_name:"tools.programming_function",has_inputs:!0,template:{language:{required:!0,placeholder:"",show:!1,value:"python",options:[{value:"python",label:"Python"}],name:"language",display_name:"language",type:"str",list:!1,field_type:"select"},code:{required:!0,placeholder:"some code...",show:!1,value:"",name:"code",display_name:"code",type:"str",list:!1,field_type:"textarea"},list_input:{required:!0,placeholder:"",show:!1,value:!1,name:"list_input",display_name:"list_input",type:"bool",list:!1,field_type:"checkbox"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"textarea",is_output:!0},console_msg:{required:!0,placeholder:"",show:!1,value:"",name:"console_msg",display_name:"console_msg",type:"str",list:!1,field_type:"textarea",is_output:!0},error_msg:{required:!1,placeholder:"",show:!1,value:"",name:"error_msg",display_name:"error_msg",type:"str",list:!1,field_type:"textarea",is_output:!0},files:{required:!1,placeholder:"",show:!1,value:"",name:"files",display_name:"files",type:"str",list:!1,field_type:"textarea",is_output:!0}}}}const Hw=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Nd},Symbol.toStringTag,{value:"Module"})),Yw={style:{padding:"10px"}},Zw={__name:"ProgrammingFunction",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Ye(),o=j(t.data.template),a=Nd();Object.entries(a.template).forEach(([f,g])=>{o.value[f]=o.value[f]||g,g.is_output&&(o.value[f].is_output=!0)});const l=["language","code","output","use_oversea_node","list_input","error_msg","console_msg","files"],r=ut({required:!0,placeholder:"",show:!1,value:"",password:!1,name:"",display_name:"",type:"str",list:!1,field_type:"input"}),i=f=>{r.multiline=f=="textarea"},s=j(!1),u=()=>{s.value=!0},c=()=>{if(l.includes(r.display_name)){dt.error(n("components.nodes.tools.ProgrammingFunction.parameter_name_reserved"));return}r.name=r.display_name,o.value[r.name]=JSON.parse(JSON.stringify(r)),s.value=!1},d=f=>{delete o.value[f]},p=ut({open:!1,code:""});return(f,g)=>{const w=V("a-select"),m=V("a-textarea"),v=V("a-input"),k=V("a-button"),Q=V("a-select-option"),$=V("a-form-item"),S=V("a-form"),E=V("a-drawer"),x=V("a-typography-paragraph"),I=V("a-checkbox"),U=V("a-flex");return T(),X(Qe,{nodeId:e.id,fieldsData:o.value,debug:t.data.debug,translatePrefix:"components.nodes.tools.ProgrammingFunction",documentLink:"https://vectorvein.com/help/docs/tools#h2-4"},{main:b(()=>[h(U,{vertical:"",gap:"small"},{default:b(()=>[h(Ee,{name:o.value.language.display_name,required:"",type:"target",onDelete:g[1]||(g[1]=R=>d(f.field)),data:o.value.language,"onUpdate:data":g[2]||(g[2]=R=>o.value.language=R)},{default:b(()=>[h(w,{class:"field-content",style:{width:"100%"},value:o.value.language.value,"onUpdate:value":g[0]||(g[0]=R=>o.value.language.value=R),options:o.value.language.options},null,8,["value","options"])]),_:1},8,["name","data"]),(T(!0),Z(ge,null,Ae(Object.keys(o.value),(R,L)=>(T(),Z(ge,{key:L},[l.includes(R)?ce("",!0):(T(),X(Ee,{key:0,name:`${o.value[R].display_name}: ${o.value[R].type}`,required:"",type:"target",deletable:"",onDelete:ee=>d(R),data:o.value[R],"onUpdate:data":ee=>o.value[R]=ee},{default:b(()=>[o.value[R].field_type=="select"?(T(),X(w,{key:0,class:"field-content",style:{width:"100%"},value:o.value[R].value,"onUpdate:value":ee=>o.value[R].value=ee,options:o.value[R].options},null,8,["value","onUpdate:value","options"])):o.value[R].field_type=="textarea"?(T(),X(m,{key:1,class:"field-content",value:o.value[R].value,"onUpdate:value":ee=>o.value[R].value=ee,autoSize:{minRows:1,maxRows:10},showCount:!0,placeholder:o.value[R].placeholder},null,8,["value","onUpdate:value","placeholder"])):o.value[R].field_type=="input"?(T(),X(v,{key:2,class:"field-content",value:o.value[R].value,"onUpdate:value":ee=>o.value[R].value=ee,placeholder:o.value[R].placeholder},null,8,["value","onUpdate:value","placeholder"])):ce("",!0)]),_:2},1032,["name","onDelete","data","onUpdate:data"]))],64))),128)),Ce("div",Yw,[h(k,{type:"dashed",block:"",onClick:u,class:"add-field-button"},{default:b(()=>[h(y(Xn)),ne(" "+J(y(n)("components.nodes.tools.ProgrammingFunction.add_parameter")),1)]),_:1}),h(E,{open:s.value,"onUpdate:open":g[5]||(g[5]=R=>s.value=R),class:"custom-class",style:{color:"red"},title:y(n)("components.nodes.tools.ProgrammingFunction.add_parameter"),placement:"right"},{extra:b(()=>[h(k,{type:"primary",onClick:c},{default:b(()=>[ne(J(y(n)("common.add")),1)]),_:1})]),default:b(()=>[h(S,null,{default:b(()=>[h($,{label:y(n)("components.nodes.tools.ProgrammingFunction.add_parameter_type")},{default:b(()=>[h(w,{value:r.type,"onUpdate:value":g[3]||(g[3]=R=>r.type=R),style:{width:"120px"},onChange:i},{default:b(()=>[h(Q,{value:"str"},{default:b(()=>[ne(J(y(n)("components.nodes.tools.ProgrammingFunction.parameter_type_str")),1)]),_:1}),h(Q,{value:"int"},{default:b(()=>[ne(J(y(n)("components.nodes.tools.ProgrammingFunction.parameter_type_int")),1)]),_:1}),h(Q,{value:"float"},{default:b(()=>[ne(J(y(n)("components.nodes.tools.ProgrammingFunction.parameter_type_float")),1)]),_:1}),h(Q,{value:"bool"},{default:b(()=>[ne(J(y(n)("components.nodes.tools.ProgrammingFunction.parameter_type_bool")),1)]),_:1}),h(Q,{value:"list"},{default:b(()=>[ne(J(y(n)("components.nodes.tools.ProgrammingFunction.parameter_type_list")),1)]),_:1}),h(Q,{value:"dict"},{default:b(()=>[ne(J(y(n)("components.nodes.tools.ProgrammingFunction.parameter_type_dict")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),h($,{label:y(n)("components.nodes.tools.ProgrammingFunction.add_parameter_name")},{default:b(()=>[h(v,{value:r.display_name,"onUpdate:value":g[4]||(g[4]=R=>r.display_name=R)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["open","title"])]),h(Ee,{name:y(n)("components.nodes.tools.ProgrammingFunction.code"),required:"",type:"target",data:o.value.code,"onUpdate:data":g[9]||(g[9]=R=>o.value.code=R)},{default:b(()=>[h(x,{ellipsis:{row:1,expandable:!1},content:o.value.code.value},null,8,["content"]),h(k,{type:"dashed",block:"",onClick:g[6]||(g[6]=R=>p.open=!0)},{default:b(()=>[ne(J(y(n)("components.nodes.tools.ProgrammingFunction.open_editor")),1)]),_:1}),h(qd,{language:o.value.language.value,open:p.open,"onUpdate:open":g[7]||(g[7]=R=>p.open=R),code:o.value.code.value,"onUpdate:code":g[8]||(g[8]=R=>o.value.code.value=R)},null,8,["language","open","code"])]),_:1},8,["name","data"]),h(Ee,{name:y(n)("components.nodes.tools.ProgrammingFunction.list_input"),"name-only":"",type:"target",data:o.value.list_input,"onUpdate:data":g[11]||(g[11]=R=>o.value.list_input=R)},{inline:b(()=>[h(I,{checked:o.value.list_input.value,"onUpdate:checked":g[10]||(g[10]=R=>o.value.list_input.value=R)},null,8,["checked"])]),_:1},8,["name","data"])]),_:1})]),_:1},8,["nodeId","fieldsData","debug"])}}},Jw=Object.freeze(Object.defineProperty({__proto__:null,default:Zw},Symbol.toStringTag,{value:"Module"})),Kw={__name:"WorkflowSelect",props:{modelValue:{},modelModifiers:{}},emits:Io(["selected"],["update:modelValue"]),setup(e,{emit:t}){const n=go(e,"modelValue"),o=t,{t:a}=Ye(),l=j(!0),r=Jo(),{userDatabases:i}=Pt(r),s=j([]);Fr(async()=>{const[p,f]=await Promise.all([u.load({}),Eu("list",{})]);f.status==200&&(s.value=f.data),l.value=!1});const u=ut({columns:[{name:a("workspace.workflowSpaceMain.workflow_title"),dataIndex:"title",key:"title"},{title:a("workspace.workflowSpaceMain.tags"),key:"tags",dataIndex:"tags",filters:we(()=>s.value.map(p=>({text:p.title,value:p.tid}))),width:"300px"},{title:a("workspace.workflowSpaceMain.update_time"),key:"update_time",dataIndex:"update_time",sorter:!0,sortDirections:["descend","ascend"],width:"200px"}],data:[],loading:!1,current:1,pageSize:10,total:0,pagination:we(()=>({total:u.total,current:u.current,pageSize:u.pageSize})),selectTag:"all",selectTagChange:async()=>{u.loading=!0,await u.load({tags:[u.selectTag]}),u.loading=!1},searching:!1,searchText:"",hoverRowWid:null,customRow:p=>({style:{cursor:"pointer"},onClick:async f=>{(f.target.classList.contains("ant-table-cell")||f.target.classList.contains("workflow-title"))&&(await d(p.wid),o("selected",n.value))},onMouseenter:f=>{u.hoverRowWid=p.wid},onMouseleave:f=>{u.hoverRowWid=null}}),searchWorkflows:async()=>{u.loading=!0,u.searching=!0,await u.load({search_text:u.searchText}),u.searching=!1,u.loading=!1},clearSearch:async()=>{u.loading=!0,u.searching=!0,u.searchText="",await u.load({}),u.searching=!1,u.loading=!1},handleTableChange:(p,f,g)=>{u.load({page_size:p.pageSize,page:p.current,sort_field:g.field,sort_order:g.order,tags:f.tags,search_text:u.searchText})},load:async p=>{u.loading=!0;const f=await cr("list",p);f.status==200?u.data=f.data.workflows.map(g=>(g.create_time=new Date(parseInt(g.create_time)).toLocaleString(),g.update_time=new Date(parseInt(g.update_time)).toLocaleString(),g)):dt.error(f.msg),u.total=f.data.total,u.pageSize=f.data.page_size,u.current=f.data.page,u.loading=!1}}),c=j({}),d=async p=>{l.value=!0;const f=await cr("get",{wid:p});if(f.status!=200){dt.error(a("workspace.workflowSpace.get_workflow_failed"));return}c.value=f.data,c.value.data.nodes.forEach(m=>{m.category=="vectorDb"&&(m.data.template.database.options=i.value.filter(v=>v.status=="VALID").map(v=>({value:v.vid,label:v.name})))});const g=Hr(c.value),w=ut(g);n.value={wid:p,title:c.value.title,inputFields:w.inputFields,outputNodes:w.outputNodes,workflowInvokeOutputNodes:w.workflowInvokeOutputNodes},l.value=!1};return(p,f)=>{const g=V("a-input-search"),w=V("a-button"),m=V("a-space"),v=V("a-col"),k=V("a-row"),Q=V("a-typography-text"),$=V("a-tag"),S=V("a-table"),E=V("a-spin");return T(),X(E,{spinning:l.value},{default:b(()=>[h(k,{justify:"space-between",align:"middle",gutter:[16,16]},{default:b(()=>[h(v,{span:24},{default:b(()=>[h(k,{type:"flex",align:"middle",justify:"space-between"},{default:b(()=>[h(v,{flex:"auto"},{default:b(()=>[h(m,null,{default:b(()=>[h(g,{value:u.searchText,"onUpdate:value":f[0]||(f[0]=x=>u.searchText=x),placeholder:y(a)("workspace.workflowSpaceMain.input_search_text"),"enter-button":"",onSearch:u.searchWorkflows,class:"search-input"},null,8,["value","placeholder","onSearch"]),h(w,{onClick:u.clearSearch},{default:b(()=>[ne(J(y(a)("workspace.workflowSpaceMain.reset_search")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1}),h(v,{span:24},{default:b(()=>[h(S,{loading:u.loading,columns:u.columns,customRow:u.customRow,"data-source":u.data,pagination:u.pagination,onChange:u.handleTableChange},{headerCell:b(({column:x})=>[x.key==="title"?(T(),Z(ge,{key:0},[h(y(Hp)),ne(" "+J(y(a)("workspace.workflowSpaceMain.workflow_title")),1)],64)):x.key==="tags"?(T(),Z(ge,{key:1},[h(y(uf)),ne(" "+J(y(a)("workspace.workflowSpaceMain.tags")),1)],64)):x.key==="update_time"?(T(),Z(ge,{key:2},[h(y(Sf)),ne(" "+J(y(a)("workspace.workflowSpaceMain.update_time")),1)],64)):ce("",!0)]),bodyCell:b(({column:x,record:I})=>[x.key==="title"?(T(),X(m,{key:0},{default:b(()=>[h(Q,{class:"workflow-title"},{default:b(()=>[ne(J(I.title),1)]),_:2},1024)]),_:2},1024)):x.key==="tags"?(T(),X(m,{key:1},{default:b(()=>[(T(!0),Z(ge,null,Ae(I.tags,U=>(T(),X($,{color:U.color,key:U.tid},{default:b(()=>[ne(J(U.title),1)]),_:2},1032,["color"]))),128))]),_:2},1024)):ce("",!0)]),_:1},8,["loading","columns","customRow","data-source","pagination","onChange"])]),_:1})]),_:1})]),_:1},8,["spinning"])}}},eS=wn(Kw,[["__scopeId","data-v-05168f70"]]);function Md(){return{description:"description",task_name:"tools.workflow_invoke",has_inputs:!0,seleted_workflow_title:"",is_template:!1,template:{workflow_id:{required:!0,placeholder:"",show:!1,value:"",name:"workflow_id",display_name:"workflow_id",type:"str",list:!1,field_type:"input"}}}}const tS=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Md},Symbol.toStringTag,{value:"Module"})),nS={style:{padding:"5px 10px"}},oS={__name:"WorkflowInvoke",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,o=yu().path.startsWith("/workflow/editor/")?"workflow":"officialTemplate",a=o=="template",{t:l}=Ye(),r=j(t.data.template),i=Md();Object.entries(i.template).forEach(([d,p])=>{r.value[d]=r.value[d]||p,p.is_output&&(r.value[d].is_output=!0)});const s=j(t.data.seleted_workflow_title),u=j(t.data.is_template),c=ut({open:!1,data:{},onWorkflowSelect:()=>{t.data.seleted_workflow_title=c.data.title,s.value=c.data.title,t.data.is_template=c.data.isTemplate,u.value=c.data.isTemplate,r.value.workflow_id.value=c.data.wid,Object.keys(r.value).forEach(f=>{["workflow_id"].includes(f)||delete r.value[f]}),c.data.inputFields.forEach(f=>{Yr.includes(f.field_type)||(r.value[f.name]=JSON.parse(JSON.stringify(f)),r.value[f.name].node=r.value[f.name].nodeId)});const d=new Set;c.data.outputNodes.concat(c.data.workflowInvokeOutputNodes).forEach(f=>{if(f.field_type=="typography-paragraph")return;const g=f.id.slice(0,8);let w=`${g}_${f.type}`;for(;d.has(w);)w=`${w}_${Math.floor(Math.random()*1e3)}`;d.add(w);let m=w,v="";f.type=="Text"?(r.value[w]=JSON.parse(JSON.stringify(f.data.template.text)),m=`${m}_${f.data.template.output_title.value}`,r.value[w].display_name=`${g}_${f.data.template.output_title.value||"text"}`,v="text"):f.type=="Audio"?(r.value[w]=JSON.parse(JSON.stringify(f.data.template.audio_url||{})),r.value[w].display_name=`${g}_${f.type}`,v="audio_url"):f.type=="Mindmap"?(r.value[w]=JSON.parse(JSON.stringify(f.data.template.content)),r.value[w].display_name=`${g}_${f.type}`,v="content"):f.type=="Mermaid"?(r.value[w]=JSON.parse(JSON.stringify(f.data.template.content)),r.value[w].display_name=`${g}_${f.type}`,v="content"):f.type=="Echarts"?(r.value[w]=JSON.parse(JSON.stringify(f.data.template.option)),r.value[w].display_name=`${g}_${f.type}`,v="option"):f.type=="WorkflowInvokeOutput"&&(r.value[w]=JSON.parse(JSON.stringify(f.data.template.value)),r.value[w].display_name=`${g}_${f.data.template.display_name.value}`,v="value"),r.value[w].id=w,r.value[w].name=m,r.value[w].show=!1,r.value[w].is_output=!0,r.value[w].node=f.id,r.value[w].output_field_key=v}),c.open=!1}});return(d,p)=>{const f=V("a-typography-text"),g=V("a-button"),w=V("a-modal"),m=V("a-input"),v=V("a-divider"),k=V("a-select"),Q=V("a-textarea"),$=V("a-input-number"),S=V("a-checkbox"),E=V("a-flex");return T(),X(Qe,{nodeId:e.id,fieldsData:r.value,translatePrefix:"components.nodes.tools.WorkflowInvoke",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/tools#h2-12"},{main:b(()=>[h(E,{vertical:"",gap:"small"},{default:b(()=>[Ce("div",nS,[s.value?(T(),Z(ge,{key:0},[h(f,{type:"secondary"},{default:b(()=>[ne(J(y(l)("components.nodes.tools.WorkflowInvoke.selected_workflow"))+": ",1)]),_:1}),h(f,null,{default:b(()=>[ne(J(s.value),1)]),_:1})],64)):ce("",!0),h(g,{type:"dashed",block:"",onClick:p[0]||(p[0]=x=>c.open=!0)},{default:b(()=>[ne(J(y(l)("components.nodes.tools.WorkflowInvoke.select_workflow")),1)]),_:1}),h(w,{open:c.open,title:y(l)("components.nodes.tools.WorkflowInvoke.select_workflow"),width:"80vw",onCancel:p[2]||(p[2]=x=>c.open=!1),footer:null},{default:b(()=>[h(eS,{showUser:a,selectType:y(o),modelValue:c.data,"onUpdate:modelValue":p[1]||(p[1]=x=>c.data=x),onSelected:c.onWorkflowSelect},null,8,["selectType","modelValue","onSelected"])]),_:1},8,["open","title"])]),h(Ee,{name:y(l)("components.nodes.tools.WorkflowInvoke.workflow_id"),required:"",type:"target",data:r.value.workflow_id,"onUpdate:data":p[4]||(p[4]=x=>r.value.workflow_id=x)},{default:b(()=>[h(m,{disabled:"",value:r.value.workflow_id.value,"onUpdate:value":p[3]||(p[3]=x=>r.value.workflow_id.value=x),placeholder:r.value.workflow_id.placeholder},null,8,["value","placeholder"])]),_:1},8,["name","data"]),r.value.workflow_id.value.length>0?(T(),X(v,{key:0},{default:b(()=>[ne(J(y(l)("components.nodes.tools.WorkflowInvoke.workflow_fields")),1)]),_:1})):ce("",!0),(T(!0),Z(ge,null,Ae(Object.keys(r.value),(x,I)=>(T(),Z(ge,{key:I},[!["workflow_id"].includes(x)&&!r.value[x].is_output?(T(),X(Ee,{key:0,name:`${r.value[x].display_name}: ${r.value[x].type}`,required:"",type:"target",onDelete:U=>d.removeField(x),data:r.value[x],"onUpdate:data":U=>r.value[x]=U},{inline:b(()=>[r.value[x].field_type=="checkbox"?(T(),X(S,{key:0,checked:r.value[x].value,"onUpdate:checked":U=>r.value[x].value=U},null,8,["checked","onUpdate:checked"])):ce("",!0)]),default:b(()=>[r.value[x].field_type=="select"?(T(),X(k,{key:0,style:{width:"100%"},value:r.value[x].value,"onUpdate:value":U=>r.value[x].value=U,options:r.value[x].options},null,8,["value","onUpdate:value","options"])):r.value[x].field_type=="textarea"?(T(),X(Q,{key:1,value:r.value[x].value,"onUpdate:value":U=>r.value[x].value=U,autoSize:{minRows:1,maxRows:10},showCount:!0,placeholder:r.value[x].placeholder},null,8,["value","onUpdate:value","placeholder"])):r.value[x].field_type=="input"?(T(),X(m,{key:2,value:r.value[x].value,"onUpdate:value":U=>r.value[x].value=U,placeholder:r.value[x].placeholder},null,8,["value","onUpdate:value","placeholder"])):r.value[x].field_type=="number"?(T(),X($,{key:3,value:r.value[x].value,"onUpdate:value":U=>r.value[x].value=U,controls:!1,style:{width:"100%"}},null,8,["value","onUpdate:value"])):ce("",!0)]),_:2},1032,["name","onDelete","data","onUpdate:data"])):ce("",!0)],64))),128))]),_:1})]),output:b(()=>[h(E,{vertical:"",style:{width:"100%"}},{default:b(()=>[(T(!0),Z(ge,null,Ae(Object.keys(r.value),(x,I)=>(T(),Z(ge,{key:I},[r.value[x].is_output?(T(),X(Ee,{key:0,name:r.value[x].display_name,type:"source",nameOnly:"",data:r.value[x],"onUpdate:data":U=>r.value[x]=U},null,8,["name","data","onUpdate:data"])):ce("",!0)],64))),128))]),_:1})]),_:1},8,["nodeId","fieldsData","debug"])}}},aS=Object.freeze(Object.defineProperty({__proto__:null,default:oS},Symbol.toStringTag,{value:"Module"}));function Rd(){return{description:"description",task_name:"triggers.button_trigger",has_inputs:!1,template:{button_text:{required:!0,placeholder:"Run",show:!1,value:"",name:"button_text",display_name:"button_text",type:"str",list:!1,field_type:"input"}}}}const lS=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Rd},Symbol.toStringTag,{value:"Module"})),rS={__name:"ButtonTrigger",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Ye(),o=j(t.data.template),a=Rd();return Object.entries(a.template).forEach(([l,r])=>{o.value[l]=o.value[l]||r,r.is_output&&(o.value[l].is_output=!0)}),o.value.button_text.value=o.value.button_text.value.length>0?o.value.button_text.value:n("components.nodes.triggers.ButtonTrigger.run"),(l,r)=>(T(),X(Qe,{nodeId:e.id,fieldsData:o.value,translatePrefix:"components.nodes.triggers.ButtonTrigger",documentLink:"https://vectorvein.com/help/docs/triggers#h2-0"},null,8,["nodeId","fieldsData"]))}},iS=Object.freeze(Object.defineProperty({__proto__:null,default:rS},Symbol.toStringTag,{value:"Module"}));function Id(){return{description:"description",task_name:"vector_db.add_data",has_inputs:!0,template:{text:{required:!0,placeholder:"",show:!1,value:"",name:"text",display_name:"text",type:"str",list:!1,field_type:"textarea"},content_title:{required:!0,placeholder:"",show:!1,value:"",name:"content_title",display_name:"content_title",type:"str",list:!1,field_type:"input"},source_url:{required:!1,placeholder:"",show:!1,value:"",name:"source_url",display_name:"source_url",type:"str",list:!1,field_type:"input"},database:{required:!0,placeholder:"",show:!1,value:"",options:[],name:"database",display_name:"database",type:"str",list:!1,field_type:"select"},data_type:{required:!0,placeholder:"",show:!1,value:"text",options:[{value:"TEXT",label:"Text"}],name:"data_type",display_name:"data_type",type:"str",list:!1,field_type:"select",group:"default"},split_method:{required:!0,placeholder:"",show:!1,value:"general",options:[{value:"general",label:"general"},{value:"delimiter",label:"delimiter"},{value:"markdown",label:"markdown"},{value:"table",label:"table"}],name:"split_method",display_name:"split_method",type:"str",list:!1,field_type:"select",group:"default",condition:e=>e.data_type.value=="text"},chunk_length:{required:!0,placeholder:"",show:!1,value:500,name:"chunk_length",display_name:"chunk_length",type:"str",list:!1,field_type:"number",group:"default",condition:e=>["general","markdown"].includes(e.split_method.value)},chunk_overlap:{required:!0,placeholder:"",show:!1,value:30,name:"chunk_overlap",display_name:"chunk_overlap",type:"str",list:!1,field_type:"number",group:"default",condition:e=>["general","markdown"].includes(e.split_method.value)},delimiter:{required:!1,placeholder:"",show:!1,value:"\\n",name:"delimiter",display_name:"delimiter",type:"str",list:!1,field_type:"input",group:"default",condition:e=>e.split_method.value=="delimiter"},remove_url_and_email:{required:!1,placeholder:"",show:!1,value:!0,name:"remove_url_and_email",display_name:"remove_url_and_email",type:"bool",list:!1,field_type:"checkbox",group:"default"},object_id:{required:!0,placeholder:"",show:!1,value:"",name:"object_id",display_name:"object_id",type:"list|str",list:!1,field_type:"",is_output:!0}}}}const sS=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Id},Symbol.toStringTag,{value:"Module"})),uS={__name:"AddData",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=Jo(),{userDatabases:o}=Pt(n),a=j(t.data.template),l=Id();return Object.entries(l.template).forEach(([r,i])=>{a.value[r]=a.value[r]||i,i.is_output&&(a.value[r].is_output=!0)}),a.value.database.options=o.value.filter(r=>r.status=="VALID").map(r=>({value:r.vid,label:r.name})),(r,i)=>(T(),X(Qe,{nodeId:e.id,fieldsData:a.value,translatePrefix:"components.nodes.vectorDb.AddData",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/vector-db#h2-0"},null,8,["nodeId","fieldsData","debug"]))}},cS=Object.freeze(Object.defineProperty({__proto__:null,default:uS},Symbol.toStringTag,{value:"Module"}));function Vd(){return{description:"description",task_name:"vector_db.delete_data",has_inputs:!0,template:{object_id:{required:!0,placeholder:"",show:!1,value:"",name:"object_id",display_name:"object_id",type:"list|str",list:!1,field_type:""},database:{required:!0,placeholder:"",show:!1,value:"",options:[],name:"database",display_name:"database",type:"str",list:!1,field_type:"select"},delete_success:{required:!0,placeholder:"",show:!1,value:"",name:"delete_success",display_name:"delete_success",type:"list|bool",list:!1,field_type:"",is_output:!0}}}}const dS=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Vd},Symbol.toStringTag,{value:"Module"})),pS={__name:"DeleteData",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=Jo(),{userDatabases:o}=Pt(n),a=j(t.data.template),l=Vd();return Object.entries(l.template).forEach(([r,i])=>{a.value[r]=a.value[r]||i,i.is_output&&(a.value[r].is_output=!0)}),a.value.database.options=o.value.filter(r=>r.status=="VALID").map(r=>({value:r.vid,label:r.name})),(r,i)=>(T(),X(Qe,{nodeId:e.id,fieldsData:a.value,translatePrefix:"components.nodes.vectorDb.DeleteData",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/vector-db#h2-4"},null,8,["nodeId","fieldsData","debug"]))}},fS=Object.freeze(Object.defineProperty({__proto__:null,default:pS},Symbol.toStringTag,{value:"Module"}));function Ad(){return{description:"description",task_name:"vector_db.search_data",has_inputs:!0,template:{search_text:{required:!0,placeholder:"",show:!1,value:"",name:"search_text",display_name:"search_text",type:"str",list:!1,field_type:"textarea"},data_type:{required:!0,placeholder:"",show:!1,value:"text",options:[{value:"text",label:"Text"}],name:"data_type",display_name:"data_type",type:"str",list:!1,field_type:"select"},database:{required:!0,placeholder:"",show:!0,value:"",options:[],name:"database",display_name:"database",type:"str",list:!1,field_type:"select"},count:{required:!0,placeholder:"",show:!1,value:5,name:"count",display_name:"count",type:"str",list:!1,field_type:"number"},output_type:{required:!0,placeholder:"",show:!1,value:"text",options:[{value:"text",label:"Text"},{value:"list",label:"List"}],name:"output_type",display_name:"output_type",type:"str",list:!1,field_type:"select"},output:{required:!0,placeholder:"",show:!1,value:[],name:"output",display_name:"output",type:"list|str",list:!1,field_type:"",is_output:!0}}}}const mS=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Ad},Symbol.toStringTag,{value:"Module"})),hS={__name:"Search",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=Jo(),{userDatabases:o}=Pt(n),a=j(t.data.template),l=Ad();return Object.entries(l.template).forEach(([r,i])=>{a.value[r]=a.value[r]||i,i.is_output&&(a.value[r].is_output=!0)}),a.value.database.options=o.value.filter(r=>r.status=="VALID").map(r=>({value:r.vid,label:r.name})),(r,i)=>(T(),X(Qe,{nodeId:e.id,fieldsData:a.value,translatePrefix:"components.nodes.vectorDb.Search",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/vector-db#h2-8"},null,8,["nodeId","fieldsData","debug"]))}},vS=Object.freeze(Object.defineProperty({__proto__:null,default:hS},Symbol.toStringTag,{value:"Module"}));function Xd(){return{description:"description",task_name:"web_crawlers.bilibili_crawler",has_inputs:!0,template:{url_or_bvid:{required:!0,placeholder:"",show:!0,value:"",name:"url_or_bvid",display_name:"url_or_bvid",type:"str",clear_after_run:!0,list:!1,field_type:"input"},output_type:{required:!1,placeholder:"",show:!1,value:"str",options:[{value:"str",label:"str"},{value:"list",label:"list"}],name:"output_type",display_name:"output_type",type:"str",clear_after_run:!1,list:!0,field_type:"select"},output_subtitle:{required:!0,placeholder:"",show:!1,value:"",name:"output_subtitle",display_name:"output_subtitle",type:"str|dict",clear_after_run:!0,list:!1,field_type:"textarea",is_output:!0},output_title:{required:!0,placeholder:"",show:!1,value:"",name:"output_title",display_name:"output_title",type:"str|dict",clear_after_run:!0,list:!1,field_type:"textarea",is_output:!0}}}}const _S=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Xd},Symbol.toStringTag,{value:"Module"})),gS={__name:"BilibiliCrawler",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=Xd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,documentLink:"https://vectorvein.com/help/docs/web-crawlers#h2-0",translatePrefix:"components.nodes.webCrawlers.BilibiliCrawler"},null,8,["nodeId","debug","fieldsData"]))}},yS=Object.freeze(Object.defineProperty({__proto__:null,default:gS},Symbol.toStringTag,{value:"Module"}));function Ud(){return{description:"description",task_name:"web_crawlers.text_crawler",has_inputs:!0,template:{url:{required:!0,placeholder:"https://example.com",show:!0,value:"",name:"url",display_name:"url",type:"str",list:!1,field_type:"input"},output_type:{required:!1,placeholder:"",show:!1,value:"text",options:[{value:"text",label:"Text"}],name:"output_type",display_name:"output_type",type:"str",clear_after_run:!1,list:!0,field_type:"select"},output_text:{required:!0,placeholder:"",show:!1,value:"",name:"output_text",display_name:"output_text",type:"str|dict",list:!1,field_type:"textarea",is_output:!0},output_title:{required:!0,placeholder:"",show:!1,value:"",name:"output_title",display_name:"output_title",type:"str|dict",list:!1,field_type:"textarea",is_output:!0}}}}const OS=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Ud},Symbol.toStringTag,{value:"Module"})),bS={__name:"TextCrawler",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=Ud();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/web-crawlers#h2-4",fieldsData:n.value,translatePrefix:"components.nodes.webCrawlers.TextCrawler"},null,8,["nodeId","debug","fieldsData"]))}},wS=Object.freeze(Object.defineProperty({__proto__:null,default:bS},Symbol.toStringTag,{value:"Module"}));function Wd(){return{description:"description",task_name:"web_crawlers.youtube_crawler",has_inputs:!0,template:{url_or_video_id:{required:!0,placeholder:"",show:!0,value:"",name:"url_or_video_id",display_name:"url_or_video_id",type:"str",list:!1,field_type:"input"},get_comments:{required:!0,placeholder:"",show:!1,value:!1,name:"get_comments",display_name:"get_comments",type:"bool",list:!1,field_type:"checkbox"},comments_type:{required:!0,placeholder:"",show:!1,value:"text_only",options:[{value:"text_only",label:"text_only"},{value:"detailed",label:"detailed"}],name:"comments_type",display_name:"comments_type",type:"bool",list:!1,field_type:"radio"},output_type:{required:!1,placeholder:"",show:!1,value:"str",options:[{value:"str",label:"str"},{value:"list",label:"list"}],name:"output_type",display_name:"output_type",type:"str",clear_after_run:!1,list:!0,field_type:"select"},output_subtitle:{required:!0,placeholder:"",show:!1,value:"",name:"output_subtitle",display_name:"output_subtitle",type:"str|dict",list:!1,field_type:"textarea",is_output:!0},output_title:{required:!0,placeholder:"",show:!1,value:"",name:"output_title",display_name:"output_title",type:"str|dict",list:!1,field_type:"textarea",is_output:!0},output_comments:{required:!0,placeholder:"",show:!1,value:"",name:"output_comments",display_name:"output_comments",type:"str|dict",list:!1,field_type:"textarea",is_output:!0}}}}const SS=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Wd},Symbol.toStringTag,{value:"Module"})),xS={__name:"YoutubeCrawler",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=j(t.data.template),o=Wd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(T(),X(Qe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,documentLink:"https://vectorvein.com/help/docs/web-crawlers#h2-8",translatePrefix:"components.nodes.webCrawlers.YoutubeCrawler"},null,8,["nodeId","debug","fieldsData"]))}},$S=Object.freeze(Object.defineProperty({__proto__:null,default:xS},Symbol.toStringTag,{value:"Module"}));function kS(){return{description:"description",task_name:"file_processing.file_loader",has_inputs:!0,template:{files:{required:!0,placeholder:"",show:!0,multiline:!0,value:[],password:!1,name:"files",display_name:"files",type:"str",clear_after_run:!0,list:!1,field_type:"file"},output:{required:!0,placeholder:"",show:!1,multiline:!0,value:"",password:!1,name:"output",display_name:"output",type:"str",clear_after_run:!0,list:!1,field_type:"",is_output:!0}}}}const TS=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:kS},Symbol.toStringTag,{value:"Module"}));let ga;const ES=new Uint8Array(16);function QS(){if(!ga&&(ga=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ga))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ga(ES)}const PS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ds={randomUUID:PS};function zs(e,t,n){if(Ds.randomUUID&&!t&&!e)return Ds.randomUUID();e=e||{};const o=e.random||(e.rng||QS)();return o[6]=o[6]&15|64,o[8]=o[8]&63|128,$f(o)}var CS={value:()=>{}};function mi(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Ma(n)}function Ma(e){this._=e}function DS(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",a=n.indexOf(".");if(a>=0&&(o=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Ma.prototype=mi.prototype={constructor:Ma,on:function(e,t){var n=this._,o=DS(e+"",n),a,l=-1,r=o.length;if(arguments.length<2){for(;++l<r;)if((a=(e=o[l]).type)&&(a=zS(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<r;)if(a=(e=o[l]).type)n[a]=qs(n[a],e.name,t);else if(t==null)for(a in n)n[a]=qs(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ma(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),o=0,a,l;o<a;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],o=0,a=l.length;o<a;++o)l[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],a=0,l=o.length;a<l;++a)o[a].value.apply(t,n)}};function zS(e,t){for(var n=0,o=e.length,a;n<o;++n)if((a=e[n]).name===t)return a.value}function qs(e,t,n){for(var o=0,a=e.length;o<a;++o)if(e[o].name===t){e[o]=CS,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Pr="http://www.w3.org/1999/xhtml";const Ns={svg:"http://www.w3.org/2000/svg",xhtml:Pr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Cl(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ns.hasOwnProperty(t)?{space:Ns[t],local:e}:e}function qS(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Pr&&t.documentElement.namespaceURI===Pr?t.createElement(e):t.createElementNS(n,e)}}function NS(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function jd(e){var t=Cl(e);return(t.local?NS:qS)(t)}function MS(){}function hi(e){return e==null?MS:function(){return this.querySelector(e)}}function RS(e){typeof e!="function"&&(e=hi(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var l=t[a],r=l.length,i=o[a]=new Array(r),s,u,c=0;c<r;++c)(s=l[c])&&(u=e.call(s,s.__data__,c,l))&&("__data__"in s&&(u.__data__=s.__data__),i[c]=u);return new Ot(o,this._parents)}function IS(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function VS(){return[]}function Fd(e){return e==null?VS:function(){return this.querySelectorAll(e)}}function AS(e){return function(){return IS(e.apply(this,arguments))}}function XS(e){typeof e=="function"?e=AS(e):e=Fd(e);for(var t=this._groups,n=t.length,o=[],a=[],l=0;l<n;++l)for(var r=t[l],i=r.length,s,u=0;u<i;++u)(s=r[u])&&(o.push(e.call(s,s.__data__,u,r)),a.push(s));return new Ot(o,a)}function Ld(e){return function(){return this.matches(e)}}function Gd(e){return function(t){return t.matches(e)}}var US=Array.prototype.find;function WS(e){return function(){return US.call(this.children,e)}}function jS(){return this.firstElementChild}function FS(e){return this.select(e==null?jS:WS(typeof e=="function"?e:Gd(e)))}var LS=Array.prototype.filter;function GS(){return Array.from(this.children)}function BS(e){return function(){return LS.call(this.children,e)}}function HS(e){return this.selectAll(e==null?GS:BS(typeof e=="function"?e:Gd(e)))}function YS(e){typeof e!="function"&&(e=Ld(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var l=t[a],r=l.length,i=o[a]=[],s,u=0;u<r;++u)(s=l[u])&&e.call(s,s.__data__,u,l)&&i.push(s);return new Ot(o,this._parents)}function Bd(e){return new Array(e.length)}function ZS(){return new Ot(this._enter||this._groups.map(Bd),this._parents)}function tl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}tl.prototype={constructor:tl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function JS(e){return function(){return e}}function KS(e,t,n,o,a,l){for(var r=0,i,s=t.length,u=l.length;r<u;++r)(i=t[r])?(i.__data__=l[r],o[r]=i):n[r]=new tl(e,l[r]);for(;r<s;++r)(i=t[r])&&(a[r]=i)}function ex(e,t,n,o,a,l,r){var i,s,u=new Map,c=t.length,d=l.length,p=new Array(c),f;for(i=0;i<c;++i)(s=t[i])&&(p[i]=f=r.call(s,s.__data__,i,t)+"",u.has(f)?a[i]=s:u.set(f,s));for(i=0;i<d;++i)f=r.call(e,l[i],i,l)+"",(s=u.get(f))?(o[i]=s,s.__data__=l[i],u.delete(f)):n[i]=new tl(e,l[i]);for(i=0;i<c;++i)(s=t[i])&&u.get(p[i])===s&&(a[i]=s)}function tx(e){return e.__data__}function nx(e,t){if(!arguments.length)return Array.from(this,tx);var n=t?ex:KS,o=this._parents,a=this._groups;typeof e!="function"&&(e=JS(e));for(var l=a.length,r=new Array(l),i=new Array(l),s=new Array(l),u=0;u<l;++u){var c=o[u],d=a[u],p=d.length,f=ox(e.call(c,c&&c.__data__,u,o)),g=f.length,w=i[u]=new Array(g),m=r[u]=new Array(g),v=s[u]=new Array(p);n(c,d,w,m,v,f,t);for(var k=0,Q=0,$,S;k<g;++k)if($=w[k]){for(k>=Q&&(Q=k+1);!(S=m[Q])&&++Q<g;);$._next=S||null}}return r=new Ot(r,o),r._enter=i,r._exit=s,r}function ox(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ax(){return new Ot(this._exit||this._groups.map(Bd),this._parents)}function lx(e,t,n){var o=this.enter(),a=this,l=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?l.remove():n(l),o&&a?o.merge(a).order():a}function rx(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,a=n.length,l=o.length,r=Math.min(a,l),i=new Array(a),s=0;s<r;++s)for(var u=n[s],c=o[s],d=u.length,p=i[s]=new Array(d),f,g=0;g<d;++g)(f=u[g]||c[g])&&(p[g]=f);for(;s<a;++s)i[s]=n[s];return new Ot(i,this._parents)}function ix(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],a=o.length-1,l=o[a],r;--a>=0;)(r=o[a])&&(l&&r.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(r,l),l=r);return this}function sx(e){e||(e=ux);function t(d,p){return d&&p?e(d.__data__,p.__data__):!d-!p}for(var n=this._groups,o=n.length,a=new Array(o),l=0;l<o;++l){for(var r=n[l],i=r.length,s=a[l]=new Array(i),u,c=0;c<i;++c)(u=r[c])&&(s[c]=u);s.sort(t)}return new Ot(a,this._parents).order()}function ux(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function cx(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function dx(){return Array.from(this)}function px(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,l=o.length;a<l;++a){var r=o[a];if(r)return r}return null}function fx(){let e=0;for(const t of this)++e;return e}function mx(){return!this.node()}function hx(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var a=t[n],l=0,r=a.length,i;l<r;++l)(i=a[l])&&e.call(i,i.__data__,l,a);return this}function vx(e){return function(){this.removeAttribute(e)}}function _x(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gx(e,t){return function(){this.setAttribute(e,t)}}function yx(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ox(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function bx(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function wx(e,t){var n=Cl(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?_x:vx:typeof t=="function"?n.local?bx:Ox:n.local?yx:gx)(n,t))}function Hd(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Sx(e){return function(){this.style.removeProperty(e)}}function xx(e,t,n){return function(){this.style.setProperty(e,t,n)}}function $x(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function kx(e,t,n){return arguments.length>1?this.each((t==null?Sx:typeof t=="function"?$x:xx)(e,t,n??"")):mo(this.node(),e)}function mo(e,t){return e.style.getPropertyValue(t)||Hd(e).getComputedStyle(e,null).getPropertyValue(t)}function Tx(e){return function(){delete this[e]}}function Ex(e,t){return function(){this[e]=t}}function Qx(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Px(e,t){return arguments.length>1?this.each((t==null?Tx:typeof t=="function"?Qx:Ex)(e,t)):this.node()[e]}function Yd(e){return e.trim().split(/^|\s+/)}function vi(e){return e.classList||new Zd(e)}function Zd(e){this._node=e,this._names=Yd(e.getAttribute("class")||"")}Zd.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Jd(e,t){for(var n=vi(e),o=-1,a=t.length;++o<a;)n.add(t[o])}function Kd(e,t){for(var n=vi(e),o=-1,a=t.length;++o<a;)n.remove(t[o])}function Cx(e){return function(){Jd(this,e)}}function Dx(e){return function(){Kd(this,e)}}function zx(e,t){return function(){(t.apply(this,arguments)?Jd:Kd)(this,e)}}function qx(e,t){var n=Yd(e+"");if(arguments.length<2){for(var o=vi(this.node()),a=-1,l=n.length;++a<l;)if(!o.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?zx:t?Cx:Dx)(n,t))}function Nx(){this.textContent=""}function Mx(e){return function(){this.textContent=e}}function Rx(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ix(e){return arguments.length?this.each(e==null?Nx:(typeof e=="function"?Rx:Mx)(e)):this.node().textContent}function Vx(){this.innerHTML=""}function Ax(e){return function(){this.innerHTML=e}}function Xx(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ux(e){return arguments.length?this.each(e==null?Vx:(typeof e=="function"?Xx:Ax)(e)):this.node().innerHTML}function Wx(){this.nextSibling&&this.parentNode.appendChild(this)}function jx(){return this.each(Wx)}function Fx(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Lx(){return this.each(Fx)}function Gx(e){var t=typeof e=="function"?e:jd(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Bx(){return null}function Hx(e,t){var n=typeof e=="function"?e:jd(e),o=t==null?Bx:typeof t=="function"?t:hi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Yx(){var e=this.parentNode;e&&e.removeChild(this)}function Zx(){return this.each(Yx)}function Jx(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Kx(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function e$(e){return this.select(e?Kx:Jx)}function t$(e){return arguments.length?this.property("__data__",e):this.node().__data__}function n$(e){return function(t){e.call(this,t,this.__data__)}}function o$(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function a$(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,a=t.length,l;n<a;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++o]=l;++o?t.length=o:delete this.__on}}}function l$(e,t,n){return function(){var o=this.__on,a,l=n$(t);if(o){for(var r=0,i=o.length;r<i;++r)if((a=o[r]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=t;return}}this.addEventListener(e.type,l,n),a={type:e.type,name:e.name,value:t,listener:l,options:n},o?o.push(a):this.__on=[a]}}function r$(e,t,n){var o=o$(e+""),a,l=o.length,r;if(arguments.length<2){var i=this.node().__on;if(i){for(var s=0,u=i.length,c;s<u;++s)for(a=0,c=i[s];a<l;++a)if((r=o[a]).type===c.type&&r.name===c.name)return c.value}return}for(i=t?l$:a$,a=0;a<l;++a)this.each(i(o[a],t,n));return this}function ep(e,t,n){var o=Hd(e),a=o.CustomEvent;typeof a=="function"?a=new a(t,n):(a=o.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function i$(e,t){return function(){return ep(this,e,t)}}function s$(e,t){return function(){return ep(this,e,t.apply(this,arguments))}}function u$(e,t){return this.each((typeof t=="function"?s$:i$)(e,t))}function*c$(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,l=o.length,r;a<l;++a)(r=o[a])&&(yield r)}var tp=[null];function Ot(e,t){this._groups=e,this._parents=t}function ta(){return new Ot([[document.documentElement]],tp)}function d$(){return this}Ot.prototype=ta.prototype={constructor:Ot,select:RS,selectAll:XS,selectChild:FS,selectChildren:HS,filter:YS,data:nx,enter:ZS,exit:ax,join:lx,merge:rx,selection:d$,order:ix,sort:sx,call:cx,nodes:dx,node:px,size:fx,empty:mx,each:hx,attr:wx,style:kx,property:Px,classed:qx,text:Ix,html:Ux,raise:jx,lower:Lx,append:Gx,insert:Hx,remove:Zx,clone:e$,datum:t$,on:r$,dispatch:u$,[Symbol.iterator]:c$};function vn(e){return typeof e=="string"?new Ot([[document.querySelector(e)]],[document.documentElement]):new Ot([[e]],tp)}function p$(e){let t;for(;t=e.sourceEvent;)e=t;return e}function dn(e,t){if(e=p$(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const Cr={capture:!0,passive:!1};function Dr(e){e.preventDefault(),e.stopImmediatePropagation()}function f$(e){var t=e.document.documentElement,n=vn(e).on("dragstart.drag",Dr,Cr);"onselectstart"in t?n.on("selectstart.drag",Dr,Cr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function m$(e,t){var n=e.document.documentElement,o=vn(e).on("dragstart.drag",null);t&&(o.on("click.drag",Dr,Cr),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function _i(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function np(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function na(){}var Bo=.7,nl=1/Bo,ro="\\s*([+-]?\\d+)\\s*",Ho="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h$=/^#([0-9a-f]{3,8})$/,v$=new RegExp(`^rgb\\(${ro},${ro},${ro}\\)$`),_$=new RegExp(`^rgb\\(${Vt},${Vt},${Vt}\\)$`),g$=new RegExp(`^rgba\\(${ro},${ro},${ro},${Ho}\\)$`),y$=new RegExp(`^rgba\\(${Vt},${Vt},${Vt},${Ho}\\)$`),O$=new RegExp(`^hsl\\(${Ho},${Vt},${Vt}\\)$`),b$=new RegExp(`^hsla\\(${Ho},${Vt},${Vt},${Ho}\\)$`),Ms={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_i(na,Yo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Rs,formatHex:Rs,formatHex8:w$,formatHsl:S$,formatRgb:Is,toString:Is});function Rs(){return this.rgb().formatHex()}function w$(){return this.rgb().formatHex8()}function S$(){return op(this).formatHsl()}function Is(){return this.rgb().formatRgb()}function Yo(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=h$.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Vs(t):n===3?new mt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ya(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ya(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=v$.exec(e))?new mt(t[1],t[2],t[3],1):(t=_$.exec(e))?new mt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=g$.exec(e))?ya(t[1],t[2],t[3],t[4]):(t=y$.exec(e))?ya(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=O$.exec(e))?Us(t[1],t[2]/100,t[3]/100,1):(t=b$.exec(e))?Us(t[1],t[2]/100,t[3]/100,t[4]):Ms.hasOwnProperty(e)?Vs(Ms[e]):e==="transparent"?new mt(NaN,NaN,NaN,0):null}function Vs(e){return new mt(e>>16&255,e>>8&255,e&255,1)}function ya(e,t,n,o){return o<=0&&(e=t=n=NaN),new mt(e,t,n,o)}function x$(e){return e instanceof na||(e=Yo(e)),e?(e=e.rgb(),new mt(e.r,e.g,e.b,e.opacity)):new mt}function zr(e,t,n,o){return arguments.length===1?x$(e):new mt(e,t,n,o??1)}function mt(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}_i(mt,zr,np(na,{brighter(e){return e=e==null?nl:Math.pow(nl,e),new mt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Bo:Math.pow(Bo,e),new mt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new mt(Rn(this.r),Rn(this.g),Rn(this.b),ol(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:As,formatHex:As,formatHex8:$$,formatRgb:Xs,toString:Xs}));function As(){return`#${Dn(this.r)}${Dn(this.g)}${Dn(this.b)}`}function $$(){return`#${Dn(this.r)}${Dn(this.g)}${Dn(this.b)}${Dn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xs(){const e=ol(this.opacity);return`${e===1?"rgb(":"rgba("}${Rn(this.r)}, ${Rn(this.g)}, ${Rn(this.b)}${e===1?")":`, ${e})`}`}function ol(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Rn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Dn(e){return e=Rn(e),(e<16?"0":"")+e.toString(16)}function Us(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Qt(e,t,n,o)}function op(e){if(e instanceof Qt)return new Qt(e.h,e.s,e.l,e.opacity);if(e instanceof na||(e=Yo(e)),!e)return new Qt;if(e instanceof Qt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,a=Math.min(t,n,o),l=Math.max(t,n,o),r=NaN,i=l-a,s=(l+a)/2;return i?(t===l?r=(n-o)/i+(n<o)*6:n===l?r=(o-t)/i+2:r=(t-n)/i+4,i/=s<.5?l+a:2-l-a,r*=60):i=s>0&&s<1?0:r,new Qt(r,i,s,e.opacity)}function k$(e,t,n,o){return arguments.length===1?op(e):new Qt(e,t,n,o??1)}function Qt(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}_i(Qt,k$,np(na,{brighter(e){return e=e==null?nl:Math.pow(nl,e),new Qt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Bo:Math.pow(Bo,e),new Qt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,a=2*n-o;return new mt(Zl(e>=240?e-240:e+120,a,o),Zl(e,a,o),Zl(e<120?e+240:e-120,a,o),this.opacity)},clamp(){return new Qt(Ws(this.h),Oa(this.s),Oa(this.l),ol(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ol(this.opacity);return`${e===1?"hsl(":"hsla("}${Ws(this.h)}, ${Oa(this.s)*100}%, ${Oa(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ws(e){return e=(e||0)%360,e<0?e+360:e}function Oa(e){return Math.max(0,Math.min(1,e||0))}function Zl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ap=e=>()=>e;function T$(e,t){return function(n){return e+n*t}}function E$(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Q$(e){return(e=+e)==1?lp:function(t,n){return n-t?E$(t,n,e):ap(isNaN(t)?n:t)}}function lp(e,t){var n=t-e;return n?T$(e,n):ap(isNaN(e)?t:e)}const js=function e(t){var n=Q$(t);function o(a,l){var r=n((a=zr(a)).r,(l=zr(l)).r),i=n(a.g,l.g),s=n(a.b,l.b),u=lp(a.opacity,l.opacity);return function(c){return a.r=r(c),a.g=i(c),a.b=s(c),a.opacity=u(c),a+""}}return o.gamma=e,o}(1);function fn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var qr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jl=new RegExp(qr.source,"g");function P$(e){return function(){return e}}function C$(e){return function(t){return e(t)+""}}function D$(e,t){var n=qr.lastIndex=Jl.lastIndex=0,o,a,l,r=-1,i=[],s=[];for(e=e+"",t=t+"";(o=qr.exec(e))&&(a=Jl.exec(t));)(l=a.index)>n&&(l=t.slice(n,l),i[r]?i[r]+=l:i[++r]=l),(o=o[0])===(a=a[0])?i[r]?i[r]+=a:i[++r]=a:(i[++r]=null,s.push({i:r,x:fn(o,a)})),n=Jl.lastIndex;return n<t.length&&(l=t.slice(n),i[r]?i[r]+=l:i[++r]=l),i.length<2?s[0]?C$(s[0].x):P$(t):(t=s.length,function(u){for(var c=0,d;c<t;++c)i[(d=s[c]).i]=d.x(u);return i.join("")})}var Fs=180/Math.PI,Nr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rp(e,t,n,o,a,l){var r,i,s;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(i=Math.sqrt(n*n+o*o))&&(n/=i,o/=i,s/=i),e*o<t*n&&(e=-e,t=-t,s=-s,r=-r),{translateX:a,translateY:l,rotate:Math.atan2(t,e)*Fs,skewX:Math.atan(s)*Fs,scaleX:r,scaleY:i}}var ba;function z$(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Nr:rp(t.a,t.b,t.c,t.d,t.e,t.f)}function q$(e){return e==null||(ba||(ba=document.createElementNS("http://www.w3.org/2000/svg","g")),ba.setAttribute("transform",e),!(e=ba.transform.baseVal.consolidate()))?Nr:(e=e.matrix,rp(e.a,e.b,e.c,e.d,e.e,e.f))}function ip(e,t,n,o){function a(u){return u.length?u.pop()+" ":""}function l(u,c,d,p,f,g){if(u!==d||c!==p){var w=f.push("translate(",null,t,null,n);g.push({i:w-4,x:fn(u,d)},{i:w-2,x:fn(c,p)})}else(d||p)&&f.push("translate("+d+t+p+n)}function r(u,c,d,p){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),p.push({i:d.push(a(d)+"rotate(",null,o)-2,x:fn(u,c)})):c&&d.push(a(d)+"rotate("+c+o)}function i(u,c,d,p){u!==c?p.push({i:d.push(a(d)+"skewX(",null,o)-2,x:fn(u,c)}):c&&d.push(a(d)+"skewX("+c+o)}function s(u,c,d,p,f,g){if(u!==d||c!==p){var w=f.push(a(f)+"scale(",null,",",null,")");g.push({i:w-4,x:fn(u,d)},{i:w-2,x:fn(c,p)})}else(d!==1||p!==1)&&f.push(a(f)+"scale("+d+","+p+")")}return function(u,c){var d=[],p=[];return u=e(u),c=e(c),l(u.translateX,u.translateY,c.translateX,c.translateY,d,p),r(u.rotate,c.rotate,d,p),i(u.skewX,c.skewX,d,p),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,p),u=c=null,function(f){for(var g=-1,w=p.length,m;++g<w;)d[(m=p[g]).i]=m.x(f);return d.join("")}}}var N$=ip(z$,"px, ","px)","deg)"),M$=ip(q$,", ",")",")"),R$=1e-12;function Ls(e){return((e=Math.exp(e))+1/e)/2}function I$(e){return((e=Math.exp(e))-1/e)/2}function V$(e){return((e=Math.exp(2*e))-1)/(e+1)}const A$=function e(t,n,o){function a(l,r){var i=l[0],s=l[1],u=l[2],c=r[0],d=r[1],p=r[2],f=c-i,g=d-s,w=f*f+g*g,m,v;if(w<R$)v=Math.log(p/u)/t,m=function(x){return[i+x*f,s+x*g,u*Math.exp(t*x*v)]};else{var k=Math.sqrt(w),Q=(p*p-u*u+o*w)/(2*u*n*k),$=(p*p-u*u-o*w)/(2*p*n*k),S=Math.log(Math.sqrt(Q*Q+1)-Q),E=Math.log(Math.sqrt($*$+1)-$);v=(E-S)/t,m=function(x){var I=x*v,U=Ls(S),R=u/(n*k)*(U*V$(t*I+S)-I$(S));return[i+R*f,s+R*g,u*U/Ls(t*I+S)]}}return m.duration=v*1e3*t/Math.SQRT2,m}return a.rho=function(l){var r=Math.max(.001,+l),i=r*r,s=i*i;return e(r,i,s)},a}(Math.SQRT2,2,4);var ho=0,$o=0,bo=0,sp=1e3,al,ko,ll=0,Ln=0,Dl=0,Zo=typeof performance=="object"&&performance.now?performance:Date,up=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function gi(){return Ln||(up(X$),Ln=Zo.now()+Dl)}function X$(){Ln=0}function rl(){this._call=this._time=this._next=null}rl.prototype=cp.prototype={constructor:rl,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?gi():+n)+(t==null?0:+t),!this._next&&ko!==this&&(ko?ko._next=this:al=this,ko=this),this._call=e,this._time=n,Mr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Mr())}};function cp(e,t,n){var o=new rl;return o.restart(e,t,n),o}function U$(){gi(),++ho;for(var e=al,t;e;)(t=Ln-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ho}function Gs(){Ln=(ll=Zo.now())+Dl,ho=$o=0;try{U$()}finally{ho=0,j$(),Ln=0}}function W$(){var e=Zo.now(),t=e-ll;t>sp&&(Dl-=t,ll=e)}function j$(){for(var e,t=al,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:al=n);ko=e,Mr(o)}function Mr(e){if(!ho){$o&&($o=clearTimeout($o));var t=e-Ln;t>24?(e<1/0&&($o=setTimeout(Gs,e-Zo.now()-Dl)),bo&&(bo=clearInterval(bo))):(bo||(ll=Zo.now(),bo=setInterval(W$,sp)),ho=1,up(Gs))}}function Bs(e,t,n){var o=new rl;return t=t==null?0:+t,o.restart(a=>{o.stop(),e(a+t)},t,n),o}var F$=mi("start","end","cancel","interrupt"),L$=[],dp=0,Hs=1,Rr=2,Ra=3,Ys=4,Ir=5,Ia=6;function zl(e,t,n,o,a,l){var r=e.__transition;if(!r)e.__transition={};else if(n in r)return;G$(e,n,{name:t,index:o,group:a,on:F$,tween:L$,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:dp})}function yi(e,t){var n=Dt(e,t);if(n.state>dp)throw new Error("too late; already scheduled");return n}function jt(e,t){var n=Dt(e,t);if(n.state>Ra)throw new Error("too late; already running");return n}function Dt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function G$(e,t,n){var o=e.__transition,a;o[t]=n,n.timer=cp(l,0,n.time);function l(u){n.state=Hs,n.timer.restart(r,n.delay,n.time),n.delay<=u&&r(u-n.delay)}function r(u){var c,d,p,f;if(n.state!==Hs)return s();for(c in o)if(f=o[c],f.name===n.name){if(f.state===Ra)return Bs(r);f.state===Ys?(f.state=Ia,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[c]):+c<t&&(f.state=Ia,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[c])}if(Bs(function(){n.state===Ra&&(n.state=Ys,n.timer.restart(i,n.delay,n.time),i(u))}),n.state=Rr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Rr){for(n.state=Ra,a=new Array(p=n.tween.length),c=0,d=-1;c<p;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(a[++d]=f);a.length=d+1}}function i(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=Ir,1),d=-1,p=a.length;++d<p;)a[d].call(e,c);n.state===Ir&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Ia,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Va(e,t){var n=e.__transition,o,a,l=!0,r;if(n){t=t==null?null:t+"";for(r in n){if((o=n[r]).name!==t){l=!1;continue}a=o.state>Rr&&o.state<Ir,o.state=Ia,o.timer.stop(),o.on.call(a?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[r]}l&&delete e.__transition}}function B$(e){return this.each(function(){Va(this,e)})}function H$(e,t){var n,o;return function(){var a=jt(this,e),l=a.tween;if(l!==n){o=n=l;for(var r=0,i=o.length;r<i;++r)if(o[r].name===t){o=o.slice(),o.splice(r,1);break}}a.tween=o}}function Y$(e,t,n){var o,a;if(typeof n!="function")throw new Error;return function(){var l=jt(this,e),r=l.tween;if(r!==o){a=(o=r).slice();for(var i={name:t,value:n},s=0,u=a.length;s<u;++s)if(a[s].name===t){a[s]=i;break}s===u&&a.push(i)}l.tween=a}}function Z$(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Dt(this.node(),n).tween,a=0,l=o.length,r;a<l;++a)if((r=o[a]).name===e)return r.value;return null}return this.each((t==null?H$:Y$)(n,e,t))}function Oi(e,t,n){var o=e._id;return e.each(function(){var a=jt(this,o);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Dt(a,o).value[t]}}function pp(e,t){var n;return(typeof t=="number"?fn:t instanceof Yo?js:(n=Yo(t))?(t=n,js):D$)(e,t)}function J$(e){return function(){this.removeAttribute(e)}}function K$(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ek(e,t,n){var o,a=n+"",l;return function(){var r=this.getAttribute(e);return r===a?null:r===o?l:l=t(o=r,n)}}function tk(e,t,n){var o,a=n+"",l;return function(){var r=this.getAttributeNS(e.space,e.local);return r===a?null:r===o?l:l=t(o=r,n)}}function nk(e,t,n){var o,a,l;return function(){var r,i=n(this),s;return i==null?void this.removeAttribute(e):(r=this.getAttribute(e),s=i+"",r===s?null:r===o&&s===a?l:(a=s,l=t(o=r,i)))}}function ok(e,t,n){var o,a,l;return function(){var r,i=n(this),s;return i==null?void this.removeAttributeNS(e.space,e.local):(r=this.getAttributeNS(e.space,e.local),s=i+"",r===s?null:r===o&&s===a?l:(a=s,l=t(o=r,i)))}}function ak(e,t){var n=Cl(e),o=n==="transform"?M$:pp;return this.attrTween(e,typeof t=="function"?(n.local?ok:nk)(n,o,Oi(this,"attr."+e,t)):t==null?(n.local?K$:J$)(n):(n.local?tk:ek)(n,o,t))}function lk(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function rk(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ik(e,t){var n,o;function a(){var l=t.apply(this,arguments);return l!==o&&(n=(o=l)&&rk(e,l)),n}return a._value=t,a}function sk(e,t){var n,o;function a(){var l=t.apply(this,arguments);return l!==o&&(n=(o=l)&&lk(e,l)),n}return a._value=t,a}function uk(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Cl(e);return this.tween(n,(o.local?ik:sk)(o,t))}function ck(e,t){return function(){yi(this,e).delay=+t.apply(this,arguments)}}function dk(e,t){return t=+t,function(){yi(this,e).delay=t}}function pk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ck:dk)(t,e)):Dt(this.node(),t).delay}function fk(e,t){return function(){jt(this,e).duration=+t.apply(this,arguments)}}function mk(e,t){return t=+t,function(){jt(this,e).duration=t}}function hk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fk:mk)(t,e)):Dt(this.node(),t).duration}function vk(e,t){if(typeof t!="function")throw new Error;return function(){jt(this,e).ease=t}}function _k(e){var t=this._id;return arguments.length?this.each(vk(t,e)):Dt(this.node(),t).ease}function gk(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;jt(this,e).ease=n}}function yk(e){if(typeof e!="function")throw new Error;return this.each(gk(this._id,e))}function Ok(e){typeof e!="function"&&(e=Ld(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var l=t[a],r=l.length,i=o[a]=[],s,u=0;u<r;++u)(s=l[u])&&e.call(s,s.__data__,u,l)&&i.push(s);return new ln(o,this._parents,this._name,this._id)}function bk(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,a=n.length,l=Math.min(o,a),r=new Array(o),i=0;i<l;++i)for(var s=t[i],u=n[i],c=s.length,d=r[i]=new Array(c),p,f=0;f<c;++f)(p=s[f]||u[f])&&(d[f]=p);for(;i<o;++i)r[i]=t[i];return new ln(r,this._parents,this._name,this._id)}function wk(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Sk(e,t,n){var o,a,l=wk(t)?yi:jt;return function(){var r=l(this,e),i=r.on;i!==o&&(a=(o=i).copy()).on(t,n),r.on=a}}function xk(e,t){var n=this._id;return arguments.length<2?Dt(this.node(),n).on.on(e):this.each(Sk(n,e,t))}function $k(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function kk(){return this.on("end.remove",$k(this._id))}function Tk(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hi(e));for(var o=this._groups,a=o.length,l=new Array(a),r=0;r<a;++r)for(var i=o[r],s=i.length,u=l[r]=new Array(s),c,d,p=0;p<s;++p)(c=i[p])&&(d=e.call(c,c.__data__,p,i))&&("__data__"in c&&(d.__data__=c.__data__),u[p]=d,zl(u[p],t,n,p,u,Dt(c,n)));return new ln(l,this._parents,t,n)}function Ek(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Fd(e));for(var o=this._groups,a=o.length,l=[],r=[],i=0;i<a;++i)for(var s=o[i],u=s.length,c,d=0;d<u;++d)if(c=s[d]){for(var p=e.call(c,c.__data__,d,s),f,g=Dt(c,n),w=0,m=p.length;w<m;++w)(f=p[w])&&zl(f,t,n,w,p,g);l.push(p),r.push(c)}return new ln(l,r,t,n)}var Qk=ta.prototype.constructor;function Pk(){return new Qk(this._groups,this._parents)}function Ck(e,t){var n,o,a;return function(){var l=mo(this,e),r=(this.style.removeProperty(e),mo(this,e));return l===r?null:l===n&&r===o?a:a=t(n=l,o=r)}}function fp(e){return function(){this.style.removeProperty(e)}}function Dk(e,t,n){var o,a=n+"",l;return function(){var r=mo(this,e);return r===a?null:r===o?l:l=t(o=r,n)}}function zk(e,t,n){var o,a,l;return function(){var r=mo(this,e),i=n(this),s=i+"";return i==null&&(s=i=(this.style.removeProperty(e),mo(this,e))),r===s?null:r===o&&s===a?l:(a=s,l=t(o=r,i))}}function qk(e,t){var n,o,a,l="style."+t,r="end."+l,i;return function(){var s=jt(this,e),u=s.on,c=s.value[l]==null?i||(i=fp(t)):void 0;(u!==n||a!==c)&&(o=(n=u).copy()).on(r,a=c),s.on=o}}function Nk(e,t,n){var o=(e+="")=="transform"?N$:pp;return t==null?this.styleTween(e,Ck(e,o)).on("end.style."+e,fp(e)):typeof t=="function"?this.styleTween(e,zk(e,o,Oi(this,"style."+e,t))).each(qk(this._id,e)):this.styleTween(e,Dk(e,o,t),n).on("end.style."+e,null)}function Mk(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Rk(e,t,n){var o,a;function l(){var r=t.apply(this,arguments);return r!==a&&(o=(a=r)&&Mk(e,r,n)),o}return l._value=t,l}function Ik(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Rk(e,t,n??""))}function Vk(e){return function(){this.textContent=e}}function Ak(e){return function(){var t=e(this);this.textContent=t??""}}function Xk(e){return this.tween("text",typeof e=="function"?Ak(Oi(this,"text",e)):Vk(e==null?"":e+""))}function Uk(e){return function(t){this.textContent=e.call(this,t)}}function Wk(e){var t,n;function o(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&Uk(a)),t}return o._value=e,o}function jk(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Wk(e))}function Fk(){for(var e=this._name,t=this._id,n=mp(),o=this._groups,a=o.length,l=0;l<a;++l)for(var r=o[l],i=r.length,s,u=0;u<i;++u)if(s=r[u]){var c=Dt(s,t);zl(s,e,n,u,r,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ln(o,this._parents,e,n)}function Lk(){var e,t,n=this,o=n._id,a=n.size();return new Promise(function(l,r){var i={value:r},s={value:function(){--a===0&&l()}};n.each(function(){var u=jt(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(i),t._.interrupt.push(i),t._.end.push(s)),u.on=t}),a===0&&l()})}var Gk=0;function ln(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function mp(){return++Gk}var Gt=ta.prototype;ln.prototype={constructor:ln,select:Tk,selectAll:Ek,selectChild:Gt.selectChild,selectChildren:Gt.selectChildren,filter:Ok,merge:bk,selection:Pk,transition:Fk,call:Gt.call,nodes:Gt.nodes,node:Gt.node,size:Gt.size,empty:Gt.empty,each:Gt.each,on:xk,attr:ak,attrTween:uk,style:Nk,styleTween:Ik,text:Xk,textTween:jk,remove:kk,tween:Z$,delay:pk,duration:hk,ease:_k,easeVarying:yk,end:Lk,[Symbol.iterator]:Gt[Symbol.iterator]};function Bk(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Hk={time:null,delay:0,duration:250,ease:Bk};function Yk(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Zk(e){var t,n;e instanceof ln?(t=e._id,e=e._name):(t=mp(),(n=Hk).time=gi(),e=e==null?null:e+"");for(var o=this._groups,a=o.length,l=0;l<a;++l)for(var r=o[l],i=r.length,s,u=0;u<i;++u)(s=r[u])&&zl(s,e,t,u,r,n||Yk(s,t));return new ln(o,this._parents,e,t)}ta.prototype.interrupt=B$;ta.prototype.transition=Zk;const wa=e=>()=>e;function Jk(e,{sourceEvent:t,target:n,transform:o,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:a}})}function tn(e,t,n){this.k=e,this.x=t,this.y=n}tn.prototype={constructor:tn,scale:function(e){return e===1?this:new tn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new tn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var bi=new tn(1,0,0);tn.prototype;function Kl(e){e.stopImmediatePropagation()}function wo(e){e.preventDefault(),e.stopImmediatePropagation()}function Kk(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function eT(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Zs(){return this.__zoom||bi}function tT(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function nT(){return navigator.maxTouchPoints||"ontouchstart"in this}function oT(e,t,n){var o=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],l=e.invertY(t[0][1])-n[0][1],r=e.invertY(t[1][1])-n[1][1];return e.translate(a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a),r>l?(l+r)/2:Math.min(0,l)||Math.max(0,r))}function aT(){var e=Kk,t=eT,n=oT,o=tT,a=nT,l=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],i=250,s=A$,u=mi("start","zoom","end"),c,d,p,f=500,g=150,w=0,m=10;function v(_){_.property("__zoom",Zs).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",R).filter(a).on("touchstart.zoom",L).on("touchmove.zoom",ee).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(_,C,O,N){var M=_.selection?_.selection():_;M.property("__zoom",Zs),_!==M?S(_,C,O,N):M.interrupt().each(function(){E(this,arguments).event(N).start().zoom(null,typeof C=="function"?C.apply(this,arguments):C).end()})},v.scaleBy=function(_,C,O,N){v.scaleTo(_,function(){var M=this.__zoom.k,P=typeof C=="function"?C.apply(this,arguments):C;return M*P},O,N)},v.scaleTo=function(_,C,O,N){v.transform(_,function(){var M=t.apply(this,arguments),P=this.__zoom,D=O==null?$(M):typeof O=="function"?O.apply(this,arguments):O,q=P.invert(D),K=typeof C=="function"?C.apply(this,arguments):C;return n(Q(k(P,K),D,q),M,r)},O,N)},v.translateBy=function(_,C,O,N){v.transform(_,function(){return n(this.__zoom.translate(typeof C=="function"?C.apply(this,arguments):C,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),r)},null,N)},v.translateTo=function(_,C,O,N,M){v.transform(_,function(){var P=t.apply(this,arguments),D=this.__zoom,q=N==null?$(P):typeof N=="function"?N.apply(this,arguments):N;return n(bi.translate(q[0],q[1]).scale(D.k).translate(typeof C=="function"?-C.apply(this,arguments):-C,typeof O=="function"?-O.apply(this,arguments):-O),P,r)},N,M)};function k(_,C){return C=Math.max(l[0],Math.min(l[1],C)),C===_.k?_:new tn(C,_.x,_.y)}function Q(_,C,O){var N=C[0]-O[0]*_.k,M=C[1]-O[1]*_.k;return N===_.x&&M===_.y?_:new tn(_.k,N,M)}function $(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function S(_,C,O,N){_.on("start.zoom",function(){E(this,arguments).event(N).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(N).end()}).tween("zoom",function(){var M=this,P=arguments,D=E(M,P).event(N),q=t.apply(M,P),K=O==null?$(q):typeof O=="function"?O.apply(M,P):O,te=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),B=M.__zoom,ae=typeof C=="function"?C.apply(M,P):C,Y=s(B.invert(K).concat(te/B.k),ae.invert(K).concat(te/ae.k));return function(pe){if(pe===1)pe=ae;else{var re=Y(pe),se=te/re[2];pe=new tn(se,K[0]-re[0]*se,K[1]-re[1]*se)}D.zoom(null,pe)}})}function E(_,C,O){return!O&&_.__zooming||new x(_,C)}function x(_,C){this.that=_,this.args=C,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,C),this.taps=0}x.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,C){return this.mouse&&_!=="mouse"&&(this.mouse[1]=C.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=C.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=C.invert(this.touch1[0])),this.that.__zoom=C,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var C=vn(this.that).datum();u.call(_,this.that,new Jk(_,{sourceEvent:this.sourceEvent,target:v,type:_,transform:this.that.__zoom,dispatch:u}),C)}};function I(_,...C){if(!e.apply(this,arguments))return;var O=E(this,C).event(_),N=this.__zoom,M=Math.max(l[0],Math.min(l[1],N.k*Math.pow(2,o.apply(this,arguments)))),P=dn(_);if(O.wheel)(O.mouse[0][0]!==P[0]||O.mouse[0][1]!==P[1])&&(O.mouse[1]=N.invert(O.mouse[0]=P)),clearTimeout(O.wheel);else{if(N.k===M)return;O.mouse=[P,N.invert(P)],Va(this),O.start()}wo(_),O.wheel=setTimeout(D,g),O.zoom("mouse",n(Q(k(N,M),O.mouse[0],O.mouse[1]),O.extent,r));function D(){O.wheel=null,O.end()}}function U(_,...C){if(p||!e.apply(this,arguments))return;var O=_.currentTarget,N=E(this,C,!0).event(_),M=vn(_.view).on("mousemove.zoom",K,!0).on("mouseup.zoom",te,!0),P=dn(_,O),D=_.clientX,q=_.clientY;f$(_.view),Kl(_),N.mouse=[P,this.__zoom.invert(P)],Va(this),N.start();function K(B){if(wo(B),!N.moved){var ae=B.clientX-D,Y=B.clientY-q;N.moved=ae*ae+Y*Y>w}N.event(B).zoom("mouse",n(Q(N.that.__zoom,N.mouse[0]=dn(B,O),N.mouse[1]),N.extent,r))}function te(B){M.on("mousemove.zoom mouseup.zoom",null),m$(B.view,N.moved),wo(B),N.event(B).end()}}function R(_,...C){if(e.apply(this,arguments)){var O=this.__zoom,N=dn(_.changedTouches?_.changedTouches[0]:_,this),M=O.invert(N),P=O.k*(_.shiftKey?.5:2),D=n(Q(k(O,P),N,M),t.apply(this,C),r);wo(_),i>0?vn(this).transition().duration(i).call(S,D,N,_):vn(this).call(v.transform,D,N,_)}}function L(_,...C){if(e.apply(this,arguments)){var O=_.touches,N=O.length,M=E(this,C,_.changedTouches.length===N).event(_),P,D,q,K;for(Kl(_),D=0;D<N;++D)q=O[D],K=dn(q,this),K=[K,this.__zoom.invert(K),q.identifier],M.touch0?!M.touch1&&M.touch0[2]!==K[2]&&(M.touch1=K,M.taps=0):(M.touch0=K,P=!0,M.taps=1+!!c);c&&(c=clearTimeout(c)),P&&(M.taps<2&&(d=K[0],c=setTimeout(function(){c=null},f)),Va(this),M.start())}}function ee(_,...C){if(this.__zooming){var O=E(this,C).event(_),N=_.changedTouches,M=N.length,P,D,q,K;for(wo(_),P=0;P<M;++P)D=N[P],q=dn(D,this),O.touch0&&O.touch0[2]===D.identifier?O.touch0[0]=q:O.touch1&&O.touch1[2]===D.identifier&&(O.touch1[0]=q);if(D=O.that.__zoom,O.touch1){var te=O.touch0[0],B=O.touch0[1],ae=O.touch1[0],Y=O.touch1[1],pe=(pe=ae[0]-te[0])*pe+(pe=ae[1]-te[1])*pe,re=(re=Y[0]-B[0])*re+(re=Y[1]-B[1])*re;D=k(D,Math.sqrt(pe/re)),q=[(te[0]+ae[0])/2,(te[1]+ae[1])/2],K=[(B[0]+Y[0])/2,(B[1]+Y[1])/2]}else if(O.touch0)q=O.touch0[0],K=O.touch0[1];else return;O.zoom("touch",n(Q(D,q,K),O.extent,r))}}function G(_,...C){if(this.__zooming){var O=E(this,C).event(_),N=_.changedTouches,M=N.length,P,D;for(Kl(_),p&&clearTimeout(p),p=setTimeout(function(){p=null},f),P=0;P<M;++P)D=N[P],O.touch0&&O.touch0[2]===D.identifier?delete O.touch0:O.touch1&&O.touch1[2]===D.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(D=dn(D,this),Math.hypot(d[0]-D[0],d[1]-D[1])<m)){var q=vn(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return v.wheelDelta=function(_){return arguments.length?(o=typeof _=="function"?_:wa(+_),v):o},v.filter=function(_){return arguments.length?(e=typeof _=="function"?_:wa(!!_),v):e},v.touchable=function(_){return arguments.length?(a=typeof _=="function"?_:wa(!!_),v):a},v.extent=function(_){return arguments.length?(t=typeof _=="function"?_:wa([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),v):t},v.scaleExtent=function(_){return arguments.length?(l[0]=+_[0],l[1]=+_[1],v):[l[0],l[1]]},v.translateExtent=function(_){return arguments.length?(r[0][0]=+_[0][0],r[1][0]=+_[1][0],r[0][1]=+_[0][1],r[1][1]=+_[1][1],v):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},v.constrain=function(_){return arguments.length?(n=_,v):n},v.duration=function(_){return arguments.length?(i=+_,v):i},v.interpolate=function(_){return arguments.length?(s=_,v):s},v.on=function(){var _=u.on.apply(u,arguments);return _===u?v:_},v.clickDistance=function(_){return arguments.length?(w=(_=+_)*_,v):Math.sqrt(w)},v.tapDistance=function(_){return arguments.length?(m=+_,v):m},v}const hp=Symbol("MiniMapSlots"),lT=["id","x","y","rx","ry","width","height","fill","stroke","stroke-width","shape-rendering"],rT={name:"MiniMapNode",compatConfig:{MODE:3}},iT=Re({...rT,props:{id:{},type:{},selected:{type:Boolean},dragging:{type:Boolean},position:{},dimensions:{},borderRadius:{},color:{},shapeRendering:{},strokeColor:{},strokeWidth:{}},emits:["click","dblclick","mouseenter","mousemove","mouseleave"],setup(e,{emit:t}){const n=e,o=On(hp),a=ml(),l=Ue(()=>a.style??{});function r(d){t("click",d)}function i(d){t("dblclick",d)}function s(d){t("mouseenter",d)}function u(d){t("mousemove",d)}function c(d){t("mouseleave",d)}return(d,p)=>y(o)[`node-${n.type}`]?(T(),X(Tn(y(o)[`node-${n.type}`]),Yp(vu({key:0},n)),null,16)):(T(),Z("rect",{key:1,id:d.id,class:tt(["vue-flow__minimap-node",{selected:d.selected,dragging:d.dragging}]),x:d.position.x,y:d.position.y,rx:d.borderRadius,ry:d.borderRadius,width:d.dimensions.width,height:d.dimensions.height,fill:d.color||l.value.background||l.value.backgroundColor,stroke:d.strokeColor,"stroke-width":d.strokeWidth,"shape-rendering":d.shapeRendering,onClick:r,onDblclick:i,onMouseenter:s,onMousemove:u,onMouseleave:c},null,42,lT))}}),sT=["width","height","viewBox","aria-labelledby"],uT=["id"],cT=["d","fill","stroke","stroke-width"],dT={name:"MiniMap",compatConfig:{MODE:3}},pT=Re({...dT,props:{nodeColor:{type:[String,Function],default:"#e2e2e2"},nodeStrokeColor:{type:[String,Function],default:"transparent"},nodeClassName:{type:[String,Function]},nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 240, 240, 0.6)"},maskStrokeColor:{default:"none"},maskStrokeWidth:{default:1},position:{default:"bottom-right"},pannable:{type:Boolean,default:!1},zoomable:{type:Boolean,default:!1},width:{},height:{},ariaLabel:{default:"Vue Flow mini map"},inversePan:{type:Boolean,default:!1},zoomStep:{default:10},offsetScale:{default:5}},emits:["click","nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:t}){const n=pu(),o=ml(),a=200,l=150,{id:r,edges:i,viewport:s,translateExtent:u,dimensions:c,emits:d,d3Selection:p,d3Zoom:f,getNodesInitialized:g}=Xe(),w=j();In(hp,n);const m=Ue(()=>{var M;return e.width??((M=o.style)==null?void 0:M.width)??a}),v=Ue(()=>{var M;return e.height??((M=o.style)==null?void 0:M.height)??l}),k=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",Q=we(()=>typeof e.nodeColor=="string"?()=>e.nodeColor:e.nodeColor),$=we(()=>typeof e.nodeStrokeColor=="string"?()=>e.nodeStrokeColor:e.nodeStrokeColor),S=we(()=>typeof e.nodeClassName=="string"?()=>e.nodeClassName:typeof e.nodeClassName=="function"?e.nodeClassName:()=>""),E=we(()=>ri(g.value)),x=we(()=>({x:-s.value.x/s.value.zoom,y:-s.value.y/s.value.zoom,width:c.value.width/s.value.zoom,height:c.value.height/s.value.zoom})),I=we(()=>g.value&&g.value.length?W_(E.value,x.value):x.value),U=we(()=>{const M=I.value.width/m.value,P=I.value.height/v.value;return Math.max(M,P)}),R=we(()=>{const M=U.value*m.value,P=U.value*v.value,D=e.offsetScale*U.value;return{offset:D,x:I.value.x-(M-I.value.width)/2-D,y:I.value.y-(P-I.value.height)/2-D,width:M+D*2,height:P+D*2}}),L=we(()=>!R.value.x||!R.value.y?"":`
    M${R.value.x-R.value.offset},${R.value.y-R.value.offset}
    h${R.value.width+R.value.offset*2}
    v${R.value.height+R.value.offset*2}
    h${-R.value.width-R.value.offset*2}z
    M${x.value.x},${x.value.y}
    h${x.value.width}
    v${x.value.height}
    h${-x.value.width}z`);_u(M=>{if(w.value){const P=vn(w.value),D=te=>{if(te.sourceEvent.type!=="wheel"||!p.value||!f.value)return;const B=-te.sourceEvent.deltaY*(te.sourceEvent.deltaMode===1?.05:te.sourceEvent.deltaMode?1:.002)*e.zoomStep,ae=s.value.zoom*2**B;f.value.scaleTo(p.value,ae)},q=te=>{if(te.sourceEvent.type!=="mousemove"||!p.value||!f.value)return;const B=U.value*Math.max(1,s.value.zoom)*(e.inversePan?-1:1),ae={x:s.value.x-te.sourceEvent.movementX*B,y:s.value.y-te.sourceEvent.movementY*B},Y=[[0,0],[c.value.width,c.value.height]],pe=bi.translate(ae.x,ae.y).scale(s.value.zoom),re=f.value.constrain()(pe,Y,u.value);f.value.transform(p.value,re)},K=aT().on("zoom",e.pannable?q:()=>{}).on("zoom.wheel",e.zoomable?D:()=>{});P.call(K),M(()=>{P.on("zoom",null)})}},{flush:"post"});function ee(M){const[P,D]=dn(M);t("click",{event:M,position:{x:P,y:D}})}function G(M,P){const D={event:M,node:P,connectedEdges:hn([P],i.value)};d.miniMapNodeClick(D),t("nodeClick",D)}function _(M,P){const D={event:M,node:P,connectedEdges:hn([P],i.value)};d.miniMapNodeDoubleClick(D),t("nodeDblclick",D)}function C(M,P){const D={event:M,node:P,connectedEdges:hn([P],i.value)};d.miniMapNodeMouseEnter(D),t("nodeMouseenter",D)}function O(M,P){const D={event:M,node:P,connectedEdges:hn([P],i.value)};d.miniMapNodeMouseMove(D),t("nodeMousemove",D)}function N(M,P){const D={event:M,node:P,connectedEdges:hn([P],i.value)};d.miniMapNodeMouseLeave(D),t("nodeMouseleave",D)}return(M,P)=>(T(),X(y(qc),{position:M.position,class:tt(["vue-flow__minimap",{pannable:M.pannable,zoomable:M.zoomable}])},{default:b(()=>[(T(),Z("svg",{ref_key:"el",ref:w,width:m.value,height:v.value,viewBox:[R.value.x,R.value.y,R.value.width,R.value.height].join(" "),role:"img","aria-labelledby":`vue-flow__minimap-${y(r)}`,onClick:ee},[M.ariaLabel?(T(),Z("title",{key:0,id:`vue-flow__minimap-${y(r)}`},J(M.ariaLabel),9,uT)):ce("",!0),(T(!0),Z(ge,null,Ae(y(g),D=>(T(),X(iT,{id:D.id,key:D.id,position:D.computedPosition,dimensions:D.dimensions,selected:D.selected,dragging:D.dragging,style:lt(D.style),class:tt(S.value(D)),color:Q.value(D),"border-radius":M.nodeBorderRadius,"stroke-color":$.value(D),"stroke-width":M.nodeStrokeWidth,"shape-rendering":y(k),type:D.type,onClick:q=>G(q,D),onDblclick:q=>_(q,D),onMouseenter:q=>C(q,D),onMousemove:q=>O(q,D),onMouseleave:q=>N(q,D)},null,8,["id","position","dimensions","selected","dragging","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","type","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"]))),128)),Ce("path",{class:"vue-flow__minimap-mask",d:L.value,fill:M.maskColor,stroke:M.maskStrokeColor,"stroke-width":M.maskStrokeWidth,"fill-rule":"evenodd"},null,8,cT)],8,sT))]),_:1},8,["position","class"]))}});var Rt=(e=>(e.Lines="lines",e.Dots="dots",e))(Rt||{});const vp=function({dimensions:e,size:t,color:n}){return Ne("path",{stroke:n,"stroke-width":t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},_p=function({radius:e,color:t}){return Ne("circle",{cx:e,cy:e,r:e,fill:t})};Rt.Lines+"",Rt.Dots+"";const fT={[Rt.Dots]:"#81818a",[Rt.Lines]:"#eee"},mT=["id","x","y","width","height","patternTransform"],hT={key:2,height:"100",width:"100"},vT=["fill"],_T=["x","y","fill"],gT={name:"Background",compatConfig:{MODE:3}},yT=Re({...gT,props:{id:{},variant:{default:()=>Rt.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:2}},setup(e){const{id:t,viewport:n}=Xe(),o=we(()=>{const[r,i]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],s=[r*n.value.zoom||1,i*n.value.zoom||1],u=e.size*n.value.zoom,c=e.variant===Rt.Dots?[u/e.offset,u/e.offset]:[s[0]/e.offset,s[1]/e.offset];return{scaledGap:s,offset:c,size:u}}),a=Ue(()=>`pattern-${t}${e.id?`-${e.id}`:""}`),l=Ue(()=>e.color||e.patternColor||fT[e.variant||Rt.Dots]);return(r,i)=>(T(),Z("svg",{class:"vue-flow__background vue-flow__container",style:lt({height:`${r.height>100?100:r.height}%`,width:`${r.width>100?100:r.width}%`})},[Ve(r.$slots,"pattern-container",{id:a.value},()=>[Ce("pattern",{id:a.value,x:y(n).x%o.value.scaledGap[0],y:y(n).y%o.value.scaledGap[1],width:o.value.scaledGap[0],height:o.value.scaledGap[1],patternTransform:`translate(-${o.value.offset[0]},-${o.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[Ve(r.$slots,"pattern",{},()=>[r.variant===y(Rt).Lines?(T(),X(y(vp),{key:0,size:r.lineWidth,color:l.value,dimensions:o.value.scaledGap},null,8,["size","color","dimensions"])):r.variant===y(Rt).Dots?(T(),X(y(_p),{key:1,color:l.value,radius:o.value.size/r.offset},null,8,["color","radius"])):ce("",!0),r.bgColor?(T(),Z("svg",hT,[Ce("rect",{width:"100%",height:"100%",fill:r.bgColor},null,8,vT)])):ce("",!0)])],8,mT)]),Ce("rect",{x:r.x,y:r.y,width:"100%",height:"100%",fill:`url(#${a.value})`},null,8,_T),Ve(r.$slots,"default",{id:a.value})],4))}}),OT={name:"ControlButton",compatConfig:{MODE:3}},bT=(e,t)=>{const n=e.__vccOpts||e;for(const[o,a]of t)n[o]=a;return n},wT={class:"vue-flow__controls-button"};function ST(e,t,n,o,a,l){return T(),Z("button",wT,[Ve(e.$slots,"default")])}const Sa=bT(OT,[["render",ST]]),xT={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},$T=Ce("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),kT=[$T];function TT(e,t){return T(),Z("svg",xT,kT)}const ET={render:TT},QT={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},PT=Ce("path",{d:"M0 0h32v4.2H0z"},null,-1),CT=[PT];function DT(e,t){return T(),Z("svg",QT,CT)}const zT={render:DT},qT={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},NT=Ce("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),MT=[NT];function RT(e,t){return T(),Z("svg",qT,MT)}const IT={render:RT},VT={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},AT=Ce("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),XT=[AT];function UT(e,t){return T(),Z("svg",VT,XT)}const WT={render:UT},jT={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},FT=Ce("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),LT=[FT];function GT(e,t){return T(),Z("svg",jT,LT)}const BT={render:GT},HT={name:"Controls",compatConfig:{MODE:3}},YT=Re({...HT,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>ic.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:o,elementsSelectable:a,setInteractive:l,zoomIn:r,zoomOut:i,fitView:s,viewport:u,minZoom:c,maxZoom:d}=Xe(),p=Ue(()=>n.value||o.value||a.value),f=Ue(()=>u.value.zoom<=c.value),g=Ue(()=>u.value.zoom>=d.value);function w(){r(),t("zoomIn")}function m(){i(),t("zoomOut")}function v(){s(e.fitViewParams),t("fitView")}function k(){l(!p.value),t("interactionChange",!p.value)}return(Q,$)=>(T(),X(y(qc),{class:"vue-flow__controls",position:Q.position},{default:b(()=>[Ve(Q.$slots,"top"),Q.showZoom?(T(),Z(ge,{key:0},[Ve(Q.$slots,"control-zoom-in",{},()=>[h(Sa,{class:"vue-flow__controls-zoomin",disabled:g.value,onClick:w},{default:b(()=>[Ve(Q.$slots,"icon-zoom-in",{},()=>[(T(),X(Tn(y(ET))))])]),_:3},8,["disabled"])]),Ve(Q.$slots,"control-zoom-out",{},()=>[h(Sa,{class:"vue-flow__controls-zoomout",disabled:f.value,onClick:m},{default:b(()=>[Ve(Q.$slots,"icon-zoom-out",{},()=>[(T(),X(Tn(y(zT))))])]),_:3},8,["disabled"])])],64)):ce("",!0),Q.showFitView?Ve(Q.$slots,"control-fit-view",{key:1},()=>[h(Sa,{class:"vue-flow__controls-fitview",onClick:v},{default:b(()=>[Ve(Q.$slots,"icon-fit-view",{},()=>[(T(),X(Tn(y(IT))))])]),_:3})]):ce("",!0),Q.showInteractive?Ve(Q.$slots,"control-interactive",{key:2},()=>[Q.showInteractive?(T(),X(Sa,{key:0,class:"vue-flow__controls-interactive",onClick:k},{default:b(()=>[p.value?Ve(Q.$slots,"icon-unlock",{key:0},()=>[(T(),X(Tn(y(BT))))]):ce("",!0),p.value?ce("",!0):Ve(Q.$slots,"icon-lock",{key:1},()=>[(T(),X(Tn(y(WT))))])]),_:3})):ce("",!0)]):ce("",!0),Ve(Q.$slots,"default")]),_:3},8,["position"]))}}),ZT={__name:"TagInput",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const{t}=Ye(),n=go(e,"modelValue"),o=j([]);return Fr(async()=>{const{data:a}=await Eu("list",{});o.value=a.map(l=>({label:l.title,value:l.tid}))}),(a,l)=>{const r=V("a-select");return T(),X(r,{value:n.value,"onUpdate:value":l[0]||(l[0]=i=>n.value=i),mode:"tags",placeholder:y(t)("components.workspace.tagInput.select_tags"),style:{"min-width":"150px",width:"100%"},options:o.value},null,8,["value","placeholder","options"])}}},gp={__name:"MarkdownEditor",props:Io({placeholder:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,{t:n}=Ye(),o=go(e,"modelValue"),a=j(!1);return(l,r)=>{const i=V("a-checkbox"),s=V("a-form-item-rest"),u=V("a-textarea"),c=Zp("highlight");return T(),Z("div",null,[h(s,null,{default:b(()=>[h(i,{checked:a.value,"onUpdate:checked":r[0]||(r[0]=d=>a.value=d)},{default:b(()=>[ne(J(y(n)("common.preview")),1)]),_:1},8,["checked"])]),_:1}),Vn(h(u,{value:o.value,"onUpdate:value":r[1]||(r[1]=d=>o.value=d),autoSize:{minRows:3,maxRows:10},placeholder:t.placeholder},null,8,["value","placeholder"]),[[An,!a.value]]),Vn(h(y(Jp),{source:o.value,"onUpdate:source":r[2]||(r[2]=d=>o.value=d),class:"custom-scrollbar markdown-body custom-hljs"},null,8,["source"]),[[c],[An,a.value]])])}}};var JT=Object.defineProperty,il=Object.getOwnPropertySymbols,yp=Object.prototype.hasOwnProperty,Op=Object.prototype.propertyIsEnumerable,Js=(e,t,n)=>t in e?JT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eo=(e,t)=>{for(var n in t||(t={}))yp.call(t,n)&&Js(e,n,t[n]);if(il)for(var n of il(t))Op.call(t,n)&&Js(e,n,t[n]);return e},bp=(e,t)=>{var n={};for(var o in e)yp.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&il)for(var o of il(e))t.indexOf(o)<0&&Op.call(e,o)&&(n[o]=e[o]);return n};const wp="[vue-draggable-plus]: ";function KT(e){console.warn(wp+e)}function e2(e){console.error(wp+e)}function t2(e,t,n){Array.isArray(e)&&n>=0&&n<e.length&&e.splice(n,0,e.splice(t,1)[0])}function n2(e){return e.replace(/-(\w)/g,(t,n)=>n?n.toUpperCase():"")}function o2(e){return Object.keys(e).reduce((t,n)=>(typeof e[n]<"u"&&(t[n2(n)]=e[n]),t),{})}function a2(e,t){if(Array.isArray(e))return e.splice(t,1)}function l2(e,t,n){if(Array.isArray(e))return e.splice(t,0,n)}function r2(e){return typeof e>"u"}function i2(e){return typeof e=="string"}function Ks(e,t,n){const o=e.children[n];e.insertBefore(t,o)}function er(e){e.parentNode&&e.parentNode.removeChild(e)}function s2(e,t=document){var n;let o=null;return typeof(t==null?void 0:t.querySelector)=="function"?o=(n=t==null?void 0:t.querySelector)==null?void 0:n.call(t,e):o=document.querySelector(e),o||KT(`Element not found: ${e}`),o}function u2(e,t,n=null){return function(...o){return e.apply(n,o),t.apply(n,o)}}function c2(e,t){const n=eo({},e);return Object.keys(t).forEach(o=>{n[o]?n[o]=u2(e[o],t[o]):n[o]=t[o]}),n}function d2(e){return e instanceof HTMLElement}function p2(e,t){Object.keys(e).forEach(n=>{t(n,e[n])})}/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,o)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eu(Object(n),!0).forEach(function(o){f2(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eu(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Aa(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Aa=function(t){return typeof t}:Aa=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Aa(e)}function f2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rn(){return rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},rn.apply(this,arguments)}function m2(e,t){if(e==null)return{};var n={},o=Object.keys(e),a,l;for(l=0;l<o.length;l++)a=o[l],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function h2(e,t){if(e==null)return{};var n=m2(e,t),o,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)o=l[a],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var v2="1.15.0";function nn(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var sn=nn(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),oa=nn(/Edge/i),tu=nn(/firefox/i),zo=nn(/safari/i)&&!nn(/chrome/i)&&!nn(/android/i),Sp=nn(/iP(ad|od|hone)/i),xp=nn(/chrome/i)&&nn(/android/i),$p={capture:!1,passive:!1};function qe(e,t,n){e.addEventListener(t,n,!sn&&$p)}function ze(e,t,n){e.removeEventListener(t,n,!sn&&$p)}function sl(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function _2(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Mt(e,t,n,o){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&sl(e,t):sl(e,t))||o&&e===n)return e;if(e===n)break}while(e=_2(e))}return null}var nu=/\s+/g;function vt(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(nu," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(nu," ")}}function Oe(e,t,n){var o=e&&e.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in o)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),o[t]=n+(typeof n=="string"?"":"px")}}function io(e,t){var n="";if(typeof e=="string")n=e;else do{var o=Oe(e,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function kp(e,t,n){if(e){var o=e.getElementsByTagName(t),a=0,l=o.length;if(n)for(;a<l;a++)n(o[a],a);return o}return[]}function At(){var e=document.scrollingElement;return e||document.documentElement}function ot(e,t,n,o,a){if(!(!e.getBoundingClientRect&&e!==window)){var l,r,i,s,u,c,d;if(e!==window&&e.parentNode&&e!==At()?(l=e.getBoundingClientRect(),r=l.top,i=l.left,s=l.bottom,u=l.right,c=l.height,d=l.width):(r=0,i=0,s=window.innerHeight,u=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(a=a||e.parentNode,!sn))do if(a&&a.getBoundingClientRect&&(Oe(a,"transform")!=="none"||n&&Oe(a,"position")!=="static")){var p=a.getBoundingClientRect();r-=p.top+parseInt(Oe(a,"border-top-width")),i-=p.left+parseInt(Oe(a,"border-left-width")),s=r+l.height,u=i+l.width;break}while(a=a.parentNode);if(o&&e!==window){var f=io(a||e),g=f&&f.a,w=f&&f.d;f&&(r/=w,i/=g,d/=g,c/=w,s=r+c,u=i+d)}return{top:r,left:i,bottom:s,right:u,width:d,height:c}}}function ou(e,t,n){for(var o=yn(e,!0),a=ot(e)[t];o;){var l=ot(o)[n],r=void 0;if(r=a>=l,!r)return o;if(o===At())break;o=yn(o,!1)}return!1}function vo(e,t,n,o){for(var a=0,l=0,r=e.children;l<r.length;){if(r[l].style.display!=="none"&&r[l]!==be.ghost&&(o||r[l]!==be.dragged)&&Mt(r[l],n.draggable,e,!1)){if(a===t)return r[l];a++}l++}return null}function wi(e,t){for(var n=e.lastElementChild;n&&(n===be.ghost||Oe(n,"display")==="none"||t&&!sl(n,t));)n=n.previousElementSibling;return n||null}function wt(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==be.clone&&(!t||sl(e,t))&&n++;return n}function au(e){var t=0,n=0,o=At();if(e)do{var a=io(e),l=a.a,r=a.d;t+=e.scrollLeft*l,n+=e.scrollTop*r}while(e!==o&&(e=e.parentNode));return[t,n]}function g2(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n)}return-1}function yn(e,t){if(!e||!e.getBoundingClientRect)return At();var n=e,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=Oe(n);if(n.clientWidth<n.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return At();if(o||t)return n;o=!0}}while(n=n.parentNode);return At()}function y2(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function tr(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var qo;function Tp(e,t){return function(){if(!qo){var n=arguments,o=this;n.length===1?e.call(o,n[0]):e.apply(o,n),qo=setTimeout(function(){qo=void 0},t)}}}function O2(){clearTimeout(qo),qo=void 0}function Ep(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Qp(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var gt="Sortable"+new Date().getTime();function b2(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(o){if(!(Oe(o,"display")==="none"||o===be.ghost)){e.push({target:o,rect:ot(o)});var a=Xt({},e[e.length-1].rect);if(o.thisAnimationDuration){var l=io(o,!0);l&&(a.top-=l.f,a.left-=l.e)}o.fromRect=a}})}},addAnimationState:function(n){e.push(n)},removeAnimationState:function(n){e.splice(g2(e,{target:n}),1)},animateAll:function(n){var o=this;if(!this.options.animation){clearTimeout(t),typeof n=="function"&&n();return}var a=!1,l=0;e.forEach(function(r){var i=0,s=r.target,u=s.fromRect,c=ot(s),d=s.prevFromRect,p=s.prevToRect,f=r.rect,g=io(s,!0);g&&(c.top-=g.f,c.left-=g.e),s.toRect=c,s.thisAnimationDuration&&tr(d,c)&&!tr(u,c)&&(f.top-c.top)/(f.left-c.left)===(u.top-c.top)/(u.left-c.left)&&(i=S2(f,d,p,o.options)),tr(c,u)||(s.prevFromRect=u,s.prevToRect=c,i||(i=o.options.animation),o.animate(s,f,c,i)),i&&(a=!0,l=Math.max(l,i),clearTimeout(s.animationResetTimer),s.animationResetTimer=setTimeout(function(){s.animationTime=0,s.prevFromRect=null,s.fromRect=null,s.prevToRect=null,s.thisAnimationDuration=null},i),s.thisAnimationDuration=i)}),clearTimeout(t),a?t=setTimeout(function(){typeof n=="function"&&n()},l):typeof n=="function"&&n(),e=[]},animate:function(n,o,a,l){if(l){Oe(n,"transition",""),Oe(n,"transform","");var r=io(this.el),i=r&&r.a,s=r&&r.d,u=(o.left-a.left)/(i||1),c=(o.top-a.top)/(s||1);n.animatingX=!!u,n.animatingY=!!c,Oe(n,"transform","translate3d("+u+"px,"+c+"px,0)"),this.forRepaintDummy=w2(n),Oe(n,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),Oe(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){Oe(n,"transition",""),Oe(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},l)}}}}function w2(e){return e.offsetWidth}function S2(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}var Yn=[],nr={initializeByDefault:!0},aa={mount:function(e){for(var t in nr)nr.hasOwnProperty(t)&&!(t in e)&&(e[t]=nr[t]);Yn.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Yn.push(e)},pluginEvent:function(e,t,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var a=e+"Global";Yn.forEach(function(l){t[l.pluginName]&&(t[l.pluginName][a]&&t[l.pluginName][a](Xt({sortable:t},n)),t.options[l.pluginName]&&t[l.pluginName][e]&&t[l.pluginName][e](Xt({sortable:t},n)))})},initializePlugins:function(e,t,n,o){Yn.forEach(function(r){var i=r.pluginName;if(!(!e.options[i]&&!r.initializeByDefault)){var s=new r(e,t,e.options);s.sortable=e,s.options=e.options,e[i]=s,rn(n,s.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var l=this.modifyOption(e,a,e.options[a]);typeof l<"u"&&(e.options[a]=l)}},getEventProperties:function(e,t){var n={};return Yn.forEach(function(o){typeof o.eventProperties=="function"&&rn(n,o.eventProperties.call(t[o.pluginName],e))}),n},modifyOption:function(e,t,n){var o;return Yn.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[t]=="function"&&(o=a.optionListeners[t].call(e[a.pluginName],n))}),o}};function x2(e){var t=e.sortable,n=e.rootEl,o=e.name,a=e.targetEl,l=e.cloneEl,r=e.toEl,i=e.fromEl,s=e.oldIndex,u=e.newIndex,c=e.oldDraggableIndex,d=e.newDraggableIndex,p=e.originalEvent,f=e.putSortable,g=e.extraEventProperties;if(t=t||n&&n[gt],!!t){var w,m=t.options,v="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!sn&&!oa?w=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(w=document.createEvent("Event"),w.initEvent(o,!0,!0)),w.to=r||n,w.from=i||n,w.item=a||n,w.clone=l,w.oldIndex=s,w.newIndex=u,w.oldDraggableIndex=c,w.newDraggableIndex=d,w.originalEvent=p,w.pullMode=f?f.lastPutMode:void 0;var k=Xt(Xt({},g),aa.getEventProperties(o,t));for(var Q in k)w[Q]=k[Q];n&&n.dispatchEvent(w),m[v]&&m[v].call(t,w)}}var $2=["evt"],pt=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=n.evt,a=h2(n,$2);aa.pluginEvent.bind(be)(e,t,Xt({dragEl:le,parentEl:Je,ghostEl:$e,rootEl:Le,nextEl:kn,lastDownEl:Xa,cloneEl:He,cloneHidden:_n,dragStarted:To,putSortable:rt,activeSortable:be.active,originalEvent:o,oldIndex:to,oldDraggableIndex:No,newIndex:_t,newDraggableIndex:mn,hideGhostForTarget:zp,unhideGhostForTarget:qp,cloneNowHidden:function(){_n=!0},cloneNowShown:function(){_n=!1},dispatchSortableEvent:function(l){ct({sortable:t,name:l,originalEvent:o})}},a))};function ct(e){x2(Xt({putSortable:rt,cloneEl:He,targetEl:le,rootEl:Le,oldIndex:to,oldDraggableIndex:No,newIndex:_t,newDraggableIndex:mn},e))}var le,Je,$e,Le,kn,Xa,He,_n,to,_t,No,mn,xa,rt,Jn=!1,ul=!1,cl=[],xn,kt,or,ar,lu,ru,To,Zn,Mo,Ro=!1,$a=!1,Ua,st,lr=[],Vr=!1,dl=[],ql=typeof document<"u",ka=Sp,iu=oa||sn?"cssFloat":"float",k2=ql&&!xp&&!Sp&&"draggable"in document.createElement("div"),Pp=function(){if(ql){if(sn)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Cp=function(e,t){var n=Oe(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),a=vo(e,0,t),l=vo(e,1,t),r=a&&Oe(a),i=l&&Oe(l),s=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+ot(a).width,u=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+ot(l).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&r.float&&r.float!=="none"){var c=r.float==="left"?"left":"right";return l&&(i.clear==="both"||i.clear===c)?"vertical":"horizontal"}return a&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||s>=o&&n[iu]==="none"||l&&n[iu]==="none"&&s+u>o)?"vertical":"horizontal"},T2=function(e,t,n){var o=n?e.left:e.top,a=n?e.right:e.bottom,l=n?e.width:e.height,r=n?t.left:t.top,i=n?t.right:t.bottom,s=n?t.width:t.height;return o===r||a===i||o+l/2===r+s/2},E2=function(e,t){var n;return cl.some(function(o){var a=o[gt].options.emptyInsertThreshold;if(!(!a||wi(o))){var l=ot(o),r=e>=l.left-a&&e<=l.right+a,i=t>=l.top-a&&t<=l.bottom+a;if(r&&i)return n=o}}),n},Dp=function(e){function t(a,l){return function(r,i,s,u){var c=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(a==null&&(l||c))return!0;if(a==null||a===!1)return!1;if(l&&a==="clone")return a;if(typeof a=="function")return t(a(r,i,s,u),l)(r,i,s,u);var d=(l?r:i).options.group.name;return a===!0||typeof a=="string"&&a===d||a.join&&a.indexOf(d)>-1}}var n={},o=e.group;(!o||Aa(o)!="object")&&(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},zp=function(){!Pp&&$e&&Oe($e,"display","none")},qp=function(){!Pp&&$e&&Oe($e,"display","")};ql&&!xp&&document.addEventListener("click",function(e){if(ul)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ul=!1,!1},!0);var $n=function(e){if(le){e=e.touches?e.touches[0]:e;var t=E2(e.clientX,e.clientY);if(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[gt]._onDragOver(n)}}},Q2=function(e){le&&le.parentNode[gt]._isOutsideThisEl(e.target)};function be(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=rn({},t),e[gt]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Cp(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,r){l.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:be.supportPointer!==!1&&"PointerEvent"in window&&!zo,emptyInsertThreshold:5};aa.initializePlugins(this,e,n);for(var o in n)!(o in t)&&(t[o]=n[o]);Dp(t);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=t.forceFallback?!1:k2,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?qe(e,"pointerdown",this._onTapStart):(qe(e,"mousedown",this._onTapStart),qe(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(qe(e,"dragover",this),qe(e,"dragenter",this)),cl.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),rn(this,b2())}be.prototype={constructor:be,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Zn=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,le):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,o=this.options,a=o.preventOnFilter,l=e.type,r=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,i=(r||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||i,u=o.filter;if(R2(n),!le&&!(/mousedown|pointerdown/.test(l)&&e.button!==0||o.disabled)&&!s.isContentEditable&&!(!this.nativeDraggable&&zo&&i&&i.tagName.toUpperCase()==="SELECT")&&(i=Mt(i,o.draggable,n,!1),!(i&&i.animated)&&Xa!==i)){if(to=wt(i),No=wt(i,o.draggable),typeof u=="function"){if(u.call(this,e,i,this)){ct({sortable:t,rootEl:s,name:"filter",targetEl:i,toEl:n,fromEl:n}),pt("filter",t,{evt:e}),a&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(c){if(c=Mt(s,c.trim(),n,!1),c)return ct({sortable:t,rootEl:c,name:"filter",targetEl:i,fromEl:n,toEl:n}),pt("filter",t,{evt:e}),!0}),u)){a&&e.cancelable&&e.preventDefault();return}o.handle&&!Mt(s,o.handle,n,!1)||this._prepareDragStart(e,r,i)}}},_prepareDragStart:function(e,t,n){var o=this,a=o.el,l=o.options,r=a.ownerDocument,i;if(n&&!le&&n.parentNode===a){var s=ot(n);if(Le=a,le=n,Je=le.parentNode,kn=le.nextSibling,Xa=n,xa=l.group,be.dragged=le,xn={target:le,clientX:(t||e).clientX,clientY:(t||e).clientY},lu=xn.clientX-s.left,ru=xn.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,le.style["will-change"]="all",i=function(){if(pt("delayEnded",o,{evt:e}),be.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!tu&&o.nativeDraggable&&(le.draggable=!0),o._triggerDragStart(e,t),ct({sortable:o,name:"choose",originalEvent:e}),vt(le,l.chosenClass,!0)},l.ignore.split(",").forEach(function(u){kp(le,u.trim(),rr)}),qe(r,"dragover",$n),qe(r,"mousemove",$n),qe(r,"touchmove",$n),qe(r,"mouseup",o._onDrop),qe(r,"touchend",o._onDrop),qe(r,"touchcancel",o._onDrop),tu&&this.nativeDraggable&&(this.options.touchStartThreshold=4,le.draggable=!0),pt("delayStart",this,{evt:e}),l.delay&&(!l.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(oa||sn))){if(be.eventCanceled){this._onDrop();return}qe(r,"mouseup",o._disableDelayedDrag),qe(r,"touchend",o._disableDelayedDrag),qe(r,"touchcancel",o._disableDelayedDrag),qe(r,"mousemove",o._delayedDragTouchMoveHandler),qe(r,"touchmove",o._delayedDragTouchMoveHandler),l.supportPointer&&qe(r,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(i,l.delay)}else i()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){le&&rr(le),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ze(e,"mouseup",this._disableDelayedDrag),ze(e,"touchend",this._disableDelayedDrag),ze(e,"touchcancel",this._disableDelayedDrag),ze(e,"mousemove",this._delayedDragTouchMoveHandler),ze(e,"touchmove",this._delayedDragTouchMoveHandler),ze(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?qe(document,"pointermove",this._onTouchMove):t?qe(document,"touchmove",this._onTouchMove):qe(document,"mousemove",this._onTouchMove):(qe(le,"dragend",this),qe(Le,"dragstart",this._onDragStart));try{document.selection?Wa(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Jn=!1,Le&&le){pt("dragStarted",this,{evt:t}),this.nativeDraggable&&qe(document,"dragover",Q2);var n=this.options;!e&&vt(le,n.dragClass,!1),vt(le,n.ghostClass,!0),be.active=this,e&&this._appendGhost(),ct({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(kt){this._lastX=kt.clientX,this._lastY=kt.clientY,zp();for(var e=document.elementFromPoint(kt.clientX,kt.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(kt.clientX,kt.clientY),e!==t);)t=e;if(le.parentNode[gt]._isOutsideThisEl(e),t)do{if(t[gt]){var n=void 0;if(n=t[gt]._onDragOver({clientX:kt.clientX,clientY:kt.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);qp()}},_onTouchMove:function(e){if(xn){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,a=e.touches?e.touches[0]:e,l=$e&&io($e,!0),r=$e&&l&&l.a,i=$e&&l&&l.d,s=ka&&st&&au(st),u=(a.clientX-xn.clientX+o.x)/(r||1)+(s?s[0]-lr[0]:0)/(r||1),c=(a.clientY-xn.clientY+o.y)/(i||1)+(s?s[1]-lr[1]:0)/(i||1);if(!be.active&&!Jn){if(n&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if($e){l?(l.e+=u-(or||0),l.f+=c-(ar||0)):l={a:1,b:0,c:0,d:1,e:u,f:c};var d="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");Oe($e,"webkitTransform",d),Oe($e,"mozTransform",d),Oe($e,"msTransform",d),Oe($e,"transform",d),or=u,ar=c,kt=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!$e){var e=this.options.fallbackOnBody?document.body:Le,t=ot(le,!0,ka,!0,e),n=this.options;if(ka){for(st=e;Oe(st,"position")==="static"&&Oe(st,"transform")==="none"&&st!==document;)st=st.parentNode;st!==document.body&&st!==document.documentElement?(st===document&&(st=At()),t.top+=st.scrollTop,t.left+=st.scrollLeft):st=At(),lr=au(st)}$e=le.cloneNode(!0),vt($e,n.ghostClass,!1),vt($e,n.fallbackClass,!0),vt($e,n.dragClass,!0),Oe($e,"transition",""),Oe($e,"transform",""),Oe($e,"box-sizing","border-box"),Oe($e,"margin",0),Oe($e,"top",t.top),Oe($e,"left",t.left),Oe($e,"width",t.width),Oe($e,"height",t.height),Oe($e,"opacity","0.8"),Oe($e,"position",ka?"absolute":"fixed"),Oe($e,"zIndex","100000"),Oe($e,"pointerEvents","none"),be.ghost=$e,e.appendChild($e),Oe($e,"transform-origin",lu/parseInt($e.style.width)*100+"% "+ru/parseInt($e.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,a=n.options;if(pt("dragStart",this,{evt:e}),be.eventCanceled){this._onDrop();return}pt("setupClone",this),be.eventCanceled||(He=Qp(le),He.removeAttribute("id"),He.draggable=!1,He.style["will-change"]="",this._hideClone(),vt(He,this.options.chosenClass,!1),be.clone=He),n.cloneId=Wa(function(){pt("clone",n),!be.eventCanceled&&(n.options.removeCloneOnHide||Le.insertBefore(He,le),n._hideClone(),ct({sortable:n,name:"clone"}))}),!t&&vt(le,a.dragClass,!0),t?(ul=!0,n._loopId=setInterval(n._emulateDragOver,50)):(ze(document,"mouseup",n._onDrop),ze(document,"touchend",n._onDrop),ze(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",a.setData&&a.setData.call(n,o,le)),qe(document,"drop",n),Oe(le,"transform","translateZ(0)")),Jn=!0,n._dragStartId=Wa(n._dragStarted.bind(n,t,e)),qe(document,"selectstart",n),To=!0,zo&&Oe(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,o,a,l,r=this.options,i=r.group,s=be.active,u=xa===i,c=r.sort,d=rt||s,p,f=this,g=!1;if(Vr)return;function w(N,M){pt(N,f,Xt({evt:e,isOwner:u,axis:p?"vertical":"horizontal",revert:l,dragRect:o,targetRect:a,canSort:c,fromSortable:d,target:n,completed:v,onMove:function(P,D){return Ta(Le,t,le,o,P,ot(P),e,D)},changed:k},M))}function m(){w("dragOverAnimationCapture"),f.captureAnimationState(),f!==d&&d.captureAnimationState()}function v(N){return w("dragOverCompleted",{insertion:N}),N&&(u?s._hideClone():s._showClone(f),f!==d&&(vt(le,rt?rt.options.ghostClass:s.options.ghostClass,!1),vt(le,r.ghostClass,!0)),rt!==f&&f!==be.active?rt=f:f===be.active&&rt&&(rt=null),d===f&&(f._ignoreWhileAnimating=n),f.animateAll(function(){w("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(n===le&&!le.animated||n===t&&!n.animated)&&(Zn=null),!r.dragoverBubble&&!e.rootEl&&n!==document&&(le.parentNode[gt]._isOutsideThisEl(e.target),!N&&$n(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function k(){_t=wt(le),mn=wt(le,r.draggable),ct({sortable:f,name:"change",toEl:t,newIndex:_t,newDraggableIndex:mn,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=Mt(n,r.draggable,t,!0),w("dragOver"),be.eventCanceled)return g;if(le.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||f._ignoreWhileAnimating===n)return v(!1);if(ul=!1,s&&!r.disabled&&(u?c||(l=Je!==Le):rt===this||(this.lastPutMode=xa.checkPull(this,s,le,e))&&i.checkPut(this,s,le,e))){if(p=this._getDirection(e,n)==="vertical",o=ot(le),w("dragOverValid"),be.eventCanceled)return g;if(l)return Je=Le,m(),this._hideClone(),w("revert"),be.eventCanceled||(kn?Le.insertBefore(le,kn):Le.appendChild(le)),v(!0);var Q=wi(t,r.draggable);if(!Q||z2(e,p,this)&&!Q.animated){if(Q===le)return v(!1);if(Q&&t===e.target&&(n=Q),n&&(a=ot(n)),Ta(Le,t,le,o,n,a,e,!!n)!==!1)return m(),Q&&Q.nextSibling?t.insertBefore(le,Q.nextSibling):t.appendChild(le),Je=t,k(),v(!0)}else if(Q&&D2(e,p,this)){var $=vo(t,0,r,!0);if($===le)return v(!1);if(n=$,a=ot(n),Ta(Le,t,le,o,n,a,e,!1)!==!1)return m(),t.insertBefore(le,$),Je=t,k(),v(!0)}else if(n.parentNode===t){a=ot(n);var S=0,E,x=le.parentNode!==t,I=!T2(le.animated&&le.toRect||o,n.animated&&n.toRect||a,p),U=p?"top":"left",R=ou(n,"top","top")||ou(le,"top","top"),L=R?R.scrollTop:void 0;Zn!==n&&(E=a[U],Ro=!1,$a=!I&&r.invertSwap||x),S=q2(e,n,a,p,I?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,$a,Zn===n);var ee;if(S!==0){var G=wt(le);do G-=S,ee=Je.children[G];while(ee&&(Oe(ee,"display")==="none"||ee===$e))}if(S===0||ee===n)return v(!1);Zn=n,Mo=S;var _=n.nextElementSibling,C=!1;C=S===1;var O=Ta(Le,t,le,o,n,a,e,C);if(O!==!1)return(O===1||O===-1)&&(C=O===1),Vr=!0,setTimeout(C2,30),m(),C&&!_?t.appendChild(le):n.parentNode.insertBefore(le,C?_:n),R&&Ep(R,0,L-R.scrollTop),Je=le.parentNode,E!==void 0&&!$a&&(Ua=Math.abs(E-ot(n)[U])),k(),v(!0)}if(t.contains(le))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ze(document,"mousemove",this._onTouchMove),ze(document,"touchmove",this._onTouchMove),ze(document,"pointermove",this._onTouchMove),ze(document,"dragover",$n),ze(document,"mousemove",$n),ze(document,"touchmove",$n)},_offUpEvents:function(){var e=this.el.ownerDocument;ze(e,"mouseup",this._onDrop),ze(e,"touchend",this._onDrop),ze(e,"pointerup",this._onDrop),ze(e,"touchcancel",this._onDrop),ze(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(_t=wt(le),mn=wt(le,n.draggable),pt("drop",this,{evt:e}),Je=le&&le.parentNode,_t=wt(le),mn=wt(le,n.draggable),be.eventCanceled){this._nulling();return}Jn=!1,$a=!1,Ro=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ar(this.cloneId),Ar(this._dragStartId),this.nativeDraggable&&(ze(document,"drop",this),ze(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),zo&&Oe(document.body,"user-select",""),Oe(le,"transform",""),e&&(To&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),$e&&$e.parentNode&&$e.parentNode.removeChild($e),(Le===Je||rt&&rt.lastPutMode!=="clone")&&He&&He.parentNode&&He.parentNode.removeChild(He),le&&(this.nativeDraggable&&ze(le,"dragend",this),rr(le),le.style["will-change"]="",To&&!Jn&&vt(le,rt?rt.options.ghostClass:this.options.ghostClass,!1),vt(le,this.options.chosenClass,!1),ct({sortable:this,name:"unchoose",toEl:Je,newIndex:null,newDraggableIndex:null,originalEvent:e}),Le!==Je?(_t>=0&&(ct({rootEl:Je,name:"add",toEl:Je,fromEl:Le,originalEvent:e}),ct({sortable:this,name:"remove",toEl:Je,originalEvent:e}),ct({rootEl:Je,name:"sort",toEl:Je,fromEl:Le,originalEvent:e}),ct({sortable:this,name:"sort",toEl:Je,originalEvent:e})),rt&&rt.save()):_t!==to&&_t>=0&&(ct({sortable:this,name:"update",toEl:Je,originalEvent:e}),ct({sortable:this,name:"sort",toEl:Je,originalEvent:e})),be.active&&((_t==null||_t===-1)&&(_t=to,mn=No),ct({sortable:this,name:"end",toEl:Je,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){pt("nulling",this),Le=le=Je=$e=kn=He=Xa=_n=xn=kt=To=_t=mn=to=No=Zn=Mo=rt=xa=be.dragged=be.ghost=be.clone=be.active=null,dl.forEach(function(e){e.checked=!0}),dl.length=or=ar=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":le&&(this._onDragOver(e),P2(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,o=0,a=n.length,l=this.options;o<a;o++)t=n[o],Mt(t,l.draggable,this.el,!1)&&e.push(t.getAttribute(l.dataIdAttr)||M2(t));return e},sort:function(e,t){var n={},o=this.el;this.toArray().forEach(function(a,l){var r=o.children[l];Mt(r,this.options.draggable,o,!1)&&(n[a]=r)},this),t&&this.captureAnimationState(),e.forEach(function(a){n[a]&&(o.removeChild(n[a]),o.appendChild(n[a]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Mt(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var o=aa.modifyOption(this,e,t);typeof o<"u"?n[e]=o:n[e]=t,e==="group"&&Dp(n)},destroy:function(){pt("destroy",this);var e=this.el;e[gt]=null,ze(e,"mousedown",this._onTapStart),ze(e,"touchstart",this._onTapStart),ze(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ze(e,"dragover",this),ze(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),cl.splice(cl.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!_n){if(pt("hideClone",this),be.eventCanceled)return;Oe(He,"display","none"),this.options.removeCloneOnHide&&He.parentNode&&He.parentNode.removeChild(He),_n=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(_n){if(pt("showClone",this),be.eventCanceled)return;le.parentNode==Le&&!this.options.group.revertClone?Le.insertBefore(He,le):kn?Le.insertBefore(He,kn):Le.appendChild(He),this.options.group.revertClone&&this.animate(le,He),Oe(He,"display",""),_n=!1}}};function P2(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Ta(e,t,n,o,a,l,r,i){var s,u=e[gt],c=u.options.onMove,d;return window.CustomEvent&&!sn&&!oa?s=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(s=document.createEvent("Event"),s.initEvent("move",!0,!0)),s.to=t,s.from=e,s.dragged=n,s.draggedRect=o,s.related=a||t,s.relatedRect=l||ot(t),s.willInsertAfter=i,s.originalEvent=r,e.dispatchEvent(s),c&&(d=c.call(u,s,r)),d}function rr(e){e.draggable=!1}function C2(){Vr=!1}function D2(e,t,n){var o=ot(vo(n.el,0,n.options,!0)),a=10;return t?e.clientX<o.left-a||e.clientY<o.top&&e.clientX<o.right:e.clientY<o.top-a||e.clientY<o.bottom&&e.clientX<o.left}function z2(e,t,n){var o=ot(wi(n.el,n.options.draggable)),a=10;return t?e.clientX>o.right+a||e.clientX<=o.right&&e.clientY>o.bottom&&e.clientX>=o.left:e.clientX>o.right&&e.clientY>o.top||e.clientX<=o.right&&e.clientY>o.bottom+a}function q2(e,t,n,o,a,l,r,i){var s=o?e.clientY:e.clientX,u=o?n.height:n.width,c=o?n.top:n.left,d=o?n.bottom:n.right,p=!1;if(!r){if(i&&Ua<u*a){if(!Ro&&(Mo===1?s>c+u*l/2:s<d-u*l/2)&&(Ro=!0),Ro)p=!0;else if(Mo===1?s<c+Ua:s>d-Ua)return-Mo}else if(s>c+u*(1-a)/2&&s<d-u*(1-a)/2)return N2(t)}return p=p||r,p&&(s<c+u*l/2||s>d-u*l/2)?s>c+u/2?1:-1:0}function N2(e){return wt(le)<wt(e)?1:-1}function M2(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function R2(e){dl.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&dl.push(o)}}function Wa(e){return setTimeout(e,0)}function Ar(e){return clearTimeout(e)}ql&&qe(document,"touchmove",function(e){(be.active||Jn)&&e.cancelable&&e.preventDefault()});be.utils={on:qe,off:ze,css:Oe,find:kp,is:function(e,t){return!!Mt(e,t,e,!1)},extend:y2,throttle:Tp,closest:Mt,toggleClass:vt,clone:Qp,index:wt,nextTick:Wa,cancelNextTick:Ar,detectDirection:Cp,getChild:vo};be.get=function(e){return e[gt]};be.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(be.utils=Xt(Xt({},be.utils),o.utils)),aa.mount(o)})};be.create=function(e,t){return new be(e,t)};be.version=v2;var et=[],Eo,Xr,Ur=!1,ir,sr,pl,Qo;function I2(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?qe(document,"dragover",this._handleAutoScroll):this.options.supportPointer?qe(document,"pointermove",this._handleFallbackAutoScroll):n.touches?qe(document,"touchmove",this._handleFallbackAutoScroll):qe(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?ze(document,"dragover",this._handleAutoScroll):(ze(document,"pointermove",this._handleFallbackAutoScroll),ze(document,"touchmove",this._handleFallbackAutoScroll),ze(document,"mousemove",this._handleFallbackAutoScroll)),su(),ja(),O2()},nulling:function(){pl=Xr=Eo=Ur=Qo=ir=sr=null,et.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var o=this,a=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,r=document.elementFromPoint(a,l);if(pl=t,n||this.options.forceAutoScrollFallback||oa||sn||zo){ur(t,this.options,r,n);var i=yn(r,!0);Ur&&(!Qo||a!==ir||l!==sr)&&(Qo&&su(),Qo=setInterval(function(){var s=yn(document.elementFromPoint(a,l),!0);s!==i&&(i=s,ja()),ur(t,o.options,s,n)},10),ir=a,sr=l)}else{if(!this.options.bubbleScroll||yn(r,!0)===At()){ja();return}ur(t,this.options,yn(r,!1),!1)}}},rn(e,{pluginName:"scroll",initializeByDefault:!0})}function ja(){et.forEach(function(e){clearInterval(e.pid)}),et=[]}function su(){clearInterval(Qo)}var ur=Tp(function(e,t,n,o){if(t.scroll){var a=(e.touches?e.touches[0]:e).clientX,l=(e.touches?e.touches[0]:e).clientY,r=t.scrollSensitivity,i=t.scrollSpeed,s=At(),u=!1,c;Xr!==n&&(Xr=n,ja(),Eo=t.scroll,c=t.scrollFn,Eo===!0&&(Eo=yn(n,!0)));var d=0,p=Eo;do{var f=p,g=ot(f),w=g.top,m=g.bottom,v=g.left,k=g.right,Q=g.width,$=g.height,S=void 0,E=void 0,x=f.scrollWidth,I=f.scrollHeight,U=Oe(f),R=f.scrollLeft,L=f.scrollTop;f===s?(S=Q<x&&(U.overflowX==="auto"||U.overflowX==="scroll"||U.overflowX==="visible"),E=$<I&&(U.overflowY==="auto"||U.overflowY==="scroll"||U.overflowY==="visible")):(S=Q<x&&(U.overflowX==="auto"||U.overflowX==="scroll"),E=$<I&&(U.overflowY==="auto"||U.overflowY==="scroll"));var ee=S&&(Math.abs(k-a)<=r&&R+Q<x)-(Math.abs(v-a)<=r&&!!R),G=E&&(Math.abs(m-l)<=r&&L+$<I)-(Math.abs(w-l)<=r&&!!L);if(!et[d])for(var _=0;_<=d;_++)et[_]||(et[_]={});(et[d].vx!=ee||et[d].vy!=G||et[d].el!==f)&&(et[d].el=f,et[d].vx=ee,et[d].vy=G,clearInterval(et[d].pid),(ee!=0||G!=0)&&(u=!0,et[d].pid=setInterval((function(){o&&this.layer===0&&be.active._onTouchMove(pl);var C=et[this.layer].vy?et[this.layer].vy*i:0,O=et[this.layer].vx?et[this.layer].vx*i:0;typeof c=="function"&&c.call(be.dragged.parentNode[gt],O,C,e,pl,et[this.layer].el)!=="continue"||Ep(et[this.layer].el,O,C)}).bind({layer:d}),24))),d++}while(t.bubbleScroll&&p!==s&&(p=yn(p,!1)));Ur=u}},30),Np=function(e){var t=e.originalEvent,n=e.putSortable,o=e.dragEl,a=e.activeSortable,l=e.dispatchSortableEvent,r=e.hideGhostForTarget,i=e.unhideGhostForTarget;if(t){var s=n||a;r();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(u.clientX,u.clientY);i(),s&&!s.el.contains(c)&&(l("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function Si(){}Si.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=vo(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Np};rn(Si,{pluginName:"revertOnSpill"});function xi(){}xi.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,o=n||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},drop:Np};rn(xi,{pluginName:"removeOnSpill"});be.mount(new I2);be.mount(xi,Si);function V2(e){return e==null?e:JSON.parse(JSON.stringify(e))}function A2(e){Gn()&&fl(e)}function X2(e){Gn()?bn(e):e()}const uu="__CLONE__DRAGGABLE__ELEMENT__NODE__";function Wr(...e){var t,n;const o=(t=Gn())==null?void 0:t.proxy,a=e[0];let[,l,r]=e;Array.isArray(y(l))||(r=l,l=null);let i=null;const{immediate:s=!0,clone:u=V2}=(n=y(r))!=null?n:{};function c(S){var E;S.item[uu]=u(y((E=y(l))==null?void 0:E[S.oldIndex]))}function d(S){const E=S.item[uu];r2(E)||(er(S.item),l2(y(l),S.newIndex,E))}function p(S){const{from:E,item:x,oldIndex:I,pullMode:U,clone:R}=S;if(U==="clone"){Ks(E,x,I),er(R);return}a2(y(l),I)}function f(S){const{from:E,item:x,oldIndex:I,newIndex:U}=S;er(x),Ks(E,x,I),t2(y(l),I,U)}const g={onUpdate:f,onStart:c,onAdd:d,onRemove:p};function w(S){const E=y(a);return S||(S=i2(E)?s2(E,o==null?void 0:o.$el):E),S&&!d2(S)&&(S=S.$el),S||e2("Root element not found"),S}function m(){var S;const E=(S=y(r))!=null?S:{},x=bp(E,["immediate","clone"]);return c2(l===null?{}:g,x)}const v=S=>{S=w(S),i&&k.destroy(),i=new be(S,m())};ke(r,()=>{i&&p2(m(),(S,E)=>{i==null||i.option(S,E)})},{deep:!0});const k={option:(S,E)=>i==null?void 0:i.option(S,E),destroy:()=>{i==null||i.destroy(),i=null},save:()=>i==null?void 0:i.save(),toArray:()=>i==null?void 0:i.toArray(),closest:(...S)=>i==null?void 0:i.closest(...S)},Q=()=>k==null?void 0:k.option("disabled",!0),$=()=>k==null?void 0:k.option("disabled",!1);return X2(()=>{s&&v()}),A2(k.destroy),eo({start:v,pause:Q,resume:$},k)}const jr=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],U2=["onUpdate","onStart","onAdd","onRemove","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target",...jr.map(e=>`on${e.replace(/^\S/,t=>t.toUpperCase())}`)],W2=Re({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:U2,emits:["update:modelValue",...jr],setup(e,{slots:t,emit:n,expose:o}){const a=ml(),l=jr.reduce((c,d)=>{const p=`on${d.replace(/^\S/,f=>f.toUpperCase())}`;return c[p]=f=>n(d,f),c},{}),r=we(()=>{const c=mu(e),d=bp(c,["modelValue"]),p=Object.entries(d).reduce((f,[g,w])=>{const m=y(w);return m!==void 0&&(f[g]=m),f},{});return eo(eo({},l),o2(eo(eo({},a),p)))}),i=we({get:()=>e.modelValue,set:c=>n("update:modelValue",c)}),s=j(),u=ut(Wr(e.target||s,i,r));return o(u),()=>{if(t.default)return Ne(e.tag||"div",{ref:s},t.default(u))}}}),j2={__name:"DraggableText",props:Io({placeholder:{type:String,required:!1,default:""}},{modelValue:{},modelModifiers:{}}),emits:Io(["change","delete"],["update:modelValue"]),setup(e,{emit:t}){const{t:n}=Ye(),o=go(e,"modelValue"),a=t;return(l,r)=>{const i=V("a-button"),s=V("a-tooltip"),u=V("a-flex");return T(),X(u,{align:"center",class:"draggable-text-container"},{default:b(()=>[h(gp,{class:"markdown-editor",modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=c=>o.value=c),onChange:r[1]||(r[1]=c=>a("change"))},null,8,["modelValue"]),h(s,{title:y(n)("common.delete")},{default:b(()=>[h(i,{class:"delete-button",type:"text",onClick:r[2]||(r[2]=c=>a("delete"))},{icon:b(()=>[h(y(Gr),{style:{"flex-grow":"0"}})]),_:1})]),_:1},8,["title"])]),_:1})}}},cu=wn(j2,[["__scopeId","data-v-ee6df7f6"]]),F2={key:1,class:"special-item-container"},L2={class:"draggable-item-content"},G2={key:0},B2={key:1,class:"special-item-container"},H2={key:2,class:"special-item-container"},Y2={key:3,class:"special-item-container"},Z2={key:4,class:"special-item-container"},J2={key:5,class:"special-item-container"},K2={key:6},eE={key:0,class:"ui-special-item-container"},tE={__name:"UIDesign",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=go(e,"modelValue"),{t:n}=Ye(),o=Hr(t.value),a=ut(o),l=j(a.inputFields),r=j(a.outputNodes),i=j(a.triggerNodes),s=j([{id:"typography-paragraph",required:!0,placeholder:n("components.workspace.uiDesign.typography-paragraph.placeholder"),show:!1,value:"",name:"typography-paragraph",display_name:"typography-paragraph",type:"str",list:!1,field_type:"typography-paragraph"}]),u=()=>{t.value.data.ui={inputFields:l.value,outputNodes:r.value}},c=j(!1),d=j(),p=ut({animation:150,ghostClass:"ghost",handle:".handle",group:{name:"fields",pull:!1},onStart:()=>{c.value=!0},onAdd:()=>{u()},onEnd:()=>{u(),St(()=>{c.value=!1})}});Wr(d,l,p);const f=j(),g=ut({animation:150,ghostClass:"ghost",handle:".handle",group:{name:"fields",pull:!1},onStart:()=>{c.value=!0},onAdd:()=>{u()},onEnd:()=>{u(),St(()=>{c.value=!1})}});Wr(f,r,g);const w=(m,v)=>{m.splice(v,1),u()};return(m,v)=>{const k=V("a-menu-item"),Q=V("a-tooltip"),$=V("a-menu"),S=V("a-layout-sider"),E=V("a-typography-title"),x=V("a-select"),I=V("a-textarea"),U=V("a-input"),R=V("a-input-number"),L=V("a-checkbox"),ee=V("a-form-item"),G=V("a-col"),_=V("a-row"),C=V("a-flex"),O=V("a-form"),N=V("a-divider"),M=V("a-button"),P=V("a-layout-content"),D=V("a-layout");return T(),X(D,{class:"ui-design-layout","has-sider":""},{default:b(()=>[h(S,{class:"ui-design-sider custom-scrollbar"},{default:b(()=>[h($,{theme:"light",mode:"inline",ref:"siderMenu",class:"ui-design-sider-menu"},{default:b(()=>[h(y(W2),{modelValue:s.value,"onUpdate:modelValue":v[0]||(v[0]=q=>s.value=q),animation:"150",group:{name:"fields",pull:"clone",put:!1},sort:!1},{default:b(()=>[(T(!0),Z(ge,null,Ae(s.value,(q,K)=>(T(),X(Q,{key:`node-${K}`,title:y(n)(`components.workspace.uiDesign.${q.name}.tip`),placement:"right"},{default:b(()=>[h(k,{class:"draggable-menu-item",id:q.id},{default:b(()=>[h(y(Ml)),Ce("span",null,J(y(n)(`components.workspace.uiDesign.${q.name}.title`)),1)]),_:2},1032,["id"])]),_:2},1032,["title"]))),128))]),_:1},8,["modelValue"])]),_:1},512)]),_:1}),h(P,{class:"ui-design-sider-content"},{default:b(()=>[h(_,{gutter:[16,16]},{default:b(()=>[h(G,{xxl:6,xl:8,lg:10,md:24},{default:b(()=>[h(C,{vertical:""},{default:b(()=>[h(E,{level:3},{default:b(()=>[h(y(so),{fill:"#28c5e5"}),ne(" "+J(y(n)("workspace.workflowSpace.inputs")),1)]),_:1}),h(O,{layout:"vertical",ref_key:"inputFieldsEl",ref:d},{default:b(()=>[(T(!0),Z(ge,null,Ae(l.value,(q,K)=>(T(),X(C,{align:"center",class:"draggable-item",key:`field-${q}-${K}`},{default:b(()=>[h(y(Ml),{class:"handle"}),y(Yr).includes(q.field_type)?ce("",!0):(T(),X(ee,{key:0,class:"draggable-item-content"},{label:b(()=>[ne(J(q.display_name),1)]),default:b(()=>[q.field_type=="temperature"?(T(),X(Br,{key:0,modelValue:q.value,"onUpdate:modelValue":te=>q.value=te},null,8,["modelValue","onUpdate:modelValue"])):q.field_type=="select"?(T(),X(x,{key:1,value:q.value,"onUpdate:value":te=>q.value=te,options:q.options},null,8,["value","onUpdate:value","options"])):q.field_type=="textarea"?(T(),X(I,{key:2,value:q.value,"onUpdate:value":te=>q.value=te,autoSize:{minRows:2,maxRows:10},placeholder:q.placeholder},null,8,["value","onUpdate:value","placeholder"])):q.field_type=="input"?(T(),X(U,{key:3,value:q.value,"onUpdate:value":te=>q.value=te,placeholder:q.placeholder},null,8,["value","onUpdate:value","placeholder"])):q.field_type=="number"?(T(),X(R,{key:4,value:q.value,"onUpdate:value":te=>q.value=te,placeholder:q.placeholder},null,8,["value","onUpdate:value","placeholder"])):q.field_type=="checkbox"?(T(),X(L,{key:5,checked:q.value,"onUpdate:checked":te=>q.value=te},null,8,["checked","onUpdate:checked"])):q.field_type=="file"?(T(),X(Qu,{key:6,modelValue:q.value,"onUpdate:modelValue":te=>q.value=te,supportFileTypes:q.support_file_types||".docx, .pptx, .xlsx, .pdf, .txt, .md, .html, .json, .csv, .srt, .zip"},null,8,["modelValue","onUpdate:modelValue","supportFileTypes"])):q.field_type=="list"?(T(),X(of,{key:7,modelValue:q.value,"onUpdate:modelValue":te=>q.value=te},null,8,["modelValue","onUpdate:modelValue"])):ce("",!0)]),_:2},1024)),q.field_type=="typography-paragraph"?(T(),X(_,{key:1,class:"draggable-item-content"},{default:b(()=>[h(G,{span:24,class:"ui-special-item-container"},{default:b(()=>[h(cu,{modelValue:q.value,"onUpdate:modelValue":te=>q.value=te,placeholder:q.placeholder,onChange:u,onDelete:te=>w(l.value,K)},null,8,["modelValue","onUpdate:modelValue","placeholder","onDelete"])]),_:2},1024)]),_:2},1024)):ce("",!0)]),_:2},1024))),128))]),_:1},512),h(N),h(C,{vertical:""},{default:b(()=>[(T(!0),Z(ge,null,Ae(i.value,q=>(T(),Z("div",{key:`node-${q.id}`},[q.type=="ButtonTrigger"?(T(),X(M,{key:0,type:"primary",block:""},{default:b(()=>[ne(J(q.data.template.button_text.value),1)]),_:2},1024)):q.type=="ScheduleTrigger"?(T(),Z("div",F2,[h(E,{level:4},{default:b(()=>[ne(J(y(n)("components.nodes.triggers.ScheduleTrigger.title")),1)]),_:1})])):ce("",!0)]))),128))]),_:1})]),_:1})]),_:1}),h(G,{xxl:18,xl:16,lg:14,md:24},{default:b(()=>[h(E,{level:3,style:{display:"flex","justify-content":"space-between"}},{default:b(()=>[Ce("span",null,[h(y(nf),{fill:"#28c5e5"}),ne(" "+J(y(n)("workspace.workflowSpace.outputs")),1)])]),_:1}),h(C,{vertical:"",ref_key:"outputNodesEl",ref:f},{default:b(()=>[(T(!0),Z(ge,null,Ae(r.value,(q,K)=>(T(),X(C,{align:"center",class:"draggable-item",key:`node-${q.id}-${K}`},{default:b(()=>[h(y(Ml),{class:"handle"}),Ce("div",L2,[q.type=="Text"?(T(),Z("div",G2,[h(E,{level:5},{default:b(()=>[ne(J(q.data.template.output_title.value),1)]),_:2},1024),h(af,{text:q.data.template.text.value,renderMarkdown:q.data.template.render_markdown.value},null,8,["text","renderMarkdown"])])):q.type=="Audio"?(T(),Z("div",B2,[h(E,{level:4},{default:b(()=>[ne(J(y(n)("components.nodes.outputs.Audio.title")),1)]),_:1})])):q.type=="Mindmap"?(T(),Z("div",H2,[h(E,{level:4},{default:b(()=>[ne(J(y(n)("components.nodes.outputs.Mindmap.title")),1)]),_:1})])):q.type=="Mermaid"?(T(),Z("div",Y2,[h(E,{level:4},{default:b(()=>[ne(J(y(n)("components.nodes.outputs.Mermaid.title")),1)]),_:1})])):q.type=="Echarts"?(T(),Z("div",Z2,[h(E,{level:4},{default:b(()=>[ne(J(y(n)("components.nodes.outputs.Echarts.title")),1)]),_:1})])):q.type=="Html"?(T(),Z("div",J2,[h(E,{level:4},{default:b(()=>[ne(J(y(n)("components.nodes.outputs.Html.title")),1)]),_:1})])):(T(),Z("div",K2,[q.field_type=="typography-paragraph"?(T(),Z("div",eE,[h(cu,{modelValue:q.value,"onUpdate:modelValue":te=>q.value=te,placeholder:q.placeholder,onChange:u,onDelete:te=>w(r.value,K)},null,8,["modelValue","onUpdate:modelValue","placeholder","onDelete"])])):ce("",!0)]))])]),_:2},1024))),128))]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})}}},nE=wn(tE,[["__scopeId","data-v-71538c2d"]]),oE={__name:"VueFlowStyleSettings",props:{modelValue:{},modelModifiers:{}},emits:Io(["save"],["update:modelValue"]),setup(e,{emit:t}){const n=t,o=go(e,"modelValue"),{t:a}=Ye(),l=j(!1),r=()=>{n("save",o),l.value=!1};return(i,s)=>{const u=V("a-button"),c=V("a-select-option"),d=V("a-select"),p=V("a-form-item"),f=V("a-switch"),g=V("a-form"),w=V("a-drawer");return T(),Z(ge,null,[h(u,{onClick:s[0]||(s[0]=m=>l.value=!0),class:"settings-button"},{default:b(()=>[ne(J(y(a)("components.workspace.vueFlowStyleSettings.title")),1)]),_:1}),h(w,{open:l.value,"onUpdate:open":s[3]||(s[3]=m=>l.value=m),class:"custom-class",title:y(a)("components.workspace.vueFlowStyleSettings.title"),placement:"right"},{extra:b(()=>[h(u,{type:"primary",onClick:r},{default:b(()=>[ne(J(y(a)("common.save")),1)]),_:1})]),default:b(()=>[h(g,{model:o.value,"label-col":{span:8},"wrapper-col":{span:16},autocomplete:"off"},{default:b(()=>[h(p,{label:y(a)("components.workspace.vueFlowStyleSettings.edge_type"),name:"edge_type"},{default:b(()=>[h(d,{value:o.value.edge.type,"onUpdate:value":s[1]||(s[1]=m=>o.value.edge.type=m)},{default:b(()=>[h(c,{value:"bezier"},{default:b(()=>[ne(J(y(a)("components.workspace.vueFlowStyleSettings.edge_type_bezier")),1)]),_:1}),h(c,{value:"step"},{default:b(()=>[ne(J(y(a)("components.workspace.vueFlowStyleSettings.edge_type_step")),1)]),_:1}),h(c,{value:"smoothstep"},{default:b(()=>[ne(J(y(a)("components.workspace.vueFlowStyleSettings.edge_type_smoothstep")),1)]),_:1}),h(c,{value:"straight"},{default:b(()=>[ne(J(y(a)("components.workspace.vueFlowStyleSettings.edge_type_straight")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),h(p,{label:y(a)("components.workspace.vueFlowStyleSettings.edge_animated"),name:"edge_animated"},{default:b(()=>[h(f,{checked:o.value.edge.animated,"onUpdate:checked":s[2]||(s[2]=m=>o.value.edge.animated=m)},null,8,["checked"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["open","title"])],64)}}},aE=wn(oE,[["__scopeId","data-v-33ef65ae"]]),lE={key:0,class:"loading-container"},rE={key:1,class:"editor-container"},iE={class:"title-container"},sE=["data-node-type"],uE={__name:"WorkflowEditor",setup(e){const{t,te:n}=Ye(),o=j(!0),a=yu(),l=Kp(),r=j(""),i=j(t("workspace.workflowEditor.workflow_canvas")),s=ut([t("workspace.workflowEditor.workflow_info"),t("workspace.workflowEditor.workflow_canvas"),t("workspace.workflowEditor.workflow_ui_design")]);let u="workflow",c=null,d={};const p=Jo(),{userDatabases:f}=Pt(p),g=hl(),w=Of(),m=gu(),{vueFlowStyleSettings:v}=Pt(m),k=_l(),{nodeMessagesCount:Q,nodeMessages:$}=Pt(k),S=j(""),E=j({}),x=j([]),I=j(w.diagnosisRecord),U=j(l.currentRoute.value.query.rid),R=()=>{me.value.forEach(de=>{de.type=v.value.edge.type,de.animated=v.value.edge.animated,de.style=v.value.edge.style}),m.setVueFlowStyleSettings(v.value)};fl(()=>{w.setDiagnosisRecord(null)}),bn(async()=>{if(U.value&&!I.value){const Ze=await bf("get",{rid:U.value});I.value=Ze.data}a.path.startsWith("/workflow/editor/")?(u="workflow",c=cr,r.value=a.params.workflowId,d={wid:r.value}):(u="template",c=wf,r.value=a.params.templateId,d={tid:r.value});const de=c("get",d),ie=cf("list"),xe=df("list"),ye=await de,nt=await ie,Fe=await xe;if(nt.status==200&&p.setUserDatabases(nt.data),Fe.status==200&&g.setUserRelationalDatabases(Fe.data),ye.status!=200){dt.error(t("workspace.workflowSpace.get_workflow_failed")),await l.push({name:"WorkflowSpaceMain"});return}E.value=ye.data,I.value&&(E.value.data=I.value.data),E.value.data.nodes.forEach(Ze=>{var Bn,$t;I.value&&(Ze.data.debug={run_time:(($t=(Bn=I.value.data)==null?void 0:Bn.node_run_time)==null?void 0:$t[Ze.id])??-1,credits:Ze.data.credits||0}),Ze.category=="vectorDb"&&(Ze.data.template.database.options=f.value.filter(Be=>Be.status=="VALID").map(Be=>({value:Be.vid,label:Be.name})));const ht=je[Ze.type]();Object.entries(Ze.data.template).forEach(([Be,Sn])=>{var qt;(qt=ht.template[Be])!=null&&qt.condition&&(Sn.condition=ht.template[Be].condition)});const un={};Object.keys(ht.template).forEach(Be=>{Ze.data.template.hasOwnProperty(Be)&&(un[Be]=Ze.data.template[Be])}),Object.keys(Ze.data.template).forEach(Be=>{ht.template.hasOwnProperty(Be)||(un[Be]=Ze.data.template[Be])}),Ze.data.template=un}),E.value.tags=E.value.tags.map(Ze=>Ze.tid),pe(E.value.data),x.value=[...E.value.data.nodes,...E.value.data.edges],S.value=ia(E.value),o.value=!1});const L=()=>{const de=Y();E.value.data={...de,ui:E.value.data.ui||{}}},ee=j(!1),G=j({hasInput:!1,hasOutput:!1,hasTrigger:!1}),_=()=>{G.value={hasInput:!1,hasOutput:!1,hasTrigger:!1,noCycle:!1,noIsolatedNodes:!1};const de=lf(E.value);G.value.noCycle=de.noCycle,G.value.noIsolatedNodes=de.noIsolatedNodes;const ie=Hr(E.value),xe=ut(ie);return G.value.hasInput=xe.inputFields.filter(ye=>!Yr.includes(ye.field_type)).length>0,G.value.hasOutput=E.value.data.nodes.filter(ye=>ye.category=="outputs").length>0,G.value.hasTrigger=xe.triggerNodes.filter(ye=>ye.category=="triggers").length>0,Object.values(G.value).some(ye=>ye===!1)?(ee.value=!0,!1):!0},C=j(!1),O=async()=>{C.value=!0;const de=E.value.data.ui||{},ie=Y();E.value.data={...ie,ui:de};const xe=_();try{const ye=await c("update",{...d,...E.value});ye.status==200?(dt.success(t("workspace.workflowSpace.save_success")),S.value=ia(E.value)):ye.status==400?dt.error(t("workspace.workflowSpace.workflow_cant_invoke_itself")):dt.error(t("workspace.workflowSpace.save_failed")),u=="workflow"&&w.updateUserWorkflow(E.value)}catch(ye){console.error(ye),dt.error(t("workspace.workflowSpace.save_failed"))}return C.value=!1,xe},N=async()=>{u=="workflow"?await l.push({name:"WorkflowUse",params:{workflowId:r.value}}):await l.push({name:"WorkflowTemplate",params:{workflowTemplateId:r.value}})},M=j(!1),P=async()=>{await O(),await N()},D=async()=>{await N()},q=()=>{U.value&&N();const de=E.value.data.ui||{},ie=Y();E.value.data={...ie,ui:de},S.value!=ia(E.value)?M.value=!0:N()},{addEdges:K,removeEdges:te,updateEdge:B,onConnect:ae,toObject:Y,fromObject:pe,findNode:re,viewport:se,vueFlowRef:H,edges:me}=Xe();ae(de=>{var xe,ye,nt;if(me.value.some(Fe=>Fe.target===de.target&&Fe.targetHandle===de.targetHandle)){dt.error(t("workspace.workflowEditor.edge_already_connected_message"));return}de.type=((xe=v.value.edge)==null?void 0:xe.type)||"bezier",de.animated=((ye=v.value.edge)==null?void 0:ye.animated)||!0,de.style=((nt=v.value.edge)==null?void 0:nt.style)||{strokeWidth:3,stroke:"#28c5e5"},K([de])});const _e=({edge:de,connection:ie})=>{B(de,ie)},De=({edge:de,event:ie})=>{de.selected&&dt.info(t("workspace.workflowEditor.edge_delete_message"))},z=de=>{},A=de=>{x.value=x.value.filter(ie=>!(ie.source===de.edge.source&&ie.target===de.edge.target&&ie.sourceHandle===de.edge.sourceHandle&&ie.targetHandle===de.edge.targetHandle))},W={change:(de,ie)=>{if(de.event=="removeField"){const xe=me.value.filter(ye=>ye.source===ie&&ye.sourceHandle===de.fieldName||ye.target===ie&&ye.targetHandle===de.fieldName);te(xe)}else if(de.event=="editField"){const{oldFieldName:xe,newFieldName:ye}=de,nt=re(ie);nt.handleBounds.source.forEach(Fe=>{Fe.id===xe&&(Fe.id=ye)}),nt.handleBounds.target.forEach(Fe=>{Fe.id===xe&&(Fe.id=ye)}),me.value.forEach(Fe=>{Fe.source===ie&&Fe.sourceHandle===xe&&(Fe.sourceHandle=ye),Fe.target===ie&&Fe.targetHandle===xe&&(Fe.targetHandle=ye)})}},delete:(de,ie)=>{x.value=x.value.filter(xe=>xe.id!==ie),x.value=x.value.filter(xe=>!(xe.source&&xe.source===ie||xe.target&&xe.target===ie))},clone:(de,ie)=>{const xe=re(ie);xe.selected=!1;const ye=JSON.parse(JSON.stringify(xe));ye.id=zs(),ye.selected=!0,ye.position.x+=50,ye.position.y-=50,x.value.push(ye)}};ke(()=>Q.value,()=>{for(;$.value.length>0;){const{action:de,data:ie,nodeId:xe}=k.pop();W[de](ie,xe)}});let F;const oe=de=>{F&&document.body.removeChild(F);let ie=de.target.getBoundingClientRect();F=de.target.cloneNode(!0),F.style.position="absolute",F.style.top=ie.top+"px",F.style.left=ie.left+"px",F.style.width=ie.width+"px",F.style.height=ie.height+"px",F.style.opacity="0.5",F.style.zIndex="1000",document.body.appendChild(F)},fe=de=>{F&&(F.style.left=de.touches[0].clientX+"px",F.style.top=de.touches[0].clientY+"px")},he=de=>{F&&(document.body.removeChild(F),F=null);let ie=de.srcElement.dataset.nodeType;ie||(ie=de.srcElement.children[0].dataset.nodeType);const xe=H.value.getBoundingClientRect(),{x:ye,y:nt,zoom:Fe}=se.value;let Ze=0,ht=0;de.type=="touchend"?(Ze=de.changedTouches[0].clientX-xe.left,ht=de.changedTouches[0].clientY-xe.top):(Ze=de.clientX-xe.left,ht=de.clientY-xe.top);const un=je[ie]();Object.entries(un.template).forEach(([$t,Be])=>{const Sn=`components.nodes.${bt[ie]}.${ie}.${$t}`;n(Sn)&&Be.display_name&&(Be.display_name=t(Sn)),Be.options&&(Be.options=Be.options.map(qt=>{const la=`components.nodes.${bt[ie]}.${ie}.${$t}_${qt.value}`;return n(la)&&(qt.label=t(la)),qt}))});const Bn={id:zs(),type:ie,category:bt[ie],position:{x:(Ze-ye)/Fe,y:(ht-nt)/Fe},data:un};x.value.push(Bn)},Te=Object.assign({"/src/components/nodes/assistedNodes/CommentNode.vue":D0,"/src/components/nodes/controlFlows/Conditional.vue":W0,"/src/components/nodes/controlFlows/Empty.vue":L0,"/src/components/nodes/controlFlows/JsonProcess.vue":H0,"/src/components/nodes/controlFlows/RandomChoice.vue":J0,"/src/components/nodes/fileProcessing/FileLoader.vue":e1,"/src/components/nodes/imageGeneration/StableDiffusion.vue":o1,"/src/components/nodes/llms/ChatGLM.vue":r1,"/src/components/nodes/llms/Claude.vue":u1,"/src/components/nodes/llms/LocalLlm.vue":p1,"/src/components/nodes/llms/Moonshot.vue":h1,"/src/components/nodes/llms/OpenAI.vue":g1,"/src/components/nodes/mediaProcessing/GlmVision.vue":b1,"/src/components/nodes/mediaProcessing/GptVision.vue":x1,"/src/components/nodes/outputs/Document.vue":T1,"/src/components/nodes/outputs/Echarts.vue":P1,"/src/components/nodes/outputs/Email.vue":z1,"/src/components/nodes/outputs/Mermaid.vue":M1,"/src/components/nodes/outputs/Mindmap.vue":V1,"/src/components/nodes/outputs/Text.vue":U1,"/src/components/nodes/outputs/WorkflowInvokeOutput.vue":F1,"/src/components/nodes/relationalDb/GetTableInfo.vue":B1,"/src/components/nodes/relationalDb/RunSql.vue":Z1,"/src/components/nodes/relationalDb/SmartQuery.vue":eb,"/src/components/nodes/textProcessing/ListRender.vue":ob,"/src/components/nodes/textProcessing/MarkdownToHtml.vue":rb,"/src/components/nodes/textProcessing/TemplateCompose.vue":fb,"/src/components/nodes/textProcessing/TextInOut.vue":vb,"/src/components/nodes/textProcessing/TextSplitters.vue":yb,"/src/components/nodes/textProcessing/TextTruncation.vue":wb,"/src/components/nodes/tools/ImageSearch.vue":$b,"/src/components/nodes/tools/ProgrammingFunction.vue":Jw,"/src/components/nodes/tools/WorkflowInvoke.vue":aS,"/src/components/nodes/triggers/ButtonTrigger.vue":iS,"/src/components/nodes/vectorDb/AddData.vue":cS,"/src/components/nodes/vectorDb/DeleteData.vue":fS,"/src/components/nodes/vectorDb/Search.vue":vS,"/src/components/nodes/webCrawlers/BilibiliCrawler.vue":yS,"/src/components/nodes/webCrawlers/TextCrawler.vue":wS,"/src/components/nodes/webCrawlers/YoutubeCrawler.vue":$S}),Pe=Object.assign({"/src/components/nodes/assistedNodes/CommentNode.js":k0,"/src/components/nodes/controlFlows/Conditional.js":X0,"/src/components/nodes/controlFlows/Empty.js":j0,"/src/components/nodes/controlFlows/JsonProcess.js":G0,"/src/components/nodes/controlFlows/RandomChoice.js":Y0,"/src/components/nodes/fileProcessing/FileLoader.js":TS,"/src/components/nodes/imageGeneration/StableDiffusion.js":t1,"/src/components/nodes/llms/ChatGLM.js":a1,"/src/components/nodes/llms/Claude.js":i1,"/src/components/nodes/llms/LocalLlm.js":c1,"/src/components/nodes/llms/Moonshot.js":f1,"/src/components/nodes/llms/OpenAI.js":v1,"/src/components/nodes/mediaProcessing/GlmVision.js":y1,"/src/components/nodes/mediaProcessing/GptVision.js":w1,"/src/components/nodes/outputs/Document.js":$1,"/src/components/nodes/outputs/Echarts.js":E1,"/src/components/nodes/outputs/Email.js":C1,"/src/components/nodes/outputs/Mermaid.js":q1,"/src/components/nodes/outputs/Mindmap.js":R1,"/src/components/nodes/outputs/Text.js":A1,"/src/components/nodes/outputs/WorkflowInvokeOutput.js":W1,"/src/components/nodes/relationalDb/GetTableInfo.js":L1,"/src/components/nodes/relationalDb/RunSql.js":H1,"/src/components/nodes/relationalDb/SmartQuery.js":J1,"/src/components/nodes/textProcessing/ListRender.js":tb,"/src/components/nodes/textProcessing/MarkdownToHtml.js":ab,"/src/components/nodes/textProcessing/TemplateCompose.js":sb,"/src/components/nodes/textProcessing/TextInOut.js":mb,"/src/components/nodes/textProcessing/TextSplitters.js":_b,"/src/components/nodes/textProcessing/TextTruncation.js":Ob,"/src/components/nodes/tools/ImageSearch.js":Sb,"/src/components/nodes/tools/ProgrammingFunction.js":Hw,"/src/components/nodes/tools/WorkflowInvoke.js":tS,"/src/components/nodes/triggers/ButtonTrigger.js":lS,"/src/components/nodes/vectorDb/AddData.js":sS,"/src/components/nodes/vectorDb/DeleteData.js":dS,"/src/components/nodes/vectorDb/Search.js":mS,"/src/components/nodes/webCrawlers/BilibiliCrawler.js":_S,"/src/components/nodes/webCrawlers/TextCrawler.js":OS,"/src/components/nodes/webCrawlers/YoutubeCrawler.js":SS}),Ge={},We={},je={},bt={};Object.entries(Te).forEach(([de,ie])=>{const xe=de.match(/\/([^/]+)\.vue$/)[1],ye=de.match(/\/([^/]+)\/[^/]+\.vue$/)[1];Ge[xe]=zn(ie.default);const nt=Pe[de.replace(/\.vue$/,".js")];je[xe]=nt==null?void 0:nt.createTemplateData,!je[xe]().deprecated&&(We[ye]||(We[ye]=[]),We[ye].push(xe),bt[xe]=ye)});const zt=ut({open:!1,code:"",openEditor:async()=>{let de=Y();de.ui=E.value.data.ui||{},zt.code=JSON.stringify(de,null,2),zt.open=!0},updateCode:de=>{const ie=JSON.parse(de);E.value.data.ui=ie.ui||{},x.value=[...ie.nodes,...ie.edges],E.value.data.nodes=ie.nodes,E.value.data.edges=ie.edges,E.value.data.nodes.forEach(xe=>{xe.category=="vectorDb"&&(xe.data.template.database.options=f.value.filter(ye=>ye.status=="VALID").map(ye=>({value:ye.vid,label:ye.name})))}),S.value=ia(E.value)}});return(de,ie)=>{const xe=V("a-spin"),ye=V("a-typography-text"),nt=V("a-button"),Fe=V("a-modal"),Ze=V("a-typography-link"),ht=V("a-col"),un=V("a-segmented"),Bn=V("a-tooltip"),$t=V("a-typography-paragraph"),Be=V("a-space"),Sn=V("a-row"),qt=V("a-divider"),la=V("a-menu-item"),Mp=V("a-sub-menu"),Rp=V("a-menu"),Ip=V("a-layout-sider"),Vp=V("a-flex"),Ap=V("a-alert"),Xp=V("a-layout-content"),$i=V("a-layout");return o.value?(T(),Z("div",lE,[h(xe,{size:"large"})])):(T(),Z("div",rE,[Ce("div",iE,[h(Sn,{style:{width:"100%"}},{default:b(()=>[h(ht,{span:8},{default:b(()=>[h(Ze,{onClick:q,style:{"text-wrap":"nowrap"}},{default:b(()=>[h(y(Pf)),ne(" "+J(y(t)("common.back"))+" ",1),h(Fe,{open:M.value,"onUpdate:open":ie[0]||(ie[0]=Ie=>M.value=Ie)},{title:b(()=>[h(ye,{type:"warning"},{default:b(()=>[h(y(Ei)),ne(" "+J(y(t)("common.back")),1)]),_:1})]),footer:b(()=>[h(nt,{onClick:D},{default:b(()=>[ne(J(y(t)("workspace.workflowEditor.exit_without_save")),1)]),_:1}),h(nt,{type:"primary",onClick:P},{default:b(()=>[ne(J(y(t)("workspace.workflowEditor.save_and_exit")),1)]),_:1})]),default:b(()=>[ne(" "+J(y(t)("workspace.workflowEditor.exit_not_saved_confirm"))+" ",1)]),_:1},8,["open"])]),_:1}),h(ye,{class:"title",ellipsis:!0,editable:{triggerType:["text","icon"]},content:E.value.title,"onUpdate:content":ie[1]||(ie[1]=Ie=>E.value.title=Ie)},null,8,["content"])]),_:1}),h(ht,{span:8,style:{display:"flex","justify-content":"center"}},{default:b(()=>[h(un,{value:i.value,"onUpdate:value":ie[2]||(ie[2]=Ie=>i.value=Ie),options:s,onChange:L},null,8,["value","options"])]),_:1}),h(ht,{span:8,style:{display:"flex","justify-content":"end"}},{default:b(()=>[h(Be,null,{default:b(()=>[h(nt,{onClick:zt.openEditor},{icon:b(()=>[h(y(Ef))]),default:b(()=>[ne(" "+J(y(t)("workspace.workflowEditor.edit_code"))+" ",1),h(qd,{language:"json",open:zt.open,"onUpdate:open":ie[3]||(ie[3]=Ie=>zt.open=Ie),code:zt.code,"onUpdate:code":ie[4]||(ie[4]=Ie=>zt.code=Ie),onSave:zt.updateCode},null,8,["open","code","onSave"])]),_:1},8,["onClick"]),h(nt,{type:"primary",onClick:O,loading:C.value,disabled:!!U.value},{icon:b(()=>[h(y(xf))]),default:b(()=>[h(Bn,{title:U.value?y(t)("workspace.workflowEditor.cannot_save_when_diagnosing"):""},{default:b(()=>[ne(J(y(t)("common.save")),1)]),_:1},8,["title"])]),_:1},8,["loading","disabled"]),h(Fe,{open:ee.value,"onUpdate:open":ie[5]||(ie[5]=Ie=>ee.value=Ie),footer:null},{title:b(()=>[h(ye,{type:"warning"},{default:b(()=>[h(y(Ei)),ne(" "+J(y(t)("workspace.workflowEditor.workflow_check_warning")),1)]),_:1})]),default:b(()=>[G.value.hasInput?ce("",!0):(T(),X($t,{key:0,type:"danger"},{default:b(()=>[ne(J(y(t)("workspace.workflowEditor.workflow_has_no_inputs")),1)]),_:1})),G.value.hasOutput?ce("",!0):(T(),X($t,{key:1,type:"danger"},{default:b(()=>[ne(J(y(t)("workspace.workflowEditor.workflow_has_no_outputs")),1)]),_:1})),G.value.hasTrigger?ce("",!0):(T(),X($t,{key:2,type:"danger"},{default:b(()=>[ne(J(y(t)("workspace.workflowEditor.workflow_has_no_triggers")),1)]),_:1})),G.value.noCycle?ce("",!0):(T(),X($t,{key:3,type:"danger"},{default:b(()=>[ne(J(y(t)("workspace.workflowEditor.workflow_has_cycles")),1)]),_:1})),G.value.noIsolatedNodes?ce("",!0):(T(),X($t,{key:4,type:"danger"},{default:b(()=>[ne(J(y(t)("workspace.workflowEditor.workflow_has_isolated_nodes")),1)]),_:1}))]),_:1},8,["open"])]),_:1})]),_:1})]),_:1})]),Vn(Ce("div",null,[h(Sn,{justify:"center"},{default:b(()=>[h(ht,{lg:10,md:12,sm:18,xs:24},{default:b(()=>[h(qt,null,{default:b(()=>[ne(J(y(t)("workspace.workflowEditor.tags")),1)]),_:1}),h(ZT,{modelValue:E.value.tags,"onUpdate:modelValue":ie[6]||(ie[6]=Ie=>E.value.tags=Ie)},null,8,["modelValue"]),h(qt,null,{default:b(()=>[ne(J(y(t)("workspace.workflowEditor.brief_info")),1)]),_:1}),h(gp,{modelValue:E.value.brief,"onUpdate:modelValue":ie[7]||(ie[7]=Ie=>E.value.brief=Ie)},null,8,["modelValue"]),h(qt,null,{default:b(()=>[ne(J(y(t)("workspace.workflowEditor.brief_images")),1)]),_:1}),Ce("div",null,[h(Qu,{modelValue:E.value.images,"onUpdate:modelValue":ie[8]||(ie[8]=Ie=>E.value.images=Ie),multiple:!0,supportFileTypes:"image/*"},null,8,["modelValue"])])]),_:1})]),_:1})],512),[[An,i.value==y(t)("workspace.workflowEditor.workflow_info")]]),Vn(h($i,{"has-sider":"",style:{height:"100%"}},{default:b(()=>[h(Ip,{style:{overflow:"auto",backgroundColor:"#fff"},class:"custom-scrollbar"},{default:b(()=>[h(Rp,{theme:"light",mode:"inline"},{default:b(()=>[(T(!0),Z(ge,null,Ae(y(ef),Ie=>(T(),X(Mp,{key:`category-${Ie.name}`,icon:Ie.icon},{title:b(()=>[ne(J(y(t)(`components.nodes.${Ie.name}.title`)),1)]),default:b(()=>[(T(!0),Z(ge,null,Ae(We[Ie.name],(ra,Up)=>(T(),X(la,{"data-node-type":ra,id:ra,draggable:"true",onTouchstart:oe,onTouchmove:fe,onDragend:he,onTouchend:he,key:`node-${Up}`},{default:b(()=>[Ce("span",{"data-node-type":ra},J(y(t)(`components.nodes.${Ie.name}.${ra}.title`)),9,sE)]),_:2},1032,["data-node-type","id"]))),128))]),_:2},1032,["icon"]))),128))]),_:1})]),_:1}),h($i,{style:{"background-color":"#fff"}},{default:b(()=>[I.value?(T(),X(Ap,{key:0,banner:""},{message:b(()=>[h(Vp,{align:"center",justify:"space-between"},{default:b(()=>[h(ye,null,{default:b(()=>[ne(J(y(t)("workspace.workflowEditor.diagnosing_record",{record:`${I.value.title}
                ${I.value.data.rid}`})),1)]),_:1})]),_:1})]),_:1})):ce("",!0),h(Xp,{style:{margin:"24px 16px 0",overflow:"initial",backgroundColor:"#fff"}},{default:b(()=>[h(y(xy),{modelValue:x.value,"onUpdate:modelValue":ie[10]||(ie[10]=Ie=>x.value=Ie),"node-types":Ge,"edges-updatable":!0,onEdgeUpdate:_e,onEdgeClick:De,onEdgeDoubleClick:A,onPaneClick:z,"snap-to-grid":!0,"snap-grid":[20,20]},{default:b(()=>[h(y(pT)),h(y(YT)),h(y(yT),{variant:"dots"}),h(aE,{modelValue:y(v),"onUpdate:modelValue":ie[9]||(ie[9]=Ie=>_o(v)?v.value=Ie:null),onSave:R},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},512),[[An,i.value==y(t)("workspace.workflowEditor.workflow_canvas")]]),i.value==y(t)("workspace.workflowEditor.workflow_ui_design")?(T(),X(nE,{key:0,modelValue:E.value,"onUpdate:modelValue":ie[11]||(ie[11]=Ie=>E.value=Ie)},null,8,["modelValue"])):ce("",!0)]))}}},$E=wn(uE,[["__scopeId","data-v-74b038c4"]]);export{$E as default};
