import{I as j,c as e,_ as K,W as q,s as m,x as F,af as G,a1 as v,h as C,K as k,j as o,a7 as H,ab as J,M as l,a9 as O,f as c,T as u,D as d,B as s,E as g,C as Q,$ as X,aa as Y}from"./index-CfafZJhW.js";import{u as Z,a as ee}from"./userWorkflows-9mcf9Fge.js";import{A as te,B as oe}from"./AuthorComponent-89Pvnq-q.js";import{W as ae,R as le,I as se}from"./RelatedWorkflowsModal-DLuiBonU.js";import"./util-5oGgGLPe.js";import"./userDatabase-BVeHP0Sz.js";import"./TextOutput-DtFmuvfT.js";import"./UploaderFieldUse-C5i5-QFO.js";import"./Delete-Do6S_q1h.js";import"./database-Iqvj_Bo2.js";import"./Edit-BiyNizmK.js";const re=j("double-left",!0,function(t){return e("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},[e("path",{d:"M24 36L12 24L24 12",stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap,"stroke-linejoin":t.strokeLinejoin},null),e("path",{d:"M36 36L24 24L36 12",stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap,"stroke-linejoin":t.strokeLinejoin},null)])}),ne=j("double-right",!0,function(t){return e("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},[e("path",{d:"M12 12L24 24L12 36",stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap,"stroke-linejoin":t.strokeLinejoin},null),e("path",{d:"M24 12L36 24L24 36",stroke:t.colors[0],"stroke-width":t.strokeWidth,"stroke-linecap":t.strokeLinecap,"stroke-linejoin":t.strokeLinejoin},null)])}),ie={key:0,class:"space-container"},ce={key:0,class:"workflow-use-mask"},ue={style:{display:"flex","justify-content":"space-between","align-items":"center"}},de={__name:"WorkflowTemplate",setup(t){const{t:r}=q(),y=m(!0),B=m(!1),f=m(!1),M=H(),b=J(),h=Z(),x=M.params.workflowTemplateId,a=m({}),n=m(!1),T=m(!0);F(async()=>{const i=await G("get_template",{tid:x});if(i.status!=200){v.error(r("workspace.workflowSpace.get_workflow_failed")),b.push({name:"Workspace"});return}a.value=i.data,y.value=!1});const D=async()=>{f.value=!0;const i=await ee("create",a.value);if(i.status==200)v.success(r("workspace.workflowTemplate.add_success"));else{v.error(r("workspace.workflowTemplate.add_failed"));return}const p=a.value;h.addUserWorkflow(p),h.setUserWorkflowsTotal(h.userWorkflowsTotal+1),f.value=!1,await b.push({name:"WorkflowUse",params:{workflowId:i.data.wid}})};return(i,p)=>{const S=l("a-skeleton"),U=l("router-link"),W=l("a-breadcrumb-item"),z=l("a-breadcrumb"),_=l("a-button"),R=l("a-typography-text"),L=l("a-col"),V=l("a-typography-title"),I=l("a-space"),A=l("a-divider"),N=l("a-card"),E=l("a-row"),$=l("a-spin"),P=O("highlight");return y.value?(c(),C("div",ie,[e(S,{active:""})])):(c(),k($,{key:1,spinning:B.value,class:"space-container"},{default:o(()=>[e(z,null,{default:o(()=>[e(W,null,{default:o(()=>[e(U,{to:"/workflow?tab=official-workflow-templates"},{default:o(()=>[u(d(s(r)("workspace.workflowSpaceMain.official_workflow_template")),1)]),_:1})]),_:1}),e(W,null,{default:o(()=>[u(d(a.value.title),1)]),_:1})]),_:1}),e(E,{gutter:[16,8],style:{"margin-top":"30px",padding:"0 10px 30px"}},{default:o(()=>[e(L,{xl:n.value?24:16,lg:n.value?24:16,md:24,xs:24,style:{height:"100%"}},{default:o(()=>[e(_,{type:"primary",shape:"circle",class:"collapse-button",onClick:p[0]||(p[0]=w=>n.value=!n.value)},{icon:o(()=>[n.value?(c(),k(s(re),{key:1})):(c(),k(s(ne),{key:0}))]),_:1}),T.value?(c(),C("div",ce,[e(_,{type:"primary",onClick:p[1]||(p[1]=w=>T.value=!1)},{default:o(()=>[u(d(s(r)("workspace.workflowTemplate.test_run_template")),1)]),_:1}),e(R,{class:"hint"},{default:o(()=>[u(d(s(r)("workspace.workflowTemplate.test_run_template_hint1")),1)]),_:1})])):g("",!0),e(ae,{workflow:a.value,isTemplate:!0},null,8,["workflow"])]),_:1},8,["xl","lg"]),e(L,{xl:n.value?24:8,lg:n.value?24:8,md:24,xs:24,style:{display:"flex","flex-direction":"column",gap:"16px"}},{default:o(()=>[e(N,null,{title:o(()=>[e(I,{direction:"vertical",style:{width:"100%","margin-top":"8px","margin-bottom":"8px"}},{default:o(()=>[e(V,{class:"template-title",level:1,ellipsis:{rows:2},content:a.value.title},null,8,["content"]),Q("div",ue,[e(te,{author:a.value.user,time:parseInt(a.value.update_time),fontColor:"#232323"},null,8,["author","time"]),e(le,{workflowId:s(x),isTemplate:!0},null,8,["workflowId"])])]),_:1})]),default:o(()=>[e(I,{direction:"vertical",style:{width:"100%","margin-top":"8px","margin-bottom":"8px"}},{default:o(()=>{var w;return[e(_,{type:"primary",size:"large",block:"",onClick:D,loading:f.value,style:{"margin-bottom":"10px"}},{default:o(()=>[u(d(s(r)("workspace.workflowTemplate.add_to_my_workflows"))+" ",1),e(A,{type:"vertical",style:{"border-inline-start-color":"rgb(255, 255, 255)"}}),e(s(oe)),u(d(a.value.used_count),1)]),_:1},8,["loading"]),a.value.is_owner?(c(),k(_,{key:0,type:"primary",onClick:i.openEditor,block:""},{default:o(()=>[u(d(s(r)("workspace.workflowTemplate.edit_template")),1)]),_:1},8,["onClick"])):g("",!0),((w=a.value.images)==null?void 0:w.length)>0?(c(),k(se,{key:1,images:a.value.images},null,8,["images"])):g("",!0),X(e(s(Y),{style:{width:"100%"},source:a.value.brief,options:{html:!0},class:"custom-scrollbar markdown-body custom-hljs"},null,8,["source"]),[[P]])]}),_:1})]),_:1})]),_:1},8,["xl","lg"])]),_:1})]),_:1},8,["spinning"]))}}},xe=K(de,[["__scopeId","data-v-86862277"]]);export{xe as default};
