import{U as P,r as g,a9 as T,m as C,D as G,a4 as f,P as s,o as l,e as u,c as r,x as t,aY as H,R as _,H as m,u as p,F as h,I as w,K as b,aZ as K,y as Y}from"./index-e5f98006.js";import{u as Z}from"./userDatabase-7f583093.js";import{d as v}from"./database-34ce09a3.js";const j={class:"dataspace-container"},q={key:1},z={key:2},J={key:3},ea={__name:"DataSpace",setup(Q){const{t:a}=P(),x=g(!0),D=T(),R=Z(),d=C({columns:[{name:a("workspace.dataSpace.database_name"),dataIndex:"name",key:"name"},{title:a("common.status"),dataIndex:"status",key:"status",width:"200px"},{title:a("common.tags"),key:"tags",dataIndex:"tags",width:"200px"},{title:a("common.action"),key:"action",width:"200px"}],data:[],hoverRowVid:null,customRow:n=>({style:{cursor:"pointer"},onClick:async e=>{(e.target.classList.contains("ant-table-cell")||e.target.classList.contains("database-title"))&&await D.push(`/data/${n.vid}`)},onMouseenter:e=>{d.hoverRowVid=n.vid},onMouseleave:e=>{d.hoverRowVid=null}})}),y=async()=>{const n=await v("list",{});n.status==200?(R.setUserDatabases(n.data),d.data=n.data.map(e=>({...e,color:H[e.status],tags:[]})),x.value=!1):f.error(n.msg)};G(async()=>{await y()});const o=C({open:g(!1),creating:g(!1),create:async()=>{o.creating=!0,(await v("create",{name:o.databaseName})).status===200?f.success(a("workspace.dataSpace.create_success")):f.error(a("workspace.dataSpace.create_failed")),await y(),o.creating=!1,o.open=!1}}),N=async n=>{(await v("delete",{vid:n})).status===200?f.success(a("workspace.dataSpace.delete_success")):f.error(a("workspace.dataSpace.delete_failed")),await y()};return(n,e)=>{const I=s("a-button"),L=s("a-input"),U=s("a-form-item"),V=s("a-modal"),M=s("a-typography-text"),S=s("a-tag"),B=s("a-typography-link"),$=s("a-popconfirm"),O=s("a-table"),A=s("a-card"),E=s("a-col"),F=s("a-row");return l(),u("div",j,[r(F,{align:"center",gutter:[16,16]},{default:t(()=>[r(E,{xl:16,lg:18,md:20,sm:22,xs:24},{default:t(()=>[r(A,{loading:x.value},{extra:t(()=>[r(I,{type:"primary",onClick:e[0]||(e[0]=c=>o.open=!0)},{default:t(()=>[_(m(p(a)("workspace.dataSpace.create")),1)]),_:1}),r(V,{open:o.open,"onUpdate:open":e[2]||(e[2]=c=>o.open=c),title:p(a)("workspace.dataSpace.create"),onOk:o.create,confirmLoading:o.creating},{default:t(()=>[r(U,{label:p(a)("workspace.dataSpace.database_name")},{default:t(()=>[r(L,{value:o.databaseName,"onUpdate:value":e[1]||(e[1]=c=>o.databaseName=c)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["open","title","onOk","confirmLoading"])]),default:t(()=>[r(O,{columns:d.columns,customRow:d.customRow,"data-source":d.data},{headerCell:t(({column:c})=>[c.key==="name"?(l(),u(h,{key:0},[_(m(p(a)("workspace.dataSpace.database_name")),1)],64)):w("",!0)]),bodyCell:t(({column:c,record:i})=>[c.key==="name"?(l(),b(M,{key:0,class:"database-title"},{default:t(()=>[_(m(i.name),1)]),_:2},1024)):c.key==="status"?(l(),u("span",q,[r(S,{color:i.color},{default:t(()=>[i.status==="CREATING"?(l(),b(p(K),{key:0})):w("",!0),_(" "+m(p(a)(`workspace.dataSpace.status_${i.status.toLowerCase()}`)),1)]),_:2},1032,["color"])])):c.key==="tags"?(l(),u("span",z,[(l(!0),u(h,null,Y(i.tags,k=>(l(),b(S,{key:k},{default:t(()=>[_(m(k.toUpperCase()),1)]),_:2},1024))),128))])):c.key==="action"?(l(),u("span",J,[r($,{title:p(a)("workspace.dataSpace.delete_confirm"),onConfirm:k=>N(i.vid)},{default:t(()=>[r(B,{type:"danger"},{default:t(()=>[_(m(p(a)("common.delete")),1)]),_:1})]),_:2},1032,["title","onConfirm"])])):w("",!0)]),_:1},8,["columns","customRow","data-source"])]),_:1},8,["loading"])]),_:1})]),_:1})])}}};export{ea as default};
