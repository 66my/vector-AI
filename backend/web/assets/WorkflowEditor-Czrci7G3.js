import{I as Xt,c as m,d as Ip,e as uu,w as Te,g as Gn,r as ut,a as Se,i as On,p as In,b as Me,u as cu,o as fl,f as k,h as Z,j as S,k as Ve,l as du,m as Ea,n as _o,t as pu,q as Vp,s as F,v as wt,x as Fr,y as Ue,z as bn,A as et,B as w,C as De,D as J,E as ce,F as ye,G as Xe,H as lt,J as Lr,K as A,L as Re,M,N as zn,O as fu,P as qe,Q as Ap,R as hl,S as Tn,T as ne,U as hu,V as mu,_ as wn,W as Ye,X as Xp,Y as Vn,Z as An,$ as pt,a0 as Qt,a1 as Up,a2 as Wp,a3 as Io,a4 as go,a5 as jp,a6 as vu,a7 as Fp,a8 as Lp,a9 as Gp,aa as Bp,ab as Hp,ac as Yp}from"./index-DwTab_5X.js";import{D as Gr}from"./Delete-DkwO9RIL.js";import{_ as Zp}from"./QuestionPopover-D3aRTgcE.js";import{_ as Br,R as Vo,A as Xn,g as Hr,n as Yr,L as Jp,a as Kp,b as ef,c as tf}from"./TextOutput-Cxghmkw6.js";import{E as so}from"./Edit-C0BO63Nx.js";import{C as nf,a as of,T as af}from"./TagOne-CBmfNm2W.js";import{u as ml,a as Jo}from"./userDatabase-BoM4Lkmx.js";import{r as _u,d as lf,a as rf}from"./database-CjPJb4LT.js";import{s as gu,t as we,L as yu,a as Ou,b as bu,i as wu,c as ki,f as Su,d as xu,E as vl,C as sf,e as uf,g as cf,h as ql,I as df,j as pf,N as ff,k as jt,l as hf,o as Ti,T as mf}from"./vue-codemirror.esm-zV-nR_zX.js";import{w as $u,a as cr,u as vf,b as _f,c as gf}from"./userWorkflows-Bs4ZbHGJ.js";import{T as yf}from"./Time-DvTUddU7.js";import{_ as ku}from"./UploaderFieldUse-CODWy40m.js";import{h as ia}from"./util-CDdHKGWf.js";import{S as Of}from"./Save-C9pS6hR5.js";import{u as bf}from"./stringify-DnirLPRY.js";const wf=Xt("bookmark-one",!0,function(e){return m("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[m("path",{d:"M34 10V4H8V38L14 35",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),m("path",{d:"M14 44V10H40V44L27 37.7273L14 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),Ei=Xt("caution",!1,function(e){return m("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 5L2 43H46L24 5Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),m("path",{d:"M24 35V36",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),m("path",{d:"M24 19.0005L24.0083 29",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null)])}),Sf=Xt("check-one",!0,function(e){return m("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[m("path",{d:"M24 44C29.5228 44 34.5228 41.7614 38.1421 38.1421C41.7614 34.5228 44 29.5228 44 24C44 18.4772 41.7614 13.4772 38.1421 9.85786C34.5228 6.23858 29.5228 4 24 4C18.4772 4 13.4772 6.23858 9.85786 9.85786C6.23858 13.4772 4 18.4772 4 24C4 29.5228 6.23858 34.5228 9.85786 38.1421C13.4772 41.7614 18.4772 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),m("path",{d:"M16 24L22 30L34 18",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),xf=Xt("code",!0,function(e){return m("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[m("path",{d:"M16 13L4 25.4322L16 37",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),m("path",{d:"M32 13L44 25.4322L32 37",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),m("path",{d:"M28 4L21 44",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null)])}),Rl=Xt("direction-adjustment-three",!1,function(e){return m("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[m("path",{d:"M18 10L24 4M24 4L30 10M24 4V24M24 24V44M24 24H44M24 24H4M18 38L24 44M24 44L30 38M38 18L44 24M44 24L38 30M10 18L4 24M4 24L10 30",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),$f=Xt("file-code",!0,function(e){return m("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[m("path",{d:"M10 44H38C39.1046 44 40 43.1046 40 42V14H30V4H10C8.89543 4 8 4.89543 8 6V42C8 43.1046 8.89543 44 10 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),m("path",{d:"M30 4L40 14",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),m("path",{d:"M27 24L32 29L27 34",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),m("path",{d:"M21 24L16 29L21 34",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),kf=Xt("left",!0,function(e){return m("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[m("path",{d:"M31 36L19 24L31 12",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Tf=Xt("preview-close-one",!0,function(e){return m("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[m("path",{d:"M9.85786 18C6.23858 21 4 24 4 24C4 24 12.9543 36 24 36C25.3699 36 26.7076 35.8154 28 35.4921M20.0318 12.5C21.3144 12.1816 22.6414 12 24 12C35.0457 12 44 24 44 24C44 24 41.7614 27 38.1421 30",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),m("path",{d:"M20.3142 20.6211C19.4981 21.5109 19 22.6972 19 23.9998C19 26.7612 21.2386 28.9998 24 28.9998C25.3627 28.9998 26.5981 28.4546 27.5 27.5705",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),m("path",{d:"M42 42L6 6",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),Ef=Xt("preview-open",!1,function(e){return m("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[m("path",{d:"M24 36C35.0457 36 44 24 44 24C44 24 35.0457 12 24 12C12.9543 12 4 24 4 24C4 24 12.9543 36 24 36Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),m("path",{d:"M24 29C26.7614 29 29 26.7614 29 24C29 21.2386 26.7614 19 24 19C21.2386 19 19 21.2386 19 24C19 26.7614 21.2386 29 24 29Z",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),Tu=Xt("refresh",!0,function(e){return m("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[m("path",{d:"M42 8V24",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),m("path",{d:"M6 24L6 40",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),m("path",{d:"M42 24C42 14.0589 33.9411 6 24 6C18.9145 6 14.3216 8.10896 11.0481 11.5M6 24C6 33.9411 14.0589 42 24 42C28.8556 42 33.2622 40.0774 36.5 36.9519",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),_l=Ip("nodeMessages",{state:()=>({nodeMessages:[],nodeMessagesCount:0}),actions:{push(e){this.nodeMessages.push(e),this.nodeMessagesCount=this.nodeMessages.length},pop(){const e=this.nodeMessages.pop();return this.nodeMessagesCount=this.nodeMessages.length,e}}});function gl(e){return du()?(Ea(e),!0):!1}function Jt(e){return typeof e=="function"?e():w(e)}const Qf=typeof window<"u"&&typeof document<"u",Pf=e=>typeof e<"u",Df=Object.prototype.toString,Cf=e=>Df.call(e)==="[object Object]",zf=()=>{};function Nf(e,t){function n(...o){return new Promise((a,l)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(a).catch(l)})}return n}const Eu=e=>e();function qf(e=Eu){const t=F(!0);function n(){t.value=!1}function o(){t.value=!0}const a=(...l)=>{t.value&&e(...l)};return{isActive:Ap(t),pause:n,resume:o,eventFilter:a}}function Qi(e,t=!1,n="Timeout"){return new Promise((o,a)=>{setTimeout(t?()=>a(n):o,e)})}function Rf(e,t,n={}){const{eventFilter:o=Eu,...a}=n;return Te(e,Nf(o,t),a)}function Hn(e,t,n={}){const{eventFilter:o,...a}=n,{eventFilter:l,pause:r,resume:i,isActive:s}=qf(o);return{stop:Rf(e,t,{...a,eventFilter:l}),pause:r,resume:i,isActive:s}}function Mf(e,t={}){if(!_o(e))return pu(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=Vp(()=>({get(){return e.value[o]},set(a){var l;if((l=Jt(t.replaceRef))!=null?l:!0)if(Array.isArray(e.value)){const i=[...e.value];i[o]=a,e.value=i}else{const i={...e.value,[o]:a};Object.setPrototypeOf(i,Object.getPrototypeOf(e.value)),e.value=i}else e.value[o]=a}}));return n}function dr(e,t=!1){function n(d,{flush:f="sync",deep:p=!1,timeout:_,throwOnTimeout:b}={}){let h=null;const T=[new Promise(Q=>{h=Te(e,y=>{d(y)!==t&&(h==null||h(),Q(y))},{flush:f,deep:p,immediate:!0})})];return _!=null&&T.push(Qi(_,b).then(()=>Jt(e)).finally(()=>h==null?void 0:h())),Promise.race(T)}function o(d,f){if(!_o(d))return n(y=>y===d,f);const{flush:p="sync",deep:_=!1,timeout:b,throwOnTimeout:h}=f??{};let v=null;const Q=[new Promise(y=>{v=Te([e,d],([$,E])=>{t!==($===E)&&(v==null||v(),y($))},{flush:p,deep:_,immediate:!0})})];return b!=null&&Q.push(Qi(b,h).then(()=>Jt(e)).finally(()=>(v==null||v(),Jt(e)))),Promise.race(Q)}function a(d){return n(f=>!!f,d)}function l(d){return o(null,d)}function r(d){return o(void 0,d)}function i(d){return n(Number.isNaN,d)}function s(d,f){return n(p=>{const _=Array.from(p);return _.includes(d)||_.includes(Jt(d))},f)}function u(d){return c(1,d)}function c(d=1,f){let p=-1;return n(()=>(p+=1,p>=d),f)}return Array.isArray(Jt(e))?{toMatch:n,toContains:s,changed:u,changedTimes:c,get not(){return dr(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:a,toBeNull:l,toBeNaN:i,toBeUndefined:r,changed:u,changedTimes:c,get not(){return dr(e,!t)}}}function Fa(e){return dr(e)}function If(e){var t;const n=Jt(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Qu=Qf?window:void 0;function Pu(...e){let t,n,o,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,a]=e,t=Qu):[t,n,o,a]=e,!t)return zf;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const l=[],r=()=>{l.forEach(c=>c()),l.length=0},i=(c,d,f,p)=>(c.addEventListener(d,f,p),()=>c.removeEventListener(d,f,p)),s=Te(()=>[If(t),Jt(a)],([c,d])=>{if(r(),!c)return;const f=Cf(d)?{...d}:d;l.push(...n.flatMap(p=>o.map(_=>i(c,p,_,f))))},{immediate:!0,flush:"post"}),u=()=>{s(),r()};return gl(u),u}function Vf(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Pi(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:a=Qu,eventName:l="keydown",passive:r=!1,dedupe:i=!1}=o,s=Vf(t);return Pu(a,l,c=>{c.repeat&&Jt(i)||s(c)&&n(c)},r)}function Af(e){return JSON.parse(JSON.stringify(e))}function Po(e,t,n,o={}){var a,l,r;const{clone:i=!1,passive:s=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:f}=o,p=Gn(),_=n||(p==null?void 0:p.emit)||((a=p==null?void 0:p.$emit)==null?void 0:a.bind(p))||((r=(l=p==null?void 0:p.proxy)==null?void 0:l.$emit)==null?void 0:r.bind(p==null?void 0:p.proxy));let b=u;t||(t="modelValue"),b=b||`update:${t.toString()}`;const h=Q=>i?typeof i=="function"?i(Q):Af(Q):Q,v=()=>Pf(e[t])?h(e[t]):d,T=Q=>{f?f(Q)&&_(b,Q):_(b,Q)};if(s){const Q=v(),y=F(Q);let $=!1;return Te(()=>e[t],E=>{$||($=!0,y.value=h(E),wt(()=>$=!1))}),Te(y,E=>{!$&&(E!==e[t]||c)&&T(E)},{deep:c}),y}else return Se({get(){return v()},set(Q){T(Q)}})}var Xf={value:()=>{}};function yl(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Qa(n)}function Qa(e){this._=e}function Uf(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",a=n.indexOf(".");if(a>=0&&(o=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Qa.prototype=yl.prototype={constructor:Qa,on:function(e,t){var n=this._,o=Uf(e+"",n),a,l=-1,r=o.length;if(arguments.length<2){for(;++l<r;)if((a=(e=o[l]).type)&&(a=Wf(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<r;)if(a=(e=o[l]).type)n[a]=Di(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Di(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Qa(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),o=0,a,l;o<a;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],o=0,a=l.length;o<a;++o)l[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],a=0,l=o.length;a<l;++a)o[a].value.apply(t,n)}};function Wf(e,t){for(var n=0,o=e.length,a;n<o;++n)if((a=e[n]).name===t)return a.value}function Di(e,t,n){for(var o=0,a=e.length;o<a;++o)if(e[o].name===t){e[o]=Xf,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var pr="http://www.w3.org/1999/xhtml";const Ci={svg:"http://www.w3.org/2000/svg",xhtml:pr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ol(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ci.hasOwnProperty(t)?{space:Ci[t],local:e}:e}function jf(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===pr&&t.documentElement.namespaceURI===pr?t.createElement(e):t.createElementNS(n,e)}}function Ff(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Du(e){var t=Ol(e);return(t.local?Ff:jf)(t)}function Lf(){}function Zr(e){return e==null?Lf:function(){return this.querySelector(e)}}function Gf(e){typeof e!="function"&&(e=Zr(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var l=t[a],r=l.length,i=o[a]=new Array(r),s,u,c=0;c<r;++c)(s=l[c])&&(u=e.call(s,s.__data__,c,l))&&("__data__"in s&&(u.__data__=s.__data__),i[c]=u);return new yt(o,this._parents)}function Bf(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Hf(){return[]}function Cu(e){return e==null?Hf:function(){return this.querySelectorAll(e)}}function Yf(e){return function(){return Bf(e.apply(this,arguments))}}function Zf(e){typeof e=="function"?e=Yf(e):e=Cu(e);for(var t=this._groups,n=t.length,o=[],a=[],l=0;l<n;++l)for(var r=t[l],i=r.length,s,u=0;u<i;++u)(s=r[u])&&(o.push(e.call(s,s.__data__,u,r)),a.push(s));return new yt(o,a)}function zu(e){return function(){return this.matches(e)}}function Nu(e){return function(t){return t.matches(e)}}var Jf=Array.prototype.find;function Kf(e){return function(){return Jf.call(this.children,e)}}function eh(){return this.firstElementChild}function th(e){return this.select(e==null?eh:Kf(typeof e=="function"?e:Nu(e)))}var nh=Array.prototype.filter;function oh(){return Array.from(this.children)}function ah(e){return function(){return nh.call(this.children,e)}}function lh(e){return this.selectAll(e==null?oh:ah(typeof e=="function"?e:Nu(e)))}function rh(e){typeof e!="function"&&(e=zu(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var l=t[a],r=l.length,i=o[a]=[],s,u=0;u<r;++u)(s=l[u])&&e.call(s,s.__data__,u,l)&&i.push(s);return new yt(o,this._parents)}function qu(e){return new Array(e.length)}function ih(){return new yt(this._enter||this._groups.map(qu),this._parents)}function La(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}La.prototype={constructor:La,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function sh(e){return function(){return e}}function uh(e,t,n,o,a,l){for(var r=0,i,s=t.length,u=l.length;r<u;++r)(i=t[r])?(i.__data__=l[r],o[r]=i):n[r]=new La(e,l[r]);for(;r<s;++r)(i=t[r])&&(a[r]=i)}function ch(e,t,n,o,a,l,r){var i,s,u=new Map,c=t.length,d=l.length,f=new Array(c),p;for(i=0;i<c;++i)(s=t[i])&&(f[i]=p=r.call(s,s.__data__,i,t)+"",u.has(p)?a[i]=s:u.set(p,s));for(i=0;i<d;++i)p=r.call(e,l[i],i,l)+"",(s=u.get(p))?(o[i]=s,s.__data__=l[i],u.delete(p)):n[i]=new La(e,l[i]);for(i=0;i<c;++i)(s=t[i])&&u.get(f[i])===s&&(a[i]=s)}function dh(e){return e.__data__}function ph(e,t){if(!arguments.length)return Array.from(this,dh);var n=t?ch:uh,o=this._parents,a=this._groups;typeof e!="function"&&(e=sh(e));for(var l=a.length,r=new Array(l),i=new Array(l),s=new Array(l),u=0;u<l;++u){var c=o[u],d=a[u],f=d.length,p=fh(e.call(c,c&&c.__data__,u,o)),_=p.length,b=i[u]=new Array(_),h=r[u]=new Array(_),v=s[u]=new Array(f);n(c,d,b,h,v,p,t);for(var T=0,Q=0,y,$;T<_;++T)if(y=b[T]){for(T>=Q&&(Q=T+1);!($=h[Q])&&++Q<_;);y._next=$||null}}return r=new yt(r,o),r._enter=i,r._exit=s,r}function fh(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function hh(){return new yt(this._exit||this._groups.map(qu),this._parents)}function mh(e,t,n){var o=this.enter(),a=this,l=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?l.remove():n(l),o&&a?o.merge(a).order():a}function vh(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,a=n.length,l=o.length,r=Math.min(a,l),i=new Array(a),s=0;s<r;++s)for(var u=n[s],c=o[s],d=u.length,f=i[s]=new Array(d),p,_=0;_<d;++_)(p=u[_]||c[_])&&(f[_]=p);for(;s<a;++s)i[s]=n[s];return new yt(i,this._parents)}function _h(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],a=o.length-1,l=o[a],r;--a>=0;)(r=o[a])&&(l&&r.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(r,l),l=r);return this}function gh(e){e||(e=yh);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,a=new Array(o),l=0;l<o;++l){for(var r=n[l],i=r.length,s=a[l]=new Array(i),u,c=0;c<i;++c)(u=r[c])&&(s[c]=u);s.sort(t)}return new yt(a,this._parents).order()}function yh(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Oh(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function bh(){return Array.from(this)}function wh(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,l=o.length;a<l;++a){var r=o[a];if(r)return r}return null}function Sh(){let e=0;for(const t of this)++e;return e}function xh(){return!this.node()}function $h(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var a=t[n],l=0,r=a.length,i;l<r;++l)(i=a[l])&&e.call(i,i.__data__,l,a);return this}function kh(e){return function(){this.removeAttribute(e)}}function Th(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Eh(e,t){return function(){this.setAttribute(e,t)}}function Qh(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ph(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Dh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ch(e,t){var n=Ol(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Th:kh:typeof t=="function"?n.local?Dh:Ph:n.local?Qh:Eh)(n,t))}function Ru(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function zh(e){return function(){this.style.removeProperty(e)}}function Nh(e,t,n){return function(){this.style.setProperty(e,t,n)}}function qh(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Rh(e,t,n){return arguments.length>1?this.each((t==null?zh:typeof t=="function"?qh:Nh)(e,t,n??"")):uo(this.node(),e)}function uo(e,t){return e.style.getPropertyValue(t)||Ru(e).getComputedStyle(e,null).getPropertyValue(t)}function Mh(e){return function(){delete this[e]}}function Ih(e,t){return function(){this[e]=t}}function Vh(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ah(e,t){return arguments.length>1?this.each((t==null?Mh:typeof t=="function"?Vh:Ih)(e,t)):this.node()[e]}function Mu(e){return e.trim().split(/^|\s+/)}function Jr(e){return e.classList||new Iu(e)}function Iu(e){this._node=e,this._names=Mu(e.getAttribute("class")||"")}Iu.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Vu(e,t){for(var n=Jr(e),o=-1,a=t.length;++o<a;)n.add(t[o])}function Au(e,t){for(var n=Jr(e),o=-1,a=t.length;++o<a;)n.remove(t[o])}function Xh(e){return function(){Vu(this,e)}}function Uh(e){return function(){Au(this,e)}}function Wh(e,t){return function(){(t.apply(this,arguments)?Vu:Au)(this,e)}}function jh(e,t){var n=Mu(e+"");if(arguments.length<2){for(var o=Jr(this.node()),a=-1,l=n.length;++a<l;)if(!o.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?Wh:t?Xh:Uh)(n,t))}function Fh(){this.textContent=""}function Lh(e){return function(){this.textContent=e}}function Gh(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Bh(e){return arguments.length?this.each(e==null?Fh:(typeof e=="function"?Gh:Lh)(e)):this.node().textContent}function Hh(){this.innerHTML=""}function Yh(e){return function(){this.innerHTML=e}}function Zh(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Jh(e){return arguments.length?this.each(e==null?Hh:(typeof e=="function"?Zh:Yh)(e)):this.node().innerHTML}function Kh(){this.nextSibling&&this.parentNode.appendChild(this)}function em(){return this.each(Kh)}function tm(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nm(){return this.each(tm)}function om(e){var t=typeof e=="function"?e:Du(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function am(){return null}function lm(e,t){var n=typeof e=="function"?e:Du(e),o=t==null?am:typeof t=="function"?t:Zr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function rm(){var e=this.parentNode;e&&e.removeChild(this)}function im(){return this.each(rm)}function sm(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function um(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cm(e){return this.select(e?um:sm)}function dm(e){return arguments.length?this.property("__data__",e):this.node().__data__}function pm(e){return function(t){e.call(this,t,this.__data__)}}function fm(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function hm(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,a=t.length,l;n<a;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++o]=l;++o?t.length=o:delete this.__on}}}function mm(e,t,n){return function(){var o=this.__on,a,l=pm(t);if(o){for(var r=0,i=o.length;r<i;++r)if((a=o[r]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=t;return}}this.addEventListener(e.type,l,n),a={type:e.type,name:e.name,value:t,listener:l,options:n},o?o.push(a):this.__on=[a]}}function vm(e,t,n){var o=fm(e+""),a,l=o.length,r;if(arguments.length<2){var i=this.node().__on;if(i){for(var s=0,u=i.length,c;s<u;++s)for(a=0,c=i[s];a<l;++a)if((r=o[a]).type===c.type&&r.name===c.name)return c.value}return}for(i=t?mm:hm,a=0;a<l;++a)this.each(i(o[a],t,n));return this}function Xu(e,t,n){var o=Ru(e),a=o.CustomEvent;typeof a=="function"?a=new a(t,n):(a=o.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function _m(e,t){return function(){return Xu(this,e,t)}}function gm(e,t){return function(){return Xu(this,e,t.apply(this,arguments))}}function ym(e,t){return this.each((typeof t=="function"?gm:_m)(e,t))}function*Om(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,l=o.length,r;a<l;++a)(r=o[a])&&(yield r)}var Uu=[null];function yt(e,t){this._groups=e,this._parents=t}function Ko(){return new yt([[document.documentElement]],Uu)}function bm(){return this}yt.prototype=Ko.prototype={constructor:yt,select:Gf,selectAll:Zf,selectChild:th,selectChildren:lh,filter:rh,data:ph,enter:ih,exit:hh,join:mh,merge:vh,selection:bm,order:_h,sort:gh,call:Oh,nodes:bh,node:wh,size:Sh,empty:xh,each:$h,attr:Ch,style:Rh,property:Ah,classed:jh,text:Bh,html:Jh,raise:em,lower:nm,append:om,insert:lm,remove:im,clone:cm,datum:dm,on:vm,dispatch:ym,[Symbol.iterator]:Om};function kt(e){return typeof e=="string"?new yt([[document.querySelector(e)]],[document.documentElement]):new yt([[e]],Uu)}function wm(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Nt(e,t){if(e=wm(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const Sm={passive:!1},Ao={capture:!0,passive:!1};function Ml(e){e.stopImmediatePropagation()}function no(e){e.preventDefault(),e.stopImmediatePropagation()}function Wu(e){var t=e.document.documentElement,n=kt(e).on("dragstart.drag",no,Ao);"onselectstart"in t?n.on("selectstart.drag",no,Ao):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ju(e,t){var n=e.document.documentElement,o=kt(e).on("dragstart.drag",null);t&&(o.on("click.drag",no,Ao),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const sa=e=>()=>e;function fr(e,{sourceEvent:t,subject:n,target:o,identifier:a,active:l,x:r,y:i,dx:s,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:i,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}fr.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function xm(e){return!e.ctrlKey&&!e.button}function $m(){return this.parentNode}function km(e,t){return t??{x:e.x,y:e.y}}function Tm(){return navigator.maxTouchPoints||"ontouchstart"in this}function Em(){var e=xm,t=$m,n=km,o=Tm,a={},l=yl("start","drag","end"),r=0,i,s,u,c,d=0;function f(y){y.on("mousedown.drag",p).filter(o).on("touchstart.drag",h).on("touchmove.drag",v,Sm).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(y,$){if(!(c||!e.call(this,y,$))){var E=Q(this,t.call(this,y,$),y,$,"mouse");E&&(kt(y.view).on("mousemove.drag",_,Ao).on("mouseup.drag",b,Ao),Wu(y.view),Ml(y),u=!1,i=y.clientX,s=y.clientY,E("start",y))}}function _(y){if(no(y),!u){var $=y.clientX-i,E=y.clientY-s;u=$*$+E*E>d}a.mouse("drag",y)}function b(y){kt(y.view).on("mousemove.drag mouseup.drag",null),ju(y.view,u),no(y),a.mouse("end",y)}function h(y,$){if(e.call(this,y,$)){var E=y.changedTouches,x=t.call(this,y,$),X=E.length,U,V;for(U=0;U<X;++U)(V=Q(this,x,y,$,E[U].identifier,E[U]))&&(Ml(y),V("start",y,E[U]))}}function v(y){var $=y.changedTouches,E=$.length,x,X;for(x=0;x<E;++x)(X=a[$[x].identifier])&&(no(y),X("drag",y,$[x]))}function T(y){var $=y.changedTouches,E=$.length,x,X;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),x=0;x<E;++x)(X=a[$[x].identifier])&&(Ml(y),X("end",y,$[x]))}function Q(y,$,E,x,X,U){var V=l.copy(),G=Nt(U||E,$),ee,B,g;if((g=n.call(y,new fr("beforestart",{sourceEvent:E,target:f,identifier:X,active:r,x:G[0],y:G[1],dx:0,dy:0,dispatch:V}),x))!=null)return ee=g.x-G[0]||0,B=g.y-G[1]||0,function D(O,q,C){var N=G,P;switch(O){case"start":a[X]=D,P=r++;break;case"end":delete a[X],--r;case"drag":G=Nt(C||q,$),P=r;break}V.call(O,y,new fr(O,{sourceEvent:q,subject:g,target:f,identifier:X,active:P,x:G[0]+ee,y:G[1]+B,dx:G[0]-N[0],dy:G[1]-N[1],dispatch:V}),x)}}return f.filter=function(y){return arguments.length?(e=typeof y=="function"?y:sa(!!y),f):e},f.container=function(y){return arguments.length?(t=typeof y=="function"?y:sa(y),f):t},f.subject=function(y){return arguments.length?(n=typeof y=="function"?y:sa(y),f):n},f.touchable=function(y){return arguments.length?(o=typeof y=="function"?y:sa(!!y),f):o},f.on=function(){var y=l.on.apply(l,arguments);return y===l?f:y},f.clickDistance=function(y){return arguments.length?(d=(y=+y)*y,f):Math.sqrt(d)},f}function Kr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Fu(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function ea(){}var Xo=.7,Ga=1/Xo,oo="\\s*([+-]?\\d+)\\s*",Uo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qm=/^#([0-9a-f]{3,8})$/,Pm=new RegExp(`^rgb\\(${oo},${oo},${oo}\\)$`),Dm=new RegExp(`^rgb\\(${Mt},${Mt},${Mt}\\)$`),Cm=new RegExp(`^rgba\\(${oo},${oo},${oo},${Uo}\\)$`),zm=new RegExp(`^rgba\\(${Mt},${Mt},${Mt},${Uo}\\)$`),Nm=new RegExp(`^hsl\\(${Uo},${Mt},${Mt}\\)$`),qm=new RegExp(`^hsla\\(${Uo},${Mt},${Mt},${Uo}\\)$`),zi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Kr(ea,Wo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ni,formatHex:Ni,formatHex8:Rm,formatHsl:Mm,formatRgb:qi,toString:qi});function Ni(){return this.rgb().formatHex()}function Rm(){return this.rgb().formatHex8()}function Mm(){return Lu(this).formatHsl()}function qi(){return this.rgb().formatRgb()}function Wo(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Qm.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ri(t):n===3?new ft(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ua(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ua(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Pm.exec(e))?new ft(t[1],t[2],t[3],1):(t=Dm.exec(e))?new ft(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Cm.exec(e))?ua(t[1],t[2],t[3],t[4]):(t=zm.exec(e))?ua(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Nm.exec(e))?Vi(t[1],t[2]/100,t[3]/100,1):(t=qm.exec(e))?Vi(t[1],t[2]/100,t[3]/100,t[4]):zi.hasOwnProperty(e)?Ri(zi[e]):e==="transparent"?new ft(NaN,NaN,NaN,0):null}function Ri(e){return new ft(e>>16&255,e>>8&255,e&255,1)}function ua(e,t,n,o){return o<=0&&(e=t=n=NaN),new ft(e,t,n,o)}function Im(e){return e instanceof ea||(e=Wo(e)),e?(e=e.rgb(),new ft(e.r,e.g,e.b,e.opacity)):new ft}function hr(e,t,n,o){return arguments.length===1?Im(e):new ft(e,t,n,o??1)}function ft(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Kr(ft,hr,Fu(ea,{brighter(e){return e=e==null?Ga:Math.pow(Ga,e),new ft(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Xo:Math.pow(Xo,e),new ft(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ft(Nn(this.r),Nn(this.g),Nn(this.b),Ba(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mi,formatHex:Mi,formatHex8:Vm,formatRgb:Ii,toString:Ii}));function Mi(){return`#${Pn(this.r)}${Pn(this.g)}${Pn(this.b)}`}function Vm(){return`#${Pn(this.r)}${Pn(this.g)}${Pn(this.b)}${Pn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ii(){const e=Ba(this.opacity);return`${e===1?"rgb(":"rgba("}${Nn(this.r)}, ${Nn(this.g)}, ${Nn(this.b)}${e===1?")":`, ${e})`}`}function Ba(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Pn(e){return e=Nn(e),(e<16?"0":"")+e.toString(16)}function Vi(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Tt(e,t,n,o)}function Lu(e){if(e instanceof Tt)return new Tt(e.h,e.s,e.l,e.opacity);if(e instanceof ea||(e=Wo(e)),!e)return new Tt;if(e instanceof Tt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,a=Math.min(t,n,o),l=Math.max(t,n,o),r=NaN,i=l-a,s=(l+a)/2;return i?(t===l?r=(n-o)/i+(n<o)*6:n===l?r=(o-t)/i+2:r=(t-n)/i+4,i/=s<.5?l+a:2-l-a,r*=60):i=s>0&&s<1?0:r,new Tt(r,i,s,e.opacity)}function Am(e,t,n,o){return arguments.length===1?Lu(e):new Tt(e,t,n,o??1)}function Tt(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Kr(Tt,Am,Fu(ea,{brighter(e){return e=e==null?Ga:Math.pow(Ga,e),new Tt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xo:Math.pow(Xo,e),new Tt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,a=2*n-o;return new ft(Il(e>=240?e-240:e+120,a,o),Il(e,a,o),Il(e<120?e+240:e-120,a,o),this.opacity)},clamp(){return new Tt(Ai(this.h),ca(this.s),ca(this.l),Ba(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ba(this.opacity);return`${e===1?"hsl(":"hsla("}${Ai(this.h)}, ${ca(this.s)*100}%, ${ca(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ai(e){return e=(e||0)%360,e<0?e+360:e}function ca(e){return Math.max(0,Math.min(1,e||0))}function Il(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Gu=e=>()=>e;function Xm(e,t){return function(n){return e+n*t}}function Um(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Wm(e){return(e=+e)==1?Bu:function(t,n){return n-t?Um(t,n,e):Gu(isNaN(t)?n:t)}}function Bu(e,t){var n=t-e;return n?Xm(e,n):Gu(isNaN(e)?t:e)}const Xi=function e(t){var n=Wm(t);function o(a,l){var r=n((a=hr(a)).r,(l=hr(l)).r),i=n(a.g,l.g),s=n(a.b,l.b),u=Bu(a.opacity,l.opacity);return function(c){return a.r=r(c),a.g=i(c),a.b=s(c),a.opacity=u(c),a+""}}return o.gamma=e,o}(1);function pn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var mr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vl=new RegExp(mr.source,"g");function jm(e){return function(){return e}}function Fm(e){return function(t){return e(t)+""}}function Lm(e,t){var n=mr.lastIndex=Vl.lastIndex=0,o,a,l,r=-1,i=[],s=[];for(e=e+"",t=t+"";(o=mr.exec(e))&&(a=Vl.exec(t));)(l=a.index)>n&&(l=t.slice(n,l),i[r]?i[r]+=l:i[++r]=l),(o=o[0])===(a=a[0])?i[r]?i[r]+=a:i[++r]=a:(i[++r]=null,s.push({i:r,x:pn(o,a)})),n=Vl.lastIndex;return n<t.length&&(l=t.slice(n),i[r]?i[r]+=l:i[++r]=l),i.length<2?s[0]?Fm(s[0].x):jm(t):(t=s.length,function(u){for(var c=0,d;c<t;++c)i[(d=s[c]).i]=d.x(u);return i.join("")})}var Ui=180/Math.PI,vr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Hu(e,t,n,o,a,l){var r,i,s;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(i=Math.sqrt(n*n+o*o))&&(n/=i,o/=i,s/=i),e*o<t*n&&(e=-e,t=-t,s=-s,r=-r),{translateX:a,translateY:l,rotate:Math.atan2(t,e)*Ui,skewX:Math.atan(s)*Ui,scaleX:r,scaleY:i}}var da;function Gm(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?vr:Hu(t.a,t.b,t.c,t.d,t.e,t.f)}function Bm(e){return e==null||(da||(da=document.createElementNS("http://www.w3.org/2000/svg","g")),da.setAttribute("transform",e),!(e=da.transform.baseVal.consolidate()))?vr:(e=e.matrix,Hu(e.a,e.b,e.c,e.d,e.e,e.f))}function Yu(e,t,n,o){function a(u){return u.length?u.pop()+" ":""}function l(u,c,d,f,p,_){if(u!==d||c!==f){var b=p.push("translate(",null,t,null,n);_.push({i:b-4,x:pn(u,d)},{i:b-2,x:pn(c,f)})}else(d||f)&&p.push("translate("+d+t+f+n)}function r(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(a(d)+"rotate(",null,o)-2,x:pn(u,c)})):c&&d.push(a(d)+"rotate("+c+o)}function i(u,c,d,f){u!==c?f.push({i:d.push(a(d)+"skewX(",null,o)-2,x:pn(u,c)}):c&&d.push(a(d)+"skewX("+c+o)}function s(u,c,d,f,p,_){if(u!==d||c!==f){var b=p.push(a(p)+"scale(",null,",",null,")");_.push({i:b-4,x:pn(u,d)},{i:b-2,x:pn(c,f)})}else(d!==1||f!==1)&&p.push(a(p)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),l(u.translateX,u.translateY,c.translateX,c.translateY,d,f),r(u.rotate,c.rotate,d,f),i(u.skewX,c.skewX,d,f),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(p){for(var _=-1,b=f.length,h;++_<b;)d[(h=f[_]).i]=h.x(p);return d.join("")}}}var Hm=Yu(Gm,"px, ","px)","deg)"),Ym=Yu(Bm,", ",")",")"),Zm=1e-12;function Wi(e){return((e=Math.exp(e))+1/e)/2}function Jm(e){return((e=Math.exp(e))-1/e)/2}function Km(e){return((e=Math.exp(2*e))-1)/(e+1)}const ev=function e(t,n,o){function a(l,r){var i=l[0],s=l[1],u=l[2],c=r[0],d=r[1],f=r[2],p=c-i,_=d-s,b=p*p+_*_,h,v;if(b<Zm)v=Math.log(f/u)/t,h=function(x){return[i+x*p,s+x*_,u*Math.exp(t*x*v)]};else{var T=Math.sqrt(b),Q=(f*f-u*u+o*b)/(2*u*n*T),y=(f*f-u*u-o*b)/(2*f*n*T),$=Math.log(Math.sqrt(Q*Q+1)-Q),E=Math.log(Math.sqrt(y*y+1)-y);v=(E-$)/t,h=function(x){var X=x*v,U=Wi($),V=u/(n*T)*(U*Km(t*X+$)-Jm($));return[i+V*p,s+V*_,u*U/Wi(t*X+$)]}}return h.duration=v*1e3*t/Math.SQRT2,h}return a.rho=function(l){var r=Math.max(.001,+l),i=r*r,s=i*i;return e(r,i,s)},a}(Math.SQRT2,2,4);var co=0,So=0,yo=0,Zu=1e3,Ha,xo,Ya=0,Un=0,bl=0,jo=typeof performance=="object"&&performance.now?performance:Date,Ju=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ei(){return Un||(Ju(tv),Un=jo.now()+bl)}function tv(){Un=0}function Za(){this._call=this._time=this._next=null}Za.prototype=Ku.prototype={constructor:Za,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ei():+n)+(t==null?0:+t),!this._next&&xo!==this&&(xo?xo._next=this:Ha=this,xo=this),this._call=e,this._time=n,_r()},stop:function(){this._call&&(this._call=null,this._time=1/0,_r())}};function Ku(e,t,n){var o=new Za;return o.restart(e,t,n),o}function nv(){ei(),++co;for(var e=Ha,t;e;)(t=Un-e._time)>=0&&e._call.call(void 0,t),e=e._next;--co}function ji(){Un=(Ya=jo.now())+bl,co=So=0;try{nv()}finally{co=0,av(),Un=0}}function ov(){var e=jo.now(),t=e-Ya;t>Zu&&(bl-=t,Ya=e)}function av(){for(var e,t=Ha,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ha=n);xo=e,_r(o)}function _r(e){if(!co){So&&(So=clearTimeout(So));var t=e-Un;t>24?(e<1/0&&(So=setTimeout(ji,e-jo.now()-bl)),yo&&(yo=clearInterval(yo))):(yo||(Ya=jo.now(),yo=setInterval(ov,Zu)),co=1,Ju(ji))}}function Fi(e,t,n){var o=new Za;return t=t==null?0:+t,o.restart(a=>{o.stop(),e(a+t)},t,n),o}var lv=yl("start","end","cancel","interrupt"),rv=[],ec=0,Li=1,gr=2,Pa=3,Gi=4,yr=5,Da=6;function wl(e,t,n,o,a,l){var r=e.__transition;if(!r)e.__transition={};else if(n in r)return;iv(e,n,{name:t,index:o,group:a,on:lv,tween:rv,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:ec})}function ti(e,t){var n=Pt(e,t);if(n.state>ec)throw new Error("too late; already scheduled");return n}function Ut(e,t){var n=Pt(e,t);if(n.state>Pa)throw new Error("too late; already running");return n}function Pt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function iv(e,t,n){var o=e.__transition,a;o[t]=n,n.timer=Ku(l,0,n.time);function l(u){n.state=Li,n.timer.restart(r,n.delay,n.time),n.delay<=u&&r(u-n.delay)}function r(u){var c,d,f,p;if(n.state!==Li)return s();for(c in o)if(p=o[c],p.name===n.name){if(p.state===Pa)return Fi(r);p.state===Gi?(p.state=Da,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[c]):+c<t&&(p.state=Da,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete o[c])}if(Fi(function(){n.state===Pa&&(n.state=Gi,n.timer.restart(i,n.delay,n.time),i(u))}),n.state=gr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===gr){for(n.state=Pa,a=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(a[++d]=p);a.length=d+1}}function i(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=yr,1),d=-1,f=a.length;++d<f;)a[d].call(e,c);n.state===yr&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Da,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Ca(e,t){var n=e.__transition,o,a,l=!0,r;if(n){t=t==null?null:t+"";for(r in n){if((o=n[r]).name!==t){l=!1;continue}a=o.state>gr&&o.state<yr,o.state=Da,o.timer.stop(),o.on.call(a?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[r]}l&&delete e.__transition}}function sv(e){return this.each(function(){Ca(this,e)})}function uv(e,t){var n,o;return function(){var a=Ut(this,e),l=a.tween;if(l!==n){o=n=l;for(var r=0,i=o.length;r<i;++r)if(o[r].name===t){o=o.slice(),o.splice(r,1);break}}a.tween=o}}function cv(e,t,n){var o,a;if(typeof n!="function")throw new Error;return function(){var l=Ut(this,e),r=l.tween;if(r!==o){a=(o=r).slice();for(var i={name:t,value:n},s=0,u=a.length;s<u;++s)if(a[s].name===t){a[s]=i;break}s===u&&a.push(i)}l.tween=a}}function dv(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Pt(this.node(),n).tween,a=0,l=o.length,r;a<l;++a)if((r=o[a]).name===e)return r.value;return null}return this.each((t==null?uv:cv)(n,e,t))}function ni(e,t,n){var o=e._id;return e.each(function(){var a=Ut(this,o);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Pt(a,o).value[t]}}function tc(e,t){var n;return(typeof t=="number"?pn:t instanceof Wo?Xi:(n=Wo(t))?(t=n,Xi):Lm)(e,t)}function pv(e){return function(){this.removeAttribute(e)}}function fv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hv(e,t,n){var o,a=n+"",l;return function(){var r=this.getAttribute(e);return r===a?null:r===o?l:l=t(o=r,n)}}function mv(e,t,n){var o,a=n+"",l;return function(){var r=this.getAttributeNS(e.space,e.local);return r===a?null:r===o?l:l=t(o=r,n)}}function vv(e,t,n){var o,a,l;return function(){var r,i=n(this),s;return i==null?void this.removeAttribute(e):(r=this.getAttribute(e),s=i+"",r===s?null:r===o&&s===a?l:(a=s,l=t(o=r,i)))}}function _v(e,t,n){var o,a,l;return function(){var r,i=n(this),s;return i==null?void this.removeAttributeNS(e.space,e.local):(r=this.getAttributeNS(e.space,e.local),s=i+"",r===s?null:r===o&&s===a?l:(a=s,l=t(o=r,i)))}}function gv(e,t){var n=Ol(e),o=n==="transform"?Ym:tc;return this.attrTween(e,typeof t=="function"?(n.local?_v:vv)(n,o,ni(this,"attr."+e,t)):t==null?(n.local?fv:pv)(n):(n.local?mv:hv)(n,o,t))}function yv(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Ov(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function bv(e,t){var n,o;function a(){var l=t.apply(this,arguments);return l!==o&&(n=(o=l)&&Ov(e,l)),n}return a._value=t,a}function wv(e,t){var n,o;function a(){var l=t.apply(this,arguments);return l!==o&&(n=(o=l)&&yv(e,l)),n}return a._value=t,a}function Sv(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Ol(e);return this.tween(n,(o.local?bv:wv)(o,t))}function xv(e,t){return function(){ti(this,e).delay=+t.apply(this,arguments)}}function $v(e,t){return t=+t,function(){ti(this,e).delay=t}}function kv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xv:$v)(t,e)):Pt(this.node(),t).delay}function Tv(e,t){return function(){Ut(this,e).duration=+t.apply(this,arguments)}}function Ev(e,t){return t=+t,function(){Ut(this,e).duration=t}}function Qv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Tv:Ev)(t,e)):Pt(this.node(),t).duration}function Pv(e,t){if(typeof t!="function")throw new Error;return function(){Ut(this,e).ease=t}}function Dv(e){var t=this._id;return arguments.length?this.each(Pv(t,e)):Pt(this.node(),t).ease}function Cv(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ut(this,e).ease=n}}function zv(e){if(typeof e!="function")throw new Error;return this.each(Cv(this._id,e))}function Nv(e){typeof e!="function"&&(e=zu(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var l=t[a],r=l.length,i=o[a]=[],s,u=0;u<r;++u)(s=l[u])&&e.call(s,s.__data__,u,l)&&i.push(s);return new nn(o,this._parents,this._name,this._id)}function qv(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,a=n.length,l=Math.min(o,a),r=new Array(o),i=0;i<l;++i)for(var s=t[i],u=n[i],c=s.length,d=r[i]=new Array(c),f,p=0;p<c;++p)(f=s[p]||u[p])&&(d[p]=f);for(;i<o;++i)r[i]=t[i];return new nn(r,this._parents,this._name,this._id)}function Rv(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Mv(e,t,n){var o,a,l=Rv(t)?ti:Ut;return function(){var r=l(this,e),i=r.on;i!==o&&(a=(o=i).copy()).on(t,n),r.on=a}}function Iv(e,t){var n=this._id;return arguments.length<2?Pt(this.node(),n).on.on(e):this.each(Mv(n,e,t))}function Vv(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Av(){return this.on("end.remove",Vv(this._id))}function Xv(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Zr(e));for(var o=this._groups,a=o.length,l=new Array(a),r=0;r<a;++r)for(var i=o[r],s=i.length,u=l[r]=new Array(s),c,d,f=0;f<s;++f)(c=i[f])&&(d=e.call(c,c.__data__,f,i))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,wl(u[f],t,n,f,u,Pt(c,n)));return new nn(l,this._parents,t,n)}function Uv(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Cu(e));for(var o=this._groups,a=o.length,l=[],r=[],i=0;i<a;++i)for(var s=o[i],u=s.length,c,d=0;d<u;++d)if(c=s[d]){for(var f=e.call(c,c.__data__,d,s),p,_=Pt(c,n),b=0,h=f.length;b<h;++b)(p=f[b])&&wl(p,t,n,b,f,_);l.push(f),r.push(c)}return new nn(l,r,t,n)}var Wv=Ko.prototype.constructor;function jv(){return new Wv(this._groups,this._parents)}function Fv(e,t){var n,o,a;return function(){var l=uo(this,e),r=(this.style.removeProperty(e),uo(this,e));return l===r?null:l===n&&r===o?a:a=t(n=l,o=r)}}function nc(e){return function(){this.style.removeProperty(e)}}function Lv(e,t,n){var o,a=n+"",l;return function(){var r=uo(this,e);return r===a?null:r===o?l:l=t(o=r,n)}}function Gv(e,t,n){var o,a,l;return function(){var r=uo(this,e),i=n(this),s=i+"";return i==null&&(s=i=(this.style.removeProperty(e),uo(this,e))),r===s?null:r===o&&s===a?l:(a=s,l=t(o=r,i))}}function Bv(e,t){var n,o,a,l="style."+t,r="end."+l,i;return function(){var s=Ut(this,e),u=s.on,c=s.value[l]==null?i||(i=nc(t)):void 0;(u!==n||a!==c)&&(o=(n=u).copy()).on(r,a=c),s.on=o}}function Hv(e,t,n){var o=(e+="")=="transform"?Hm:tc;return t==null?this.styleTween(e,Fv(e,o)).on("end.style."+e,nc(e)):typeof t=="function"?this.styleTween(e,Gv(e,o,ni(this,"style."+e,t))).each(Bv(this._id,e)):this.styleTween(e,Lv(e,o,t),n).on("end.style."+e,null)}function Yv(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Zv(e,t,n){var o,a;function l(){var r=t.apply(this,arguments);return r!==a&&(o=(a=r)&&Yv(e,r,n)),o}return l._value=t,l}function Jv(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Zv(e,t,n??""))}function Kv(e){return function(){this.textContent=e}}function e_(e){return function(){var t=e(this);this.textContent=t??""}}function t_(e){return this.tween("text",typeof e=="function"?e_(ni(this,"text",e)):Kv(e==null?"":e+""))}function n_(e){return function(t){this.textContent=e.call(this,t)}}function o_(e){var t,n;function o(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&n_(a)),t}return o._value=e,o}function a_(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,o_(e))}function l_(){for(var e=this._name,t=this._id,n=oc(),o=this._groups,a=o.length,l=0;l<a;++l)for(var r=o[l],i=r.length,s,u=0;u<i;++u)if(s=r[u]){var c=Pt(s,t);wl(s,e,n,u,r,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new nn(o,this._parents,e,n)}function r_(){var e,t,n=this,o=n._id,a=n.size();return new Promise(function(l,r){var i={value:r},s={value:function(){--a===0&&l()}};n.each(function(){var u=Ut(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(i),t._.interrupt.push(i),t._.end.push(s)),u.on=t}),a===0&&l()})}var i_=0;function nn(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function oc(){return++i_}var Ft=Ko.prototype;nn.prototype={constructor:nn,select:Xv,selectAll:Uv,selectChild:Ft.selectChild,selectChildren:Ft.selectChildren,filter:Nv,merge:qv,selection:jv,transition:l_,call:Ft.call,nodes:Ft.nodes,node:Ft.node,size:Ft.size,empty:Ft.empty,each:Ft.each,on:Iv,attr:gv,attrTween:Sv,style:Hv,styleTween:Jv,text:t_,textTween:a_,remove:Av,tween:dv,delay:kv,duration:Qv,ease:Dv,easeVarying:zv,end:r_,[Symbol.iterator]:Ft[Symbol.iterator]};function s_(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var u_={time:null,delay:0,duration:250,ease:s_};function c_(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function d_(e){var t,n;e instanceof nn?(t=e._id,e=e._name):(t=oc(),(n=u_).time=ei(),e=e==null?null:e+"");for(var o=this._groups,a=o.length,l=0;l<a;++l)for(var r=o[l],i=r.length,s,u=0;u<i;++u)(s=r[u])&&wl(s,e,t,u,r,n||c_(s,t));return new nn(o,this._parents,e,t)}Ko.prototype.interrupt=sv;Ko.prototype.transition=d_;const pa=e=>()=>e;function p_(e,{sourceEvent:t,target:n,transform:o,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:a}})}function Kt(e,t,n){this.k=e,this.x=t,this.y=n}Kt.prototype={constructor:Kt,scale:function(e){return e===1?this:new Kt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Kt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var po=new Kt(1,0,0);Kt.prototype;function Al(e){e.stopImmediatePropagation()}function Oo(e){e.preventDefault(),e.stopImmediatePropagation()}function f_(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function h_(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Bi(){return this.__zoom||po}function m_(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function v_(){return navigator.maxTouchPoints||"ontouchstart"in this}function __(e,t,n){var o=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],l=e.invertY(t[0][1])-n[0][1],r=e.invertY(t[1][1])-n[1][1];return e.translate(a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a),r>l?(l+r)/2:Math.min(0,l)||Math.max(0,r))}function g_(){var e=f_,t=h_,n=__,o=m_,a=v_,l=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],i=250,s=ev,u=yl("start","zoom","end"),c,d,f,p=500,_=150,b=0,h=10;function v(g){g.property("__zoom",Bi).on("wheel.zoom",X,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",V).filter(a).on("touchstart.zoom",G).on("touchmove.zoom",ee).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(g,D,O,q){var C=g.selection?g.selection():g;C.property("__zoom",Bi),g!==C?$(g,D,O,q):C.interrupt().each(function(){E(this,arguments).event(q).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},v.scaleBy=function(g,D,O,q){v.scaleTo(g,function(){var C=this.__zoom.k,N=typeof D=="function"?D.apply(this,arguments):D;return C*N},O,q)},v.scaleTo=function(g,D,O,q){v.transform(g,function(){var C=t.apply(this,arguments),N=this.__zoom,P=O==null?y(C):typeof O=="function"?O.apply(this,arguments):O,R=N.invert(P),K=typeof D=="function"?D.apply(this,arguments):D;return n(Q(T(N,K),P,R),C,r)},O,q)},v.translateBy=function(g,D,O,q){v.transform(g,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),r)},null,q)},v.translateTo=function(g,D,O,q,C){v.transform(g,function(){var N=t.apply(this,arguments),P=this.__zoom,R=q==null?y(N):typeof q=="function"?q.apply(this,arguments):q;return n(po.translate(R[0],R[1]).scale(P.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof O=="function"?-O.apply(this,arguments):-O),N,r)},q,C)};function T(g,D){return D=Math.max(l[0],Math.min(l[1],D)),D===g.k?g:new Kt(D,g.x,g.y)}function Q(g,D,O){var q=D[0]-O[0]*g.k,C=D[1]-O[1]*g.k;return q===g.x&&C===g.y?g:new Kt(g.k,q,C)}function y(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function $(g,D,O,q){g.on("start.zoom",function(){E(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(q).end()}).tween("zoom",function(){var C=this,N=arguments,P=E(C,N).event(q),R=t.apply(C,N),K=O==null?y(R):typeof O=="function"?O.apply(C,N):O,te=Math.max(R[1][0]-R[0][0],R[1][1]-R[0][1]),L=C.__zoom,ae=typeof D=="function"?D.apply(C,N):D,Y=s(L.invert(K).concat(te/L.k),ae.invert(K).concat(te/ae.k));return function(pe){if(pe===1)pe=ae;else{var re=Y(pe),se=te/re[2];pe=new Kt(se,K[0]-re[0]*se,K[1]-re[1]*se)}P.zoom(null,pe)}})}function E(g,D,O){return!O&&g.__zooming||new x(g,D)}function x(g,D){this.that=g,this.args=D,this.active=0,this.sourceEvent=null,this.extent=t.apply(g,D),this.taps=0}x.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,D){return this.mouse&&g!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var D=kt(this.that).datum();u.call(g,this.that,new p_(g,{sourceEvent:this.sourceEvent,target:v,type:g,transform:this.that.__zoom,dispatch:u}),D)}};function X(g,...D){if(!e.apply(this,arguments))return;var O=E(this,D).event(g),q=this.__zoom,C=Math.max(l[0],Math.min(l[1],q.k*Math.pow(2,o.apply(this,arguments)))),N=Nt(g);if(O.wheel)(O.mouse[0][0]!==N[0]||O.mouse[0][1]!==N[1])&&(O.mouse[1]=q.invert(O.mouse[0]=N)),clearTimeout(O.wheel);else{if(q.k===C)return;O.mouse=[N,q.invert(N)],Ca(this),O.start()}Oo(g),O.wheel=setTimeout(P,_),O.zoom("mouse",n(Q(T(q,C),O.mouse[0],O.mouse[1]),O.extent,r));function P(){O.wheel=null,O.end()}}function U(g,...D){if(f||!e.apply(this,arguments))return;var O=g.currentTarget,q=E(this,D,!0).event(g),C=kt(g.view).on("mousemove.zoom",K,!0).on("mouseup.zoom",te,!0),N=Nt(g,O),P=g.clientX,R=g.clientY;Wu(g.view),Al(g),q.mouse=[N,this.__zoom.invert(N)],Ca(this),q.start();function K(L){if(Oo(L),!q.moved){var ae=L.clientX-P,Y=L.clientY-R;q.moved=ae*ae+Y*Y>b}q.event(L).zoom("mouse",n(Q(q.that.__zoom,q.mouse[0]=Nt(L,O),q.mouse[1]),q.extent,r))}function te(L){C.on("mousemove.zoom mouseup.zoom",null),ju(L.view,q.moved),Oo(L),q.event(L).end()}}function V(g,...D){if(e.apply(this,arguments)){var O=this.__zoom,q=Nt(g.changedTouches?g.changedTouches[0]:g,this),C=O.invert(q),N=O.k*(g.shiftKey?.5:2),P=n(Q(T(O,N),q,C),t.apply(this,D),r);Oo(g),i>0?kt(this).transition().duration(i).call($,P,q,g):kt(this).call(v.transform,P,q,g)}}function G(g,...D){if(e.apply(this,arguments)){var O=g.touches,q=O.length,C=E(this,D,g.changedTouches.length===q).event(g),N,P,R,K;for(Al(g),P=0;P<q;++P)R=O[P],K=Nt(R,this),K=[K,this.__zoom.invert(K),R.identifier],C.touch0?!C.touch1&&C.touch0[2]!==K[2]&&(C.touch1=K,C.taps=0):(C.touch0=K,N=!0,C.taps=1+!!c);c&&(c=clearTimeout(c)),N&&(C.taps<2&&(d=K[0],c=setTimeout(function(){c=null},p)),Ca(this),C.start())}}function ee(g,...D){if(this.__zooming){var O=E(this,D).event(g),q=g.changedTouches,C=q.length,N,P,R,K;for(Oo(g),N=0;N<C;++N)P=q[N],R=Nt(P,this),O.touch0&&O.touch0[2]===P.identifier?O.touch0[0]=R:O.touch1&&O.touch1[2]===P.identifier&&(O.touch1[0]=R);if(P=O.that.__zoom,O.touch1){var te=O.touch0[0],L=O.touch0[1],ae=O.touch1[0],Y=O.touch1[1],pe=(pe=ae[0]-te[0])*pe+(pe=ae[1]-te[1])*pe,re=(re=Y[0]-L[0])*re+(re=Y[1]-L[1])*re;P=T(P,Math.sqrt(pe/re)),R=[(te[0]+ae[0])/2,(te[1]+ae[1])/2],K=[(L[0]+Y[0])/2,(L[1]+Y[1])/2]}else if(O.touch0)R=O.touch0[0],K=O.touch0[1];else return;O.zoom("touch",n(Q(P,R,K),O.extent,r))}}function B(g,...D){if(this.__zooming){var O=E(this,D).event(g),q=g.changedTouches,C=q.length,N,P;for(Al(g),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),N=0;N<C;++N)P=q[N],O.touch0&&O.touch0[2]===P.identifier?delete O.touch0:O.touch1&&O.touch1[2]===P.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(P=Nt(P,this),Math.hypot(d[0]-P[0],d[1]-P[1])<h)){var R=kt(this).on("dblclick.zoom");R&&R.apply(this,arguments)}}}return v.wheelDelta=function(g){return arguments.length?(o=typeof g=="function"?g:pa(+g),v):o},v.filter=function(g){return arguments.length?(e=typeof g=="function"?g:pa(!!g),v):e},v.touchable=function(g){return arguments.length?(a=typeof g=="function"?g:pa(!!g),v):a},v.extent=function(g){return arguments.length?(t=typeof g=="function"?g:pa([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),v):t},v.scaleExtent=function(g){return arguments.length?(l[0]=+g[0],l[1]=+g[1],v):[l[0],l[1]]},v.translateExtent=function(g){return arguments.length?(r[0][0]=+g[0][0],r[1][0]=+g[1][0],r[0][1]=+g[0][1],r[1][1]=+g[1][1],v):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},v.constrain=function(g){return arguments.length?(n=g,v):n},v.duration=function(g){return arguments.length?(i=+g,v):i},v.interpolate=function(g){return arguments.length?(s=g,v):s},v.on=function(){var g=u.on.apply(u,arguments);return g===u?v:g},v.clickDistance=function(g){return arguments.length?(b=(g=+g)*g,v):Math.sqrt(b)},v.tapDistance=function(g){return arguments.length?(h=+g,v):h},v}var ve=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(ve||{}),oi=(e=>(e.Partial="partial",e.Full="full",e))(oi||{}),En=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(En||{}),Wn=(e=>(e.Strict="strict",e.Loose="loose",e))(Wn||{}),Or=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Or||{}),Do=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Do||{}),ac=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(ac||{});function ai(){return typeof window<"u"?window:{chrome:!1,addEventListener(...e){}}}function br(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,a=typeof(o==null?void 0:o.hasAttribute)=="function"?o.hasAttribute("contenteditable"):!1,l=typeof(o==null?void 0:o.closest)=="function"?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(o==null?void 0:o.nodeName)||a||!!l}function y_(e){return e.ctrlKey||e.metaKey||e.shiftKey}function Hi(e,t,n,o){const a=t.split("+").map(l=>l.trim().toLowerCase());return a.length===1?e.toLowerCase()===t.toLowerCase():(o?n.delete(e.toLowerCase()):n.add(e.toLowerCase()),a.every((l,r)=>n.has(l)&&Array.from(n.values())[r]===a[r]))}function O_(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=b_(n.code,e);return Array.isArray(e)?e.some(a=>Hi(n[o],a,t,n.type==="keyup")):Hi(n[o],e,t,n.type==="keyup")}}function b_(e,t){return typeof t=="string"?e===t?"code":"key":t.includes(e)?"code":"key"}function Co(e,t){const n=ai(),o=F(Re(e)===!0);let a=!1;const l=new Set;let r=s(Re(e));return Te(o,(u,c)=>{u!==c&&(t==null||t(u))}),Te(()=>Re(e),(u,c)=>{typeof c=="boolean"&&typeof u!="boolean"&&i(),r=s(u)},{immediate:!0}),Pu(n,"blur",()=>{Re(e)!==!0&&(o.value=!1)}),Pi((...u)=>r(...u),u=>{a=y_(u),!(!a&&br(u))&&(u.preventDefault(),o.value=!0)},{eventName:"keydown"}),Pi((...u)=>r(...u),u=>{if(o.value){if(!a&&br(u))return;i()}},{eventName:"keyup"}),o;function i(){a=!1,l.clear(),o.value=!1}function s(u){return u===null?(i(),()=>!1):typeof u=="boolean"?(i(),o.value=u,()=>!1):Array.isArray(u)||typeof u=="string"?O_(u,l):u}}const lc="vue-flow__node-desc",rc="vue-flow__edge-desc",w_="vue-flow__aria-live",ic=["Enter"," ","Escape"],ao={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function sc(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:a,nodes:l,nodeExtent:r,nodeDragThreshold:i,viewport:s,autoPanOnNodeDrag:u,nodesDraggable:c,panBy:d,findNode:f,multiSelectionActive:p,nodesSelectionActive:_,selectNodesOnDrag:b,removeSelectedElements:h,addSelectedNodes:v,updateNodePositions:T,emits:Q}=Ae(),{onStart:y,onDrag:$,onStop:E,el:x,disabled:X,id:U,selectable:V,dragHandle:G}=e,ee=F(!1);let B=[],g,D=null,O={x:void 0,y:void 0},q={x:0,y:0},C=null,N=!1,P=0,R=!1;const K=cc(),te=({x:se,y:H})=>{O={x:se,y:H};let he=!1;if(B=B.map(_e=>{const Ce={x:se-_e.distance.x,y:H-_e.distance.y};n.value&&(Ce.x=o.value[0]*Math.round(Ce.x/o.value[0]),Ce.y=o.value[1]*Math.round(Ce.y/o.value[1]));const{computedPosition:z}=ii(_e,Ce,Q.error,r.value,_e.parentNode?f(_e.parentNode):void 0);return he=he||_e.position.x!==z.x||_e.position.y!==z.y,_e.position=z,_e}),!!he&&(T(B,!0,!0),ee.value=!0,C)){const[_e,Ce]=Fl({id:U,dragItems:B,findNode:f});$({event:C,node:_e,nodes:Ce})}},L=()=>{if(!D)return;const[se,H]=wc(q,D);if(se!==0||H!==0){const he={x:(O.x??0)-se/s.value.zoom,y:(O.y??0)-H/s.value.zoom};d({x:se,y:H})&&te(he)}P=requestAnimationFrame(L)},ae=(se,H)=>{N=!0;const he=f(U);!b.value&&!p.value&&he&&(he.selected||h()),he&&Re(V)&&b.value&&$r(he,p.value,v,h,_,!1,H);const _e=K(se);if(O=_e,B=X_(l.value,c.value,_e,f,U),B.length){const[Ce,z]=Fl({id:U,dragItems:B,findNode:f});y({event:se.sourceEvent,node:Ce,nodes:z})}},Y=(se,H)=>{var he;i.value===0&&ae(se,H),O=K(se),D=((he=t.value)==null?void 0:he.getBoundingClientRect())||null,q=Rn(se.sourceEvent,D)},pe=(se,H)=>{const he=K(se);if(!R&&N&&u.value&&(R=!0,L()),!N){const _e=he.xSnapped-(O.x??0),Ce=he.ySnapped-(O.y??0);Math.sqrt(_e*_e+Ce*Ce)>i.value&&ae(se,H)}(O.x!==he.xSnapped||O.y!==he.ySnapped)&&B.length&&N&&(C=se.sourceEvent,q=Rn(se.sourceEvent,D),te(he))},re=se=>{if(N&&(ee.value=!1,R=!1,N=!1,cancelAnimationFrame(P),B.length)){T(B,!1,!1);const[H,he]=Fl({id:U,dragItems:B,findNode:f});E({event:se.sourceEvent,node:H,nodes:he})}};return Te([()=>Re(X),x],([se,H],he,_e)=>{if(H){const Ce=kt(H);se||(g=Em().on("start",z=>Y(z,H)).on("drag",z=>pe(z,H)).on("end",z=>re(z)).filter(z=>{const I=z.target,W=Re(G);return!z.button&&(!a.value||!ls(I,`.${a.value}`,H)&&(!W||ls(I,W,H)))}),Ce.call(g)),_e(()=>{Ce.on(".drag",null),g&&(g.on("start",null),g.on("drag",null),g.on("end",null))})}}),ee}const Yi=Symbol("vueFlow"),li=Symbol("nodeId"),uc=Symbol("nodeRef"),S_=Symbol("edgeId"),x_=Symbol("edgeRef"),Sl=Symbol("slots");function $_(){return{doubleClick:ue(),click:ue(),mouseEnter:ue(),mouseMove:ue(),mouseLeave:ue(),contextMenu:ue(),updateStart:ue(),update:ue(),updateEnd:ue()}}function k_(e,t){const n=$_();return n.doubleClick.on(o=>{var a,l;t.edgeDoubleClick(o),(l=(a=e.events)==null?void 0:a.doubleClick)==null||l.call(a,o)}),n.click.on(o=>{var a,l;t.edgeClick(o),(l=(a=e.events)==null?void 0:a.click)==null||l.call(a,o)}),n.mouseEnter.on(o=>{var a,l;t.edgeMouseEnter(o),(l=(a=e.events)==null?void 0:a.mouseEnter)==null||l.call(a,o)}),n.mouseMove.on(o=>{var a,l;t.edgeMouseMove(o),(l=(a=e.events)==null?void 0:a.mouseMove)==null||l.call(a,o)}),n.mouseLeave.on(o=>{var a,l;t.edgeMouseLeave(o),(l=(a=e.events)==null?void 0:a.mouseLeave)==null||l.call(a,o)}),n.contextMenu.on(o=>{var a,l;t.edgeContextMenu(o),(l=(a=e.events)==null?void 0:a.contextMenu)==null||l.call(a,o)}),n.updateStart.on(o=>{var a,l;t.edgeUpdateStart(o),(l=(a=e.events)==null?void 0:a.updateStart)==null||l.call(a,o)}),n.update.on(o=>{var a,l;t.edgeUpdate(o),(l=(a=e.events)==null?void 0:a.update)==null||l.call(a,o)}),n.updateEnd.on(o=>{var a,l;t.edgeUpdateEnd(o),(l=(a=e.events)==null?void 0:a.updateEnd)==null||l.call(a,o)}),Object.entries(n).reduce((o,[a,l])=>(o.emit[a]=l.trigger,o.on[a]=l.on,o),{emit:{},on:{}})}function cc(){const{viewport:e,snapGrid:t,snapToGrid:n}=Ae();return({sourceEvent:o})=>{const a=o.touches?o.touches[0].clientX:o.clientX,l=o.touches?o.touches[0].clientY:o.clientY,r={x:(a-e.value.x)/e.value.zoom,y:(l-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(r.x/t.value[0]):r.x,ySnapped:n.value?t.value[1]*Math.round(r.y/t.value[1]):r.y,...r}}}function fa(){return!0}function dc({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:a,onEdgeUpdate:l,onEdgeUpdateEnd:r}){const{vueFlowRef:i,connectionMode:s,connectionRadius:u,connectOnClick:c,connectionClickStartHandle:d,nodesConnectable:f,autoPanOnConnect:p,findNode:_,panBy:b,startConnection:h,updateConnection:v,endConnection:T,emits:Q,viewport:y,edges:$,nodes:E,isValidConnection:x}=Ae();let X=null,U=!1,V=null;function G(B){var g;const D=Re(n)==="target",O=si(B),q=Ji(B.target);if(O&&B.button===0||!O){let C=function(z){H=Rn(z,re);const{handle:I,validHandleResult:W}=B_(z,q,Sr(H,y.value,!1,[1,1]),u.value,_e,j=>us(z,j,s.value,Re(t),Re(e),D?"target":"source",R,q,$.value,E.value,_));if(K=I,he||(Ce(),he=!0),X=W.connection,U=W.isValid,V=W.handleDomNode,v(K&&U?_c({x:K.x,y:K.y},y.value):H,W.endHandle,Y_(!!K,U)),!K&&!U&&!V)return Ll(se);X&&X.source!==X.target&&V&&(Ll(se),se=V,V.classList.add("connecting","vue-flow__handle-connecting"),V.classList.toggle("valid",U),V.classList.toggle("vue-flow__handle-valid",U))},N=function(z){(K||V)&&X&&U&&(l?l(z,X):Q.connect(X)),Q.connectEnd(z),a&&(r==null||r(z)),Ll(se),cancelAnimationFrame(te),T(z),he=!1,U=!1,X=null,V=null,q.removeEventListener("mousemove",C),q.removeEventListener("mouseup",N),q.removeEventListener("touchmove",C),q.removeEventListener("touchend",N)};const P=_(Re(t));let R=Re(o)||x.value||fa;!R&&P&&(R=(D?P.isValidSourcePos:P.isValidTargetPos)||fa);let K,te=0;const{x:L,y:ae}=Rn(B),Y=q==null?void 0:q.elementFromPoint(L,ae),pe=ui(Re(a),Y),re=(g=i.value)==null?void 0:g.getBoundingClientRect();if(!re||!pe)return;let se,H=Rn(B,re),he=!1;const _e=H_({nodes:E.value,nodeId:Re(t),handleId:Re(e),handleType:pe}),Ce=()=>{if(!p)return;const[z,I]=wc(H,re);b({x:z,y:I}),te=requestAnimationFrame(Ce)};h({nodeId:Re(t),handleId:Re(e),type:pe},{x:L-re.left,y:ae-re.top},B),Q.connectStart({event:B,nodeId:Re(t),handleId:Re(e),handleType:pe}),q.addEventListener("mousemove",C),q.addEventListener("mouseup",N),q.addEventListener("touchmove",C),q.addEventListener("touchend",N)}}function ee(B){if(!c.value)return;const g=Re(n)==="target";if(!d.value)Q.clickConnectStart({event:B,nodeId:Re(t),handleId:Re(e)}),h({nodeId:Re(t),type:Re(n),handleId:Re(e)},void 0,B,!0);else{let D=Re(o)||x.value||fa;const O=_(Re(t));if(!D&&O&&(D=(g?O.isValidSourcePos:O.isValidTargetPos)||fa),O&&(typeof O.connectable>"u"?f.value:O.connectable)===!1)return;const q=Ji(B.target),{connection:C,isValid:N}=us(B,{nodeId:Re(t),id:Re(e),type:Re(n)},s.value,d.value.nodeId,d.value.handleId||null,d.value.type,D,q,$.value,E.value,_),P=C.source===C.target;N&&!P&&Q.connect(C),Q.clickConnectEnd(B),T(B,!0)}}return{handlePointerDown:G,handleClick:ee}}function T_(){return On(li,"")}function E_(e){const t=T_()??"",n=On(uc,F(null)),{findNode:o,edges:a,emits:l}=Ae(),r=o(t);return r||l.error(new it(at.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:r,parentNode:Se(()=>o(r.parentNode)),connectedEdges:Se(()=>mn([r],a.value))}}function Q_(){return{doubleClick:ue(),click:ue(),mouseEnter:ue(),mouseMove:ue(),mouseLeave:ue(),contextMenu:ue(),dragStart:ue(),drag:ue(),dragStop:ue()}}function P_(e,t){const n=Q_();return n.doubleClick.on(o=>{var a,l;t.nodeDoubleClick(o),(l=(a=e.events)==null?void 0:a.doubleClick)==null||l.call(a,o)}),n.click.on(o=>{var a,l;t.nodeClick(o),(l=(a=e.events)==null?void 0:a.click)==null||l.call(a,o)}),n.mouseEnter.on(o=>{var a,l;t.nodeMouseEnter(o),(l=(a=e.events)==null?void 0:a.mouseEnter)==null||l.call(a,o)}),n.mouseMove.on(o=>{var a,l;t.nodeMouseMove(o),(l=(a=e.events)==null?void 0:a.mouseMove)==null||l.call(a,o)}),n.mouseLeave.on(o=>{var a,l;t.nodeMouseLeave(o),(l=(a=e.events)==null?void 0:a.mouseLeave)==null||l.call(a,o)}),n.contextMenu.on(o=>{var a,l;t.nodeContextMenu(o),(l=(a=e.events)==null?void 0:a.contextMenu)==null||l.call(a,o)}),n.dragStart.on(o=>{var a,l;t.nodeDragStart(o),(l=(a=e.events)==null?void 0:a.dragStart)==null||l.call(a,o)}),n.drag.on(o=>{var a,l;t.nodeDrag(o),(l=(a=e.events)==null?void 0:a.drag)==null||l.call(a,o)}),n.dragStop.on(o=>{var a,l;t.nodeDragStop(o),(l=(a=e.events)==null?void 0:a.dragStop)==null||l.call(a,o)}),Object.entries(n).reduce((o,[a,l])=>(o.emit[a]=l.trigger,o.on[a]=l.on,o),{emit:{},on:{}})}function pc(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:a,snapToGrid:l,nodesDraggable:r,emits:i}=Ae();return(s,u=!1)=>{const c=l.value?a.value[0]:5,d=l.value?a.value[1]:5,f=u?4:1,p=s.x*c*f,_=s.y*d*f,b=e.value.filter(h=>h.draggable||r&&typeof h.draggable>"u").map(h=>{const v={x:h.computedPosition.x+p,y:h.computedPosition.y+_},{computedPosition:T}=ii(h,v,i.error,t.value,h.parentNode?o(h.parentNode):void 0);return{id:h.id,position:T,from:h.position,distance:{x:s.x,y:s.y},dimensions:h.dimensions}});n(b,!0,!1)}}const Xl=.1;function cn(){return $l("Viewport not initialized yet."),Promise.resolve(!1)}const D_={zoomIn:cn,zoomOut:cn,zoomTo:cn,fitView:cn,setCenter:cn,fitBounds:cn,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:cn,setTransform:cn,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function C_(e){function t(o,a){return new Promise(l=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleBy(Ul(e.d3Selection,a,()=>{l(!0)}),o):l(!1)})}function n(o,a,l,r){return new Promise(i=>{const{x:s,y:u}=fc({x:-o,y:-a},e.translateExtent),c=po.translate(-s,-u).scale(l);e.d3Selection&&e.d3Zoom?e.d3Zoom.transform(Ul(e.d3Selection,r,()=>{i(!0)}),c):i(!1)})}return Se(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:a=>t(1.2,a==null?void 0:a.duration),zoomOut:a=>t(1/1.2,a==null?void 0:a.duration),zoomTo:(a,l)=>new Promise(r=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleTo(Ul(e.d3Selection,l==null?void 0:l.duration,()=>{r(!0)}),a):r(!1)}),setViewport:(a,l)=>n(a.x,a.y,a.zoom,l==null?void 0:l.duration),setTransform:(a,l)=>n(a.x,a.y,a.zoom,l==null?void 0:l.duration),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(a={padding:Xl,includeHiddenNodes:!1,duration:0})=>{const l=e.nodes.filter(c=>{var d;const f=c.dimensions.width&&c.dimensions.height&&((a==null?void 0:a.includeHiddenNodes)||!c.hidden);return(d=a.nodes)!=null&&d.length?f&&a.nodes.includes(c.id):f});if(!l.length)return Promise.resolve(!1);const r=ri(l),{x:i,y:s,zoom:u}=Ki(r,e.dimensions.width,e.dimensions.height,a.minZoom??e.minZoom,a.maxZoom??e.maxZoom,a.padding??Xl,a.offset);return n(i,s,u,a==null?void 0:a.duration)},setCenter:(a,l,r)=>{const i=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:e.maxZoom,s=e.dimensions.width/2-a*i,u=e.dimensions.height/2-l*i;return n(s,u,i,r==null?void 0:r.duration)},fitBounds:(a,l={padding:Xl})=>{const{x:r,y:i,zoom:s}=Ki(a,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,l.padding);return n(r,i,s,l==null?void 0:l.duration)},project:a=>Sr(a,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:a=>{if(e.vueFlowRef){const{x:l,y:r}=e.vueFlowRef.getBoundingClientRect(),i={x:a.x-l,y:a.y-r};return Sr(i,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:a=>{if(e.vueFlowRef){const{x:l,y:r}=e.vueFlowRef.getBoundingClientRect(),i={x:a.x+l,y:a.y+r};return _c(i,e.viewport)}return{x:0,y:0}}}:D_)}function Ul(e,t=0,n){return e.transition().duration(t).on("end",n)}function z_(e,t,n){const o=uu(!0);return o.run(()=>{const a=()=>{o.run(()=>{let b,h,v=!!(n.nodes.value.length||n.edges.value.length);b=Hn([e.modelValue,()=>{var T,Q;return(Q=(T=e.modelValue)==null?void 0:T.value)==null?void 0:Q.length}],([T])=>{T&&Array.isArray(T)&&(h==null||h.pause(),n.setElements(T),!h&&!v&&T.length?v=!0:h==null||h.resume())}),h=Hn([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([T,Q])=>{var y;(y=e.modelValue)!=null&&y.value&&Array.isArray(e.modelValue.value)&&(b==null||b.pause(),e.modelValue.value=[...T,...Q],wt(()=>{b==null||b.resume()}))},{immediate:v}),Ea(()=>{b==null||b.stop(),h==null||h.stop()})})},l=()=>{o.run(()=>{let b,h,v=!!n.nodes.value.length;b=Hn([e.nodes,()=>{var T,Q;return(Q=(T=e.nodes)==null?void 0:T.value)==null?void 0:Q.length}],([T])=>{T&&Array.isArray(T)&&(h==null||h.pause(),n.setNodes(T),!h&&!v&&T.length?v=!0:h==null||h.resume())}),h=Hn([n.nodes,()=>n.nodes.value.length],([T])=>{var Q;(Q=e.nodes)!=null&&Q.value&&Array.isArray(e.nodes.value)&&(b==null||b.pause(),e.nodes.value=[...T],wt(()=>{b==null||b.resume()}))},{immediate:v}),Ea(()=>{b==null||b.stop(),h==null||h.stop()})})},r=()=>{o.run(()=>{let b,h,v=!!n.edges.value.length;b=Hn([e.edges,()=>{var T,Q;return(Q=(T=e.edges)==null?void 0:T.value)==null?void 0:Q.length}],([T])=>{T&&Array.isArray(T)&&(h==null||h.pause(),n.setEdges(T),!h&&!v&&T.length?v=!0:h==null||h.resume())}),h=Hn([n.edges,()=>n.edges.value.length],([T])=>{var Q;(Q=e.edges)!=null&&Q.value&&Array.isArray(e.edges.value)&&(b==null||b.pause(),e.edges.value=[...T],wt(()=>{b==null||b.resume()}))},{immediate:v}),Ea(()=>{b==null||b.stop(),h==null||h.stop()})})},i=()=>{o.run(()=>{Te(()=>t.maxZoom,()=>{t.maxZoom&&Je(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},s=()=>{o.run(()=>{Te(()=>t.minZoom,()=>{t.minZoom&&Je(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{Te(()=>t.translateExtent,()=>{t.translateExtent&&Je(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{Te(()=>t.nodeExtent,()=>{t.nodeExtent&&Je(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{o.run(()=>{Te(()=>t.applyDefault,()=>{Je(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},f=()=>{o.run(()=>{const b=async h=>{let v=h;typeof t.autoConnect=="function"&&(v=await t.autoConnect(h)),v!==!1&&n.addEdges([v])};Te(()=>t.autoConnect,()=>{Je(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),Te(n.autoConnect,(h,v,T)=>{h?n.onConnect(b):n.hooks.value.connect.off(b),T(()=>{n.hooks.value.connect.off(b)})},{immediate:!0})})},p=()=>{const b=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const h of Object.keys(t)){const v=h;if(!b.includes(v)){const T=Ue(()=>t[v]),Q=n[v];_o(Q)&&o.run(()=>{Te(T,y=>{Je(y)&&(Q.value=y)},{immediate:!0,flush:"pre"})})}}};(()=>{a(),l(),r(),s(),i(),u(),c(),d(),f(),p()})()}),()=>o.stop()}function Zi(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function wr(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function xl(e){return{width:e.offsetWidth,height:e.offsetHeight}}function on(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function fc(e,t){return{x:on(e.x,t[0][0],t[1][0]),y:on(e.y,t[0][1],t[1][1])}}function Ji(e){const t=e.getRootNode();return"elementFromPoint"in t?t:ai().document}function jn(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function qn(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!jn(e)}function Kn(e){return qn(e)&&"computedPosition"in e}function ha(e){return!Number.isNaN(e)&&Number.isFinite(e)}function N_(e){return ha(e.width)&&ha(e.height)&&ha(e.x)&&ha(e.y)}function q_(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:zn({width:0,height:0}),handleBounds:{source:[],target:[]},computedPosition:zn({z:0,...e.position}),draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Je(e.data)?e.data:{},events:zn(Je(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function hc(e,t,n){var o,a;const l={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(a=e.targetHandle)==null?void 0:a.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:Je(e.data)?e.data:{},events:zn(Je(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??l,e,{id:e.id.toString()})}function mc(e,t,n,o){const a=typeof e=="string"?e:e.id,l=new Set,r=o==="source"?"target":"source";for(const i of n)i[r]===a&&l.add(i[o]);return t.filter(i=>l.has(i.id))}function R_(...e){if(e.length===3){const[l,r,i]=e;return mc(l,r,i,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(l=>jn(l)&&l.source===o).map(l=>n.find(r=>qn(r)&&r.id===l.target))}function M_(...e){if(e.length===3){const[l,r,i]=e;return mc(l,r,i,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(l=>jn(l)&&l.target===o).map(l=>n.find(r=>qn(r)&&r.id===l.source))}function vc({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function I_(e,t){return t.some(n=>jn(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function _c({x:e,y:t},{x:n,y:o,zoom:a}){return{x:e*a+n,y:t*a+o}}function Sr({x:e,y:t},{x:n,y:o,zoom:a},l,[r,i]){const s={x:(e-n)/a,y:(t-o)/a};return l?{x:r*Math.round(s.x/r),y:i*Math.round(s.y/i)}:s}function gc(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Ja({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function yc({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function V_(e,t){return yc(gc(Ja(e),Ja(t)))}function ri(e){const t=e.reduce((n,{computedPosition:o={x:0,y:0},dimensions:a={width:0,height:0}}={})=>gc(n,Ja({...o,...a})),{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY});return yc(t)}function Oc(e,t,{x:n,y:o,zoom:a}={x:0,y:0,zoom:1},l=!1,r=!1){const i={x:(t.x-n)/a,y:(t.y-o)/a,width:t.width/a,height:t.height/a};return e.filter(s=>{const{computedPosition:u={x:0,y:0},dimensions:c={width:0,height:0},selectable:d}=s;if(r&&!d)return!1;const f={...u,width:c.width||0,height:c.height||0},p=wr(i,f),_=typeof c.width>"u"||typeof c.height>"u"||c.width===0||c.height===0,b=l&&p>0,h=c.width*c.height;return _||b||p>=h})}function mn(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function Ki(e,t,n,o,a,l=.1,r={x:0,y:0}){const i=t/(e.width*(1+l)),s=n/(e.height*(1+l)),u=Math.min(i,s),c=on(u,o,a),d=e.x+e.width/2,f=e.y+e.height/2,p=t/2-d*c+(r.x??0),_=n/2-f*c+(r.y??0);return{x:p,y:_,zoom:c}}function A_(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function bc(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:bc(n,t):!1}function Dn(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function es(e,t,n){return e<t?on(Math.abs(e-t),1,50)/50:e>n?-on(Math.abs(e-n),1,50)/50:0}function wc(e,t){const n=es(e.x,35,t.width-35)*20,o=es(e.y,35,t.height-35)*20;return[n,o]}function Wl(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let a={};if(typeof t.style=="function"?a={...t.style(t)}:t.style&&(a={...t.style}),a.width=a.width??`${t.dimensions.width}px`,a.height=a.height??`${t.dimensions.height}px`,n>0)if(typeof a.width=="string"){const l=Number(a.width.replace("px",""));a.width=`${l+n}px`}else a.width+=n;if(o>0)if(typeof a.height=="string"){const l=Number(a.height.replace("px",""));a.height=`${l+o}px`}else a.height+=o;if(e.position.x<0){const l=Math.abs(e.position.x);if(t.position.x=t.position.x-l,typeof a.width=="string"){const r=Number(a.width.replace("px",""));a.width=`${r+l}px`}else a.width+=l;e.position.x=0}if(e.position.y<0){const l=Math.abs(e.position.y);if(t.position.y=t.position.y-l,typeof a.height=="string"){const r=Number(a.height.replace("px",""));a.height=`${r+l}px`}else a.height+=l;e.position.y=0}t.dimensions.width=Number(a.width.toString().replace("px","")),t.dimensions.height=Number(a.height.toString().replace("px","")),typeof t.style=="function"?t.style=l=>{const r=t.style;return{...r(l),...a}}:t.style={...t.style,...a}}}}function ts(e,t){var n,o;const a=e.filter(r=>r.type==="add"||r.type==="remove");for(const r of a)if(r.type==="add")t.findIndex(s=>s.id===r.item.id)===-1&&t.push(r.item);else if(r.type==="remove"){const i=t.findIndex(s=>s.id===r.id);i!==-1&&t.splice(i,1)}const l=t.map(r=>r.id);for(const r of t){const i=e.filter(s=>s.id===r.id);for(const s of i)switch(s.type){case"select":r.selected=s.selected;break;case"position":if(Kn(r)&&(typeof s.position<"u"&&(r.position=s.position),typeof s.dragging<"u"&&(r.dragging=s.dragging),r.expandParent&&r.parentNode)){const u=t[l.indexOf(r.parentNode)];u&&Kn(u)&&Wl(r,u)}break;case"dimensions":if(Kn(r)){if(typeof s.dimensions<"u"&&(r.dimensions=s.dimensions),typeof s.updateStyle<"u"&&(r.style={...r.style||{},width:`${(n=s.dimensions)==null?void 0:n.width}px`,height:`${(o=s.dimensions)==null?void 0:o.height}px`}),typeof s.resizing<"u"&&(r.resizing=s.resizing),r.expandParent&&r.parentNode){const u=t[l.indexOf(r.parentNode)];u&&Kn(u)&&(u.initialized?Wl(r,u):wt(()=>{Wl(r,u)}))}r.initialized||(r.initialized=!0)}break}}return t}function Zt(e,t){return{id:e,type:"select",selected:t}}function ns(e){return{item:e,type:"add"}}function os(e){return{id:e,type:"remove"}}function as(e,t,n,o,a){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:a||null,type:"remove"}}function jl(e,t){return e.reduce((n,o)=>{let a=t.includes(o.id);Je(o.selectable)&&!o.selectable&&(a=!1);const l=Kn(o)?"changedNodes":"changedEdges";return!o.selected&&a?n[l].push(Zt(o.id,!0)):o.selected&&!a&&n[l].push(Zt(o.id,!1)),n},{changedNodes:[],changedEdges:[]})}function ue(e){const t=new Set;let n=!1;const o=()=>t.size>0;e&&(n=!0,t.add(e));const a=i=>{t.delete(i)};return{on:i=>{e&&n&&t.delete(e),t.add(i);const s=()=>{a(i),e&&n&&t.add(e)};return gl(s),{off:s}},off:a,trigger:i=>Promise.all(Array.from(t).map(s=>s(i))),hasListeners:o,fns:t}}function ls(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function X_(e,t,n,o,a){return e.filter(l=>(l.selected||l.id===a)&&(!l.parentNode||!bc(l,o))&&(l.draggable||t&&typeof l.draggable>"u")).map(l=>{var r,i;return zn({id:l.id,position:l.position||{x:0,y:0},distance:{x:n.x-((r=l.computedPosition)==null?void 0:r.x)||0,y:n.y-((i=l.computedPosition)==null?void 0:i.y)||0},from:l.computedPosition,extent:l.extent,parentNode:l.parentNode,dimensions:l.dimensions,expandParent:l.expandParent})})}function Fl({id:e,dragItems:t,findNode:n}){const o=t.reduce((a,l)=>{const r=n(l.id);return r&&a.push(r),a},[]);return[e?o.find(a=>a.id===e):o[0],o]}function Sc(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function U_(e,t,n){const[o,a,l,r]=typeof e!="string"?Sc(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+r,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-a,n.computedPosition.y+n.dimensions.height-l]]:!1}function W_(e,t,n,o){let a=e.extent||n;if((a==="parent"||!Array.isArray(a)&&(a==null?void 0:a.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const l=U_(a,e,o);l&&(a=l)}else t(new it(at.NODE_EXTENT_INVALID,e.id)),a=n;else if(Array.isArray(a)){const l=(o==null?void 0:o.computedPosition.x)||0,r=(o==null?void 0:o.computedPosition.y)||0;a=[[a[0][0]+l,a[0][1]+r],[a[1][0]+l,a[1][1]+r]]}else if(a!=="parent"&&(a!=null&&a.range)&&Array.isArray(a.range)){const[l,r,i,s]=Sc(a.padding),u=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;a=[[a.range[0][0]+u+s,a.range[0][1]+c+l],[a.range[1][0]+u-r,a.range[1][1]+c-i]]}return a==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:a}function j_({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function ii(e,t,n,o,a){const l=j_(e.dimensions,W_(e,n,o,a)),r=fc(t,l);return{position:{x:r.x-((a==null?void 0:a.computedPosition.x)||0),y:r.y-((a==null?void 0:a.computedPosition.y)||0)},computedPosition:r}}function xr(e,t,n){const o=((n==null?void 0:n.x)??0)+t.x,a=((n==null?void 0:n.y)??0)+t.y,l=(n==null?void 0:n.width)??t.width,r=(n==null?void 0:n.height)??t.height;switch(e){case ve.Top:return{x:o+l/2,y:a};case ve.Right:return{x:o+l,y:a+r/2};case ve.Bottom:return{x:o+l/2,y:a+r};case ve.Left:return{x:o,y:a+r/2}}}function rs(e=[],t){return e.length&&(t?e.find(n=>n.id===t):e[0])||null}function F_(e,t,n,o,a,l){const r=xr(n,{...e.dimensions,...e.computedPosition},t),i=xr(l,{...o.dimensions,...o.computedPosition},a);return{sourceX:r.x,sourceY:r.y,targetX:i.x,targetY:i.y}}function L_({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:a,targetHeight:l,width:r,height:i,viewport:s}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+a),y2:Math.max(e.y+o,t.y+l)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Ja({x:(0-s.x)/s.zoom,y:(0-s.y)/s.zoom,width:r/s.zoom,height:i/s.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*f)>0}function G_(e,t,n=!1){const o=typeof e.zIndex=="number";let a=o?e.zIndex:0;const l=t(e.source),r=t(e.target);return!l||!r?0:(n&&(a=o?e.zIndex:Math.max(l.computedPosition.z||0,r.computedPosition.z||0)),a)}var at=(e=>(e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e))(at||{});const is={MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`};class it extends Error{constructor(t,...n){var o;super((o=is[t])==null?void 0:o.call(is,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function si(e){return"clientX"in e}function Rn(e,t){var n,o;const a=si(e),l=a?e.clientX:(n=e.touches)==null?void 0:n[0].clientX,r=a?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:l-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}}const Ka=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function xc(){return{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}}function Ll(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function ss(e,t,n,o){return(t[n]||[]).reduce((a,l)=>{var r,i;return`${e.id}-${l.id}-${n}`!==o&&a.push({id:l.id||null,type:n,nodeId:e.id,x:(((r=e.computedPosition)==null?void 0:r.x)??0)+l.x+l.width/2,y:(((i=e.computedPosition)==null?void 0:i.y)??0)+l.y+l.height/2,width:l.width,height:l.height}),a},[])}function B_(e,t,n,o,a,l){const{x:r,y:i}=Rn(e),u=t.elementsFromPoint(r,i).find(_=>_.classList.contains("vue-flow__handle"));if(u){const _=u.getAttribute("data-nodeid");if(_){const b=ui(void 0,u),h=u.getAttribute("data-handleid"),v=l({nodeId:_,id:h,type:b});if(v){const T=a.find(Q=>Q.nodeId===_&&Q.type===b&&Q.id===h);return{handle:{id:h,type:b,nodeId:_,x:(T==null?void 0:T.x)||n.x,y:(T==null?void 0:T.y)||n.y},validHandleResult:v}}}}let c=[],d=Number.POSITIVE_INFINITY;for(const _ of a){const b=Math.sqrt((_.x-n.x)**2+(_.y-n.y)**2);if(b<=o){const h=l(_);b<=d&&(b<d?c=[{handle:_,validHandleResult:h}]:b===d&&c.push({handle:_,validHandleResult:h}),d=b)}}if(!c.length)return{handle:null,validHandleResult:xc()};if(c.length===1)return c[0];const f=c.some(({validHandleResult:_})=>_.isValid),p=c.some(({handle:_})=>_.type==="target");return c.find(({handle:_,validHandleResult:b})=>p?_.type==="target":f?b.isValid:!0)||c[0]}function us(e,t,n,o,a,l,r,i,s,u,c){const d=l==="target",f=i.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:p,y:_}=Rn(e),b=i.elementFromPoint(p,_),h=b!=null&&b.classList.contains("vue-flow__handle")?b:f,v=xc();if(h){v.handleDomNode=h;const T=ui(void 0,h),Q=h.getAttribute("data-nodeid"),y=h.getAttribute("data-handleid"),$=h.classList.contains("connectable"),E=h.classList.contains("connectableend"),x={source:d?Q:o,sourceHandle:d?y:a,target:d?o:Q,targetHandle:d?a:y};v.connection=x;const U=$&&E&&(n===Wn.Strict?d&&T==="source"||!d&&T==="target":Q!==o||y!==a);v.endHandle={nodeId:Q,handleId:y,type:T},U&&(v.isValid=r(x,{edges:s,nodes:u,sourceNode:c(x.source),targetNode:c(x.target)}))}return v}function H_({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((a,l)=>{const{handleBounds:r}=l;let i=[],s=[];return r&&(i=ss(l,r,"source",`${t}-${n}-${o}`),s=ss(l,r,"target",`${t}-${n}-${o}`)),a.push(...i,...s),a},[])}function ui(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Y_(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const Z_=["production","prod"];function $l(e,...t){Z_.includes("production")||console.warn(`[Vue Flow]: ${e}`,...t)}function cs(e,t,n){const o=t.querySelectorAll(`.vue-flow__handle${e}`);if(!o||!o.length)return;const a=Array.from(o),l=t.getBoundingClientRect();return a.map(r=>{const i=r.getBoundingClientRect();return{id:r.getAttribute("data-handleid"),position:r.getAttribute("data-handlepos"),x:(i.left-l.left)/n,y:(i.top-l.top)/n,...xl(r)}})}function $r(e,t,n,o,a,l=!1,r){a.value=!1,e.selected?(l||e.selected&&t)&&(o([e]),wt(()=>{r.blur()})):n([e])}function Je(e){return typeof w(e)<"u"}function J_(e,t,n,o){if(!e||!e.source||!e.target)return n(new it(at.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let a;return jn(e)?a=e:a={...e,id:vc(e)},a=hc(a,void 0,o),I_(a,t)?!1:a}function K_(e,t,n,o,a,l){if(!t.source||!t.target)return l(new it(at.EDGE_INVALID,e.id)),!1;const r=o(e.id);if(!r)return l(new it(at.EDGE_NOT_FOUND,e.id)),!1;const{id:i,...s}=e,u={...s,id:a?vc(t):i,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(r),1,u),u}function ds(e,t,n,o){const a={},l=e.reduce((i,s,u)=>{if(!qn(s))return o(new it(at.NODE_INVALID,s==null?void 0:s.id)||`[ID UNKNOWN|INDEX ${u}]`),i;const c=q_(s,n(s.id),s.parentNode);return s.parentNode&&(a[s.parentNode]=!0),i.concat(c)},[]),r=[...l,...t];for(const i of l){const s=r.find(u=>u.id===i.parentNode);i.parentNode&&!s&&o(new it(at.NODE_MISSING_PARENT,i.id,i.parentNode)),(i.parentNode||a[i.id])&&(a[i.id]&&(i.isParent=!0),s&&(s.isParent=!0))}return l}function ps(e,t){e.clear();for(const n of t){const{id:o,source:a,target:l,sourceHandle:r=null,targetHandle:i=null}=n,s=`${a}-source-${r}`,u=`${l}-target-${i}`,c=e.get(s)||new Map,d=e.get(u)||new Map,f=zn({edgeId:o,source:a,target:l,sourceHandle:r,targetHandle:i});e.set(s,c.set(`${l}-${i}`,f)),e.set(u,d.set(`${a}-${r}`,f))}}function eg(){return{edgesChange:ue(),nodesChange:ue(),nodeDoubleClick:ue(),nodeClick:ue(),nodeMouseEnter:ue(),nodeMouseMove:ue(),nodeMouseLeave:ue(),nodeContextMenu:ue(),nodeDragStart:ue(),nodeDrag:ue(),nodeDragStop:ue(),nodesInitialized:ue(),miniMapNodeClick:ue(),miniMapNodeDoubleClick:ue(),miniMapNodeMouseEnter:ue(),miniMapNodeMouseMove:ue(),miniMapNodeMouseLeave:ue(),connect:ue(),connectStart:ue(),connectEnd:ue(),clickConnectStart:ue(),clickConnectEnd:ue(),paneReady:ue(),init:ue(),move:ue(),moveStart:ue(),moveEnd:ue(),selectionDragStart:ue(),selectionDrag:ue(),selectionDragStop:ue(),selectionContextMenu:ue(),selectionStart:ue(),selectionEnd:ue(),viewportChangeStart:ue(),viewportChange:ue(),viewportChangeEnd:ue(),paneScroll:ue(),paneClick:ue(),paneContextMenu:ue(),paneMouseEnter:ue(),paneMouseMove:ue(),paneMouseLeave:ue(),edgeContextMenu:ue(),edgeMouseEnter:ue(),edgeMouseMove:ue(),edgeMouseLeave:ue(),edgeDoubleClick:ue(),edgeClick:ue(),edgeUpdateStart:ue(),edgeUpdate:ue(),edgeUpdateEnd:ue(),updateNodeInternals:ue(),error:ue(e=>$l(e.message))}}function tg(e,t){Fr(()=>{for(const[n,o]of Object.entries(t.value)){const a=l=>{e(n,l)};o.fns.add(a),gl(()=>{o.off(a)})}})}function $c(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:oi.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Do.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:En.Bezier,style:{}},connectionMode:Wn.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:Ka()?"Meta":"Control",zoomActivationKeyCode:Ka()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:eg(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,disableKeyboardA11y:!1,ariaLiveMessage:""}}const ng=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function og(e,t,n,o){const a=C_(t),l=z=>{const I=z??n.value??[];t.hooks.updateNodeInternals.trigger(I)},r=z=>M_(z,t.nodes,t.edges),i=z=>R_(z,t.nodes,t.edges),s=z=>mn(z,t.edges),u=z=>{if(z)return t.nodes&&!n.value.length?t.nodes.find(I=>I.id===z):t.nodes[n.value.indexOf(z)]},c=z=>{if(z)return t.edges&&!o.value.length?t.edges.find(I=>I.id===z):t.edges[o.value.indexOf(z)]},d=(z,I,W)=>{var j,oe;const de=[];for(const me of z){const $e={id:me.id,type:"position",dragging:W,from:me.from};if(I&&($e.position=me.position,me.parentNode)){const Ee=u(me.parentNode);$e.position={x:$e.position.x-(((j=Ee==null?void 0:Ee.computedPosition)==null?void 0:j.x)??0),y:$e.position.y-(((oe=Ee==null?void 0:Ee.computedPosition)==null?void 0:oe.y)??0)}}de.push($e)}de!=null&&de.length&&t.hooks.nodesChange.trigger(de)},f=z=>{if(!t.vueFlowRef)return;const I=t.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!I)return;const W=window.getComputedStyle(I),{m22:j}=new window.DOMMatrixReadOnly(W.transform),oe=z.reduce((de,me)=>{const $e=u(me.id);if($e){const Ee=xl(me.nodeElement);!!(Ee.width&&Ee.height&&($e.dimensions.width!==Ee.width||$e.dimensions.height!==Ee.height||me.forceUpdate))&&($e.handleBounds.source=cs(".source",me.nodeElement,j),$e.handleBounds.target=cs(".target",me.nodeElement,j),$e.dimensions=Ee,$e.initialized=!0,de.push({id:$e.id,type:"dimensions",dimensions:Ee}))}return de},[]);!t.fitViewOnInitDone&&t.fitViewOnInit&&wt(()=>{a.value.fitView(),t.fitViewOnInitDone=!0}),oe.length&&t.hooks.nodesChange.trigger(oe)},p=(z,I)=>{const W=z.map(de=>de.id);let j,oe=[];if(t.multiSelectionActive)j=W.map(de=>Zt(de,I));else{const de=jl([...t.nodes,...t.edges],W);j=de.changedNodes,oe=de.changedEdges}j.length&&t.hooks.nodesChange.trigger(j),oe.length&&t.hooks.edgesChange.trigger(oe)},_=(z,I)=>{const W=z.map(de=>de.id);let j=[],oe;if(t.multiSelectionActive)oe=W.map(de=>Zt(de,I));else{const de=jl([...t.nodes,...t.edges],W);j=de.changedNodes,oe=de.changedEdges}j.length&&t.hooks.nodesChange.trigger(j),oe.length&&t.hooks.edgesChange.trigger(oe)},b=(z,I)=>{const W=z.filter(qn).map(me=>me.id),j=z.filter(jn).map(me=>me.id);let{changedNodes:oe,changedEdges:de}=jl([...t.nodes,...t.edges],[...W,...j]);t.multiSelectionActive&&(oe=W.map(me=>Zt(me,I)),de=j.map(me=>Zt(me,I))),oe.length&&t.hooks.nodesChange.trigger(oe),de.length&&t.hooks.edgesChange.trigger(de)},h=z=>{p(z,!0)},v=z=>{_(z,!0)},T=z=>{b(z,!0)},Q=z=>{if(!z.length)return p(z,!1);const W=z.map(j=>j.id).map(j=>Zt(j,!1));W.length&&t.hooks.nodesChange.trigger(W)},y=z=>{if(!z.length)return _(z,!1);const W=z.map(j=>j.id).map(j=>Zt(j,!1));W.length&&t.hooks.edgesChange.trigger(W)},$=z=>{if(!z||!z.length)return b([],!1);const I=z.reduce((W,j)=>{const oe=Zt(j.id,!1);return qn(j)?W.nodes.push(oe):W.edges.push(oe),W},{nodes:[],edges:[]});I.nodes.length&&t.hooks.nodesChange.trigger(I.nodes),I.edges.length&&t.hooks.edgesChange.trigger(I.edges)},E=z=>{var I;(I=t.d3Zoom)==null||I.scaleExtent([z,t.maxZoom]),t.minZoom=z},x=z=>{var I;(I=t.d3Zoom)==null||I.scaleExtent([t.minZoom,z]),t.maxZoom=z},X=z=>{var I;(I=t.d3Zoom)==null||I.translateExtent(z),t.translateExtent=z},U=z=>{t.nodeExtent=z,l(n.value)},V=z=>{t.nodesDraggable=z,t.nodesConnectable=z,t.elementsSelectable=z},G=z=>{const I=z instanceof Function?z(t.nodes):z;!t.initialized&&!I.length||(t.nodes=ds(I,t.nodes,u,t.hooks.error.trigger))},ee=z=>{const I=z instanceof Function?z(t.edges):z;if(!t.initialized&&!I.length)return;const W=t.isValidConnection?I.filter(j=>t.isValidConnection(j,{edges:t.edges,nodes:t.nodes,sourceNode:u(j.source),targetNode:u(j.target)})):I;ps(t.connectionLookup,W),t.edges=W.reduce((j,oe)=>{const de=u(oe.source),me=u(oe.target),$e=!de||typeof de>"u",Ee=!me||typeof me>"u";if($e&&Ee?t.hooks.error.trigger(new it(at.EDGE_SOURCE_TARGET_MISSING,oe.id,oe.source,oe.target)):($e&&t.hooks.error.trigger(new it(at.EDGE_SOURCE_MISSING,oe.id,oe.source)),Ee&&t.hooks.error.trigger(new it(at.EDGE_TARGET_MISSING,oe.id,oe.target))),$e||Ee)return j;const Ze=c(oe.id);return j.push({...hc(oe,Ze,t.defaultEdgeOptions),sourceNode:de,targetNode:me}),j},[])},B=z=>{const I=z instanceof Function?z([...t.nodes,...t.edges]):z;!t.initialized&&!I.length||(G(I.filter(qn)),ee(I.filter(jn)))},g=z=>{let I=z instanceof Function?z(t.nodes):z;I=Array.isArray(I)?I:[I];const j=ds(I,t.nodes,u,t.hooks.error.trigger).map(ns);j.length&&t.hooks.nodesChange.trigger(j)},D=z=>{let I=z instanceof Function?z(t.edges):z;I=Array.isArray(I)?I:[I];const j=(t.isValidConnection?I.filter(oe=>{var de;return(de=t.isValidConnection)==null?void 0:de.call(t,oe,{edges:t.edges,nodes:t.nodes,sourceNode:u(oe.source),targetNode:u(oe.target)})}):I).reduce((oe,de)=>{const me=J_(de,t.edges,t.hooks.error.trigger,t.defaultEdgeOptions);if(me){const $e=u(me.source),Ee=u(me.target);oe.push(ns({...me,sourceNode:$e,targetNode:Ee}))}return oe},[]);j.length&&t.hooks.edgesChange.trigger(j)},O=(z,I=!0,W=!1)=>{const j=z instanceof Function?z(t.nodes):z,oe=Array.isArray(j)?j:[j],de=[],me=[];function $e(Ze){const Ge=s(Ze).filter(tt=>Je(tt.deletable)?tt.deletable:!0);me.push(...Ge.map(tt=>as(tt.id,tt.source,tt.target,tt.sourceHandle,tt.targetHandle)))}function Ee(Ze){const Ge=t.nodes.filter(tt=>tt.parentNode===Ze);if(Ge.length){const tt=Ge.map(Ct=>Ct.id);de.push(...tt.map(Ct=>os(Ct))),I&&$e(Ge);for(const Ct of Ge)Ee(Ct.id)}}for(const Ze of oe){const Ge=typeof Ze=="string"?u(Ze):Ze;Ge&&(Je(Ge.deletable)&&!Ge.deletable||(de.push(os(Ge.id)),I&&$e([Ge]),W&&Ee(Ge.id)))}me.length&&t.hooks.edgesChange.trigger(me),de.length&&t.hooks.nodesChange.trigger(de)},q=z=>{const I=z instanceof Function?z(t.edges):z,W=Array.isArray(I)?I:[I],j=[];for(const oe of W){const de=typeof oe=="string"?c(oe):oe;de&&(Je(de.deletable)&&!de.deletable||j.push(as(typeof oe=="string"?oe:oe.id,de.source,de.target,de.sourceHandle,de.targetHandle)))}t.hooks.edgesChange.trigger(j)},C=(z,I,W=!0)=>K_(z,I,t.edges,c,W,t.hooks.error.trigger),N=z=>ts(z,t.nodes),P=z=>{const I=ts(z,t.edges);return ps(t.connectionLookup,I),I},R=(z,I,W={replace:!1})=>{const j=u(z);if(!j)return;const oe=typeof I=="function"?I(j):I;W.replace?t.nodes.splice(t.nodes.indexOf(j),1,oe):Object.assign(j,oe)},K=(z,I,W={replace:!1})=>{R(z,j=>{const oe=typeof I=="function"?I(j):I;return W.replace?{...j,data:oe}:{...j,data:{...j.data,...oe}}},W)},te=(z,I,W,j=!1)=>{j?t.connectionClickStartHandle=z:t.connectionStartHandle=z,t.connectionEndHandle=null,t.connectionStatus=null,I&&(t.connectionPosition=I)},L=(z,I=null,W=null)=>{t.connectionStartHandle&&(t.connectionPosition=z,t.connectionEndHandle=I,t.connectionStatus=W)},ae=(z,I)=>{t.connectionPosition={x:Number.NaN,y:Number.NaN},t.connectionEndHandle=null,t.connectionStatus=null,I?t.connectionClickStartHandle=null:t.connectionStartHandle=null},Y=z=>{const I=N_(z),W=I?null:Kn(z)?z:u(z.id);return!I&&!W?[null,null,I]:[I?z:Zi(W),W,I]},pe=(z,I=!0,W=t.nodes)=>{const[j,oe,de]=Y(z);return j?(W||t.nodes).filter(me=>{if(!de&&(me.id===oe.id||!me.computedPosition))return!1;const $e=Zi(me),Ee=wr($e,j);return I&&Ee>0||Ee>=Number(j.width)*Number(j.height)}):[]},re=(z,I,W=!0)=>{const[j]=Y(z);if(!j)return!1;const oe=wr(j,I);return W&&oe>0||oe>=Number(j.width)*Number(j.height)},se=z=>{const{viewport:I,dimensions:W,d3Zoom:j,d3Selection:oe,translateExtent:de}=t;if(!j||!oe||!z.x&&!z.y)return!1;const me=po.translate(I.x+z.x,I.y+z.y).scale(I.zoom),$e=[[0,0],[W.width,W.height]],Ee=j.constrain()(me,$e,de),Ze=t.viewport.x!==Ee.x||t.viewport.y!==Ee.y||t.viewport.zoom!==Ee.k;return j.transform(oe,Ee),Ze},H=z=>{const I=z instanceof Function?z(t):z,W=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Je(I.defaultEdgeOptions)&&(t.defaultEdgeOptions=I.defaultEdgeOptions);const j=I.modelValue||I.nodes||I.edges?[]:void 0;j&&(I.modelValue&&j.push(...I.modelValue),I.nodes&&j.push(...I.nodes),I.edges&&j.push(...I.edges),B(j));const oe=()=>{Je(I.maxZoom)&&x(I.maxZoom),Je(I.minZoom)&&E(I.minZoom),Je(I.translateExtent)&&X(I.translateExtent)};for(const de of Object.keys(I)){const me=de,$e=I[me];![...ng,...W].includes(me)&&Je($e)&&(t[me]=$e)}Fa(()=>t.d3Zoom).not.toBeNull().then(oe),t.initialized||(t.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:f,setElements:B,setNodes:G,setEdges:ee,addNodes:g,addEdges:D,removeNodes:O,removeEdges:q,findNode:u,findEdge:c,updateEdge:C,updateNode:R,updateNodeData:K,applyEdgeChanges:P,applyNodeChanges:N,addSelectedElements:T,addSelectedNodes:h,addSelectedEdges:v,setMinZoom:E,setMaxZoom:x,setTranslateExtent:X,setNodeExtent:U,removeSelectedElements:$,removeSelectedNodes:Q,removeSelectedEdges:y,startConnection:te,updateConnection:L,endConnection:ae,setInteractive:V,setState:H,getIntersectingNodes:pe,getIncomers:r,getOutgoers:i,getConnectedEdges:s,isNodeIntersecting:re,panBy:se,fitView:z=>a.value.fitView(z),zoomIn:z=>a.value.zoomIn(z),zoomOut:z=>a.value.zoomOut(z),zoomTo:(z,I)=>a.value.zoomTo(z,I),setViewport:(z,I)=>a.value.setViewport(z,I),setTransform:(z,I)=>a.value.setTransform(z,I),getViewport:()=>a.value.getViewport(),getTransform:()=>a.value.getTransform(),setCenter:(z,I,W)=>a.value.setCenter(z,I,W),fitBounds:(z,I)=>a.value.fitBounds(z,I),project:z=>a.value.project(z),screenToFlowCoordinate:z=>a.value.screenToFlowCoordinate(z),flowToScreenCoordinate:z=>a.value.flowToScreenCoordinate(z),toObject:()=>JSON.parse(JSON.stringify({nodes:t.nodes.map(z=>{const{computedPosition:I,handleBounds:W,selected:j,dimensions:oe,isParent:de,resizing:me,dragging:$e,initialized:Ee,events:Ze,...Ge}=z;return Ge}),edges:t.edges.map(z=>{const{selected:I,sourceNode:W,targetNode:j,events:oe,...de}=z;return de}),position:[t.viewport.x,t.viewport.y],zoom:t.viewport.zoom,viewport:t.viewport})),fromObject:z=>new Promise(I=>{const{nodes:W,edges:j,position:oe,zoom:de,viewport:me}=z;if(W&&G(W),j&&ee(j),me!=null&&me.x&&(me!=null&&me.y)||oe){const $e=(me==null?void 0:me.x)||oe[0],Ee=(me==null?void 0:me.y)||oe[1],Ze=(me==null?void 0:me.zoom)||de||t.viewport.zoom;return Fa(()=>a.value.viewportInitialized).toBe(!0).then(()=>{a.value.setViewport({x:$e,y:Ee,zoom:Ze}).then(()=>{I(!0)})})}else I(!0)}),updateNodeInternals:l,viewportHelper:a,$reset:()=>{const z=$c();if(t.edges=[],t.nodes=[],t.d3Zoom&&t.d3Selection){const I=po.translate(z.defaultViewport.x??0,z.defaultViewport.y??0).scale(on(z.defaultViewport.zoom??1,z.minZoom,z.maxZoom)),W=t.viewportRef.getBoundingClientRect(),j=[[0,0],[W.width,W.height]],oe=t.d3Zoom.constrain()(I,j,z.translateExtent);t.d3Zoom.transform(t.d3Selection,oe)}H(z)},$destroy:()=>{}}}const ag=["data-id","data-handleid","data-nodeid","data-handlepos"],lg={name:"Handle",compatConfig:{MODE:3}},gn=Me({...lg,props:{id:{},type:{},position:{default:()=>ve.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=fu(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Ue(()=>n.type??"source"),a=Ue(()=>n.isValidConnection??null),{connectionStartHandle:l,connectionClickStartHandle:r,connectionEndHandle:i,vueFlowRef:s,nodesConnectable:u,noDragClassName:c,noPanClassName:d}=Ae(),{id:f,node:p,nodeEl:_,connectedEdges:b}=E_(),h=F(),v=Ue(()=>e.id??`${f}__handle-${e.position}`),T=Ue(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),Q=Ue(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),y=Ue(()=>{var G,ee,B,g,D,O;return((G=l.value)==null?void 0:G.nodeId)===f&&((ee=l.value)==null?void 0:ee.handleId)===v.value&&((B=l.value)==null?void 0:B.type)===o.value||((g=i.value)==null?void 0:g.nodeId)===f&&((D=i.value)==null?void 0:D.handleId)===v.value&&((O=i.value)==null?void 0:O.type)===o.value}),$=Ue(()=>{var G,ee,B;return((G=r.value)==null?void 0:G.nodeId)===f&&((ee=r.value)==null?void 0:ee.handleId)===v.value&&((B=r.value)==null?void 0:B.type)===o.value}),{handlePointerDown:E,handleClick:x}=dc({nodeId:f,handleId:v,isValidConnection:a,type:o}),X=Se(()=>typeof e.connectable=="string"&&e.connectable==="single"?!b.value.some(G=>{const ee=G[`${o.value}Handle`];return G[o.value]!==f?!1:ee?ee===v.value:!0}):typeof e.connectable=="number"?b.value.filter(G=>{const ee=G[`${o.value}Handle`];return G[o.value]!==f?!1:ee?ee===v.value:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(p,b.value):Je(e.connectable)?e.connectable:u.value);Fa(()=>p.initialized).toBe(!0,{flush:"post"}).then(()=>{var G;const ee=(G=p.handleBounds[o.value])==null?void 0:G.find(N=>N.id===v.value);if(!s.value||ee)return;const B=s.value.querySelector(".vue-flow__transformationpane");if(!_.value||!h.value||!B||!v.value)return;const g=_.value.getBoundingClientRect(),D=h.value.getBoundingClientRect(),O=window.getComputedStyle(B),{m22:q}=new window.DOMMatrixReadOnly(O.transform),C={id:v.value,position:e.position,x:(D.left-g.left)/q,y:(D.top-g.top)/q,...xl(h.value)};p.handleBounds[o.value]=[...p.handleBounds[o.value]??[],C]}),fl(()=>{const G=p.handleBounds[o.value];G&&(p.handleBounds[o.value]=G.filter(ee=>ee.id!==v.value))});function U(G){const ee=si(G);X.value&&T.value&&(ee&&G.button===0||!ee)&&E(G)}function V(G){!f||!r.value&&!T.value||X.value&&x(G)}return t({handleClick:x,handlePointerDown:E,onClick:V,onPointerDown:U}),(G,ee)=>(k(),Z("div",{ref_key:"handle",ref:h,"data-id":`${w(f)}-${v.value}-${o.value}`,"data-handleid":v.value,"data-nodeid":w(f),"data-handlepos":G.position,class:et(["vue-flow__handle",[`vue-flow__handle-${G.position}`,`vue-flow__handle-${v.value}`,w(c),w(d),o.value,{connectable:X.value,connecting:$.value,connectablestart:T.value,connectableend:Q.value,connectionindicator:X.value&&(T.value&&!y.value||Q.value&&y.value)}]]),onMousedown:U,onTouchstartPassive:U,onClick:V},[Ve(G.$slots,"default",{id:G.id})],42,ag))}}),kl=function({sourcePosition:e=ve.Bottom,targetPosition:t=ve.Top,label:n,connectable:o=!0,isValidTargetPos:a,isValidSourcePos:l,data:r}){const i=r.label||n;return[qe(gn,{type:"target",position:t,connectable:o,isValidConnection:a}),typeof i!="string"&&i?qe(i):qe("div",{innerHTML:i}),qe(gn,{type:"source",position:e,connectable:o,isValidConnection:l})]};kl.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];kl.inheritAttrs=!1;kl.compatConfig={MODE:3};const rg=kl,Tl=function({targetPosition:e=ve.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:a}){const l=a.label||t;return[qe(gn,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof l!="string"&&l?qe(l):qe("div",{innerHTML:l})]};Tl.props=["targetPosition","label","isValidTargetPos","connectable","data"];Tl.inheritAttrs=!1;Tl.compatConfig={MODE:3};const ig=Tl,El=function({sourcePosition:e=ve.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:a}){const l=a.label||t;return[typeof l!="string"&&l?qe(l):qe("div",{innerHTML:l}),qe(gn,{type:"source",position:e,connectable:n,isValidConnection:o})]};El.props=["sourcePosition","label","isValidSourcePos","connectable","data"];El.inheritAttrs=!1;El.compatConfig={MODE:3};const sg=El,ug=["transform"],cg=["width","height","x","y","rx","ry"],dg=["y"],pg={name:"EdgeText",compatConfig:{MODE:3}},fg=Me({...pg,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=F({x:0,y:0,width:0,height:0}),n=F(null),o=Se(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);bn(a),Te([()=>e.x,()=>e.y,n,()=>e.label],a);function a(){if(!n.value)return;const l=n.value.getBBox();(l.width!==t.value.width||l.height!==t.value.height)&&(t.value=l)}return(l,r)=>(k(),Z("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[l.labelShowBg?(k(),Z("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*l.labelBgPadding[0]}px`,height:`${t.value.height+2*l.labelBgPadding[1]}px`,x:-l.labelBgPadding[0],y:-l.labelBgPadding[1],style:lt(l.labelBgStyle),rx:l.labelBgBorderRadius,ry:l.labelBgBorderRadius},null,12,cg)):ce("",!0),De("text",hu(l.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:l.labelStyle}),[Ve(l.$slots,"default",{},()=>[typeof l.label!="string"?(k(),A(Tn(l.label),{key:0})):(k(),Z(ye,{key:1},[ne(J(l.label),1)],64))])],16,dg)],8,ug))}}),hg=["id","d","marker-end","marker-start"],mg=["d","stroke-width"],vg={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},Ql=Me({...vg,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},style:{},labelStyle:{},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=fu(e,["interactionWidth","labelShowBg"]),o=F(null),a=F(null),l=F(null),r=hl();return t({pathEl:o,interactionEl:a,labelEl:l}),(i,s)=>(k(),Z(ye,null,[De("path",{id:i.id,ref_key:"pathEl",ref:o,d:i.path,style:lt(n.style),class:et(["vue-flow__edge-path",w(r).class]),"marker-end":i.markerEnd,"marker-start":i.markerStart},null,14,hg),i.interactionWidth?(k(),Z("path",{key:0,ref_key:"interactionEl",ref:a,fill:"none",d:i.path,"stroke-width":i.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,mg)):ce("",!0),i.label&&i.labelX&&i.labelY?(k(),A(fg,{key:1,ref_key:"labelEl",ref:l,x:i.labelX,y:i.labelY,label:i.label,"label-show-bg":i.labelShowBg,"label-bg-style":i.labelBgStyle,"label-bg-padding":i.labelBgPadding,"label-bg-border-radius":i.labelBgBorderRadius,"label-style":i.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):ce("",!0)],64))}});function kc({sourceX:e,sourceY:t,targetX:n,targetY:o}){const a=Math.abs(n-e)/2,l=n<e?n+a:n-a,r=Math.abs(o-t)/2,i=o<t?o+r:o-r;return[l,i,a,r]}function Tc({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:a,sourceControlY:l,targetControlX:r,targetControlY:i}){const s=e*.125+a*.375+r*.375+n*.125,u=t*.125+l*.375+i*.375+o*.125,c=Math.abs(s-e),d=Math.abs(u-t);return[s,u,c,d]}function ma(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function fs({pos:e,x1:t,y1:n,x2:o,y2:a,c:l}){let r,i;switch(e){case ve.Left:r=t-ma(t-o,l),i=n;break;case ve.Right:r=t+ma(o-t,l),i=n;break;case ve.Top:r=t,i=n-ma(n-a,l);break;case ve.Bottom:r=t,i=n+ma(a-n,l);break}return[r,i]}function Ec({sourceX:e,sourceY:t,sourcePosition:n=ve.Bottom,targetX:o,targetY:a,targetPosition:l=ve.Top,curvature:r=.25}){const[i,s]=fs({pos:n,x1:e,y1:t,x2:o,y2:a,c:r}),[u,c]=fs({pos:l,x1:o,y1:a,x2:e,y2:t,c:r}),[d,f,p,_]=Tc({sourceX:e,sourceY:t,targetX:o,targetY:a,sourceControlX:i,sourceControlY:s,targetControlX:u,targetControlY:c});return[`M${e},${t} C${i},${s} ${u},${c} ${o},${a}`,d,f,p,_]}function hs({pos:e,x1:t,y1:n,x2:o,y2:a}){let l,r;switch(e){case ve.Left:case ve.Right:l=.5*(t+o),r=n;break;case ve.Top:case ve.Bottom:l=t,r=.5*(n+a);break}return[l,r]}function Qc({sourceX:e,sourceY:t,sourcePosition:n=ve.Bottom,targetX:o,targetY:a,targetPosition:l=ve.Top}){const[r,i]=hs({pos:n,x1:e,y1:t,x2:o,y2:a}),[s,u]=hs({pos:l,x1:o,y1:a,x2:e,y2:t}),[c,d,f,p]=Tc({sourceX:e,sourceY:t,targetX:o,targetY:a,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:u});return[`M${e},${t} C${r},${i} ${s},${u} ${o},${a}`,c,d,f,p]}const ms={[ve.Left]:{x:-1,y:0},[ve.Right]:{x:1,y:0},[ve.Top]:{x:0,y:-1},[ve.Bottom]:{x:0,y:1}};function _g({source:e,sourcePosition:t=ve.Bottom,target:n}){return t===ve.Left||t===ve.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function vs(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function gg({source:e,sourcePosition:t=ve.Bottom,target:n,targetPosition:o=ve.Top,center:a,offset:l}){const r=ms[t],i=ms[o],s={x:e.x+r.x*l,y:e.y+r.y*l},u={x:n.x+i.x*l,y:n.y+i.y*l},c=_g({source:s,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let p,_,b;const h={x:0,y:0},v={x:0,y:0},[T,Q,y,$]=kc({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(r[d]*i[d]===-1){_=a.x??T,b=a.y??Q;const x=[{x:_,y:s.y},{x:_,y:u.y}],X=[{x:s.x,y:b},{x:u.x,y:b}];r[d]===f?p=d==="x"?x:X:p=d==="x"?X:x}else{const x=[{x:s.x,y:u.y}],X=[{x:u.x,y:s.y}];if(d==="x"?p=r.x===f?X:x:p=r.y===f?x:X,t===o){const B=Math.abs(e[d]-n[d]);if(B<=l){const g=Math.min(l-1,l-B);r[d]===f?h[d]=(s[d]>e[d]?-1:1)*g:v[d]=(u[d]>n[d]?-1:1)*g}}if(t!==o){const B=d==="x"?"y":"x",g=r[d]===i[B],D=s[B]>u[B],O=s[B]<u[B];(r[d]===1&&(!g&&D||g&&O)||r[d]!==1&&(!g&&O||g&&D))&&(p=d==="x"?x:X)}const U={x:s.x+h.x,y:s.y+h.y},V={x:u.x+v.x,y:u.y+v.y},G=Math.max(Math.abs(U.x-p[0].x),Math.abs(V.x-p[0].x)),ee=Math.max(Math.abs(U.y-p[0].y),Math.abs(V.y-p[0].y));G>=ee?(_=(U.x+V.x)/2,b=p[0].y):(_=p[0].x,b=(U.y+V.y)/2)}return[[e,{x:s.x+h.x,y:s.y+h.y},...p,{x:u.x+v.x,y:u.y+v.y},n],_,b,y,$]}function yg(e,t,n,o){const a=Math.min(vs(e,t)/2,vs(t,n)/2,o),{x:l,y:r}=t;if(e.x===l&&l===n.x||e.y===r&&r===n.y)return`L${l} ${r}`;if(e.y===r){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${l+a*u},${r}Q ${l},${r} ${l},${r+a*c}`}const i=e.x<n.x?1:-1,s=e.y<n.y?-1:1;return`L ${l},${r+a*s}Q ${l},${r} ${l+a*i},${r}`}function kr({sourceX:e,sourceY:t,sourcePosition:n=ve.Bottom,targetX:o,targetY:a,targetPosition:l=ve.Top,borderRadius:r=5,centerX:i,centerY:s,offset:u=20}){const[c,d,f,p,_]=gg({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:a},targetPosition:l,center:{x:i,y:s},offset:u});return[c.reduce((h,v,T)=>{let Q;return T>0&&T<c.length-1?Q=yg(c[T-1],v,c[T+1],r):Q=`${T===0?"M":"L"}${v.x} ${v.y}`,h+=Q,h},""),d,f,p,_]}function Og({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[a,l,r,i]=kc({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,a,l,r,i]}const bg=Me({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,a]=Og(e);return qe(Ql,{path:n,labelX:o,labelY:a,...t,...e})}}}),wg=bg,Sg=Me({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,a]=kr({...e,sourcePosition:e.sourcePosition??ve.Bottom,targetPosition:e.targetPosition??ve.Top});return qe(Ql,{path:n,labelX:o,labelY:a,...t,...e})}}}),Pc=Sg,xg=Me({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>qe(Pc,{...e,...t,borderRadius:0})}}),$g=xg,kg=Me({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,a]=Ec({...e,sourcePosition:e.sourcePosition??ve.Bottom,targetPosition:e.targetPosition??ve.Top});return qe(Ql,{path:n,labelX:o,labelY:a,...t,...e})}}}),Tg=kg,Eg=Me({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,a]=Qc({...e,sourcePosition:e.sourcePosition??ve.Bottom,targetPosition:e.targetPosition??ve.Top});return qe(Ql,{path:n,labelX:o,labelY:a,...t,...e})}}}),Qg=Eg,Pg={input:sg,default:rg,output:ig},Dg={default:Tg,straight:wg,step:$g,smoothstep:Pc,simplebezier:Qg};function Cg(e,t,n){const o=Se(()=>h=>e.nodes&&!t.value.length?e.nodes.find(v=>v.id===h):e.nodes[t.value.indexOf(h)]),a=Se(()=>h=>e.edges&&!n.value.length?e.edges.find(v=>v.id===h):e.edges[n.value.indexOf(h)]),l=Se(()=>{const h={...Dg,...e.edgeTypes},v=Object.keys(h);for(const T of e.edges)T.type&&!v.includes(T.type)&&(h[T.type]=T.type);return h}),r=Se(()=>{const h={...Pg,...e.nodeTypes},v=Object.keys(h);for(const T of e.nodes)T.type&&!v.includes(T.type)&&(h[T.type]=T.type);return h}),i=Se(()=>{const h=e.nodes.filter(v=>!v.hidden);return e.onlyRenderVisibleElements?h&&Oc(h,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):h??[]}),s=(h,v,T)=>{if(v=v??o.value(h.source),T=T??o.value(h.target),!v||!T){e.hooks.error.trigger(new it(at.EDGE_ORPHANED,h.id));return}return!h.hidden&&!T.hidden&&!v.hidden},u=Se(()=>e.onlyRenderVisibleElements?e.edges.filter(h=>{const v=o.value(h.source),T=o.value(h.target);return s(h,v,T)&&L_({sourcePos:v.computedPosition||{x:0,y:0},targetPos:T.computedPosition||{x:0,y:0},sourceWidth:v.dimensions.width,sourceHeight:v.dimensions.height,targetWidth:T.dimensions.width,targetHeight:T.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})}):e.edges.filter(h=>s(h))),c=Se(()=>[...i.value,...u.value]),d=Se(()=>e.nodes.filter(h=>h.selected)),f=Se(()=>e.edges.filter(h=>h.selected)),p=Se(()=>[...d.value??[],...f.value??[]]),_=Se(()=>i.value.filter(h=>h.initialized&&h.handleBounds!==void 0)),b=Se(()=>i.value.length>0&&_.value.length===i.value.length);return{getNode:o,getEdge:a,getElements:c,getEdgeTypes:l,getNodeTypes:r,getEdges:u,getNodes:i,getSelectedElements:p,getSelectedNodes:d,getSelectedEdges:f,getNodesInitialized:_,areNodesInitialized:b}}class Qn{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=Gn())==null?void 0:t.appContext.app,o=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??Qn.instance;return Qn.instance=o??new Qn,n&&(n.config.globalProperties.$vueFlowStorage=Qn.instance),Qn.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=$c(),a=ut(o),l={};for(const[f,p]of Object.entries(a.hooks)){const _=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;l[_]=p.on}const r={};for(const[f,p]of Object.entries(a.hooks))r[f]=p.trigger;const i=Se(()=>a.nodes.map(f=>f.id)),s=Se(()=>a.edges.map(f=>f.id)),u=Cg(a,i,s),c=og(t,a,i,s);c.setState({...a,...n});const d={...l,...u,...c,...Mf(a),emits:r,id:t,vueFlowVersion:"1.33.5",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function Ae(e){const t=Qn.getInstance(),n=du(),o=e==null?void 0:e.id,a=(n==null?void 0:n.vueFlowId)||o;let l;if(n){const r=On(Yi,null);typeof r<"u"&&r!==null&&(l=r)}if(l||a&&(l=t.get(a)),!l||l&&o&&o!==l.id){const r=o??t.getId(),i=t.create(r,e);l=i,(n??uu(!0)).run(()=>{Te(i.applyDefault,(u,c,d)=>{const f=_=>{i.applyNodeChanges(_)},p=_=>{i.applyEdgeChanges(_)};u?(i.onNodesChange(f),i.onEdgesChange(p)):(i.hooks.value.nodesChange.off(f),i.hooks.value.edgesChange.off(p)),d(()=>{i.hooks.value.nodesChange.off(f),i.hooks.value.edgesChange.off(p)})},{immediate:!0}),gl(()=>{if(l){const u=t.get(l.id);u?u.$destroy():$l(`No store instance found for id ${l.id} in storage.`)}})})}else e&&l.setState(e);return n&&(In(Yi,l),n.vueFlowId=l.id),l}function zg(e){const t=ai(),{emits:n,dimensions:o}=Ae();let a;bn(()=>{const l=e.value,r=()=>{if(!l)return;const i=xl(l);(i.width===0||i.height===0)&&n.error(new it(at.MISSING_VIEWPORT_DIMENSIONS)),o.value={width:i.width||500,height:i.height||500}};r(),t.addEventListener("resize",r),l&&(a=new ResizeObserver(()=>r()),a.observe(l)),Lr(()=>{t.removeEventListener("resize",r),a&&l&&a.unobserve(l)})})}const Ng={name:"UserSelection",compatConfig:{MODE:3}},qg=Me({...Ng,props:{userSelectionRect:{}},setup(e){return(t,n)=>(k(),Z("div",{class:"vue-flow__selection vue-flow__container",style:lt({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),Rg=["tabIndex"],Mg={name:"NodesSelection",compatConfig:{MODE:3}},Ig=Me({...Mg,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:a,disableKeyboardA11y:l,userSelectionActive:r}=Ae(),i=pc(),s=F(null),u=sc({el:s,onStart(_){t.selectionDragStart(_)},onDrag(_){t.selectionDrag(_)},onStop(_){t.selectionDragStop(_)}});bn(()=>{var _;l.value||(_=s.value)==null||_.focus({preventScroll:!0})});const c=Se(()=>ri(o.value)),d=Se(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function f(_){t.selectionContextMenu({event:_,nodes:o.value})}function p(_){l||ao[_.key]&&i({x:ao[_.key].x,y:ao[_.key].y},_.shiftKey)}return(_,b)=>!w(r)&&c.value.width&&c.value.height?(k(),Z("div",{key:0,class:et(["vue-flow__nodesselection vue-flow__container",w(a)]),style:lt({transform:`translate(${w(n).x}px,${w(n).y}px) scale(${w(n).zoom})`})},[De("div",{ref_key:"el",ref:s,class:et([{dragging:w(u)},"vue-flow__nodesselection-rect"]),style:lt(d.value),tabIndex:w(l)?void 0:-1,onContextmenu:f,onKeydown:p},null,46,Rg)],6)):ce("",!0)}});function _s(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Vg={name:"Pane",compatConfig:{MODE:3}},Ag=Me({...Vg,props:{isSelecting:{type:Boolean}},setup(e){const{vueFlowRef:t,getNodes:n,getEdges:o,viewport:a,emits:l,userSelectionActive:r,removeSelectedElements:i,panOnDrag:s,userSelectionRect:u,elementsSelectable:c,nodesSelectionActive:d,addSelectedElements:f,getSelectedEdges:p,getSelectedNodes:_,removeNodes:b,removeEdges:h,selectionMode:v,deleteKeyCode:T,multiSelectionKeyCode:Q,multiSelectionActive:y}=Ae(),$=F(null),E=F(0),x=F(0),X=F(),U=Ue(()=>c.value&&(e.isSelecting||r.value));Co(T,N=>{if(!N)return;const P=n.value.reduce((R,K)=>((!K.selected&&K.parentNode&&R.find(te=>te.id===K.parentNode)||K.selected)&&R.push(K),R),[]);(P||p.value)&&(p.value.length>0&&h(p.value),P.length>0&&b(P),d.value=!1,i())}),Co(Q,N=>{y.value=N});function V(){r.value=!1,u.value=null,E.value=0,x.value=0}function G(N){N.target!==$.value||U.value||(l.paneClick(N),i(),d.value=!1)}function ee(N){var P;if(N.target===$.value){if(Array.isArray(s.value)&&((P=s.value)!=null&&P.includes(2))){N.preventDefault();return}l.paneContextMenu(N)}}function B(N){N.target===$.value&&l.paneScroll(N)}function g(N){if(X.value=t.value.getBoundingClientRect(),!U.value||!c||!e.isSelecting||N.button!==0||N.target!==$.value||!X.value)return;const{x:P,y:R}=_s(N,X.value);i(),u.value={width:0,height:0,startX:P,startY:R,x:P,y:R},r.value=!0,l.selectionStart(N)}function D(N){if(!U.value)return l.paneMouseMove(N);if(!e.isSelecting||!X.value||!u.value)return;r.value||(r.value=!0),d.value&&(d.value=!1);const P=_s(N,X.value),R=u.value.startX??0,K=u.value.startY??0,te={...u.value,x:P.x<R?P.x:R,y:P.y<K?P.y:K,width:Math.abs(P.x-R),height:Math.abs(P.y-K)},L=Oc(n.value,u.value,a.value,v.value===oi.Partial),ae=mn(L,o.value);E.value=L.length,x.value=ae.length,u.value=te,f([...L,...ae])}function O(N){U.value&&N.button===0&&(!r.value&&u.value&&N.target===$.value&&G(N),d.value=E.value>0,V(),l.selectionEnd(N))}function q(N){var P;if(!U.value)return l.paneMouseLeave(N);r.value&&(d.value=E.value>0,(P=l.selectionEnd)==null||P.call(l,N)),V()}function C(N){U.value||l.paneMouseEnter(N)}return(N,P)=>(k(),Z("div",{ref_key:"container",ref:$,class:et(["vue-flow__pane vue-flow__container",{selection:N.isSelecting}]),onClick:G,onContextmenu:ee,onWheelPassive:B,onMouseenter:C,onMousedown:g,onMousemove:D,onMouseup:O,onMouseleave:q},[Ve(N.$slots,"default"),w(r)&&w(u)?(k(),A(qg,{key:0,"user-selection-rect":w(u)},null,8,["user-selection-rect"])):ce("",!0),w(d)&&w(_).length?(k(),A(Ig,{key:1})):ce("",!0)],34))}}),Xg={name:"Transform",compatConfig:{MODE:3}},Ug=Me({...Xg,setup(e){const{viewport:t}=Ae();return(n,o)=>(k(),Z("div",{class:"vue-flow__transformationpane vue-flow__container",style:lt({transform:`translate(${w(t).x}px,${w(t).y}px) scale(${w(t).zoom})`})},[Ve(n.$slots,"default")],4))}}),Wg={name:"Viewport",compatConfig:{MODE:3}},jg=Me({...Wg,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:a,zoomActivationKeyCode:l,selectionKeyCode:r,panActivationKeyCode:i,panOnScroll:s,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:f,zoomOnPinch:p,zoomOnScroll:_,preventScrolling:b,noWheelClassName:h,noPanClassName:v,emits:T,connectionStartHandle:Q,userSelectionActive:y,paneDragging:$,d3Zoom:E,d3Selection:x,d3ZoomHandler:X,viewport:U,viewportRef:V}=Ae();zg(V);const G=F(!1),ee=F(!1);let B=null,g=!1,D=0,O={x:0,y:0,zoom:0};const q=Co(i),C=Co(r),N=Co(l),P=Ue(()=>q.value||d.value),R=Ue(()=>q.value||s.value),K=Ue(()=>C.value||r.value===!0&&P.value!==!0);bn(()=>{if(!V.value){$l("Viewport element is missing");return}const re=V.value,se=re.getBoundingClientRect(),H=g_().scaleExtent([t.value,n.value]).translateExtent(a.value),he=kt(re).call(H),_e=he.on("wheel.zoom"),Ce=po.translate(o.value.x??0,o.value.y??0).scale(on(o.value.zoom??1,t.value,n.value)),z=[[0,0],[se.width,se.height]],I=H.constrain()(Ce,z,a.value);H.transform(he,I),H.wheelDelta(L),E.value=H,x.value=he,X.value=_e,U.value={x:I.x,y:I.y,zoom:I.k},H.on("start",W=>{var j;if(!W.sourceEvent)return null;D=W.sourceEvent.button,G.value=!0;const oe=Y(W.transform);((j=W.sourceEvent)==null?void 0:j.type)==="mousedown"&&($.value=!0),O=oe,T.viewportChangeStart(oe),T.moveStart({event:W,flowTransform:oe})}),H.on("end",W=>{if(!W.sourceEvent)return null;if(G.value=!1,$.value=!1,te(P.value,D??0)&&!g&&T.paneContextMenu(W.sourceEvent),g=!1,ae(O,W.transform)){const j=Y(W.transform);O=j,T.viewportChangeEnd(j),T.moveEnd({event:W,flowTransform:j})}}),H.filter(W=>{var j,oe;const de=N.value||_.value,me=p.value&&W.ctrlKey;if((P.value===!0||Array.isArray(P.value)&&P.value.includes(1))&&W.button===1&&W.type==="mousedown"&&((j=W.target)!=null&&j.closest(".vue-flow__node")||(oe=W.target)!=null&&oe.closest(".vue-flow__edge")))return!0;if(!P.value&&!de&&!R.value&&!f.value&&!p.value||y.value||!f.value&&W.type==="dblclick"||pe(W,h.value)&&W.type==="wheel"||pe(W,v.value)&&(W.type!=="wheel"||R.value&&W.type==="wheel"&&!N.value)||!p.value&&W.ctrlKey&&W.type==="wheel"||!de&&!R.value&&!me&&W.type==="wheel"||!P.value&&(W.type==="mousedown"||W.type==="touchstart")||Array.isArray(P.value)&&!P.value.includes(W.button)&&(W.type==="mousedown"||W.type==="touchstart"))return!1;const $e=Array.isArray(P.value)&&P.value.includes(W.button)||!W.button||W.button<=1;return(!W.ctrlKey||W.type==="wheel")&&$e}),Te([y,P],()=>{y.value&&!G.value?H.on("zoom",null):y.value||H.on("zoom",W=>{U.value={x:W.transform.x,y:W.transform.y,zoom:W.transform.k};const j=Y(W.transform);g=te(P.value,D??0),T.viewportChange(j),T.move({event:W,flowTransform:j})})},{immediate:!0}),Te([y,R,u,N,p,b,h],()=>{R.value&&!N.value&&!y.value?he.on("wheel.zoom",W=>{if(pe(W,h.value))return!1;W.preventDefault(),W.stopImmediatePropagation();const j=he.property("__zoom").k||1,oe=Ka();if(W.ctrlKey&&p.value&&oe){const Ze=Nt(W),Ge=L(W),tt=j*2**Ge;H.scaleTo(he,tt,Ze,W);return}const de=W.deltaMode===1?20:1;let me=u.value===Do.Vertical?0:W.deltaX*de,$e=u.value===Do.Horizontal?0:W.deltaY*de;!oe&&W.shiftKey&&u.value!==Do.Vertical&&!me&&$e&&(me=$e,$e=0),H.translateBy(he,-(me/j)*c.value,-($e/j)*c.value);const Ee=Y(he.property("__zoom"));B&&clearTimeout(B),ee.value?(T.move({event:W,flowTransform:Ee}),T.viewportChange(Ee),B=setTimeout(()=>{T.moveEnd({event:W,flowTransform:Ee}),T.viewportChangeEnd(Ee),ee.value=!1},150)):(ee.value=!0,T.moveStart({event:W,flowTransform:Ee}),T.viewportChangeStart(Ee))},{passive:!1}):typeof _e<"u"&&he.on("wheel.zoom",function(W,j){if(!b.value||pe(W,h.value))return null;W.preventDefault(),_e.call(this,W,j)},{passive:!1})},{immediate:!0})});function te(re,se){return se===2&&Array.isArray(re)&&re.includes(2)}function L(re){const se=re.ctrlKey&&Ka()?10:1;return-re.deltaY*(re.deltaMode===1?.05:re.deltaMode?1:.002)*se}function ae(re,se){return re.x!==se.x&&!Number.isNaN(se.x)||re.y!==se.y&&!Number.isNaN(se.y)||re.zoom!==se.k&&!Number.isNaN(se.k)}function Y(re){return{x:re.x,y:re.y,zoom:re.k}}function pe(re,se){return re.target.closest(`.${se}`)}return(re,se)=>(k(),Z("div",{ref_key:"viewportRef",ref:V,class:"vue-flow__viewport vue-flow__container"},[m(Ag,{"is-selecting":K.value,class:et({connecting:!!w(Q),dragging:w($),draggable:P.value})},{default:S(()=>[m(Ug,null,{default:S(()=>[Ve(re.$slots,"default")]),_:3})]),_:3},8,["is-selecting","class"])],512))}}),Fg=["id"],Lg=["id"],Gg=["id"],Bg={name:"A11yDescriptions",compatConfig:{MODE:3}},Hg=Me({...Bg,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Ae();return(a,l)=>(k(),Z(ye,null,[De("div",{id:`${w(lc)}-${w(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+J(w(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Fg),De("div",{id:`${w(rc)}-${w(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Lg),w(n)?ce("",!0):(k(),Z("div",{key:0,id:`${w(w_)}-${w(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},J(w(o)),9,Gg))],64))}});function Yg(){const e=Ae();Te(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function Zg(e,t,n){return n===ve.Left?e-t:n===ve.Right?e+t:e}function Jg(e,t,n){return n===ve.Top?e-t:n===ve.Bottom?e+t:e}const ci=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=ve.Top,type:a}){return qe("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${a}`,cx:Zg(t,e,o),cy:Jg(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};ci.props=["radius","centerX","centerY","position","type"];ci.compatConfig={MODE:3};const gs=ci,Kg=Me({name:"Edge",compatConfig:{MODE:3},props:["name","type","id","updatable","selectable","focusable","edge"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:a,emits:l,nodesSelectionActive:r,noPanClassName:i,getEdgeTypes:s,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:f,multiSelectionActive:p,disableKeyboardA11y:_}=Ae(),b=k_(e.edge,l),h=Po(e,"edge"),v=F(!1),T=F(!1),Q=F(""),y=F(null),$=F("source"),E=F(null);In(S_,e.id),In(x_,E);const x=Se(()=>h.value.class instanceof Function?h.value.class(h.value):h.value.class),X=Se(()=>h.value.style instanceof Function?h.value.style(h.value):h.value.style),{handlePointerDown:U}=dc({nodeId:Q,handleId:y,type:$,isValidConnection:f,edgeUpdaterType:$,onEdgeUpdate:ee,onEdgeUpdateEnd:B});return()=>{const L=d(h.value.source),ae=d(h.value.target);if(!L&&!ae)return l.error(new it(at.EDGE_SOURCE_TARGET_MISSING,h.value.id,h.value.source,h.value.target)),null;if(!L)return l.error(new it(at.EDGE_SOURCE_MISSING,h.value.id,h.value.source)),null;if(!ae)return l.error(new it(at.EDGE_TARGET_MISSING,h.value.id,h.value.target)),null;if(!h||L.hidden||ae.hidden)return null;let Y;o.value===Wn.Strict?Y=L.handleBounds.source:Y=[...L.handleBounds.source||[],...L.handleBounds.target||[]];const pe=rs(Y,h.value.sourceHandle);let re;o.value===Wn.Strict?re=ae.handleBounds.target:re=[...ae.handleBounds.target||[],...ae.handleBounds.source||[]];const se=rs(re,h.value.targetHandle),H=pe?pe.position:ve.Bottom,he=se?se.position:ve.Top,{sourceX:_e,sourceY:Ce,targetY:z,targetX:I}=F_(L,pe,H,ae,se,he);return h.value.sourceX=_e,h.value.sourceY=Ce,h.value.targetX=I,h.value.targetY=z,qe("g",{ref:E,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${e.type===!1?"default":e.name}`,i.value,x.value,{updating:v.value,selected:h.value.selected,animated:h.value.animated,inactive:!e.selectable}],onClick:D,onContextmenu:O,onDblclick:q,onMouseenter:C,onMousemove:N,onMouseleave:P,onKeyDown:e.focusable?te:void 0,tabIndex:e.focusable?0:void 0,"aria-label":h.value.ariaLabel===null?void 0:h.value.ariaLabel||`Edge from ${h.value.source} to ${h.value.target}`,"aria-describedby":e.focusable?`${rc}-${t}`:void 0,role:e.focusable?"button":"img"},[T.value?null:qe(e.type===!1?s.value.default:e.type,{id:e.id,sourceNode:L,targetNode:ae,source:h.value.source,target:h.value.target,type:h.value.type,updatable:e.updatable,selected:h.value.selected,animated:h.value.animated,label:h.value.label,labelStyle:h.value.labelStyle,labelShowBg:h.value.labelShowBg,labelBgStyle:h.value.labelBgStyle,labelBgPadding:h.value.labelBgPadding,labelBgBorderRadius:h.value.labelBgBorderRadius,data:h.value.data,events:{...h.value.events,...b.on},style:X.value,markerStart:`url('#${Dn(h.value.markerStart,t)}')`,markerEnd:`url('#${Dn(h.value.markerEnd,t)}')`,sourcePosition:H,targetPosition:he,sourceX:_e,sourceY:Ce,targetX:I,targetY:z,sourceHandleId:h.value.sourceHandle,targetHandleId:h.value.targetHandle,interactionWidth:h.value.interactionWidth}),[e.updatable==="source"||e.updatable===!0?[qe("g",{onMousedown:R,onMouseenter:V,onMouseout:G},qe(gs,{position:H,centerX:_e,centerY:Ce,radius:a.value,type:"source","data-type":"source"}))]:null,e.updatable==="target"||e.updatable===!0?[qe("g",{onMousedown:K,onMouseenter:V,onMouseout:G},qe(gs,{position:he,centerX:I,centerY:z,radius:a.value,type:"target","data-type":"target"}))]:null]])};function V(){v.value=!0}function G(){v.value=!1}function ee(L,ae){b.emit.update({event:L,edge:h.value,connection:ae})}function B(L){b.emit.updateEnd({event:L,edge:h.value}),T.value=!1}function g(L,ae){L.button===0&&(T.value=!0,Q.value=ae?h.value.target:h.value.source,y.value=(ae?h.value.targetHandle:h.value.sourceHandle)??"",$.value=ae?"target":"source",b.emit.updateStart({event:L,edge:h.value}),U(L))}function D(L){var ae;const Y={event:L,edge:h.value};e.selectable&&(r.value=!1,h.value.selected&&p.value?(u([h.value]),(ae=E.value)==null||ae.blur()):n([h.value])),b.emit.click(Y)}function O(L){b.emit.contextMenu({event:L,edge:h.value})}function q(L){b.emit.doubleClick({event:L,edge:h.value})}function C(L){b.emit.mouseEnter({event:L,edge:h.value})}function N(L){b.emit.mouseMove({event:L,edge:h.value})}function P(L){b.emit.mouseLeave({event:L,edge:h.value})}function R(L){g(L,!0)}function K(L){g(L,!1)}function te(L){var ae;!_.value&&ic.includes(L.key)&&e.selectable&&(L.key==="Escape"?((ae=E.value)==null||ae.blur(),u([c(e.id)])):n([c(e.id)]))}}}),ey=Kg,ty={[ve.Left]:ve.Right,[ve.Right]:ve.Left,[ve.Top]:ve.Bottom,[ve.Bottom]:ve.Top},ny=Me({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:a,connectionPosition:l,connectionLineType:r,connectionLineStyle:i,connectionLineOptions:s,connectionStatus:u,viewport:c,findNode:d}=Ae(),f=(e=On(Sl))==null?void 0:e["connection-line"];return()=>{var p,_,b,h,v;if(!o.value)return null;const T=d(o.value.nodeId);if(!T)return null;const Q=o.value.handleId,y=o.value.type,$=((p=a.value)==null?void 0:p.handleId)&&d(a.value.nodeId)||null,E=(l.value.x-c.value.x)/c.value.zoom,x=(l.value.y-c.value.y)/c.value.zoom,X=T.handleBounds;let U=X==null?void 0:X[y];if(n.value===Wn.Loose&&(U=U||(X==null?void 0:X[y==="source"?"target":"source"])),!U)return null;const V=(Q?U.find(N=>N.id===Q):U[0])??null,G=(V==null?void 0:V.position)||ve.Top,{x:ee,y:B}=xr(G,{...T.dimensions,...T.computedPosition},V),g=$&&((_=a.value)==null?void 0:_.handleId)&&((n.value===Wn.Strict?(b=$.handleBounds[y==="source"?"target":"source"])==null?void 0:b.find(N=>{var P;return N.id===((P=a.value)==null?void 0:P.handleId)}):(h=[...$.handleBounds.source||[],...$.handleBounds.target||[]])==null?void 0:h.find(N=>{var P;return N.id===((P=a.value)==null?void 0:P.handleId)}))||((v=$.handleBounds[y??"target"])==null?void 0:v[0]))||null,D=G?ty[G]:null;if(!G||!D)return null;const O=r.value??s.value.type??En.Bezier;let q="";const C={sourceX:ee,sourceY:B,sourcePosition:G,targetX:E,targetY:x,targetPosition:D};return O===En.Bezier?[q]=Ec(C):O===En.Step?[q]=kr({...C,borderRadius:0}):O===En.SmoothStep?[q]=kr(C):O===En.SimpleBezier?[q]=Qc(C):q=`M${ee},${B} ${E},${x}`,qe("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},qe("g",{class:"vue-flow__connection"},f?qe(f,{sourceX:ee,sourceY:B,sourcePosition:G,targetX:E,targetY:x,targetPosition:D,sourceNode:T,sourceHandle:V,targetNode:$,targetHandle:g,markerEnd:`url(#${Dn(s.value.markerEnd,t)})`,markerStart:`url(#${Dn(s.value.markerStart,t)})`,connectionStatus:u.value}):qe("path",{d:q,class:[s.value.class,u,"vue-flow__connection-path"],style:{...i.value,...s.value.style},"marker-end":`url(#${Dn(s.value.markerEnd,t)})`,"marker-start":`url(#${Dn(s.value.markerStart,t)})`})))}}}),oy=ny,ay=["id","markerWidth","markerHeight","markerUnits","orient"],ly={name:"MarkerType",compatConfig:{MODE:3}},ry=Me({...ly,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(k(),Z("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===w(Or).ArrowClosed?(k(),Z("polyline",{key:0,style:lt({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):ce("",!0),t.type===w(Or).Arrow?(k(),Z("polyline",{key:1,style:lt({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):ce("",!0)],8,ay))}}),iy={name:"MarkerDefinitions",compatConfig:{MODE:3}},sy=Me({...iy,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:a}=Ae(),l=Se(()=>{const r=[],i=[],s=u=>{if(u){const c=Dn(u,t);r.includes(c)||(typeof u=="object"?i.push({...u,id:c,color:u.color||a.value}):i.push({id:c,color:a.value,type:u}),r.push(c))}};for(const u of[o.value.markerEnd,o.value.markerStart])s(u);return n.value.reduce((u,c)=>{for(const d of[c.markerStart,c.markerEnd])s(d);return u.sort((d,f)=>d.id.localeCompare(f.id))},i),i});return(r,i)=>(k(),Z("defs",null,[(k(!0),Z(ye,null,Xe(l.value,s=>(k(),A(ry,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,"stroke-width":s.strokeWidth,orient:s.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))]))}}),uy={class:"vue-flow__edges vue-flow__container"},cy={name:"Edges",compatConfig:{MODE:3}},dy=Me({...cy,setup(e){const t=On(Sl),{edgesUpdatable:n,edgesFocusable:o,elementsSelectable:a,findNode:l,getEdges:r,getEdgeTypes:i,elevateEdgesOnSelect:s,dimensions:u,emits:c}=Ae(),d=Gn();function f(h){return typeof h>"u"?a.value:h}function p(h){return typeof h>"u"?n.value:h}function _(h){return typeof h>"u"?o.value:h}function b(h,v){const T=h||"default",Q=t==null?void 0:t[`edge-${T}`];if(Q)return Q;let y=v??i.value[T];if(typeof y=="string"&&d){const $=Object.keys(d.appContext.components);$&&$.includes(T)&&(y=M(T,!1))}return y&&typeof y!="string"?y:(c.error(new it(at.EDGE_TYPE_MISSING,y)),!1)}return(h,v)=>w(u).width&&w(u).height?(k(),Z(ye,{key:0},[(k(),Z("svg",uy,[m(sy)])),(k(!0),Z(ye,null,Xe(w(r),T=>(k(),Z("svg",{key:T.id,class:"vue-flow__edges vue-flow__container",style:lt({zIndex:w(G_)(T,w(l),w(s))})},[m(w(ey),{id:T.id,edge:T,type:b(T.type,T.template),name:T.type||"default",selectable:f(T.selectable),updatable:p(T.updatable),focusable:_(T.focusable)},null,8,["id","edge","type","name","selectable","updatable","focusable"])],4))),128)),m(w(oy))],64)):ce("",!0)}}),py=Me({name:"Node",compatConfig:{MODE:3},props:["name","type","id","draggable","selectable","focusable","connectable","node","resizeObserver"],setup(e){In(li,e.id);const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:a,multiSelectionActive:l,emits:r,findNode:i,removeSelectedNodes:s,addSelectedNodes:u,updateNodeDimensions:c,onUpdateNodeInternals:d,getIntersectingNodes:f,getNodeTypes:p,nodeExtent:_,elevateNodesOnSelect:b,disableKeyboardA11y:h,ariaLiveMessage:v,snapToGrid:T,snapGrid:Q,nodeDragThreshold:y,getConnectedEdges:$}=Ae(),E=pc(),x=Po(e,"node"),X=Se(()=>{var Y;return i((Y=x.value)==null?void 0:Y.parentNode)}),U=Se(()=>$(x.value?[x.value]:[])),V=F(null);In(uc,V);const{emit:G,on:ee}=P_(x.value,r),B=sc({id:e.id,el:V,disabled:()=>!e.draggable,selectable:()=>e.selectable,dragHandle:()=>x.value.dragHandle,onStart(Y){G.dragStart({...Y,intersections:f(x.value)})},onDrag(Y){G.drag({...Y,intersections:f(x.value)})},onStop(Y){G.dragStop({...Y,intersections:f(x.value)})}}),g=Se(()=>x.value.class instanceof Function?x.value.class(x.value):x.value.class),D=Se(()=>{const Y=(x.value.style instanceof Function?x.value.style(x.value):x.value.style)||{},pe=x.value.width instanceof Function?x.value.width(x.value):x.value.width,re=x.value.height instanceof Function?x.value.height(x.value):x.value.height;return pe&&(Y.width=typeof pe=="string"?pe:`${pe}px`),re&&(Y.height=typeof re=="string"?re:`${re}px`),Y}),O=Ue(()=>Number(x.value.zIndex??D.value.zIndex??0));return d(Y=>{Y.includes(e.id)&&C()}),bn(()=>{e.resizeObserver.observe(V.value)}),Lr(()=>{e.resizeObserver.unobserve(V.value)}),Te([()=>x.value.type,()=>x.value.sourcePosition,()=>x.value.targetPosition],()=>{wt(()=>{c([{id:e.id,nodeElement:V.value,forceUpdate:!0}])})}),Te([()=>x.value.position.x,()=>x.value.position.y,()=>{var Y;return(Y=X.value)==null?void 0:Y.computedPosition.x},()=>{var Y;return(Y=X.value)==null?void 0:Y.computedPosition.y},()=>{var Y;return(Y=X.value)==null?void 0:Y.computedPosition.z},O,()=>x.value.selected,()=>x.value.dimensions.height,()=>x.value.dimensions.width,()=>{var Y;return(Y=X.value)==null?void 0:Y.dimensions.height},()=>{var Y;return(Y=X.value)==null?void 0:Y.dimensions.width}],([Y,pe,re,se,H,he])=>{const _e={x:Y,y:pe,z:he+(b.value&&x.value.selected?1e3:0)};typeof re<"u"&&typeof se<"u"?x.value.computedPosition=A_({x:re,y:se,z:H},_e):x.value.computedPosition=_e},{flush:"post",immediate:!0}),Te([()=>x.value.extent,_],([Y,pe],[re,se])=>{(Y!==re||pe!==se)&&q()}),x.value.extent==="parent"||typeof x.value.extent=="object"&&"range"in x.value.extent&&x.value.extent.range==="parent"?Fa(()=>x.value.initialized).toBe(!0).then(q):q(),()=>qe("div",{ref:V,"data-id":x.value.id,class:["vue-flow__node",`vue-flow__node-${e.type===!1?"default":e.name}`,{[n.value]:e.draggable,dragging:B==null?void 0:B.value,draggable:e.draggable,selected:x.value.selected,selectable:e.selectable,parent:x.value.isParent},g.value],style:{visibility:x.value.initialized?"visible":"hidden",zIndex:x.value.computedPosition.z??O.value,transform:`translate(${x.value.computedPosition.x}px,${x.value.computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none",...D.value},tabIndex:e.focusable?0:void 0,role:e.focusable?"button":void 0,"aria-describedby":h.value?void 0:`${lc}-${t}`,"aria-label":x.value.ariaLabel,onMouseenter:N,onMousemove:P,onMouseleave:R,onContextmenu:K,onClick:L,onDblclick:te,onKeydown:ae},[qe(e.type===!1?p.value.default:e.type,{id:x.value.id,type:x.value.type,data:x.value.data,events:{...x.value.events,...ee},selected:x.value.selected,resizing:x.value.resizing,dragging:B.value,connectable:e.connectable,position:x.value.computedPosition,dimensions:x.value.dimensions,isValidTargetPos:x.value.isValidTargetPos,isValidSourcePos:x.value.isValidSourcePos,parent:x.value.parentNode,parentNodeId:x.value.parentNode,zIndex:x.value.computedPosition.z??O.value,targetPosition:x.value.targetPosition,sourcePosition:x.value.sourcePosition,label:x.value.label,dragHandle:x.value.dragHandle,onUpdateNodeInternals:C})]);function q(){const Y=x.value.computedPosition;T.value&&(Y.x=Q.value[0]*Math.round(Y.x/Q.value[0]),Y.y=Q.value[1]*Math.round(Y.y/Q.value[1]));const{computedPosition:pe,position:re}=ii(x.value,Y,r.error,_.value,X.value);(x.value.computedPosition.x!==pe.x||x.value.computedPosition.y!==pe.y)&&(x.value.computedPosition={...x.value.computedPosition,...pe}),(x.value.position.x!==re.x||x.value.position.y!==re.y)&&(x.value.position=re)}function C(){V.value&&c([{id:e.id,nodeElement:V.value,forceUpdate:!0}])}function N(Y){B!=null&&B.value||G.mouseEnter({event:Y,node:x.value,connectedEdges:U.value})}function P(Y){B!=null&&B.value||G.mouseMove({event:Y,node:x.value,connectedEdges:U.value})}function R(Y){B!=null&&B.value||G.mouseLeave({event:Y,node:x.value,connectedEdges:U.value})}function K(Y){return G.contextMenu({event:Y,node:x.value,connectedEdges:U.value})}function te(Y){return G.doubleClick({event:Y,node:x.value,connectedEdges:U.value})}function L(Y){e.selectable&&(!o.value||!e.draggable||y.value>0)&&$r(x.value,l.value,u,s,a,!1,V.value),G.click({event:Y,node:x.value,connectedEdges:U.value})}function ae(Y){if(!(br(Y)||h.value))if(ic.includes(Y.key)&&e.selectable){const pe=Y.key==="Escape";$r(x.value,l.value,u,s,a,pe,V.value)}else e.draggable&&x.value.selected&&ao[Y.key]&&(v.value=`Moved selected node ${Y.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~x.value.position.x}, y: ${~~x.value.position.y}`,E({x:ao[Y.key].x,y:ao[Y.key].y},Y.shiftKey))}}}),fy=py;function hy(e={includeHiddenNodes:!1}){const{nodes:t}=Ae();return Se(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const my={class:"vue-flow__nodes vue-flow__container"},vy={name:"Nodes",compatConfig:{MODE:3}},_y=Me({...vy,setup(e){const{nodes:t,nodesDraggable:n,nodesFocusable:o,elementsSelectable:a,nodesConnectable:l,getNodes:r,getNodeTypes:i,updateNodeDimensions:s,emits:u}=Ae(),c=hy(),d=On(Sl),f=F(),p=Gn();Te(c,Q=>{Q&&wt(()=>{u.nodesInitialized(t.value)})},{immediate:!0}),bn(()=>{f.value=new ResizeObserver(Q=>{const y=Q.map($=>({id:$.target.getAttribute("data-id"),nodeElement:$.target,forceUpdate:!0}));wt(()=>s(y))})}),Lr(()=>{var Q;return(Q=f.value)==null?void 0:Q.disconnect()});function _(Q){return typeof Q>"u"?n.value:Q}function b(Q){return typeof Q>"u"?a.value:Q}function h(Q){return typeof Q>"u"?l.value:Q}function v(Q){return typeof Q>"u"?o.value:Q}function T(Q,y){const $=Q||"default",E=d==null?void 0:d[`node-${$}`];if(E)return E;let x=y??i.value[$];if(typeof x=="string"&&p){const X=Object.keys(p.appContext.components);X&&X.includes($)&&(x=M($,!1))}return x&&typeof x!="string"?x:(u.error(new it(at.NODE_TYPE_MISSING,x)),!1)}return(Q,y)=>(k(),Z("div",my,[f.value?(k(!0),Z(ye,{key:0},Xe(w(r),$=>(k(),A(w(fy),{id:$.id,key:$.id,"resize-observer":f.value,type:T($.type,$.template),name:$.type||"default",draggable:_($.draggable),selectable:b($.selectable),connectable:h($.connectable),focusable:v($.focusable),node:$},null,8,["id","resize-observer","type","name","draggable","selectable","connectable","focusable","node"]))),128)):ce("",!0)]))}}),gy=De("div",{class:"vue-flow__edge-labels"},null,-1),yy={name:"VueFlow",compatConfig:{MODE:3}},Oy=Me({...yy,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0}},emits:["nodesChange","edgesChange","nodesInitialized","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneReady","init","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","updateNodeInternals","error","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,a=cu(),l=Po(o,"modelValue",n),r=Po(o,"nodes",n),i=Po(o,"edges",n),{vueFlowRef:s,hooks:u,getNodeTypes:c,getEdgeTypes:d,...f}=Ae(o),p=z_({modelValue:l,nodes:r,edges:i},o,{vueFlowRef:s,hooks:u,getNodeTypes:c,getEdgeTypes:d,...f});return tg(n,u),Yg(),In(Sl,a),fl(()=>{p()}),t({vueFlowRef:s,hooks:u,getNodeTypes:c,getEdgeTypes:d,...f}),(_,b)=>(k(),Z("div",{ref_key:"vueFlowRef",ref:s,class:"vue-flow"},[m(jg,null,{default:S(()=>[m(dy),gy,m(_y),Ve(_.$slots,"zoom-pane")]),_:3}),Ve(_.$slots,"default"),m(Hg)],512))}}),by={name:"Panel",compatConfig:{MODE:3}},Dc=Me({...by,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=Ae(),o=Se(()=>`${t.position}`.split("-"));return(a,l)=>(k(),Z("div",{class:et(["vue-flow__panel",o.value]),style:lt({pointerEvents:w(n)?"none":"all"})},[Ve(a.$slots,"default")],6))}});var Tr="http://www.w3.org/1999/xhtml";const ys={svg:"http://www.w3.org/2000/svg",xhtml:Tr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Cc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ys.hasOwnProperty(t)?{space:ys[t],local:e}:e}function wy(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Tr&&t.documentElement.namespaceURI===Tr?t.createElement(e):t.createElementNS(n,e)}}function Sy(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function zc(e){var t=Cc(e);return(t.local?Sy:wy)(t)}function xy(){}function Nc(e){return e==null?xy:function(){return this.querySelector(e)}}function $y(e){typeof e!="function"&&(e=Nc(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var l=t[a],r=l.length,i=o[a]=new Array(r),s,u,c=0;c<r;++c)(s=l[c])&&(u=e.call(s,s.__data__,c,l))&&("__data__"in s&&(u.__data__=s.__data__),i[c]=u);return new St(o,this._parents)}function ky(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ty(){return[]}function Ey(e){return e==null?Ty:function(){return this.querySelectorAll(e)}}function Qy(e){return function(){return ky(e.apply(this,arguments))}}function Py(e){typeof e=="function"?e=Qy(e):e=Ey(e);for(var t=this._groups,n=t.length,o=[],a=[],l=0;l<n;++l)for(var r=t[l],i=r.length,s,u=0;u<i;++u)(s=r[u])&&(o.push(e.call(s,s.__data__,u,r)),a.push(s));return new St(o,a)}function Dy(e){return function(){return this.matches(e)}}function qc(e){return function(t){return t.matches(e)}}var Cy=Array.prototype.find;function zy(e){return function(){return Cy.call(this.children,e)}}function Ny(){return this.firstElementChild}function qy(e){return this.select(e==null?Ny:zy(typeof e=="function"?e:qc(e)))}var Ry=Array.prototype.filter;function My(){return Array.from(this.children)}function Iy(e){return function(){return Ry.call(this.children,e)}}function Vy(e){return this.selectAll(e==null?My:Iy(typeof e=="function"?e:qc(e)))}function Ay(e){typeof e!="function"&&(e=Dy(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var l=t[a],r=l.length,i=o[a]=[],s,u=0;u<r;++u)(s=l[u])&&e.call(s,s.__data__,u,l)&&i.push(s);return new St(o,this._parents)}function Rc(e){return new Array(e.length)}function Xy(){return new St(this._enter||this._groups.map(Rc),this._parents)}function el(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}el.prototype={constructor:el,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Uy(e){return function(){return e}}function Wy(e,t,n,o,a,l){for(var r=0,i,s=t.length,u=l.length;r<u;++r)(i=t[r])?(i.__data__=l[r],o[r]=i):n[r]=new el(e,l[r]);for(;r<s;++r)(i=t[r])&&(a[r]=i)}function jy(e,t,n,o,a,l,r){var i,s,u=new Map,c=t.length,d=l.length,f=new Array(c),p;for(i=0;i<c;++i)(s=t[i])&&(f[i]=p=r.call(s,s.__data__,i,t)+"",u.has(p)?a[i]=s:u.set(p,s));for(i=0;i<d;++i)p=r.call(e,l[i],i,l)+"",(s=u.get(p))?(o[i]=s,s.__data__=l[i],u.delete(p)):n[i]=new el(e,l[i]);for(i=0;i<c;++i)(s=t[i])&&u.get(f[i])===s&&(a[i]=s)}function Fy(e){return e.__data__}function Ly(e,t){if(!arguments.length)return Array.from(this,Fy);var n=t?jy:Wy,o=this._parents,a=this._groups;typeof e!="function"&&(e=Uy(e));for(var l=a.length,r=new Array(l),i=new Array(l),s=new Array(l),u=0;u<l;++u){var c=o[u],d=a[u],f=d.length,p=Gy(e.call(c,c&&c.__data__,u,o)),_=p.length,b=i[u]=new Array(_),h=r[u]=new Array(_),v=s[u]=new Array(f);n(c,d,b,h,v,p,t);for(var T=0,Q=0,y,$;T<_;++T)if(y=b[T]){for(T>=Q&&(Q=T+1);!($=h[Q])&&++Q<_;);y._next=$||null}}return r=new St(r,o),r._enter=i,r._exit=s,r}function Gy(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function By(){return new St(this._exit||this._groups.map(Rc),this._parents)}function Hy(e,t,n){var o=this.enter(),a=this,l=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?l.remove():n(l),o&&a?o.merge(a).order():a}function Yy(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,a=n.length,l=o.length,r=Math.min(a,l),i=new Array(a),s=0;s<r;++s)for(var u=n[s],c=o[s],d=u.length,f=i[s]=new Array(d),p,_=0;_<d;++_)(p=u[_]||c[_])&&(f[_]=p);for(;s<a;++s)i[s]=n[s];return new St(i,this._parents)}function Zy(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],a=o.length-1,l=o[a],r;--a>=0;)(r=o[a])&&(l&&r.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(r,l),l=r);return this}function Jy(e){e||(e=Ky);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,a=new Array(o),l=0;l<o;++l){for(var r=n[l],i=r.length,s=a[l]=new Array(i),u,c=0;c<i;++c)(u=r[c])&&(s[c]=u);s.sort(t)}return new St(a,this._parents).order()}function Ky(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function eO(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function tO(){return Array.from(this)}function nO(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,l=o.length;a<l;++a){var r=o[a];if(r)return r}return null}function oO(){let e=0;for(const t of this)++e;return e}function aO(){return!this.node()}function lO(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var a=t[n],l=0,r=a.length,i;l<r;++l)(i=a[l])&&e.call(i,i.__data__,l,a);return this}function rO(e){return function(){this.removeAttribute(e)}}function iO(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sO(e,t){return function(){this.setAttribute(e,t)}}function uO(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function cO(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function dO(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function pO(e,t){var n=Cc(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?iO:rO:typeof t=="function"?n.local?dO:cO:n.local?uO:sO)(n,t))}function Mc(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function fO(e){return function(){this.style.removeProperty(e)}}function hO(e,t,n){return function(){this.style.setProperty(e,t,n)}}function mO(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function vO(e,t,n){return arguments.length>1?this.each((t==null?fO:typeof t=="function"?mO:hO)(e,t,n??"")):_O(this.node(),e)}function _O(e,t){return e.style.getPropertyValue(t)||Mc(e).getComputedStyle(e,null).getPropertyValue(t)}function gO(e){return function(){delete this[e]}}function yO(e,t){return function(){this[e]=t}}function OO(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function bO(e,t){return arguments.length>1?this.each((t==null?gO:typeof t=="function"?OO:yO)(e,t)):this.node()[e]}function Ic(e){return e.trim().split(/^|\s+/)}function di(e){return e.classList||new Vc(e)}function Vc(e){this._node=e,this._names=Ic(e.getAttribute("class")||"")}Vc.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ac(e,t){for(var n=di(e),o=-1,a=t.length;++o<a;)n.add(t[o])}function Xc(e,t){for(var n=di(e),o=-1,a=t.length;++o<a;)n.remove(t[o])}function wO(e){return function(){Ac(this,e)}}function SO(e){return function(){Xc(this,e)}}function xO(e,t){return function(){(t.apply(this,arguments)?Ac:Xc)(this,e)}}function $O(e,t){var n=Ic(e+"");if(arguments.length<2){for(var o=di(this.node()),a=-1,l=n.length;++a<l;)if(!o.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?xO:t?wO:SO)(n,t))}function kO(){this.textContent=""}function TO(e){return function(){this.textContent=e}}function EO(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function QO(e){return arguments.length?this.each(e==null?kO:(typeof e=="function"?EO:TO)(e)):this.node().textContent}function PO(){this.innerHTML=""}function DO(e){return function(){this.innerHTML=e}}function CO(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function zO(e){return arguments.length?this.each(e==null?PO:(typeof e=="function"?CO:DO)(e)):this.node().innerHTML}function NO(){this.nextSibling&&this.parentNode.appendChild(this)}function qO(){return this.each(NO)}function RO(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function MO(){return this.each(RO)}function IO(e){var t=typeof e=="function"?e:zc(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function VO(){return null}function AO(e,t){var n=typeof e=="function"?e:zc(e),o=t==null?VO:typeof t=="function"?t:Nc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function XO(){var e=this.parentNode;e&&e.removeChild(this)}function UO(){return this.each(XO)}function WO(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function jO(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function FO(e){return this.select(e?jO:WO)}function LO(e){return arguments.length?this.property("__data__",e):this.node().__data__}function GO(e){return function(t){e.call(this,t,this.__data__)}}function BO(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function HO(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,a=t.length,l;n<a;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++o]=l;++o?t.length=o:delete this.__on}}}function YO(e,t,n){return function(){var o=this.__on,a,l=GO(t);if(o){for(var r=0,i=o.length;r<i;++r)if((a=o[r]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=t;return}}this.addEventListener(e.type,l,n),a={type:e.type,name:e.name,value:t,listener:l,options:n},o?o.push(a):this.__on=[a]}}function ZO(e,t,n){var o=BO(e+""),a,l=o.length,r;if(arguments.length<2){var i=this.node().__on;if(i){for(var s=0,u=i.length,c;s<u;++s)for(a=0,c=i[s];a<l;++a)if((r=o[a]).type===c.type&&r.name===c.name)return c.value}return}for(i=t?YO:HO,a=0;a<l;++a)this.each(i(o[a],t,n));return this}function Uc(e,t,n){var o=Mc(e),a=o.CustomEvent;typeof a=="function"?a=new a(t,n):(a=o.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function JO(e,t){return function(){return Uc(this,e,t)}}function KO(e,t){return function(){return Uc(this,e,t.apply(this,arguments))}}function e0(e,t){return this.each((typeof t=="function"?KO:JO)(e,t))}function*t0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,l=o.length,r;a<l;++a)(r=o[a])&&(yield r)}var n0=[null];function St(e,t){this._groups=e,this._parents=t}function o0(){return this}St.prototype={constructor:St,select:$y,selectAll:Py,selectChild:qy,selectChildren:Vy,filter:Ay,data:Ly,enter:Xy,exit:By,join:Hy,merge:Yy,selection:o0,order:Zy,sort:Jy,call:eO,nodes:tO,node:nO,size:oO,empty:aO,each:lO,attr:pO,style:vO,property:bO,classed:$O,text:QO,html:zO,raise:qO,lower:MO,append:IO,insert:AO,remove:UO,clone:FO,datum:LO,on:ZO,dispatch:e0,[Symbol.iterator]:t0};function Fo(e){return typeof e=="string"?new St([[document.querySelector(e)]],[document.documentElement]):new St([[e]],n0)}function a0(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Os(e,t){if(e=a0(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}var l0={value:()=>{}};function Wc(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new za(n)}function za(e){this._=e}function r0(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",a=n.indexOf(".");if(a>=0&&(o=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}za.prototype=Wc.prototype={constructor:za,on:function(e,t){var n=this._,o=r0(e+"",n),a,l=-1,r=o.length;if(arguments.length<2){for(;++l<r;)if((a=(e=o[l]).type)&&(a=i0(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<r;)if(a=(e=o[l]).type)n[a]=bs(n[a],e.name,t);else if(t==null)for(a in n)n[a]=bs(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new za(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),o=0,a,l;o<a;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],o=0,a=l.length;o<a;++o)l[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],a=0,l=o.length;a<l;++a)o[a].value.apply(t,n)}};function i0(e,t){for(var n=0,o=e.length,a;n<o;++n)if((a=e[n]).name===t)return a.value}function bs(e,t,n){for(var o=0,a=e.length;o<a;++o)if(e[o].name===t){e[o]=l0,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}const s0={passive:!1},Lo={capture:!0,passive:!1};function Gl(e){e.stopImmediatePropagation()}function lo(e){e.preventDefault(),e.stopImmediatePropagation()}function u0(e){var t=e.document.documentElement,n=Fo(e).on("dragstart.drag",lo,Lo);"onselectstart"in t?n.on("selectstart.drag",lo,Lo):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function c0(e,t){var n=e.document.documentElement,o=Fo(e).on("dragstart.drag",null);t&&(o.on("click.drag",lo,Lo),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const va=e=>()=>e;function Er(e,{sourceEvent:t,subject:n,target:o,identifier:a,active:l,x:r,y:i,dx:s,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:i,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Er.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function d0(e){return!e.ctrlKey&&!e.button}function p0(){return this.parentNode}function f0(e,t){return t??{x:e.x,y:e.y}}function h0(){return navigator.maxTouchPoints||"ontouchstart"in this}function m0(){var e=d0,t=p0,n=f0,o=h0,a={},l=Wc("start","drag","end"),r=0,i,s,u,c,d=0;function f(y){y.on("mousedown.drag",p).filter(o).on("touchstart.drag",h).on("touchmove.drag",v,s0).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(y,$){if(!(c||!e.call(this,y,$))){var E=Q(this,t.call(this,y,$),y,$,"mouse");E&&(Fo(y.view).on("mousemove.drag",_,Lo).on("mouseup.drag",b,Lo),u0(y.view),Gl(y),u=!1,i=y.clientX,s=y.clientY,E("start",y))}}function _(y){if(lo(y),!u){var $=y.clientX-i,E=y.clientY-s;u=$*$+E*E>d}a.mouse("drag",y)}function b(y){Fo(y.view).on("mousemove.drag mouseup.drag",null),c0(y.view,u),lo(y),a.mouse("end",y)}function h(y,$){if(e.call(this,y,$)){var E=y.changedTouches,x=t.call(this,y,$),X=E.length,U,V;for(U=0;U<X;++U)(V=Q(this,x,y,$,E[U].identifier,E[U]))&&(Gl(y),V("start",y,E[U]))}}function v(y){var $=y.changedTouches,E=$.length,x,X;for(x=0;x<E;++x)(X=a[$[x].identifier])&&(lo(y),X("drag",y,$[x]))}function T(y){var $=y.changedTouches,E=$.length,x,X;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),x=0;x<E;++x)(X=a[$[x].identifier])&&(Gl(y),X("end",y,$[x]))}function Q(y,$,E,x,X,U){var V=l.copy(),G=Os(U||E,$),ee,B,g;if((g=n.call(y,new Er("beforestart",{sourceEvent:E,target:f,identifier:X,active:r,x:G[0],y:G[1],dx:0,dy:0,dispatch:V}),x))!=null)return ee=g.x-G[0]||0,B=g.y-G[1]||0,function D(O,q,C){var N=G,P;switch(O){case"start":a[X]=D,P=r++;break;case"end":delete a[X],--r;case"drag":G=Os(C||q,$),P=r;break}V.call(O,y,new Er(O,{sourceEvent:q,subject:g,target:f,identifier:X,active:P,x:G[0]+ee,y:G[1]+B,dx:G[0]-N[0],dy:G[1]-N[1],dispatch:V}),x)}}return f.filter=function(y){return arguments.length?(e=typeof y=="function"?y:va(!!y),f):e},f.container=function(y){return arguments.length?(t=typeof y=="function"?y:va(y),f):t},f.subject=function(y){return arguments.length?(n=typeof y=="function"?y:va(y),f):n},f.touchable=function(y){return arguments.length?(o=typeof y=="function"?y:va(!!y),f):o},f.on=function(){var y=l.on.apply(l,arguments);return y===l?f:y},f.clickDistance=function(y){return arguments.length?(d=(y=+y)*y,f):Math.sqrt(d)},f}var fo=(e=>(e.Line="line",e.Handle="handle",e))(fo||{});function v0({width:e,prevWidth:t,height:n,prevHeight:o,invertX:a,invertY:l}){const r=e-t,i=n-o,s=[r>0?1:r<0?-1:0,i>0?1:i<0?-1:0];return r&&a&&(s[0]=s[0]*-1),i&&l&&(s[1]=s[1]*-1),s}const _0={[fo.Line]:"right",[fo.Handle]:"bottom-right"},g0={[fo.Line]:"borderColor",[fo.Handle]:"backgroundColor"},y0={name:"ResizeControl",compatConfig:{MODE:3}},ws=Me({...y0,props:{nodeId:{},color:{},minWidth:{default:10},minHeight:{default:10},maxWidth:{default:Number.MAX_VALUE},maxHeight:{default:Number.MAX_VALUE},position:{},variant:{default:"handle"},shouldResize:{},keepAspectRatio:{type:[Boolean,Number],default:!1}},emits:["resizeStart","resize","resizeEnd"],setup(e,{emit:t}){const n=e,o={width:0,height:0,x:0,y:0},a={...o,pointerX:0,pointerY:0,aspectRatio:1},{findNode:l,emits:r}=Ae(),i=cc(),s=F();let u=a,c=o;const d=Ue(()=>n.position??_0[n.variant]),f=Ue(()=>d.value.split("-")),p=Ue(()=>n.color?{[g0[n.variant]]:n.color}:{});return mu(_=>{if(!s.value||!n.nodeId)return;const b=Fo(s.value),h=d.value.includes("right")||d.value.includes("left"),v=d.value.includes("bottom")||d.value.includes("top"),T=d.value.includes("left"),Q=d.value.includes("top"),y=m0().on("start",$=>{const E=l(n.nodeId),{xSnapped:x,ySnapped:X}=i($);c={width:(E==null?void 0:E.dimensions.width)??0,height:(E==null?void 0:E.dimensions.height)??0,x:(E==null?void 0:E.position.x)??0,y:(E==null?void 0:E.position.y)??0},u={...c,pointerX:x,pointerY:X,aspectRatio:c.width/c.height},t("resizeStart",{event:$,params:c})}).on("drag",$=>{var E;const{xSnapped:x,ySnapped:X}=i($),U=l(n.nodeId);if(U){const V=[],{pointerX:G,pointerY:ee,width:B,height:g,x:D,y:O,aspectRatio:q}=u,{x:C,y:N,width:P,height:R}=c,K=Math.floor(h?x-G:0),te=Math.floor(v?X-ee:0);let L=on(B+(T?-K:K),n.minWidth,n.maxWidth),ae=on(g+(Q?-te:te),n.minHeight,n.maxHeight);if(n.keepAspectRatio){const he=L/ae;let _e=q;typeof n.keepAspectRatio=="number"&&he!==n.keepAspectRatio&&(_e=n.keepAspectRatio);const Ce=h&&v,z=h&&!v,I=v&&!h;L=he<=_e&&Ce||I?ae*_e:L,ae=he>_e&&Ce||z?L/_e:ae,L>=n.maxWidth?(L=n.maxWidth,ae=n.maxWidth/_e):L<=n.minWidth&&(L=n.minWidth,ae=n.minWidth/_e),ae>=n.maxHeight?(ae=n.maxHeight,L=n.maxHeight*_e):ae<=n.minHeight&&(ae=n.minHeight,L=n.minHeight*_e)}const Y=L!==P,pe=ae!==R;if(T||Q){const he=T?D-(L-B):D,_e=Q?O-(ae-g):O,Ce=he!==C&&Y,z=_e!==N&&pe;if(Ce||z){const I={id:U.id,type:"position",from:U.position,position:{x:Ce?he:C,y:z?_e:N}};V.push(I),c.x=I.position.x,c.y=I.position.y}}if(n.nodeId&&(Y||pe)){const he={id:n.nodeId,type:"dimensions",updateStyle:!0,resizing:!0,dimensions:{width:L,height:ae}};V.push(he),c.width=L,c.height=ae}if(V.length===0)return;const re=v0({width:c.width,prevWidth:P,height:c.height,prevHeight:R,invertX:T,invertY:Q}),se={...c,direction:re};if(((E=n.shouldResize)==null?void 0:E.call(n,$,se))===!1)return;t("resize",{event:$,params:se}),r.nodesChange(V)}}).on("end",$=>{if(n.nodeId){const E={id:n.nodeId,type:"dimensions",resizing:!1};t("resizeEnd",{event:$,params:c}),r.nodesChange([E])}});b.call(y),_(()=>{b.on(".drag",null)})}),(_,b)=>(k(),Z("div",{ref_key:"resizeControlRef",ref:s,class:et(["vue-flow__resize-control nodrag",[...f.value,_.variant]]),style:lt(p.value)},[Ve(_.$slots,"default")],6))}}),O0={name:"NodeResizer",compatConfig:{MODE:3},inheritAttrs:!1},b0=Me({...O0,props:{nodeId:{},color:{},handleClassName:{},handleStyle:{},lineClassName:{},lineStyle:{},isVisible:{type:Boolean,default:!0},minWidth:{},minHeight:{},maxWidth:{},maxHeight:{},shouldResize:{},keepAspectRatio:{type:[Boolean,Number]}},emits:["resizeStart","resize","resizeEnd"],setup(e,{emit:t}){const n=e,{findNode:o,emits:a}=Ae(),l=["top-left","top-right","bottom-left","bottom-right"],r=["top","right","bottom","left"],i=On(li,null),s=Ue(()=>typeof n.nodeId=="string"?n.nodeId:i),u=Ue(()=>o(s.value));return Te([()=>n.minWidth,()=>n.minHeight,()=>n.maxWidth,()=>n.maxHeight,()=>{var c;return(c=u.value)==null?void 0:c.initialized}],([c,d,f,p,_])=>{const b=u.value;if(b&&_){const h={id:b.id,type:"dimensions",updateStyle:!0,dimensions:{width:b.dimensions.width,height:b.dimensions.height}};c&&b.dimensions.width<c&&(h.dimensions.width=c),d&&b.dimensions.height<d&&(h.dimensions.height=d),f&&b.dimensions.width>f&&(h.dimensions.width=f),p&&b.dimensions.height>p&&(h.dimensions.height=p),(h.dimensions.width!==b.dimensions.width||h.dimensions.height!==b.dimensions.height)&&a.nodesChange([h])}},{flush:"post",immediate:!0}),(c,d)=>c.isVisible?(k(),Z(ye,{key:0},[(k(),Z(ye,null,Xe(r,f=>m(ws,{key:f,class:et(c.lineClassName),style:lt(c.lineStyle),"node-id":s.value,position:f,variant:w(fo).Line,"keep-aspect-ratio":c.keepAspectRatio,color:c.color,"min-width":c.minWidth,"min-height":c.minHeight,"max-width":c.maxWidth,"max-height":c.maxHeight,"should-resize":c.shouldResize,onResizeStart:d[0]||(d[0]=p=>t("resizeStart",p)),onResize:d[1]||(d[1]=p=>t("resize",p)),onResizeEnd:d[2]||(d[2]=p=>t("resizeEnd",p))},null,8,["class","style","node-id","position","variant","keep-aspect-ratio","color","min-width","min-height","max-width","max-height","should-resize"])),64)),(k(),Z(ye,null,Xe(l,f=>m(ws,{key:f,class:et(c.handleClassName),style:lt(c.handleStyle),"node-id":s.value,position:f,color:c.color,"min-width":c.minWidth,"min-height":c.minHeight,"max-width":c.maxWidth,"max-height":c.maxHeight,"should-resize":c.shouldResize,"keep-aspect-ratio":c.keepAspectRatio,onResizeStart:d[3]||(d[3]=p=>t("resizeStart",p)),onResize:d[4]||(d[4]=p=>t("resize",p)),onResizeEnd:d[5]||(d[5]=p=>t("resizeEnd",p))},null,8,["class","style","node-id","position","color","min-width","min-height","max-width","max-height","should-resize","keep-aspect-ratio"])),64))],64)):ce("",!0)}});function jc(){return{description:"description",has_inputs:!1,template:{comment:{required:!1,placeholder:"",show:!1,value:"",name:"comment",display_name:"comment",type:"str",list:!1,field_type:"textarea"}}}}const w0=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:jc},Symbol.toStringTag,{value:"Module"})),S0={class:"comment-node"},x0={style:{width:"100%"}},$0={class:"title-container"},k0={__name:"CommentNode",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=_l(),o=(r,i)=>{n.push({action:r,data:i,nodeId:t.id})},a=F(t.data.template),l=jc();return Object.entries(l.template).forEach(([r,i])=>{a.value[r]=a.value[r]||i,i.is_output&&(a.value[r].is_output=!0)}),(r,i)=>{const s=M("a-typography-title"),u=M("a-typography-link");return k(),Z("div",S0,[m(w(b0),{"min-width":"100","min-height":"30"}),De("div",x0,[De("div",$0,[m(s,{level:5,editable:"",content:a.value.comment.value,"onUpdate:content":i[0]||(i[0]=c=>a.value.comment.value=c),class:"comment-text"},null,8,["content"]),m(u,{onClick:i[1]||(i[1]=c=>o("delete")),class:"delete-button"},{default:S(()=>[m(w(Gr))]),_:1})])])])}}},T0=wn(k0,[["__scopeId","data-v-d4f90fb7"]]),E0=Object.freeze(Object.defineProperty({__proto__:null,default:T0},Symbol.toStringTag,{value:"Module"})),Q0={class:"template-item-field-text"},P0={style:{position:"relative"}},D0={class:"template-item-field-content"},C0={__name:"BaseField",props:{name:{type:String,required:!0},required:{type:Boolean,default:!1},type:{type:String,required:!0},nameOnly:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},style:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})}},emits:["delete","update:data","edit"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Ye(),l=F(n.data),r=F(l.value.id||l.value.name),i=()=>{l.value.show=!l.value.show,o("update:data",l.value)};Te(()=>n.data,c=>{l.value=c,r.value=c.id||c.name},{deep:!0});const s=()=>{o("delete",r)},u=()=>{o("edit",r)};return(c,d)=>{const f=M("a-typography-text"),p=M("a-button"),_=M("a-checkbox"),b=M("a-tooltip"),h=M("a-select"),v=M("a-textarea"),T=M("a-input"),Q=M("a-input-number"),y=M("a-radio-group");return k(),Z("div",{class:et(["template-item-field",n.type=="source"?"template-item-output-field":""]),style:lt(n.style)},[De("div",Q0,[m(f,{class:"field-name dark-color-text"},{default:S(()=>[ne(J(n.name),1)]),_:1}),n.required?(k(),A(f,{key:0,type:"danger"},{default:S(()=>[ne(" *")]),_:1})):ce("",!0),e.editable?(k(),A(p,{key:1,type:"text",size:"small",onClick:u},{icon:S(()=>[m(w(so))]),_:1})):ce("",!0),Ve(c.$slots,"inline",{},void 0,!0),!c.$slots.inline&&!l.value.is_output?(k(),Z(ye,{key:2},[l.value.field_type=="checkbox"?(k(),A(_,{key:0,checked:l.value.value,"onUpdate:checked":d[0]||(d[0]=$=>l.value.value=$)},null,8,["checked"])):ce("",!0)],64)):ce("",!0),n.type=="target"?(k(),Z("div",{key:3,class:et(["show-in-use-interface-checkbox",{"always-show":l.value.show}])},[m(b,{title:w(a)("components.nodes.baseField.show_in_use_interface")},{default:S(()=>[m(p,{type:"text",size:"small",onClick:i},{icon:S(()=>[l.value.show?(k(),A(w(Ef),{key:0,fill:"#28c5e5"})):(k(),A(w(Tf),{key:1,fill:"#28c5e5"}))]),_:1})]),_:1},8,["title"])],2)):ce("",!0),n.deletable?(k(),A(p,{key:4,type:"text",size:"small",class:"delete-field-button",onClick:d[1]||(d[1]=$=>s())},{icon:S(()=>[m(w(nf),{fill:"#ff4d4f"})]),_:1})):ce("",!0)]),e.nameOnly?(k(),A(w(gn),{key:0,class:et(["handle",`${n.type}-handle`]),id:r.value,type:n.type,position:n.type=="target"?w(ve).Left:w(ve).Right,"connectable-start":n.type!="target","connectable-end":n.type=="target"},null,8,["class","id","type","position","connectable-start","connectable-end"])):ce("",!0),De("div",P0,[De("div",D0,[Ve(c.$slots,"default",{},void 0,!0),!c.$slots.default&&!l.value.is_output?(k(),Z(ye,{key:0},[l.value.field_type=="select"?(k(),A(h,{key:0,value:l.value.value,"onUpdate:value":d[2]||(d[2]=$=>l.value.value=$),options:l.value.options,style:{width:"100%"}},null,8,["value","options"])):l.value.field_type=="textarea"?(k(),A(v,{key:1,value:l.value.value,"onUpdate:value":d[3]||(d[3]=$=>l.value.value=$),autoSize:{minRows:2,maxRows:30},showCount:!0,placeholder:l.value.placeholder},null,8,["value","placeholder"])):l.value.field_type=="input"?(k(),A(T,{key:2,value:l.value.value,"onUpdate:value":d[4]||(d[4]=$=>l.value.value=$),placeholder:l.value.placeholder},null,8,["value","placeholder"])):l.value.field_type=="number"?(k(),A(Q,{key:3,value:l.value.value,"onUpdate:value":d[5]||(d[5]=$=>l.value.value=$),placeholder:l.value.placeholder,style:{width:"100%"}},null,8,["value","placeholder"])):l.value.field_type=="radio"?(k(),A(y,{key:4,"option-type":"button",value:l.value.value,"onUpdate:value":d[6]||(d[6]=$=>l.value.value=$),options:l.value.options},null,8,["value","options"])):l.value.field_type=="temperature"?(k(),A(Br,{key:5,modelValue:l.value.value,"onUpdate:modelValue":d[7]||(d[7]=$=>l.value.value=$)},null,8,["modelValue"])):ce("",!0)],64)):ce("",!0)]),n.type=="target"?(k(),Z(ye,{key:0},[e.nameOnly?ce("",!0):(k(),A(w(gn),{key:0,class:et(["handle","target-handle"]),id:r.value,type:"target",position:w(ve).Left,"connectable-start":!1,"connectable-end":!0},null,8,["id","position"])),e.nameOnly?ce("",!0):(k(),A(w(gn),{key:1,class:et(["handle","source-handle"]),id:r.value,type:"source",position:w(ve).Right,"connectable-start":!0,"connectable-end":!1},null,8,["id","position"]))],64)):(k(),Z(ye,{key:1},[e.nameOnly?ce("",!0):(k(),A(w(gn),{key:0,class:et(["handle",`${n.type}-handle`]),id:r.value,type:n.type,position:w(ve).Right,"connectable-start":!0,"connectable-end":!1},null,8,["class","id","type","position"]))],64))])],6)}}},Qe=wn(C0,[["__scopeId","data-v-e311960b"]]),z0={__name:"ListField",props:{name:{type:String,required:!0},required:{type:Boolean,default:!1},type:{type:String,required:!0},nameOnly:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},style:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})}},emits:["delete","update:data"],setup(e,{emit:t}){const n=e,{t:o}=Ye(),a=t,l=F(n.data),r=l.value.name;Te(()=>n.data,u=>{l.value=u},{deep:!0});const i=(u,c)=>{l.value.value[c]=u,a("update:data",l.value)},s=u=>{l.value.value.splice(u,1),a("update:data",l.value)};return(u,c)=>{const d=M("a-input"),f=M("a-button"),p=M("a-flex");return k(),A(Qe,{name:n.name,required:n.required,type:n.type,nameOnly:n.nameOnly,deletable:n.deletable,style:lt(n.style),data:l.value,"onUpdate:data":c[1]||(c[1]=_=>l.value=_),onDelete:c[2]||(c[2]=_=>a("delete",w(r)))},{default:S(()=>[m(p,{vertical:"",gap:"small"},{default:S(()=>[(k(!0),Z(ye,null,Xe(l.value.value,(_,b)=>(k(),A(p,{key:b,align:"center",gap:"small"},{default:S(()=>[m(d,{value:_,onInput:h=>i(h.target.value,b)},null,8,["value","onInput"]),m(f,{type:"text",onClick:h=>s(b)},{icon:S(()=>[m(w(Vo))]),_:2},1032,["onClick"])]),_:2},1024))),128)),m(f,{type:"dashed",style:{width:"100%"},onClick:c[0]||(c[0]=_=>l.value.value.push(""))},{default:S(()=>[m(w(Xn)),ne(" "+J(w(o)("components.nodes.listField.add_item")),1)]),_:1})]),_:1})]),_:1},8,["name","required","type","nameOnly","deletable","style","data"])}}},N0={style:{width:"100%"}},q0={class:"title-container"},R0={class:"main-container"},M0={key:1,class:"output-container"},Pe={__name:"BaseNode",props:{nodeId:{type:String,required:!0},title:{type:String,required:!1,default:""},description:{type:String,required:!1,default:""},documentLink:{type:String,required:!1,default:""},width:{type:[Number,String,null],required:!1,default:null},translatePrefix:{type:String,required:!1,default:""},fieldsData:{type:Object,required:!1,default:()=>({})},debug:{type:[Object,null],required:!1,default:null}},setup(e){const t=e,n=F(t.fieldsData);Te(()=>t.fieldsData,_=>{n.value=_},{deep:!0});const o=_l(),a=(_,b)=>{o.push({action:_,data:b,nodeId:t.nodeId})},{t:l}=Ye(),r=t.title.length==0?l(`${t.translatePrefix}.title`):t.title,i=t.description.length==0?l(`${t.translatePrefix}.description`):t.description;let s={};t.width&&(typeof t.width=="number"?s={width:`${t.width}px`}:typeof t.width=="string"&&(s={width:t.width}));const u=()=>{const _=[],b=[];return Object.keys(n.value).forEach(h=>{if(n.value[h].is_output)if(n.value[h].condition){const v=n.value[h].condition;v(n.value)&&b.push(h)}else b.push(h);else if(n.value[h].condition){const v=n.value[h].condition;v(n.value)&&_.push(h)}else _.push(h)}),{inputs:_,outputs:b}},c=F([]),d=F([]),{inputs:f,outputs:p}=u();return c.value=f,d.value=p,Te(()=>n.value,()=>{const{inputs:_,outputs:b}=u();c.value=_,d.value=b},{deep:!0}),(_,b)=>{const h=M("a-typography-text"),v=M("a-flex"),T=M("a-typography-title"),Q=M("a-button"),y=M("a-tooltip");return k(),Z("div",{class:"node",style:lt(w(s))},[De("div",N0,[e.debug?(k(),Z("div",{key:0,class:et(["debug-info",e.debug.run_time>=0?"executed-node":"not-executed-node"])},[m(v,{justify:"space-between"},{default:S(()=>[e.debug.run_time>=0?(k(),A(h,{key:0},{default:S(()=>[m(w(Sf),{theme:"filled",fill:"#52c41a"}),ne(" "+J(w(l)("components.nodes.baseNode.run_time",{time:e.debug.run_time.toFixed(2)})),1)]),_:1})):(k(),A(h,{key:1},{default:S(()=>[m(w(Xp),{theme:"filled",fill:"#faad14"}),ne(" "+J(w(l)("components.nodes.baseNode.no_run_record")),1)]),_:1}))]),_:1})],2)):ce("",!0),De("div",q0,[m(v,{justify:"space-between",align:"center",gap:"10"},{default:S(()=>[m(T,{class:"title",level:3,style:{"flex-grow":"1"}},{default:S(()=>[ne(J(w(r))+" ",1),t.documentLink.length>0?(k(),A(Zp,{key:0,contents:[w(i),{type:"link",text:w(l)("components.nodes.baseNode.document_link"),url:t.documentLink}],class:"hint-popover"},null,8,["contents"])):ce("",!0)]),_:1}),m(y,{color:"blue",title:w(l)("components.nodes.baseNode.clone_node")},{default:S(()=>[m(Q,{type:"text",size:"small",onClick:b[0]||(b[0]=$=>a("clone"))},{icon:S(()=>[m(w(of),{fill:"#28c5e5"})]),_:1})]),_:1},8,["title"]),m(y,{color:"red",title:w(l)("components.nodes.baseNode.delete_node")},{default:S(()=>[m(Q,{type:"text",size:"small",onClick:b[1]||(b[1]=$=>a("delete"))},{icon:S(()=>[m(w(Gr),{fill:"#28c5e5"})]),_:1})]),_:1},8,["title"])]),_:1})]),De("div",R0,[Ve(_.$slots,"main"),_.$slots.main?ce("",!0):(k(),A(v,{key:0,vertical:"",gap:"small"},{default:S(()=>[(k(!0),Z(ye,null,Xe(c.value,$=>(k(),A(y,{title:n.value[$].has_tooltip?w(l)(`${e.translatePrefix}.${$}_tip`):"",placement:"left"},{default:S(()=>[n.value[$].field_type=="list"?(k(),A(z0,{key:0,name:w(l)(`${e.translatePrefix}.${$}`),required:n.value[$].required,type:"target",data:n.value[$],"onUpdate:data":E=>n.value[$]=E},null,8,["name","required","data","onUpdate:data"])):(k(),A(Qe,{key:1,name:w(l)(`${e.translatePrefix}.${$}`),required:n.value[$].required,type:"target",data:n.value[$],"onUpdate:data":E=>n.value[$]=E,nameOnly:["","checkbox"].includes(n.value[$].field_type)},null,8,["name","required","data","onUpdate:data","nameOnly"]))]),_:2},1032,["title"]))),256))]),_:1}))]),d.value.length>0?(k(),Z("div",M0,[Ve(_.$slots,"output"),_.$slots.output?ce("",!0):(k(),A(v,{key:0,vertical:"",style:{width:"100%"}},{default:S(()=>[(k(!0),Z(ye,null,Xe(d.value,$=>(k(),A(y,{title:n.value[$].has_tooltip?w(l)(`${e.translatePrefix}.${$}_tip`):"",placement:"right"},{default:S(()=>[m(Qe,{name:w(l)(`${e.translatePrefix}.${$}`),data:n.value[$],"onUpdate:data":E=>n.value[$]=E,type:"source",nameOnly:""},null,8,["name","data","onUpdate:data"])]),_:2},1032,["title"]))),256))]),_:1}))])):ce("",!0)])],4)}}};function Fc(){return{description:"description",task_name:"control_flows.conditional",has_inputs:!0,template:{field_type:{required:!0,placeholder:"",show:!1,value:"string",options:[{value:"string",label:"Str"},{value:"number",label:"Number"}],name:"field_type",display_name:"field_type",type:"str",list:!0,field_type:"select"},left_field:{required:!0,placeholder:"",show:!1,value:"",name:"left_field",display_name:"left_field",type:"str|float|int",list:!1,field_type:"input"},operator:{required:!0,placeholder:"",show:!1,value:"equal",options:[{value:"equal",label:"equal",field_type:["string","number"]},{value:"not_equal",label:"not_equal",field_type:["string","number"]},{value:"greater_than",label:"greater_than",field_type:["number"]},{value:"less_than",label:"less_than",field_type:["number"]},{value:"greater_than_or_equal",label:"greater_than_or_equal",field_type:["number"]},{value:"less_than_or_equal",label:"less_than_or_equal",field_type:["number"]},{value:"include",label:"include",field_type:["string"]},{value:"not_include",label:"not_include",field_type:["string"]},{value:"is_empty",label:"is_empty",field_type:["string"]},{value:"is_not_empty",label:"is_not_empty",field_type:["string"]},{value:"starts_with",label:"starts_with",field_type:["string"]},{value:"ends_with",label:"ends_with",field_type:["string"]}],name:"operator",display_name:"operator",type:"str",list:!1,field_type:"select"},right_field:{required:!0,placeholder:"",show:!1,value:"",name:"right_field",display_name:"right_field",type:"str|float|int",list:!1,field_type:"input"},true_output:{required:!0,placeholder:"",show:!1,value:"",name:"true_output",display_name:"true_output",type:"str",list:!1,field_type:""},false_output:{required:!0,placeholder:"",show:!1,value:"",name:"false_output",display_name:"false_output",type:"str",list:!1,field_type:""},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const I0=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Fc},Symbol.toStringTag,{value:"Module"})),V0={__name:"Conditional",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Ye(),o=F(t.data.template),a=Fc(),l=JSON.parse(JSON.stringify(a.template.operator.options));return Object.entries(a.template).forEach(([r,i])=>{o.value[r]=o.value[r]||i,i.is_output&&(o.value[r].is_output=!0)}),l.forEach(r=>{r.label=n(`components.nodes.controlFlows.Conditional.operator_${r.value}`)}),o.value.operator.options=l.filter(r=>r.field_type.includes("string")),Te(()=>o.value.field_type.value,()=>{o.value.field_type.value=="string"?(o.value.left_field.field_type="input",o.value.right_field.field_type="input",o.value.operator.options=l.filter(r=>r.field_type.includes("string"))):o.value.field_type.value=="number"&&(o.value.left_field.field_type="number",o.value.right_field.field_type="number",o.value.operator.options=l.filter(r=>r.field_type.includes("number")))}),(r,i)=>(k(),A(Pe,{nodeId:e.id,debug:t.data.debug,fieldsData:o.value,translatePrefix:"components.nodes.controlFlows.Conditional",documentLink:"https://vectorvein.com/help/docs/control-flows#h2-0"},null,8,["nodeId","debug","fieldsData"]))}},A0=Object.freeze(Object.defineProperty({__proto__:null,default:V0},Symbol.toStringTag,{value:"Module"}));function Lc(){return{description:"description",task_name:"control_flows.empty",has_inputs:!0,template:{input:{required:!0,placeholder:"",show:!1,value:"",name:"input",display_name:"input",type:"str",list:!1,field_type:"input"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const X0=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Lc},Symbol.toStringTag,{value:"Module"})),U0={__name:"Empty",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=Lc();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.controlFlows.Empty",documentLink:"https://vectorvein.com/help/docs/control-flows#h2-4"},null,8,["nodeId","debug","fieldsData"]))}},W0=Object.freeze(Object.defineProperty({__proto__:null,default:U0},Symbol.toStringTag,{value:"Module"}));function Gc(){return{description:"description",task_name:"control_flows.json_process",has_inputs:!0,template:{input:{required:!0,placeholder:"",show:!1,value:"",name:"input",display_name:"input",type:"str|dict",list:!1,field_type:"input"},process_mode:{required:!1,placeholder:"",show:!1,value:"get_value",options:[{value:"get_value",label:"get_value"},{value:"get_multiple_values",label:"get_multiple_values"},{value:"list_values",label:"list_values"},{value:"list_keys",label:"list_keys"}],name:"process_mode",display_name:"process_mode",type:"str",clear_after_run:!1,list:!0,field_type:"select"},key:{required:!0,placeholder:"",show:!1,value:"",name:"key",display_name:"key",type:"str",list:!1,field_type:"input",condition:e=>e.process_mode.value=="get_value"},keys:{required:!1,placeholder:"",show:!1,value:[],name:"keys",display_name:"keys",type:"list",list:!1,field_type:"input"},default_value:{required:!0,placeholder:"",show:!1,value:"",name:"default_value",display_name:"default_value",type:"str",list:!1,field_type:"input",condition:e=>e.process_mode.value=="get_value"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const j0=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Gc},Symbol.toStringTag,{value:"Module"})),F0={__name:"JsonProcess",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Ye(),o=F(t.data.template),a=Gc();Object.entries(a.template).forEach(([i,s])=>{o.value[i]=o.value[i]||s,s.is_output&&(o.value[i].is_output=!0)});const l=i=>{o.value.keys.value.splice(i,1)},r=()=>{o.value.keys.value.push("Key")};return(i,s)=>{const u=M("a-textarea"),c=M("a-select"),d=M("a-input"),f=M("a-typography-text"),p=M("a-space"),_=M("a-flex"),b=M("a-button");return k(),A(Pe,{nodeId:e.id,debug:t.data.debug,fieldsData:o.value,translatePrefix:"components.nodes.controlFlows.JsonProcess",documentLink:"https://vectorvein.com/help/docs/control-flows#h2-6"},{main:S(()=>[m(_,{vertical:"",gap:"small"},{default:S(()=>[m(Qe,{name:w(n)("components.nodes.common.input"),required:"",type:"target",data:o.value.input,"onUpdate:data":s[1]||(s[1]=h=>o.value.input=h)},{default:S(()=>[m(u,{class:"field-content",value:o.value.input.value,"onUpdate:value":s[0]||(s[0]=h=>o.value.input.value=h),autoSize:{minRows:1,maxRows:10},showCount:!0,placeholder:o.value.input.placeholder},null,8,["value","placeholder"])]),_:1},8,["name","data"]),m(Qe,{name:w(n)("components.nodes.controlFlows.JsonProcess.process_mode"),required:"",type:"target",data:o.value.process_mode,"onUpdate:data":s[3]||(s[3]=h=>o.value.process_mode=h)},{default:S(()=>[m(c,{style:{width:"100%"},value:o.value.process_mode.value,"onUpdate:value":s[2]||(s[2]=h=>o.value.process_mode.value=h),options:o.value.process_mode.options},null,8,["value","options"])]),_:1},8,["name","data"]),o.value.process_mode.value=="get_value"?(k(),Z(ye,{key:0},[m(Qe,{name:w(n)("components.nodes.controlFlows.JsonProcess.key"),required:"",type:"target",data:o.value.key,"onUpdate:data":s[5]||(s[5]=h=>o.value.key=h)},{default:S(()=>[m(d,{class:"field-content",value:o.value.key.value,"onUpdate:value":s[4]||(s[4]=h=>o.value.key.value=h),placeholder:o.value.key.placeholder},null,8,["value","placeholder"])]),_:1},8,["name","data"]),m(Qe,{name:w(n)("components.nodes.controlFlows.JsonProcess.default_value"),type:"target",data:o.value.default_value,"onUpdate:data":s[7]||(s[7]=h=>o.value.default_value=h)},{default:S(()=>[m(d,{class:"field-content",value:o.value.default_value.value,"onUpdate:value":s[6]||(s[6]=h=>o.value.default_value.value=h),placeholder:o.value.default_value.placeholder},null,8,["value","placeholder"])]),_:1},8,["name","data"])],64)):ce("",!0),o.value.process_mode.value=="get_multiple_values"?(k(),Z(ye,{key:1},[m(Qe,{name:w(n)("components.nodes.controlFlows.JsonProcess.keys"),required:"",type:"target",data:o.value.keys,"onUpdate:data":s[8]||(s[8]=h=>o.value.keys=h)},{default:S(()=>[m(_,{vertical:"",gap:"small"},{default:S(()=>[(k(!0),Z(ye,null,Xe(o.value.keys.value,(h,v)=>(k(),A(p,{key:v},{default:S(()=>[m(f,{content:o.value.keys.value[v],"onUpdate:content":T=>o.value.keys.value[v]=T,editable:""},null,8,["content","onUpdate:content"]),m(w(Vo),{class:"clickable-icon",fill:"#ff4d4f",onClick:T=>l(v)},null,8,["onClick"])]),_:2},1024))),128))]),_:1}),m(b,{block:"",type:"dashed",class:"add-field-button",onClick:r},{default:S(()=>[m(w(Xn)),ne(" "+J(w(n)("components.nodes.controlFlows.JsonProcess.add_key")),1)]),_:1})]),_:1},8,["name","data"]),m(Qe,{name:w(n)("components.nodes.controlFlows.JsonProcess.default_value"),type:"target",data:o.value.default_value,"onUpdate:data":s[10]||(s[10]=h=>o.value.default_value=h)},{default:S(()=>[m(d,{class:"field-content",value:o.value.default_value.value,"onUpdate:value":s[9]||(s[9]=h=>o.value.default_value.value=h),placeholder:o.value.default_value.placeholder},null,8,["value","placeholder"])]),_:1},8,["name","data"])],64)):ce("",!0)]),_:1})]),output:S(()=>[m(_,{vertical:"",style:{width:"100%"}},{default:S(()=>[o.value.process_mode.value!="get_multiple_values"?(k(),A(Qe,{key:0,data:o.value.output,"onUpdate:data":s[11]||(s[11]=h=>o.value.output=h),name:w(n)("components.nodes.common.output"),type:"source",nameOnly:""},null,8,["data","name"])):(k(!0),Z(ye,{key:1},Xe(o.value.keys.value,(h,v)=>(k(),A(Qe,{key:v,name:h,type:"source",nameOnly:"",data:{name:`output-${h}`}},null,8,["name","data"]))),128))]),_:1})]),_:1},8,["nodeId","debug","fieldsData"])}}},L0=Object.freeze(Object.defineProperty({__proto__:null,default:F0},Symbol.toStringTag,{value:"Module"}));function Bc(){return{description:"description",task_name:"control_flows.random_choice",has_inputs:!0,template:{input:{required:!0,placeholder:"",show:!1,value:[],name:"input",display_name:"input",type:"list",list:!1,field_type:"select"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const G0=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Bc},Symbol.toStringTag,{value:"Module"})),B0={__name:"RandomChoice",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=Bc();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.controlFlows.RandomChoice",documentLink:"https://vectorvein.com/help/docs/control-flows#h2-10"},null,8,["nodeId","debug","fieldsData"]))}},H0=Object.freeze(Object.defineProperty({__proto__:null,default:B0},Symbol.toStringTag,{value:"Module"})),Y0={__name:"FileLoader",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template);return(o,a)=>(k(),A(Pe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.fileProcessing.FileLoader",documentLink:"https://vectorvein.com/help/docs/file-processing#h2-0"},null,8,["nodeId","debug","fieldsData"]))}},Z0=Object.freeze(Object.defineProperty({__proto__:null,default:Y0},Symbol.toStringTag,{value:"Module"}));function Hc(){const e=["stable-diffusion-xl-1024-v0-9","stable-diffusion-xl-1024-v1-0"],t=["sd3","sd3-turbo","sd-core"];return{description:"description",task_name:"image_generation.stable_diffusion",has_inputs:!0,template:{prompt:{required:!0,placeholder:"",show:!1,value:"",name:"prompt",display_name:"prompt",type:"str",list:!1,field_type:"textarea"},negative_prompt:{required:!0,placeholder:"",show:!1,value:"",name:"negative_prompt",display_name:"negative_prompt",type:"str",list:!1,field_type:"textarea"},model:{required:!1,placeholder:"",show:!1,value:"stable-diffusion-xl-1024-v1-0",options:[{value:"sd3",label:"SD3"},{value:"sd3-turbo",label:"SD3 Turbo"},{value:"sd-core",label:"Core"},{value:"stable-diffusion-xl-1024-v1-0",label:"SDXL 1.0"},{value:"stable-diffusion-xl-1024-v0-9",label:"SDXL 0.9"},{value:"stable-diffusion-xl-beta-v2-2-2",label:"SDXL 0.8"}],name:"model",display_name:"model",type:"str",clear_after_run:!1,list:!0,field_type:"select"},cfg_scale:{required:!0,placeholder:"",show:!1,value:7,name:"cfg_scale",display_name:"cfg_scale",type:"float",list:!1,field_type:"number",condition:n=>!t.includes(n.model.value)},sampler:{required:!1,placeholder:"",show:!1,value:"k_dpmpp_2m",options:[{value:"ddim",label:"ddim"},{value:"plms",label:"plms"},{value:"k_euler",label:"k_euler"},{value:"k_euler_ancestral",label:"k_euler_ancestral"},{value:"k_heun",label:"k_heun"},{value:"k_dpm_2",label:"k_dpm_2"},{value:"k_dpm_2_ancestral",label:"k_dpm_2_ancestral"},{value:"k_dpmpp_2s_ancestral",label:"k_dpmpp_2s_ancestral"},{value:"k_dpmpp_2m",label:"k_dpmpp_2m"},{value:"k_dpmpp_sde",label:"k_dpmpp_sde"}],name:"sampler",display_name:"sampler",type:"str",clear_after_run:!1,list:!0,field_type:"select",condition:n=>!t.includes(n.model.value)},width:{required:!0,placeholder:"",show:!1,value:1024,name:"width",display_name:"width",type:"int",list:!1,field_type:"number",condition:n=>!e.includes(n.model.value)&&!t.includes(n.model.value)},height:{required:!0,placeholder:"",show:!1,value:1024,name:"height",display_name:"height",type:"int",list:!1,field_type:"number",condition:n=>!e.includes(n.model.value)&&!t.includes(n.model.value)},size:{required:!0,placeholder:"",show:!1,value:"1024 x 1024",options:[{value:"1024 x 1024",label:"1024 x 1024"},{value:"1152 x 896",label:"1152 x 896"},{value:"896 x 1152",label:"896 x 1152"},{value:"1216 x 832",label:"1216 x 832"},{value:"832 x 1216",label:"832 x 1216"},{value:"1344 x 768",label:"1344 x 768"},{value:"768 x 1344",label:"768 x 1344"},{value:"1536 x 640",label:"1536 x 640"},{value:"640 x 1536",label:"640 x 1536"}],name:"size",display_name:"size",type:"int",list:!1,field_type:"select",condition:n=>e.includes(n.model.value)&&!t.includes(n.model.value)},aspect_ratio:{required:!0,placeholder:"",show:!1,value:"1:1",options:[{value:"1:1",label:"1:1"},{value:"16:9",label:"16:9"},{value:"21:9",label:"21:9"},{value:"2:3",label:"2:3"},{value:"3:2",label:"3:2"},{value:"4:5",label:"4:5"},{value:"5:4",label:"5:4"},{value:"9:16",label:"9:16"},{value:"9:21",label:"9:21"}],name:"aspect_ratio",display_name:"aspect_ratio",type:"int",list:!1,field_type:"select",condition:n=>t.includes(n.model.value)},output_type:{required:!1,placeholder:"",show:!1,value:"markdown",options:[{value:"only_link",label:"only_link"},{value:"markdown",label:"markdown"},{value:"html",label:"html"}],name:"output_type",display_name:"output_type",type:"str",clear_after_run:!1,list:!0,field_type:"select"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const J0=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Hc},Symbol.toStringTag,{value:"Module"})),K0={__name:"StableDiffusion",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=Hc();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),Te(()=>n.value.size.value,a=>{const[l,r]=a.split(" x ");n.value.width.value=parseInt(l),n.value.height.value=parseInt(r)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.imageGeneration.StableDiffusion",documentLink:"https://vectorvein.com/help/docs/image-generation#h2-0"},null,8,["nodeId","debug","fieldsData"]))}},e1=Object.freeze(Object.defineProperty({__proto__:null,default:K0},Symbol.toStringTag,{value:"Module"}));function Yc(){return{description:"description",task_name:"llms.chat_glm",has_inputs:!0,template:{prompt:{required:!0,placeholder:"",show:!1,value:"",name:"prompt",display_name:"prompt",type:"str",list:!1,field_type:"textarea"},llm_model:{required:!1,placeholder:"",show:!1,value:"glm-3-turbo",options:[{value:"glm-3-turbo",label:"glm-3-turbo"},{value:"glm-4",label:"glm-4"}],name:"llm_model",display_name:"llm_model",type:"str",clear_after_run:!1,list:!0,field_type:"select"},temperature:{required:!0,placeholder:"",show:!1,value:.7,name:"temperature",display_name:"temperature",type:"float",list:!1,field_type:"temperature"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const t1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Yc},Symbol.toStringTag,{value:"Module"})),n1={__name:"ChatGLM",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=Yc();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.llms.ChatGLM",documentLink:"https://vectorvein.com/help/docs/language-models#h2-4"},null,8,["nodeId","debug","fieldsData"]))}},o1=Object.freeze(Object.defineProperty({__proto__:null,default:n1},Symbol.toStringTag,{value:"Module"}));function Zc(){return{description:"description",task_name:"llms.claude",has_inputs:!0,template:{prompt:{required:!0,placeholder:"",show:!1,value:"",name:"prompt",display_name:"prompt",type:"str",list:!1,field_type:"textarea"},llm_model:{required:!1,placeholder:"",show:!1,value:"claude-3-haiku",options:[{value:"claude-3-opus",label:"claude-3-opus"},{value:"claude-3-sonnet",label:"claude-3-sonnet"},{value:"claude-3-haiku",label:"claude-3-haiku"},{value:"claude-2.1",label:"claude-2.1"},{value:"claude-instant-1.2",label:"claude-instant-1.2"}],name:"llm_model",display_name:"llm_model",type:"str",clear_after_run:!1,list:!0,field_type:"select"},temperature:{required:!0,placeholder:"",show:!1,value:.7,name:"temperature",display_name:"temperature",type:"float",list:!1,field_type:"temperature"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const a1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Zc},Symbol.toStringTag,{value:"Module"})),l1={__name:"Claude",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=Zc();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.llms.Claude",documentLink:"https://vectorvein.com/help/docs/language-models#h2-24"},null,8,["nodeId","debug","fieldsData"]))}},r1=Object.freeze(Object.defineProperty({__proto__:null,default:l1},Symbol.toStringTag,{value:"Module"}));function Jc(){return{description:"description",task_name:"llms.moonshot",has_inputs:!0,template:{prompt:{required:!0,placeholder:"",show:!1,value:"",name:"prompt",display_name:"prompt",type:"str",list:!1,field_type:"textarea"},llm_model:{required:!1,placeholder:"",show:!1,value:"moonshot-v1-8k",options:[{value:"moonshot-v1-8k",label:"moonshot-v1-8k"},{value:"moonshot-v1-32k",label:"moonshot-v1-32k"},{value:"moonshot-v1-128k",label:"moonshot-v1-128k"}],name:"llm_model",display_name:"llm_model",type:"str",clear_after_run:!1,list:!0,field_type:"select"},temperature:{required:!0,placeholder:"",show:!1,value:.7,name:"temperature",display_name:"temperature",type:"float",list:!1,field_type:"temperature"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const i1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Jc},Symbol.toStringTag,{value:"Module"})),s1={__name:"Moonshot",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=Jc();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.llms.Moonshot",documentLink:"https://vectorvein.com/help/docs/language-models#h2-32"},null,8,["nodeId","debug","fieldsData"]))}},u1=Object.freeze(Object.defineProperty({__proto__:null,default:s1},Symbol.toStringTag,{value:"Module"}));function Kc(){return{description:"description",task_name:"llms.open_ai",has_inputs:!0,template:{prompt:{required:!0,placeholder:"",show:!1,value:"",name:"prompt",display_name:"prompt",type:"str",list:!1,field_type:"textarea"},llm_model:{required:!1,placeholder:"",show:!1,value:"gpt-3.5",options:[{value:"gpt-3.5",label:"gpt-3.5-turbo"},{value:"gpt-4",label:"gpt-4-turbo"}],name:"llm_model",display_name:"llm_model",type:"str",clear_after_run:!1,list:!0,field_type:"select"},temperature:{required:!0,placeholder:"",show:!1,value:.7,name:"temperature",display_name:"temperature",type:"float",list:!1,field_type:"temperature"},response_format:{required:!1,placeholder:"",show:!1,value:"text",options:[{value:"text",label:"Text"},{value:"json_object",label:"JSON"}],name:"response_format",display_name:"response_format",type:"str",clear_after_run:!1,list:!0,field_type:"select"},use_function_call:{required:!1,placeholder:"",show:!1,value:!1,name:"use_function_call",display_name:"use_function_call",type:"bool",list:!1,field_type:"checkbox"},functions:{required:!1,placeholder:"",show:!1,value:[],name:"functions",display_name:"functions",type:"list",list:!1,field_type:"select"},function_call_mode:{required:!1,placeholder:"",show:!1,value:"auto",options:[{value:"auto",label:"auto"},{value:"none",label:"none"}],name:"function_call_mode",display_name:"function_call_mode",type:"str",clear_after_run:!1,list:!0,field_type:"select"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0},function_call_output:{required:!0,placeholder:"",show:!1,value:"",name:"function_call_output",display_name:"function_call_output",type:"str",list:!1,field_type:"",is_output:!0,condition:e=>e.use_function_call.value},function_call_arguments:{required:!0,placeholder:"",show:!1,value:"",name:"function_call_arguments",display_name:"function_call_arguments",type:"dict",list:!1,field_type:"",is_output:!0,condition:e=>e.use_function_call.value}}}}const c1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Kc},Symbol.toStringTag,{value:"Module"})),d1={__name:"OpenAI",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Ye(),o=F(t.data.template),a=Kc();Object.entries(a.template).forEach(([D,O])=>{o.value[D]=o.value[D]||O,O.is_output&&(o.value[D].is_output=!0)});const l=()=>{o.value.function_call_mode.options=[{value:"auto",label:"auto"},{value:"none",label:"none"}],o.value.function_call_mode.options=o.value.function_call_mode.options.concat(o.value.functions.value.map(D=>({value:D.name,label:D.name})))},r=F(!1),i=F(-1),s=ut({name:"",description:"",parameters:{type:"object",properties:{},required:[]}}),u=F(!1),c=()=>{r.value=!1,s.name="",s.description="",s.parameters={type:"object",properties:{},required:[]},u.value=!0},d=()=>{o.value.functions.value.push(JSON.parse(JSON.stringify(s))),u.value=!1,s.name="",s.description="",s.parameters={type:"object",properties:{},required:[]},l()},f=D=>{o.value.functions.value.splice(D,1),l()},p=D=>{r.value=!0,i.value=D,s.name=o.value.functions.value[D].name,s.description=o.value.functions.value[D].description,s.parameters=JSON.parse(JSON.stringify(o.value.functions.value[D].parameters)),u.value=!0},_=()=>{o.value.functions.value[i.value].name=s.name,o.value.functions.value[i.value].description=s.description,o.value.functions.value[i.value].parameters=JSON.parse(JSON.stringify(s.parameters)),u.value=!1,l()},b=F(!1),h=F(""),v=ut({name:"",type:"string",description:""}),T=F("simple"),Q=F("string"),y=F('{"items": {"type": "string"}}'),$=F('{"properties": {}, "required": []}'),E=D=>{D=="array"&&(T.value="simple",Q.value="string")},x=[{value:"string",label:"string"},{value:"number",label:"number"},{value:"integer",label:"integer"},{value:"object",label:"object"},{value:"array",label:"array"},{value:"boolean",label:"boolean"},{value:"null",label:"null"}],X=F(!1),U=()=>{b.value=!1,X.value=!0},V=()=>{if(s.parameters.properties[v.name]={type:v.type,description:v.description},v.type=="array")if(T.value=="simple")s.parameters.properties[v.name].items={type:Q.value};else{try{JSON.parse(y.value)}catch{pt.error(n("components.nodes.llms.common.array_items_manual_schema_error"));return}s.parameters.properties[v.name]={...s.parameters.properties[v.name],...JSON.parse(y.value)}}else if(v.type=="object"){try{JSON.parse($.value)}catch{pt.error(n("components.nodes.llms.common.object_items_manual_schema_error"));return}s.parameters.properties[v.name]={...s.parameters.properties[v.name],...JSON.parse($.value)}}},G=()=>{V(),X.value=!1,v.name="",v.type="string",v.description=""},ee=D=>{delete s.parameters.properties[D]},B=D=>{b.value=!0,h.value=D,v.name=D,v.type=s.parameters.properties[D].type,v.description=s.parameters.properties[D].description,X.value=!0},g=()=>{delete s.parameters.properties[h.value],V(),X.value=!1,v.name="",v.type="string",v.description=""};return(D,O)=>{const q=M("a-textarea"),C=M("a-select"),N=M("a-checkbox"),P=M("a-button"),R=M("a-flex"),K=M("a-input"),te=M("a-form-item"),L=M("a-col"),ae=M("a-row"),Y=M("a-checkbox-group"),pe=M("a-form"),re=M("a-drawer"),se=M("a-select-option");return k(),A(Pe,{nodeId:e.id,fieldsData:o.value,translatePrefix:"components.nodes.llms.OpenAI",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/language-models#h2-0"},{main:S(()=>[m(R,{vertical:"",gap:"small"},{default:S(()=>[m(Qe,{name:w(n)("components.nodes.llms.common.prompt"),required:"",type:"target",data:o.value.prompt,"onUpdate:data":O[1]||(O[1]=H=>o.value.prompt=H)},{default:S(()=>[m(q,{class:"field-content",value:o.value.prompt.value,"onUpdate:value":O[0]||(O[0]=H=>o.value.prompt.value=H),autoSize:{minRows:2,maxRows:20},showCount:!0,placeholder:o.value.prompt.placeholder},null,8,["value","placeholder"])]),_:1},8,["name","data"]),m(Qe,{name:w(n)("components.nodes.llms.common.llm_model"),required:"",type:"target",data:o.value.llm_model,"onUpdate:data":O[3]||(O[3]=H=>o.value.llm_model=H)},{default:S(()=>[m(C,{style:{width:"100%"},value:o.value.llm_model.value,"onUpdate:value":O[2]||(O[2]=H=>o.value.llm_model.value=H),options:o.value.llm_model.options},null,8,["value","options"])]),_:1},8,["name","data"]),m(Qe,{name:w(n)("components.nodes.llms.common.temperature"),required:"",type:"target",data:o.value.temperature,"onUpdate:data":O[5]||(O[5]=H=>o.value.temperature=H)},{default:S(()=>[m(Br,{modelValue:o.value.temperature.value,"onUpdate:modelValue":O[4]||(O[4]=H=>o.value.temperature.value=H)},null,8,["modelValue"])]),_:1},8,["name","data"]),m(Qe,{name:w(n)("components.nodes.llms.common.response_format"),required:"",type:"target",data:o.value.response_format,"onUpdate:data":O[7]||(O[7]=H=>o.value.response_format=H)},{default:S(()=>[m(C,{style:{width:"100%"},value:o.value.response_format.value,"onUpdate:value":O[6]||(O[6]=H=>o.value.response_format.value=H),options:o.value.response_format.options},null,8,["value","options"])]),_:1},8,["name","data"]),m(Qe,{name:w(n)("components.nodes.llms.common.use_function_call"),"name-only":"",type:"target",data:o.value.use_function_call,"onUpdate:data":O[9]||(O[9]=H=>o.value.use_function_call=H)},{inline:S(()=>[m(N,{checked:o.value.use_function_call.value,"onUpdate:checked":O[8]||(O[8]=H=>o.value.use_function_call.value=H)},null,8,["checked"])]),_:1},8,["name","data"]),Vn(m(Qe,{name:w(n)("components.nodes.llms.common.functions"),type:"target",data:o.value.functions,"onUpdate:data":O[23]||(O[23]=H=>o.value.functions=H)},{default:S(()=>[m(R,{vertical:"",gap:"small"},{default:S(()=>[(k(!0),Z(ye,null,Xe(o.value.functions.value,(H,he)=>(k(),A(R,{gap:"small",align:"center",key:he},{default:S(()=>[m(P,{block:"",onClick:_e=>p(he)},{default:S(()=>[m(w(so)),ne(" "+J(H.name),1)]),_:2},1032,["onClick"]),m(P,{type:"text",danger:"",onClick:_e=>f(he)},{icon:S(()=>[m(w(Vo))]),_:2},1032,["onClick"])]),_:2},1024))),128)),m(P,{type:"dashed",block:"",onClick:c,class:"add-field-button"},{default:S(()=>[m(w(Xn)),ne(" "+J(w(n)("components.nodes.llms.common.add_function")),1)]),_:1})]),_:1}),m(re,{open:u.value,"onUpdate:open":O[14]||(O[14]=H=>u.value=H),title:w(n)("components.nodes.llms.common.add_function"),placement:"right",width:500},{extra:S(()=>[r.value?(k(),A(P,{key:0,type:"primary",onClick:O[10]||(O[10]=H=>_(i.value))},{default:S(()=>[ne(J(w(n)("common.edit")),1)]),_:1})):(k(),A(P,{key:1,type:"primary",onClick:d},{default:S(()=>[ne(J(w(n)("common.add")),1)]),_:1}))]),default:S(()=>[m(pe,null,{default:S(()=>[m(te,{label:w(n)("components.nodes.llms.common.function_name")},{default:S(()=>[m(K,{value:s.name,"onUpdate:value":O[11]||(O[11]=H=>s.name=H)},null,8,["value"])]),_:1},8,["label"]),m(te,{label:w(n)("components.nodes.llms.common.function_description")},{default:S(()=>[m(q,{value:s.description,"onUpdate:value":O[12]||(O[12]=H=>s.description=H),autoSize:{minRows:3,maxRows:20},showCount:!0},null,8,["value"])]),_:1},8,["label"]),m(te,{label:w(n)("components.nodes.llms.common.function_parameters")},{default:S(()=>[m(ae,{type:"flex",gutter:[12,12]},{default:S(()=>[(k(!0),Z(ye,null,Xe(Object.keys(s.parameters.properties),(H,he)=>(k(),A(L,{span:24,key:he},{default:S(()=>[m(R,{align:"center",gap:"5"},{default:S(()=>[m(P,{block:"",onClick:_e=>B(H)},{default:S(()=>[m(w(so)),ne(" "+J(H)+": "+J(s.parameters.properties[H].type),1)]),_:2},1032,["onClick"]),m(P,{type:"text",danger:"",onClick:_e=>ee(H)},{icon:S(()=>[m(w(Vo))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),m(L,{span:24},{default:S(()=>[m(P,{block:"",type:"dashed",style:{display:"flex",gap:"6px","align-items":"center","justify-content":"center"},onClick:U},{default:S(()=>[m(w(Xn)),ne(" "+J(w(n)("components.nodes.llms.common.add_parameter")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["label"]),m(te,{label:w(n)("components.nodes.llms.common.function_required_parameters")},{default:S(()=>[m(Y,{value:s.parameters.required,"onUpdate:value":O[13]||(O[13]=H=>s.parameters.required=H),name:"checkboxgroup",options:Object.keys(s.parameters.properties).map(H=>({label:H,value:H}))},null,8,["value","options"])]),_:1},8,["label"])]),_:1})]),_:1},8,["open","title"]),m(re,{open:X.value,"onUpdate:open":O[22]||(O[22]=H=>X.value=H),title:w(n)("components.nodes.llms.common.add_parameter"),placement:"right",width:450},{extra:S(()=>[b.value?(k(),A(P,{key:0,type:"primary",onClick:g},{default:S(()=>[ne(J(w(n)("common.edit")),1)]),_:1})):(k(),A(P,{key:1,type:"primary",onClick:G},{default:S(()=>[ne(J(w(n)("common.add")),1)]),_:1}))]),default:S(()=>[m(pe,null,{default:S(()=>[m(te,{label:w(n)("components.nodes.llms.common.parameter_name")},{default:S(()=>[m(K,{value:v.name,"onUpdate:value":O[15]||(O[15]=H=>v.name=H)},null,8,["value"])]),_:1},8,["label"]),m(te,{label:w(n)("components.nodes.llms.common.parameter_description")},{default:S(()=>[m(q,{value:v.description,"onUpdate:value":O[16]||(O[16]=H=>v.description=H),autoSize:{minRows:3,maxRows:20},showCount:!0},null,8,["value"])]),_:1},8,["label"]),m(te,{label:w(n)("components.nodes.llms.common.parameter_type")},{default:S(()=>[m(C,{ref:"select",value:v.type,"onUpdate:value":O[17]||(O[17]=H=>v.type=H),options:x,onChange:E},null,8,["value"])]),_:1},8,["label"]),v.type=="array"?(k(),Z(ye,{key:0},[m(te,{label:w(n)("components.nodes.llms.common.array_configuration_mode")},{default:S(()=>[m(C,{ref:"select",value:T.value,"onUpdate:value":O[18]||(O[18]=H=>T.value=H)},{default:S(()=>[m(se,{value:"simple"},{default:S(()=>[ne(J(w(n)("components.nodes.llms.common.array_configuration_mode_simple")),1)]),_:1}),m(se,{value:"manual"},{default:S(()=>[ne(J(w(n)("components.nodes.llms.common.array_configuration_mode_manual")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),T.value=="simple"?(k(),A(te,{key:0,label:w(n)("components.nodes.llms.common.array_items_type")},{default:S(()=>[m(C,{ref:"select",value:Q.value,"onUpdate:value":O[19]||(O[19]=H=>Q.value=H),options:x},null,8,["value"])]),_:1},8,["label"])):ce("",!0),T.value=="manual"?(k(),A(te,{key:1,label:w(n)("components.nodes.llms.common.array_items_manual_schema")},{default:S(()=>[m(q,{value:y.value,"onUpdate:value":O[20]||(O[20]=H=>y.value=H),autoSize:{minRows:3,maxRows:20},showCount:!0},null,8,["value"])]),_:1},8,["label"])):ce("",!0)],64)):v.type=="object"?(k(),A(te,{key:1,label:w(n)("components.nodes.llms.common.object_items_manual_schema")},{default:S(()=>[m(q,{value:$.value,"onUpdate:value":O[21]||(O[21]=H=>$.value=H),autoSize:{minRows:3,maxRows:20},showCount:!0},null,8,["value"])]),_:1},8,["label"])):ce("",!0)]),_:1})]),_:1},8,["open","title"])]),_:1},8,["name","data"]),[[An,o.value.use_function_call.value]]),Vn(m(Qe,{name:w(n)("components.nodes.llms.common.function_call_mode"),type:"target",data:o.value.function_call_mode,"onUpdate:data":O[25]||(O[25]=H=>o.value.function_call_mode=H)},{default:S(()=>[m(C,{style:{width:"100%"},value:o.value.function_call_mode.value,"onUpdate:value":O[24]||(O[24]=H=>o.value.function_call_mode.value=H),options:o.value.function_call_mode.options},null,8,["value","options"])]),_:1},8,["name","data"]),[[An,o.value.use_function_call.value]])]),_:1})]),_:1},8,["nodeId","fieldsData","debug"])}}},p1=Object.freeze(Object.defineProperty({__proto__:null,default:d1},Symbol.toStringTag,{value:"Module"}));function ed(){return{description:"description",task_name:"media_processing.glm_vision",has_inputs:!0,template:{text_prompt:{required:!0,placeholder:"",show:!1,value:"",name:"text_prompt",display_name:"text_prompt",type:"str",list:!1,field_type:"textarea"},images_or_urls:{required:!1,placeholder:"",show:!1,value:"images",options:[{value:"images",label:"images"},{value:"urls",label:"urls"}],name:"images_or_urls",display_name:"images_or_urls",type:"str",clear_after_run:!1,list:!0,field_type:"radio"},images:{required:!0,placeholder:"",show:!0,value:[],name:"images",display_name:"images",type:"str",list:!1,field_type:"file",support_file_types:".jpg, .jpeg, .png, .webp",condition:e=>e.images_or_urls.value=="images"},urls:{required:!0,placeholder:"",show:!1,value:"",name:"urls",display_name:"urls",type:"str",list:!1,field_type:"input",condition:e=>e.images_or_urls.value=="urls"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const f1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:ed},Symbol.toStringTag,{value:"Module"})),h1={__name:"GlmVision",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=ed();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),Te(()=>n.value.images_or_urls,()=>{n.value.images_or_urls.value=="images"?n.value.urls.show=!1:n.value.images.show=!1},{deep:!0}),(a,l)=>(k(),A(Pe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.mediaProcessing.GlmVision",documentLink:"https://vectorvein.com/help/docs/media-processing#h2-12"},null,8,["nodeId","debug","fieldsData"]))}},m1=Object.freeze(Object.defineProperty({__proto__:null,default:h1},Symbol.toStringTag,{value:"Module"}));function td(){return{description:"description",task_name:"media_processing.gpt_vision",has_inputs:!0,template:{text_prompt:{required:!0,placeholder:"",show:!1,value:"",name:"text_prompt",display_name:"text_prompt",type:"str",list:!1,field_type:"textarea"},images_or_urls:{required:!1,placeholder:"",show:!1,value:"images",options:[{value:"images",label:"images"},{value:"urls",label:"urls"}],name:"images_or_urls",display_name:"images_or_urls",type:"str",clear_after_run:!1,list:!0,field_type:"radio"},images:{required:!0,placeholder:"",show:!0,value:[],name:"images",display_name:"images",type:"str",list:!1,field_type:"file",support_file_types:".jpg, .jpeg, .png, .webp",condition:e=>e.images_or_urls.value=="images"},urls:{required:!0,placeholder:"",show:!1,value:"",name:"urls",display_name:"urls",type:"str",list:!1,field_type:"input",condition:e=>e.images_or_urls.value=="urls"},detail_type:{required:!1,placeholder:"",show:!1,value:"auto",options:[{value:"auto",label:"auto"},{value:"low",label:"low"},{value:"high",label:"high"}],name:"detail_type",display_name:"detail_type",type:"str",clear_after_run:!1,list:!0,field_type:"select"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const v1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:td},Symbol.toStringTag,{value:"Module"})),_1={__name:"GptVision",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=td();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),Te(()=>n.value.images_or_urls,()=>{n.value.images_or_urls.value=="images"?n.value.urls.show=!1:n.value.images.show=!1},{deep:!0}),(a,l)=>(k(),A(Pe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.mediaProcessing.GptVision",documentLink:"https://vectorvein.com/help/docs/media-processing#h2-4"},null,8,["nodeId","debug","fieldsData"]))}},g1=Object.freeze(Object.defineProperty({__proto__:null,default:_1},Symbol.toStringTag,{value:"Module"}));function nd(){return{description:"description",task_name:"output.document",has_inputs:!0,template:{file_name:{required:!0,placeholder:"",show:!0,value:"",name:"file_name",display_name:"file_name",type:"str",list:!1,field_type:"input"},content:{required:!0,placeholder:"",show:!1,value:"",name:"content",display_name:"content",type:"str",list:!1,field_type:"textarea"},export_type:{required:!1,placeholder:"",show:!1,value:".docx",options:[{value:".docx",label:".docx"},{value:".xlsx",label:".xlsx"},{value:".txt",label:".txt"},{value:".md",label:".md"},{value:".json",label:".json"},{value:".csv",label:".csv"},{value:".html",label:".html"},{value:".srt",label:".srt"}],name:"export_type",display_name:"export_type",type:"str",clear_after_run:!1,list:!0,field_type:"select"},show_local_file:{required:!1,placeholder:"",show:!1,value:!0,name:"show_local_file",display_name:"show_local_file",type:"bool",clear_after_run:!1,list:!1,field_type:"checkbox"},output:{required:!1,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",clear_after_run:!1,list:!1,field_type:"local_file",is_output:!0}}}}const y1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:nd},Symbol.toStringTag,{value:"Module"})),O1={__name:"Document",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=nd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,fieldsData:n.value,translatePrefix:"components.nodes.outputs.Document",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/outputs#h2-4"},null,8,["nodeId","fieldsData","debug"]))}},b1=Object.freeze(Object.defineProperty({__proto__:null,default:O1},Symbol.toStringTag,{value:"Module"}));function od(){return{description:"description",task_name:"output.echarts",has_inputs:!0,template:{option:{required:!0,placeholder:"",show:!1,value:"",name:"option",display_name:"option",type:"str",list:!1,field_type:"textarea"},show_echarts:{required:!1,placeholder:"",show:!1,value:!0,name:"show_echarts",display_name:"show_echarts",type:"bool",clear_after_run:!1,list:!1,field_type:"checkbox"}}}}const w1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:od},Symbol.toStringTag,{value:"Module"})),S1={__name:"Echarts",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=od();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,fieldsData:n.value,translatePrefix:"components.nodes.outputs.Echarts",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/outputs#h2-27"},null,8,["nodeId","fieldsData","debug"]))}},x1=Object.freeze(Object.defineProperty({__proto__:null,default:S1},Symbol.toStringTag,{value:"Module"}));function ad(){return{description:"description",task_name:"output.email",has_inputs:!0,template:{to_email:{required:!0,placeholder:"",show:!0,value:"",name:"to_email",display_name:"to_email",type:"str",list:!1,field_type:"input"},subject:{required:!0,placeholder:"",show:!0,value:"",name:"subject",display_name:"subject",type:"str",list:!1,field_type:"input"},content_html:{required:!0,placeholder:"",show:!1,value:"",name:"content_html",display_name:"content_html",type:"str",list:!1,field_type:"input"},attachments:{required:!1,placeholder:"",show:!1,value:"",name:"attachments",display_name:"attachments",type:"str",list:!1,field_type:"input"}}}}const $1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:ad},Symbol.toStringTag,{value:"Module"})),k1={__name:"Email",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=ad();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,fieldsData:n.value,translatePrefix:"components.nodes.outputs.Email",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/outputs#h2-8"},null,8,["nodeId","fieldsData","debug"]))}},T1=Object.freeze(Object.defineProperty({__proto__:null,default:k1},Symbol.toStringTag,{value:"Module"}));function ld(){return{description:"description",task_name:"output.mermaid",has_inputs:!0,template:{content:{required:!0,placeholder:"",show:!1,value:"",name:"content",display_name:"content",type:"str",list:!1,field_type:"textarea"},show_mermaid:{required:!1,placeholder:"",show:!1,value:!0,name:"show_mermaid",display_name:"show_mermaid",type:"bool",clear_after_run:!1,list:!1,field_type:"checkbox"}}}}const E1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:ld},Symbol.toStringTag,{value:"Module"})),Q1={__name:"Mermaid",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=ld();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,fieldsData:n.value,translatePrefix:"components.nodes.outputs.Mermaid",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/outputs#h2-24"},null,8,["nodeId","fieldsData","debug"]))}},P1=Object.freeze(Object.defineProperty({__proto__:null,default:Q1},Symbol.toStringTag,{value:"Module"}));function rd(){return{description:"description",task_name:"output.mindmap",has_inputs:!0,template:{content:{required:!0,placeholder:"",show:!1,value:"",name:"content",display_name:"content",type:"str",list:!1,field_type:"textarea"},show_mind_map:{required:!1,placeholder:"",show:!1,value:!0,name:"show_mind_map",display_name:"show_mind_map",type:"bool",clear_after_run:!1,list:!1,field_type:"checkbox"}}}}const D1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:rd},Symbol.toStringTag,{value:"Module"})),C1={__name:"Mindmap",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=rd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,fieldsData:n.value,translatePrefix:"components.nodes.outputs.Mindmap",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/outputs#h2-11"},null,8,["nodeId","fieldsData","debug"]))}},z1=Object.freeze(Object.defineProperty({__proto__:null,default:C1},Symbol.toStringTag,{value:"Module"}));function id(){return{description:"description",task_name:"output.text",has_inputs:!1,template:{text:{required:!0,placeholder:"",show:!0,value:"",name:"text",display_name:"text",type:"str",list:!1,field_type:"textarea"},output_title:{required:!0,placeholder:"",show:!1,value:"",name:"output_title",display_name:"output_title",type:"str",list:!1,field_type:"input",has_tooltip:!0},render_markdown:{required:!0,placeholder:"",show:!1,value:!0,name:"render_markdown",display_name:"render_markdown",type:"bool",list:!1,field_type:"checkbox"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str|dict",list:!1,field_type:"textarea",is_output:!0}}}}const N1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:id},Symbol.toStringTag,{value:"Module"})),q1={__name:"Text",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=id();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,fieldsData:n.value,translatePrefix:"components.nodes.outputs.Text",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/outputs#h2-14"},null,8,["nodeId","fieldsData","debug"]))}},R1=Object.freeze(Object.defineProperty({__proto__:null,default:q1},Symbol.toStringTag,{value:"Module"}));function sd(){return{description:"description",task_name:"output.workflow_invoke_output",has_inputs:!1,template:{value:{required:!0,placeholder:"",show:!0,value:"",name:"value",display_name:"value",type:"any",list:!1,field_type:"textarea"},display_name:{required:!0,placeholder:"",show:!0,value:"",name:"display_name",display_name:"display_name",type:"any",list:!1,field_type:"input"}}}}const M1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:sd},Symbol.toStringTag,{value:"Module"})),I1={__name:"WorkflowInvokeOutput",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=sd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.outputs.WorkflowInvokeOutput",documentLink:"https://vectorvein.com/help/docs/outputs#h2-30"},null,8,["nodeId","debug","fieldsData"]))}},V1=Object.freeze(Object.defineProperty({__proto__:null,default:I1},Symbol.toStringTag,{value:"Module"}));function ud(){return{description:"description",task_name:"relational_db.get_table_info",has_inputs:!0,template:{database:{required:!0,placeholder:"",show:!1,value:"",options:[],name:"database",display_name:"database",type:"str",list:!1,field_type:"select"},tables:{required:!0,placeholder:"",show:!1,value:[],options:[],name:"table",display_name:"table",type:"str",list:!1,field_type:"select"},output_sql:{required:!0,placeholder:"",show:!1,value:"",name:"output_sql",display_name:"output_sql",type:"list|str",list:!1,field_type:"",is_output:!0,has_tooltip:!0},output_json:{required:!0,placeholder:"",show:!1,value:[],name:"output_json",display_name:"output_json",type:"list|str",list:!1,field_type:"",is_output:!0}}}}const A1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:ud},Symbol.toStringTag,{value:"Module"})),X1={__name:"GetTableInfo",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Ye(),o=ml(),{userRelationalDatabases:a}=Qt(o),l=F(t.data.template),r=ud();Object.entries(r.template).forEach(([c,d])=>{l.value[c]=l.value[c]||d,d.is_output&&(l.value[c].is_output=!0)}),l.value.database.options=a.value.filter(c=>c.status=="VALID").map(c=>({value:c.rid,label:c.name}));const i=c=>{l.value.tables.options=[],l.value.tables.value=[],u(c)},s=F(!1),u=async c=>{if(!c){pt.error(n("components.nodes.relationalDb.GetTableInfo.select_database"));return}s.value=!0;const d=await _u("list",{rid:c,status:["VA"],page_size:100});d.status==200&&(l.value.tables.options=d.data.tables.map(f=>({value:f.tid,label:f.name})),s.value=!1)};return(c,d)=>{const f=M("a-select"),p=M("a-button"),_=M("a-tooltip"),b=M("a-flex"),h=M("a-spin");return k(),A(Pe,{nodeId:e.id,debug:t.data.debug,fieldsData:l.value,translatePrefix:"components.nodes.relationalDb.GetTableInfo",documentLink:"https://vectorvein.com/help/docs/relational-db#h2-4"},{main:S(()=>[m(b,{vertical:"",gap:"small"},{default:S(()=>[m(Qe,{name:w(n)("components.nodes.relationalDb.GetTableInfo.database"),required:"",type:"target",data:l.value.database,"onUpdate:data":d[1]||(d[1]=v=>l.value.database=v)},{default:S(()=>[m(f,{style:{width:"100%"},class:"field-content",value:l.value.database.value,"onUpdate:value":d[0]||(d[0]=v=>l.value.database.value=v),options:l.value.database.options,onChange:i},null,8,["value","options"])]),_:1},8,["name","data"]),m(_,{placement:"left",title:w(n)("components.nodes.relationalDb.GetTableInfo.select_all_if_empty")},{default:S(()=>[m(Qe,{name:w(n)("components.nodes.relationalDb.GetTableInfo.tables"),required:"",type:"target",data:l.value.tables,"onUpdate:data":d[4]||(d[4]=v=>l.value.tables=v)},{default:S(()=>[m(h,{spinning:s.value},{default:S(()=>[m(b,{gap:"small",align:"center"},{default:S(()=>[m(f,{style:{width:"100%"},class:"field-content",value:l.value.tables.value,"onUpdate:value":d[2]||(d[2]=v=>l.value.tables.value=v),options:l.value.tables.options,mode:"tags"},null,8,["value","options"]),m(_,{title:w(n)("components.nodes.relationalDb.GetTableInfo.load_tables")},{default:S(()=>[m(p,{type:"text",onClick:d[3]||(d[3]=v=>u(l.value.database.value))},{icon:S(()=>[m(w(Tu))]),_:1})]),_:1},8,["title"])]),_:1})]),_:1},8,["spinning"])]),_:1},8,["name","data"])]),_:1},8,["title"])]),_:1})]),_:1},8,["nodeId","debug","fieldsData"])}}},U1=Object.freeze(Object.defineProperty({__proto__:null,default:X1},Symbol.toStringTag,{value:"Module"}));function cd(){return{description:"description",task_name:"relational_db.run_sql",has_inputs:!0,template:{database:{required:!0,placeholder:"",show:!1,value:"",options:[],name:"database",display_name:"database",type:"str",list:!1,field_type:"select"},sql:{required:!0,placeholder:"",show:!1,value:"",name:"sql",display_name:"sql",type:"str",list:!1,field_type:"textarea"},read_only:{required:!1,placeholder:"",show:!1,value:!1,name:"read_only",display_name:"read_only",type:"bool",list:!1,field_type:"checkbox",has_tooltip:!0},include_column_names:{required:!1,placeholder:"",show:!1,value:!0,name:"include_column_names",display_name:"include_column_names",type:"bool",list:!1,field_type:"checkbox",condition:e=>e.output_type.value=="list",has_tooltip:!0},max_count:{required:!0,placeholder:"",show:!1,value:100,name:"max_count",display_name:"max_count",type:"str",list:!1,field_type:"number"},output_type:{required:!0,placeholder:"",show:!1,value:"csv",options:[{value:"list",label:"list"},{value:"markdown",label:"markdown"},{value:"csv",label:"csv"}],name:"output_type",display_name:"output_type",type:"str",list:!1,field_type:"select"},output:{required:!0,placeholder:"",show:!1,value:[],name:"output",display_name:"output",type:"list|str",list:!1,field_type:"",is_output:!0}}}}const W1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:cd},Symbol.toStringTag,{value:"Module"})),j1={__name:"RunSql",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=ml(),{userRelationalDatabases:o}=Qt(n),a=F(t.data.template),l=cd();return Object.entries(l.template).forEach(([r,i])=>{a.value[r]=a.value[r]||i,i.is_output&&(a.value[r].is_output=!0)}),a.value.database.options=o.value.filter(r=>r.status=="VALID").map(r=>({value:r.rid,label:r.name})),(r,i)=>(k(),A(Pe,{nodeId:e.id,fieldsData:a.value,translatePrefix:"components.nodes.relationalDb.RunSql",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/relational-db#h2-8"},null,8,["nodeId","fieldsData","debug"]))}},F1=Object.freeze(Object.defineProperty({__proto__:null,default:j1},Symbol.toStringTag,{value:"Module"}));function dd(){return{description:"description",task_name:"relational_db.smart_query",has_inputs:!0,template:{query:{required:!0,placeholder:"",show:!1,value:"",name:"query",display_name:"query",type:"str",list:!1,field_type:"textarea"},model:{required:!0,placeholder:"",show:!1,value:"OpenAI/gpt-35-turbo",options:Up,name:"model",display_name:"model",type:"str",list:!1,field_type:"select"},database:{required:!0,placeholder:"",show:!1,value:"",options:[],name:"database",display_name:"database",type:"str",list:!1,field_type:"select"},tables:{required:!0,placeholder:"",show:!1,value:[],options:[],name:"table",display_name:"table",type:"str",list:!1,field_type:"select"},use_sample_data:{required:!1,placeholder:"",show:!1,value:!0,name:"use_sample_data",display_name:"use_sample_data",type:"bool",list:!1,field_type:"checkbox"},include_column_names:{required:!1,placeholder:"",show:!1,value:!0,name:"include_column_names",display_name:"include_column_names",type:"bool",list:!1,field_type:"checkbox"},max_count:{required:!0,placeholder:"",show:!1,value:100,name:"max_count",display_name:"max_count",type:"str",list:!1,field_type:"number"},output_type:{required:!0,placeholder:"",show:!1,value:"csv",options:[{value:"list",label:"list"},{value:"markdown",label:"markdown"},{value:"csv",label:"csv"}],name:"output_type",display_name:"output_type",type:"str",list:!1,field_type:"select"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"list|str",list:!1,field_type:"",is_output:!0},output_query_sql:{required:!0,placeholder:"",show:!1,value:"",name:"output_query_sql",display_name:"output_query_sql",type:"list|str",list:!1,field_type:"",is_output:!0}}}}const L1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:dd},Symbol.toStringTag,{value:"Module"})),G1={__name:"SmartQuery",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Ye(),o=ml(),{userRelationalDatabases:a}=Qt(o),l=F(t.data.template),r=dd();Object.entries(r.template).forEach(([c,d])=>{l.value[c]=l.value[c]||d,d.is_output&&(l.value[c].is_output=!0)}),l.value.database.options=a.value.filter(c=>c.status=="VALID").map(c=>({value:c.rid,label:c.name}));const i=c=>{l.value.tables.options=[],l.value.tables.value=[],u(c)},s=F(!1),u=async c=>{if(!c){pt.error(n("components.nodes.relationalDb.SmartQuery.select_database"));return}s.value=!0;const d=await _u("list",{rid:c,status:["VA"],page_size:100});d.status==200&&(l.value.tables.options=d.data.tables.map(f=>({value:f.tid,label:f.name})),s.value=!1)};return(c,d)=>{const f=M("a-textarea"),p=M("a-select"),_=M("a-button"),b=M("a-tooltip"),h=M("a-flex"),v=M("a-spin"),T=M("a-checkbox"),Q=M("a-input-number");return k(),A(Pe,{nodeId:e.id,debug:t.data.debug,fieldsData:l.value,translatePrefix:"components.nodes.relationalDb.SmartQuery",documentLink:"https://vectorvein.com/help/docs/relational-db#h2-0"},{main:S(()=>[m(h,{vertical:"",gap:"small"},{default:S(()=>[m(Qe,{name:w(n)("components.nodes.relationalDb.SmartQuery.query"),required:"",type:"target",data:l.value.query,"onUpdate:data":d[1]||(d[1]=y=>l.value.query=y)},{default:S(()=>[m(f,{class:"field-content",value:l.value.query.value,"onUpdate:value":d[0]||(d[0]=y=>l.value.query.value=y),placeholder:l.value.query.placeholder},null,8,["value","placeholder"])]),_:1},8,["name","data"]),m(Qe,{name:w(n)("components.nodes.relationalDb.SmartQuery.model"),required:"",type:"target",data:l.value.model,"onUpdate:data":d[3]||(d[3]=y=>l.value.model=y)},{default:S(()=>[m(p,{style:{width:"100%"},class:"field-content",value:l.value.model.value,"onUpdate:value":d[2]||(d[2]=y=>l.value.model.value=y),options:l.value.model.options},null,8,["value","options"])]),_:1},8,["name","data"]),m(Qe,{name:w(n)("components.nodes.relationalDb.SmartQuery.database"),required:"",type:"target",data:l.value.database,"onUpdate:data":d[5]||(d[5]=y=>l.value.database=y)},{default:S(()=>[m(p,{style:{width:"100%"},class:"field-content",value:l.value.database.value,"onUpdate:value":d[4]||(d[4]=y=>l.value.database.value=y),options:l.value.database.options,onChange:i},null,8,["value","options"])]),_:1},8,["name","data"]),m(b,{placement:"left",title:w(n)("components.nodes.relationalDb.SmartQuery.select_all_if_empty")},{default:S(()=>[m(Qe,{name:w(n)("components.nodes.relationalDb.SmartQuery.tables"),type:"target",data:l.value.tables,"onUpdate:data":d[8]||(d[8]=y=>l.value.tables=y)},{default:S(()=>[m(v,{spinning:s.value},{default:S(()=>[m(h,{gap:"small",align:"center"},{default:S(()=>[m(p,{style:{width:"100%"},class:"field-content",value:l.value.tables.value,"onUpdate:value":d[6]||(d[6]=y=>l.value.tables.value=y),options:l.value.tables.options,mode:"tags"},null,8,["value","options"]),m(b,{title:w(n)("components.nodes.relationalDb.SmartQuery.load_tables")},{default:S(()=>[m(_,{type:"text",onClick:d[7]||(d[7]=y=>u(l.value.database.value))},{icon:S(()=>[m(w(Tu))]),_:1})]),_:1},8,["title"])]),_:1})]),_:1},8,["spinning"])]),_:1},8,["name","data"])]),_:1},8,["title"]),m(b,{placement:"left",title:w(n)("components.nodes.relationalDb.SmartQuery.use_sample_data_tip")},{default:S(()=>[m(Qe,{name:w(n)("components.nodes.relationalDb.SmartQuery.use_sample_data"),"name-only":"",type:"target",data:l.value.use_sample_data,"onUpdate:data":d[10]||(d[10]=y=>l.value.use_sample_data=y)},{inline:S(()=>[m(T,{checked:l.value.use_sample_data.value,"onUpdate:checked":d[9]||(d[9]=y=>l.value.use_sample_data.value=y)},null,8,["checked"])]),_:1},8,["name","data"])]),_:1},8,["title"]),Vn(De("template",null,[m(b,{placement:"left",title:w(n)("components.nodes.relationalDb.SmartQuery.include_column_names_tip")},{default:S(()=>[m(Qe,{name:w(n)("components.nodes.relationalDb.SmartQuery.include_column_names"),"name-only":"",type:"target",data:l.value.include_column_names,"onUpdate:data":d[12]||(d[12]=y=>l.value.include_column_names=y)},{inline:S(()=>[m(T,{checked:l.value.include_column_names.value,"onUpdate:checked":d[11]||(d[11]=y=>l.value.include_column_names.value=y)},null,8,["checked"])]),_:1},8,["name","data"])]),_:1},8,["title"])],512),[[An,l.value.output_type.value=="list"]]),m(Qe,{name:w(n)("components.nodes.relationalDb.SmartQuery.max_count"),type:"target",data:l.value.max_count,"onUpdate:data":d[14]||(d[14]=y=>l.value.max_count=y)},{default:S(()=>[m(Q,{style:{width:"100%"},class:"field-content",value:l.value.max_count.value,"onUpdate:value":d[13]||(d[13]=y=>l.value.max_count.value=y),placeholder:l.value.max_count.placeholder},null,8,["value","placeholder"])]),_:1},8,["name","data"]),m(Qe,{name:w(n)("components.nodes.relationalDb.SmartQuery.output_type"),type:"target",data:l.value.output_type,"onUpdate:data":d[16]||(d[16]=y=>l.value.output_type=y)},{default:S(()=>[m(p,{style:{width:"100%"},class:"field-content",value:l.value.output_type.value,"onUpdate:value":d[15]||(d[15]=y=>l.value.output_type.value=y),options:l.value.output_type.options},null,8,["value","options"])]),_:1},8,["name","data"])]),_:1})]),_:1},8,["nodeId","debug","fieldsData"])}}},B1=Object.freeze(Object.defineProperty({__proto__:null,default:G1},Symbol.toStringTag,{value:"Module"}));function pd(){return{description:"description",task_name:"text_processing.list_render",has_inputs:!0,template:{list:{required:!0,placeholder:"",show:!1,value:[],name:"list",display_name:"list",type:"str",list:!0,field_type:"list"},separator:{required:!1,placeholder:"",show:!1,value:"\\n\\n",name:"separator",display_name:"separator",type:"str",list:!0,field_type:"input"},output_type:{required:!0,placeholder:"",show:!1,value:"text",options:[{value:"text",label:"Text"},{value:"list",label:"List"}],name:"output_type",display_name:"output_type",type:"str",list:!1,field_type:"select"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"textarea",is_output:!0}}}}const H1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:pd},Symbol.toStringTag,{value:"Module"})),Y1={__name:"ListRender",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=pd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,fieldsData:n.value,translatePrefix:"components.nodes.textProcessing.ListRender",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/text-processing#h2-0"},null,8,["nodeId","fieldsData","debug"]))}},Z1=Object.freeze(Object.defineProperty({__proto__:null,default:Y1},Symbol.toStringTag,{value:"Module"}));function fd(){return{description:"description",task_name:"text_processing.markdown_to_html",has_inputs:!0,template:{markdown:{required:!0,placeholder:"",show:!1,value:"",name:"markdown",display_name:"markdown",type:"str",list:!1,field_type:"textarea"},html:{required:!0,placeholder:"",show:!1,value:"",name:"html",display_name:"html",type:"str",list:!1,field_type:"textarea",is_output:!0}}}}const J1=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:fd},Symbol.toStringTag,{value:"Module"})),K1={__name:"MarkdownToHtml",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=fd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,fieldsData:n.value,translatePrefix:"components.nodes.textProcessing.MarkdownToHtml",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/text-processing#h2-4"},null,8,["nodeId","fieldsData","debug"]))}},eb=Object.freeze(Object.defineProperty({__proto__:null,default:K1},Symbol.toStringTag,{value:"Module"})),tb={__name:"TemplateEditorModal",props:{fields:{type:Object,required:!0,default:{}},open:{type:Boolean,required:!0,default:!1},template:{type:[String,Array],required:!0,default:""}},emits:["update:open","update:template"],setup(e,{emit:t}){const n=e,{t:o}=Ye(),a=t;let l=F(n.open),r=F(n.template);const i=()=>{l.value=!1,a("update:open",l.value),a("update:template",r.value)},s=()=>{l.value=!1,a("update:open",l.value)};Te(()=>n.open,c=>{l.value=c}),Te(()=>n.template,c=>{r.value=c});const u=(c,d)=>{c.dataTransfer.setData("text/plain",`{{${d}}}`)};return(c,d)=>{const f=M("a-typography-text"),p=M("a-button"),_=M("a-space"),b=M("a-card"),h=M("a-col"),v=M("a-textarea"),T=M("a-tab-pane"),Q=M("a-tabs"),y=M("a-row"),$=M("a-modal");return k(),A($,{class:"template-editor",open:w(l),width:"80vw",onOk:i,onCancel:s,style:{"max-width":"1280px",width:"80vw"}},{title:S(()=>[m(w(so)),ne(" "+J(w(o)("components.templateEditorModal.title")),1)]),default:S(()=>[m(y,{gutter:16},{default:S(()=>[m(h,{span:6},{default:S(()=>[m(b,null,{title:S(()=>[ne(J(w(o)("components.templateEditorModal.variable_fields"))+" ",1),m(f,{type:"secondary",style:{"font-size":"12px","font-weight":"normal"}},{default:S(()=>[ne(J(w(o)("components.templateEditorModal.drag_to_insert")),1)]),_:1})]),default:S(()=>[m(_,{direction:"vertical",style:{width:"100%"}},{default:S(()=>[(k(!0),Z(ye,null,Xe(Object.keys(n.fields),E=>(k(),Z(ye,{key:E},[["template","output"].includes(E)?ce("",!0):(k(),A(p,{key:0,class:"template-variable",block:"",draggable:"true",onDragstart:x=>u(x,E)},{default:S(()=>[ne(J(E),1)]),_:2},1032,["onDragstart"]))],64))),128))]),_:1})]),_:1})]),_:1}),m(h,{span:18},{default:S(()=>[m(b,{title:w(o)("components.templateEditorModal.template")},{default:S(()=>[typeof n.template=="string"?(k(),A(v,{key:0,class:"template-textarea",value:w(r),"onUpdate:value":d[0]||(d[0]=E=>_o(r)?r.value=E:r=E),rows:20,showCount:""},null,8,["value"])):(k(),A(Q,{key:1},{default:S(()=>[(k(!0),Z(ye,null,Xe(n.template,(E,x)=>(k(),A(T,{key:x},{tab:S(()=>[m(w(wf)),ne(" "+J(x),1)]),default:S(()=>[m(v,{class:"template-textarea",value:w(r)[x],"onUpdate:value":X=>w(r)[x]=X,rows:20,showCount:""},null,8,["value","onUpdate:value"])]),_:2},1024))),128))]),_:1}))]),_:1},8,["title"])]),_:1})]),_:1})]),_:1},8,["open"])}}};function hd(){return{description:"description",task_name:"text_processing.template_compose",has_inputs:!0,template:{template:{required:!0,placeholder:"",show:!1,value:"",name:"template",display_name:"template",type:"str",list:!1,field_type:"textarea"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"textarea",is_output:!0}}}}const nb=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:hd},Symbol.toStringTag,{value:"Module"})),ob={class:"add-field-button-container"},ab={style:{display:"flex",gap:"5px"}},lb={__name:"TemplateCompose",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Ye(),o=_l(),a=(y,$)=>{o.push({action:y,data:$,nodeId:t.id})},l=F(t.data.template),r=hd();Object.entries(r.template).forEach(([y,$])=>{l.value[y]=l.value[y]||$,$.is_output&&(l.value[y].is_output=!0)});const i=F(Object.keys(l.value)),s=ut({required:!0,placeholder:"",show:!1,value:"",options:[],name:"",display_name:"",type:"str",list:!1,field_type:"input"}),u=F(!1),c=()=>{p.value=!1,s.display_name="",s.options=[],u.value=!0},d=()=>{const y=i.value.indexOf(_.value);s.name=s.display_name,l.value[s.name]=JSON.parse(JSON.stringify(s)),s.display_name="",s.options=[],p.value&&_.value!=s.name?(delete l.value[_.value],i.value[y]=s.name,l.value.template.value=l.value.template.value.replace(`{{${_.value}}}`,`{{${s.name}}}`),a("change",{event:"editField",oldFieldName:_.value,newFieldName:s.name})):p.value&&b.value!=s.field_type?(l.value[s.name].field_type=s.field_type,a("change",{event:"editFieldType",fieldName:s.name,fieldType:s.field_type})):i.value.push(s.name),u.value=!1},f=y=>{i.value=i.value.filter($=>$!=y),delete l.value[y],a("change",{event:"removeField",fieldName:y})},p=F(!1),_=F(""),b=F(""),h=y=>{_.value=y,b.value=l.value[y].field_type,s.display_name=y,s.name=y,s.value=l.value[y].value,s.show=l.value[y].show,s.options=l.value[y].options,s.field_type=l.value[y].field_type,u.value=!0,p.value=!0},v=(y,$)=>{s.options[$]={value:y,label:y}},T=y=>{s.options.splice(y,1)},Q=F(!1);return(y,$)=>{const E=M("a-select"),x=M("a-textarea"),X=M("a-input"),U=M("a-button"),V=M("a-select-option"),G=M("a-form-item"),ee=M("a-col"),B=M("a-row"),g=M("a-form"),D=M("a-drawer"),O=M("a-flex"),q=M("a-typography-paragraph");return k(),A(Pe,{nodeId:e.id,debug:t.data.debug,width:300,fieldsData:l.value,translatePrefix:"components.nodes.textProcessing.TemplateCompose",documentLink:"https://vectorvein.com/help/docs/text-processing#h2-8"},{main:S(()=>[m(O,{vertical:"",gap:"small"},{default:S(()=>[(k(!0),Z(ye,null,Xe(i.value,(C,N)=>(k(),Z(ye,{key:N},[["template","output"].includes(C)?ce("",!0):(k(),A(Qe,{key:0,name:l.value[C].display_name,required:"",type:"target",deletable:"",editable:"",onDelete:P=>f(C),onEdit:P=>h(C),data:l.value[C],"onUpdate:data":P=>l.value[C]=P},{default:S(()=>[l.value[C].field_type=="select"?(k(),A(E,{key:0,class:"field-content",style:{width:"100%"},value:l.value[C].value,"onUpdate:value":P=>l.value[C].value=P,options:l.value[C].options,placeholder:l.value[C].placeholder},null,8,["value","onUpdate:value","options","placeholder"])):l.value[C].field_type=="textarea"?(k(),A(x,{key:1,class:"field-content",value:l.value[C].value,"onUpdate:value":P=>l.value[C].value=P,autoSize:{minRows:2,maxRows:10},showCount:!0,placeholder:l.value[C].placeholder},null,8,["value","onUpdate:value","placeholder"])):l.value[C].field_type=="input"?(k(),A(X,{key:2,class:"field-content",value:l.value[C].value,"onUpdate:value":P=>l.value[C].value=P,placeholder:l.value[C].placeholder},null,8,["value","onUpdate:value","placeholder"])):ce("",!0)]),_:2},1032,["name","onDelete","onEdit","data","onUpdate:data"]))],64))),128)),De("div",ob,[m(U,{type:"dashed",block:"",onClick:c,class:"add-field-button"},{icon:S(()=>[m(w(Xn))]),default:S(()=>[ne(" "+J(w(n)("components.nodes.textProcessing.TemplateCompose.add_field")),1)]),_:1}),m(D,{open:u.value,"onUpdate:open":$[3]||($[3]=C=>u.value=C),title:w(n)(`components.nodes.textProcessing.TemplateCompose.${p.value?"edit":"add"}_field`),placement:"right"},{extra:S(()=>[m(U,{type:"primary",onClick:d},{default:S(()=>[ne(J(w(n)(p.value?"common.save":"common.add")),1)]),_:1})]),default:S(()=>[m(g,null,{default:S(()=>[m(G,{label:w(n)("components.nodes.textProcessing.TemplateCompose.add_field_type")},{default:S(()=>[m(E,{ref:"select",value:s.field_type,"onUpdate:value":$[0]||($[0]=C=>s.field_type=C),style:{width:"100%"}},{default:S(()=>[m(V,{value:"input"},{default:S(()=>[ne(J(w(n)("components.nodes.textProcessing.TemplateCompose.field_type_input")),1)]),_:1}),m(V,{value:"textarea"},{default:S(()=>[ne(J(w(n)("components.nodes.textProcessing.TemplateCompose.field_type_textarea")),1)]),_:1}),m(V,{value:"select"},{default:S(()=>[ne(J(w(n)("components.nodes.textProcessing.TemplateCompose.field_type_select")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),m(G,{label:w(n)("components.nodes.textProcessing.TemplateCompose.add_field_display_name")},{default:S(()=>[m(X,{value:s.display_name,"onUpdate:value":$[1]||($[1]=C=>s.display_name=C)},null,8,["value"])]),_:1},8,["label"]),s.field_type=="select"?(k(),A(G,{key:0,label:w(n)("components.nodes.textProcessing.TemplateCompose.add_field_list_options")},{default:S(()=>[m(B,{type:"flex",gutter:[12,12]},{default:S(()=>[(k(!0),Z(ye,null,Xe(s.options,(C,N)=>(k(),A(ee,{span:24,key:N},{default:S(()=>[De("div",ab,[m(X,{value:C.value,onInput:P=>v(P.target.value,N)},null,8,["value","onInput"]),m(w(Vo),{onClick:P=>T(N)},null,8,["onClick"])])]),_:2},1024))),128)),m(ee,{span:24},{default:S(()=>[m(U,{type:"dashed",style:{width:"100%"},onClick:$[2]||($[2]=C=>s.options.push({value:"",label:""}))},{default:S(()=>[m(w(Xn)),ne(" "+J(w(n)("components.nodes.listField.add_item")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["label"])):ce("",!0)]),_:1})]),_:1},8,["open","title"])])]),_:1}),m(Qe,{name:w(n)("components.nodes.textProcessing.TemplateCompose.template"),required:"",type:"target",data:l.value.template,"onUpdate:data":$[7]||($[7]=C=>l.value.template=C)},{default:S(()=>[m(q,{ellipsis:{row:1,expandable:!1},content:l.value.template.value},null,8,["content"]),m(U,{block:"",type:"dashed",class:"open-template-editor-button",onClick:$[4]||($[4]=C=>Q.value=!0)},{icon:S(()=>[m(w(so))]),default:S(()=>[ne(" "+J(w(n)("components.nodes.textProcessing.TemplateCompose.open_template_editor")),1)]),_:1}),m(tb,{open:Q.value,"onUpdate:open":$[5]||($[5]=C=>Q.value=C),template:l.value.template.value,"onUpdate:template":$[6]||($[6]=C=>l.value.template.value=C),fields:l.value},null,8,["open","template","fields"])]),_:1},8,["name","data"])]),_:1},8,["nodeId","debug","fieldsData"])}}},rb=wn(lb,[["__scopeId","data-v-f64445c8"]]),ib=Object.freeze(Object.defineProperty({__proto__:null,default:rb},Symbol.toStringTag,{value:"Module"}));function md(){return{description:"description",task_name:"text_processing.text_in_out",has_inputs:!0,template:{text:{required:!0,placeholder:"",show:!0,value:"",name:"text",display_name:"text",type:"str",list:!1,field_type:"textarea"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"",is_output:!0}}}}const sb=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:md},Symbol.toStringTag,{value:"Module"})),ub={__name:"TextInOut",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Ye(),o=F(t.data.template),a=md();Object.entries(a.template).forEach(([r,i])=>{o.value[r]=o.value[r]||i,i.is_output&&(o.value[r].is_output=!0)});const l=F(!1);return(r,i)=>{const s=M("a-textarea"),u=M("a-input"),c=M("a-modal");return k(),A(Pe,{nodeId:e.id,fieldsData:o.value,translatePrefix:"components.nodes.textProcessing.TextInOut",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/text-processing#h2-12"},{main:S(()=>[m(Qe,{name:o.value.text.display_name,required:"",editable:"",onEdit:i[3]||(i[3]=d=>l.value=!0),type:"target",data:o.value.text,"onUpdate:data":i[4]||(i[4]=d=>o.value.text=d)},{default:S(()=>[m(s,{class:"field-content",value:o.value.text.value,"onUpdate:value":i[0]||(i[0]=d=>o.value.text.value=d),placeholder:o.value.text.placeholder,autoSize:{minRows:2,maxRows:10}},null,8,["value","placeholder"]),m(c,{open:l.value,"onUpdate:open":i[2]||(i[2]=d=>l.value=d),title:w(n)("components.nodes.textProcessing.TextInOut.edit_name"),footer:null},{default:S(()=>[m(u,{value:o.value.text.display_name,"onUpdate:value":i[1]||(i[1]=d=>o.value.text.display_name=d)},null,8,["value"])]),_:1},8,["open","title"])]),_:1},8,["name","data"])]),_:1},8,["nodeId","fieldsData","debug"])}}},cb=Object.freeze(Object.defineProperty({__proto__:null,default:ub},Symbol.toStringTag,{value:"Module"}));function vd(){return{description:"description",task_name:"text_processing.text_splitters",has_inputs:!0,template:{text:{required:!0,placeholder:"",show:!1,value:"",name:"text",display_name:"text",type:"str",list:!1,field_type:"textarea"},split_method:{required:!0,placeholder:"",show:!1,value:"general",options:[{value:"general",label:"general"},{value:"delimiter",label:"delimiter"},{value:"markdown",label:"markdown"}],name:"split_method",display_name:"split_method",type:"str",list:!1,field_type:"select"},chunk_length:{required:!0,placeholder:"",show:!1,value:500,name:"chunk_length",display_name:"chunk_length",type:"str",list:!1,field_type:"number",condition:e=>["general","markdown"].includes(e.split_method.value)},chunk_overlap:{required:!0,placeholder:"",show:!1,value:30,name:"chunk_overlap",display_name:"chunk_overlap",type:"str",list:!1,field_type:"number",condition:e=>["general","markdown"].includes(e.split_method.value)},delimiter:{required:!1,placeholder:"",show:!1,value:"\\n",name:"delimiter",display_name:"delimiter",type:"str",list:!0,field_type:"input",condition:e=>e.split_method.value=="delimiter"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"list",list:!0,field_type:"textarea",is_output:!0}}}}const db=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:vd},Symbol.toStringTag,{value:"Module"})),pb={__name:"TextSplitters",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=vd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.textProcessing.TextSplitters",documentLink:"https://vectorvein.com/help/docs/text-processing#h2-16"},null,8,["nodeId","debug","fieldsData"]))}},fb=Object.freeze(Object.defineProperty({__proto__:null,default:pb},Symbol.toStringTag,{value:"Module"}));function _d(){return{description:"description",task_name:"text_processing.text_truncation",has_inputs:!0,template:{text:{required:!0,placeholder:"",show:!1,value:"",name:"text",display_name:"text",type:"str",list:!1,field_type:"textarea"},truncate_method:{required:!0,placeholder:"",show:!1,value:"general",options:[{value:"general",label:"general"},{value:"markdown",label:"markdown"}],name:"truncate_method",display_name:"truncate_method",type:"str",list:!1,field_type:"select"},truncate_length:{required:!0,placeholder:"",show:!1,value:2e3,name:"truncate_length",display_name:"truncate_length",type:"str",list:!1,field_type:"number"},floating_range:{required:!0,placeholder:"",show:!1,value:100,name:"floating_range",display_name:"floating_range",type:"str",list:!1,field_type:"number"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"list",list:!0,field_type:"textarea",is_output:!0}}}}const hb=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:_d},Symbol.toStringTag,{value:"Module"})),mb={__name:"TextTruncation",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=_d();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,translatePrefix:"components.nodes.textProcessing.TextTruncation",documentLink:"https://vectorvein.com/help/docs/text-processing#h2-20"},null,8,["nodeId","debug","fieldsData"]))}},vb=Object.freeze(Object.defineProperty({__proto__:null,default:mb},Symbol.toStringTag,{value:"Module"}));function gd(){return{description:"description",task_name:"tools.image_search",has_inputs:!0,template:{search_text:{required:!0,placeholder:"",show:!1,value:"",name:"search_text",display_name:"search_text",type:"str",list:!1,field_type:"input"},search_engine:{required:!0,placeholder:"",show:!1,value:"bing",options:[{value:"bing",label:"bing"},{value:"pexels",label:"pexels"},{value:"unsplash",label:"unsplash"}],name:"search_engine",display_name:"search_engine",type:"str",list:!1,field_type:"select"},count:{required:!0,placeholder:"",show:!1,value:5,name:"count",display_name:"count",type:"str",list:!1,field_type:"number"},output_type:{required:!0,placeholder:"",show:!1,value:"markdown",options:[{value:"text",label:"text"},{value:"markdown",label:"markdown"}],name:"output_type",display_name:"output_type",type:"str",list:!1,field_type:"select"},output:{required:!0,placeholder:"",show:!1,value:[],name:"output",display_name:"output",type:"list|str",list:!1,field_type:"",is_output:!0}}}}const _b=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:gd},Symbol.toStringTag,{value:"Module"})),gb={__name:"ImageSearch",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=gd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,fieldsData:n.value,translatePrefix:"components.nodes.tools.ImageSearch",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/tools#h2-0"},null,8,["nodeId","fieldsData","debug"]))}},yb=Object.freeze(Object.defineProperty({__proto__:null,default:gb},Symbol.toStringTag,{value:"Module"})),Ob=gu({String:we.string,Number:we.number,"True False":we.bool,PropertyName:we.propertyName,Null:we.null,",":we.separator,"[ ]":we.squareBracket,"{ }":we.brace}),bb=yu.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"⚠ JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[Ob],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oc~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Oe~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zOh~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yOg~~'OO]~~'TO[~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),wb=bu.define({name:"json",parser:bb.configure({props:[wu.add({Object:ki({except:/^\s*\}/}),Array:ki({except:/^\s*\]/})}),Su.add({"Object Array":xu})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Sb(){return new Ou(wb)}const xb=1,yd=194,Od=195,$b=196,Ss=197,kb=198,Tb=199,Eb=200,Qb=2,bd=3,xs=201,Pb=24,Db=25,Cb=49,zb=50,Nb=55,qb=56,Rb=57,Mb=59,Ib=60,Vb=61,Ab=62,Xb=63,Ub=65,Wb=238,jb=71,Fb=241,Lb=242,Gb=243,Bb=244,Hb=245,Yb=246,Zb=247,Jb=248,wd=72,Kb=249,ew=250,tw=251,nw=252,ow=253,aw=254,lw=255,rw=256,iw=73,sw=77,uw=264,cw=112,dw=130,pw=151,fw=152,hw=155,Fn=10,Go=13,pi=32,Pl=9,fi=35,mw=40,vw=46,Qr=123,$s=125,Sd=39,xd=34,_w=92,gw=111,yw=120,Ow=78,bw=117,ww=85,Sw=new Set([Db,Cb,zb,uw,Ub,dw,qb,Rb,Wb,Ab,Xb,wd,iw,sw,Ib,Vb,pw,fw,hw,cw]);function Bl(e){return e==Fn||e==Go}function Hl(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}const xw=new vl((e,t)=>{let n;if(e.next<0)e.acceptToken(Tb);else if(t.context.flags&Na)Bl(e.next)&&e.acceptToken(kb,1);else if(((n=e.peek(-1))<0||Bl(n))&&t.canShift(Ss)){let o=0;for(;e.next==pi||e.next==Pl;)e.advance(),o++;(e.next==Fn||e.next==Go||e.next==fi)&&e.acceptToken(Ss,-o)}else Bl(e.next)&&e.acceptToken($b,1)},{contextual:!0}),$w=new vl((e,t)=>{let n=t.context;if(n.flags)return;let o=e.peek(-1);if(o==Fn||o==Go){let a=0,l=0;for(;;){if(e.next==pi)a++;else if(e.next==Pl)a+=8-a%8;else break;e.advance(),l++}a!=n.indent&&e.next!=Fn&&e.next!=Go&&e.next!=fi&&(a<n.indent?e.acceptToken(Od,-l):e.acceptToken(yd))}}),Na=1,$d=2,Gt=4,Bt=8,Ht=16,Yt=32;function qa(e,t,n){this.parent=e,this.indent=t,this.flags=n,this.hash=(e?e.hash+e.hash<<8:0)+t+(t<<4)+n+(n<<6)}const kw=new qa(null,0,0);function Tw(e){let t=0;for(let n=0;n<e.length;n++)t+=e.charCodeAt(n)==Pl?8-t%8:1;return t}const ks=new Map([[Fb,0],[Lb,Gt],[Gb,Bt],[Bb,Bt|Gt],[Hb,Ht],[Yb,Ht|Gt],[Zb,Ht|Bt],[Jb,Ht|Bt|Gt],[Kb,Yt],[ew,Yt|Gt],[tw,Yt|Bt],[nw,Yt|Bt|Gt],[ow,Yt|Ht],[aw,Yt|Ht|Gt],[lw,Yt|Ht|Bt],[rw,Yt|Ht|Bt|Gt]].map(([e,t])=>[e,t|$d])),Ew=new sf({start:kw,reduce(e,t,n,o){return e.flags&Na&&Sw.has(t)||(t==jb||t==wd)&&e.flags&$d?e.parent:e},shift(e,t,n,o){return t==yd?new qa(e,Tw(o.read(o.pos,n.pos)),0):t==Od?e.parent:t==Pb||t==Nb||t==Mb||t==bd?new qa(e,0,Na):ks.has(t)?new qa(e,0,ks.get(t)|e.flags&Na):e},hash(e){return e.hash}}),Qw=new vl(e=>{for(let t=0;t<5;t++){if(e.next!="print".charCodeAt(t))return;e.advance()}if(!/\w/.test(String.fromCharCode(e.next)))for(let t=0;;t++){let n=e.peek(t);if(!(n==pi||n==Pl)){n!=mw&&n!=vw&&n!=Fn&&n!=Go&&n!=fi&&e.acceptToken(xb);return}}}),Pw=new vl((e,t)=>{let{flags:n}=t.context,o=n&Gt?xd:Sd,a=(n&Bt)>0,l=!(n&Ht),r=(n&Yt)>0,i=e.pos;for(;!(e.next<0);)if(r&&e.next==Qr)if(e.peek(1)==Qr)e.advance(2);else{if(e.pos==i){e.acceptToken(bd,1);return}break}else if(l&&e.next==_w){if(e.pos==i){e.advance();let s=e.next;s>=0&&(e.advance(),Dw(e,s)),e.acceptToken(Qb);return}break}else if(e.next==o&&(!a||e.peek(1)==o&&e.peek(2)==o)){if(e.pos==i){e.acceptToken(xs,a?3:1);return}break}else if(e.next==Fn){if(a)e.advance();else if(e.pos==i){e.acceptToken(xs);return}break}else e.advance();e.pos>i&&e.acceptToken(Eb)});function Dw(e,t){if(t==gw)for(let n=0;n<2&&e.next>=48&&e.next<=55;n++)e.advance();else if(t==yw)for(let n=0;n<2&&Hl(e.next);n++)e.advance();else if(t==bw)for(let n=0;n<4&&Hl(e.next);n++)e.advance();else if(t==ww)for(let n=0;n<8&&Hl(e.next);n++)e.advance();else if(t==Ow&&e.next==Qr){for(e.advance();e.next>=0&&e.next!=$s&&e.next!=Sd&&e.next!=xd&&e.next!=Fn;)e.advance();e.next==$s&&e.advance()}}const Cw=gu({'async "*" "**" FormatConversion FormatSpec':we.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":we.controlKeyword,"in not and or is del":we.operatorKeyword,"from def class global nonlocal lambda":we.definitionKeyword,import:we.moduleKeyword,"with as print":we.keyword,Boolean:we.bool,None:we.null,VariableName:we.variableName,"CallExpression/VariableName":we.function(we.variableName),"FunctionDefinition/VariableName":we.function(we.definition(we.variableName)),"ClassDefinition/VariableName":we.definition(we.className),PropertyName:we.propertyName,"CallExpression/MemberExpression/PropertyName":we.function(we.propertyName),Comment:we.lineComment,Number:we.number,String:we.string,FormatString:we.special(we.string),Escape:we.escape,UpdateOp:we.updateOperator,"ArithOp!":we.arithmeticOperator,BitOp:we.bitwiseOperator,CompareOp:we.compareOperator,AssignOp:we.definitionOperator,Ellipsis:we.punctuation,At:we.meta,"( )":we.paren,"[ ]":we.squareBracket,"{ }":we.brace,".":we.derefOperator,", ;":we.separator}),zw={__proto__:null,await:44,or:54,and:56,in:60,not:62,is:64,if:70,else:72,lambda:76,yield:94,from:96,async:102,for:104,None:162,True:164,False:164,del:178,pass:182,break:186,continue:190,return:194,raise:202,import:206,as:208,global:212,nonlocal:214,assert:218,type:223,elif:236,while:240,try:246,except:248,finally:250,with:254,def:258,class:268,match:279,case:285},Nw=yu.deserialize({version:14,states:"##pO`QeOOP$}OSOOO&WQtO'#HUOOQS'#Co'#CoOOQS'#Cp'#CpO'vQdO'#CnO*UQtO'#HTOOQS'#HU'#HUOOQS'#DU'#DUOOQS'#HT'#HTO*rQdO'#D_O+VQdO'#DfO+gQdO'#DjO+zOWO'#DuO,VOWO'#DvO.[QtO'#GuOOQS'#Gu'#GuO'vQdO'#GtO0ZQtO'#GtOOQS'#Eb'#EbO0rQdO'#EcOOQS'#Gs'#GsO0|QdO'#GrOOQV'#Gr'#GrO1XQdO'#FYOOQS'#G^'#G^O1^QdO'#FXOOQV'#IS'#ISOOQV'#Gq'#GqOOQV'#Fq'#FqQ`QeOOO'vQdO'#CqO1lQdO'#C}O1sQdO'#DRO2RQdO'#HYO2cQtO'#EVO'vQdO'#EWOOQS'#EY'#EYOOQS'#E['#E[OOQS'#E^'#E^O2wQdO'#E`O3_QdO'#EdO1XQdO'#EfO3rQtO'#EfO1XQdO'#EiO0rQdO'#ElO1XQdO'#EnO0rQdO'#EtO0rQdO'#EwO3}QdO'#EyO4UQdO'#FOO4aQdO'#EzO0rQdO'#FOO1XQdO'#FQO1XQdO'#FVO4fQdO'#F[P4mOdO'#GpPOOO)CBd)CBdOOQS'#Ce'#CeOOQS'#Cf'#CfOOQS'#Cg'#CgOOQS'#Ch'#ChOOQS'#Ci'#CiOOQS'#Cj'#CjOOQS'#Cl'#ClO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO'vQdO,59OO4xQdO'#DoOOQS,5:Y,5:YO5]QdO'#HdOOQS,5:],5:]O5jQ!fO,5:]O5oQtO,59YO1lQdO,59bO1lQdO,59bO1lQdO,59bO8_QdO,59bO8dQdO,59bO8kQdO,59jO8rQdO'#HTO9xQdO'#HSOOQS'#HS'#HSOOQS'#D['#D[O:aQdO,59aO'vQdO,59aO:oQdO,59aOOQS,59y,59yO:tQdO,5:RO'vQdO,5:ROOQS,5:Q,5:QO;SQdO,5:QO;XQdO,5:XO'vQdO,5:XO'vQdO,5:VOOQS,5:U,5:UO;jQdO,5:UO;oQdO,5:WOOOW'#Fy'#FyO;tOWO,5:aOOQS,5:a,5:aO<PQdO'#HwOOOW'#Dw'#DwOOOW'#Fz'#FzO<aOWO,5:bOOQS,5:b,5:bOOQS'#F}'#F}O<oQtO,5:iO?aQtO,5=`O?zQ#xO,5=`O@kQtO,5=`OOQS,5:},5:}OASQeO'#GWOBfQdO,5;^OOQV,5=^,5=^OBqQtO'#H}OCYQdO,5;tOOQS-E:[-E:[OOQV,5;s,5;sO4[QdO'#FQOOQV-E9o-E9oOCbQtO,59]OEiQtO,59iOFSQdO'#HVOF_QdO'#HVO1XQdO'#HVOFjQdO'#DTOFrQdO,59mOFwQdO'#HZO'vQdO'#HZO0rQdO,5=tOOQS,5=t,5=tO0rQdO'#EROOQS'#ES'#ESOGfQdO'#GPOGvQdO,58|OGvQdO,58|O*xQdO,5:oOHUQtO'#H]OOQS,5:r,5:rOOQS,5:z,5:zOHiQdO,5;OOHzQdO,5;QOOQS'#GS'#GSOIYQtO,5;QOIhQdO,5;QOImQdO'#IQOOQS,5;T,5;TOI{QdO'#H|OOQS,5;W,5;WOJ^QdO,5;YO4aQdO,5;`O4aQdO,5;cOJfQtO'#ITO'vQdO'#ITOJpQdO,5;eO3}QdO,5;eO0rQdO,5;jO1XQdO,5;lOJuQeO'#EuOLRQgO,5;fO!!SQdO'#IUO4aQdO,5;jO!!_QdO,5;lO!!gQdO,5;qO!!rQtO,5;vO'vQdO,5;vPOOO,5=[,5=[P!!yOSO,5=[P!#OOdO,5=[O!%sQtO1G.jO!%zQtO1G.jO!(kQtO1G.jO!(uQtO1G.jO!+`QtO1G.jO!+sQtO1G.jO!,WQdO'#HcO!,fQtO'#GuO0rQdO'#HcO!,pQdO'#HbOOQS,5:Z,5:ZO!,xQdO,5:ZO!,}QdO'#HeO!-YQdO'#HeO!-mQdO,5>OOOQS'#Ds'#DsOOQS1G/w1G/wOOQS1G.|1G.|O!.mQtO1G.|O!.tQtO1G.|O1lQdO1G.|O!/aQdO1G/UOOQS'#DZ'#DZO0rQdO,59tOOQS1G.{1G.{O!/hQdO1G/eO!/xQdO1G/eO!0QQdO1G/fO'vQdO'#H[O!0VQdO'#H[O!0[QtO1G.{O!0lQdO,59iO!1rQdO,5=zO!2SQdO,5=zO!2[QdO1G/mO!2aQtO1G/mOOQS1G/l1G/lO!2qQdO,5=uO!3hQdO,5=uO0rQdO1G/qO!4VQdO1G/sO!4[QtO1G/sO!4lQtO1G/qOOQS1G/p1G/pOOQS1G/r1G/rOOOW-E9w-E9wOOQS1G/{1G/{O!4|QdO'#HxO0rQdO'#HxO!5_QdO,5>cOOOW-E9x-E9xOOQS1G/|1G/|OOQS-E9{-E9{O!5mQ#xO1G2zO!6^QtO1G2zO'vQdO,5<jOOQS,5<j,5<jOOQS-E9|-E9|OOQS,5<r,5<rOOQS-E:U-E:UOOQV1G0x1G0xO1XQdO'#GRO!6uQtO,5>iOOQS1G1`1G1`O!7^QdO1G1`OOQS'#DV'#DVO0rQdO,5=qOOQS,5=q,5=qO!7cQdO'#FrO!7nQdO,59oO!7vQdO1G/XO!8QQtO,5=uOOQS1G3`1G3`OOQS,5:m,5:mO!8qQdO'#GtOOQS,5<k,5<kOOQS-E9}-E9}O!9SQdO1G.hOOQS1G0Z1G0ZO!9bQdO,5=wO!9rQdO,5=wO0rQdO1G0jO0rQdO1G0jO1XQdO1G0lOOQS-E:Q-E:QO!:TQdO1G0lO!:`QdO1G0lO!:eQdO,5>lO!:sQdO,5>lO!;RQdO,5>hO!;iQdO,5>hO!;zQdO'#EpO0rQdO1G0tO!<VQdO1G0tO!<[QgO1G0zO!@YQgO1G0}O!DTQdO,5>oO!D_QdO,5>oO!DgQtO,5>oO0rQdO1G1PO!DqQdO1G1PO4aQdO1G1UO!!_QdO1G1WOOQV,5;a,5;aO!DvQfO,5;aO!D{QgO1G1QO!H|QdO'#GZO4aQdO1G1QO4aQdO1G1QO!I^QdO,5>pO!IkQdO,5>pO1XQdO,5>pOOQV1G1U1G1UO!IsQdO'#FSO!JUQ!fO1G1WO!J^QdO1G1WOOQV1G1]1G1]O4aQdO1G1]O!JcQdO1G1]O!JkQdO'#F^OOQV1G1b1G1bO!!rQtO1G1bPOOO1G2v1G2vP!JpOSO1G2vOOQS,5=},5=}OOQS'#Dp'#DpO0rQdO,5=}O!JuQdO,5=|O!KYQdO,5=|OOQS1G/u1G/uO!KbQdO,5>PO!KrQdO,5>PO!KzQdO,5>PO!L_QdO,5>PO!LoQdO,5>POOQS1G3j1G3jOOQS7+$h7+$hO!7vQdO7+$pO!NbQdO1G.|O!NiQdO1G.|OOQS1G/`1G/`OOQS,5<`,5<`O'vQdO,5<`OOQS7+%P7+%PO!NpQdO7+%POOQS-E9r-E9rOOQS7+%Q7+%QO# QQdO,5=vO'vQdO,5=vOOQS7+$g7+$gO# VQdO7+%PO# _QdO7+%QO# dQdO1G3fOOQS7+%X7+%XO# tQdO1G3fO# |QdO7+%XOOQS,5<_,5<_O'vQdO,5<_O#!RQdO1G3aOOQS-E9q-E9qO#!xQdO7+%]OOQS7+%_7+%_O##WQdO1G3aO##uQdO7+%_O##zQdO1G3gO#$[QdO1G3gO#$dQdO7+%]O#$iQdO,5>dO#%SQdO,5>dO#%SQdO,5>dOOQS'#Dx'#DxO#%eO&jO'#DzO#%pO`O'#HyOOOW1G3}1G3}O#%uQdO1G3}O#%}QdO1G3}O#&YQ#xO7+(fO#&yQtO1G2UP#'dQdO'#GOOOQS,5<m,5<mOOQS-E:P-E:POOQS7+&z7+&zOOQS1G3]1G3]OOQS,5<^,5<^OOQS-E9p-E9pOOQS7+$s7+$sO#'qQdO,5=`O#([QdO,5=`O#(mQtO,5<aO#)QQdO1G3cOOQS-E9s-E9sOOQS7+&U7+&UO#)bQdO7+&UOOQS7+&W7+&WO#)pQdO'#IPO1XQdO'#IOO#*UQdO7+&WOOQS,5<p,5<pO#*aQdO1G4WOOQS-E:S-E:SOOQS,5<l,5<lO#*oQdO1G4SOOQS-E:O-E:OO1XQdO'#EqO#+VQdO'#EqO#+bQdO'#IRO#+jQdO,5;[OOQS7+&`7+&`O0rQdO7+&`O#+oQgO7+&fO!IPQdO'#GXO4aQdO7+&fO4aQdO7+&iO#/mQtO,5<tO'vQdO,5<tO#/wQdO1G4ZOOQS-E:W-E:WO#0RQdO1G4ZO4aQdO7+&kO0rQdO7+&kOOQV7+&p7+&pO!JUQ!fO7+&rO!J^QdO7+&rO`QeO1G0{OOQV-E:X-E:XO4aQdO7+&lO4aQdO7+&lOOQV,5<u,5<uO#0ZQdO,5<uO!IPQdO,5<uOOQV7+&l7+&lO#0fQgO7+&lO#4aQdO,5<vO#4lQdO1G4[OOQS-E:Y-E:YO#4yQdO1G4[O#5RQdO'#IWO#5aQdO'#IWO1XQdO'#IWOOQS'#IW'#IWO#5lQdO'#IVOOQS,5;n,5;nO#5tQdO,5;nO0rQdO'#FUOOQV7+&r7+&rO4aQdO7+&rOOQV7+&w7+&wO4aQdO7+&wO#5yQfO,5;xOOQV7+&|7+&|POOO7+(b7+(bO#6OQdO1G3iOOQS,5<c,5<cO#6^QdO1G3hOOQS-E9u-E9uO#6qQdO,5<dO#6|QdO,5<dO#7aQdO1G3kOOQS-E9v-E9vO#7qQdO1G3kO#7yQdO1G3kO#8ZQdO1G3kO#7qQdO1G3kOOQS<<H[<<H[O#8fQtO1G1zOOQS<<Hk<<HkP#8sQdO'#FtO8kQdO1G3bO#9QQdO1G3bO#9VQdO<<HkOOQS<<Hl<<HlO#9gQdO7+)QOOQS<<Hs<<HsO#9wQtO1G1yP#:hQdO'#FsO#:uQdO7+)RO#;VQdO7+)RO#;_QdO<<HwO#;dQdO7+({OOQS<<Hy<<HyO#<ZQdO,5<bO'vQdO,5<bOOQS-E9t-E9tOOQS<<Hw<<HwOOQS,5<g,5<gO0rQdO,5<gO#<`QdO1G4OOOQS-E9y-E9yO#<yQdO1G4OO<PQdO'#H{OOOO'#D{'#D{OOOO'#F|'#F|O#=[O&jO,5:fOOOW,5>e,5>eOOOW7+)i7+)iO#=gQdO7+)iO#=oQdO1G2zO#>YQdO1G2zP'vQdO'#FuO0rQdO<<IpO#>kQdO,5>kO#>|QdO,5>kO1XQdO,5>kO#?_QdO,5>jOOQS<<Ir<<IrP1XQdO'#GUP0rQdO'#GQOOQS,5;],5;]O#?dQdO,5>mO#?rQdO,5>mOOQS1G0v1G0vOOQS<<Iz<<IzOOQV-E:V-E:VO4aQdO<<JQOOQV,5<s,5<sO4aQdO,5<sOOQV<<JQ<<JQOOQV<<JT<<JTO#?zQtO1G2`P#@UQdO'#GYO#@]QdO7+)uO#@gQgO<<JVO4aQdO<<JVOOQV<<J^<<J^O4aQdO<<J^O!JUQ!fO<<J^O#DbQgO7+&gOOQV<<JW<<JWO#DlQgO<<JWOOQV1G2a1G2aO1XQdO1G2aO#HgQdO1G2aO4aQdO<<JWO1XQdO1G2bP0rQdO'#G[O#HrQdO7+)vO#IPQdO7+)vOOQS'#FT'#FTO0rQdO,5>rO#IXQdO,5>rOOQS,5>r,5>rO#IdQdO,5>qO#IuQdO,5>qOOQS1G1Y1G1YOOQS,5;p,5;pOOQV<<Jc<<JcO#I}QdO1G1dOOQS7+)T7+)TP#JSQdO'#FwO#JdQdO1G2OO#JwQdO1G2OO#KXQdO1G2OP#KdQdO'#FxO#KqQdO7+)VO#LRQdO7+)VO#LRQdO7+)VO#LZQdO7+)VO#LkQdO7+(|O8kQdO7+(|OOQSAN>VAN>VO#MUQdO<<LmOOQSAN>cAN>cO0rQdO1G1|O#MfQtO1G1|P#MpQdO'#FvOOQS1G2R1G2RP#M}QdO'#F{O#N[QdO7+)jO#NuQdO,5>gOOOO-E9z-E9zOOOW<<MT<<MTO$ TQdO7+(fOOQSAN?[AN?[O$ nQdO,5<oO$!SQdO1G4VOOQS-E:R-E:RO$!eQdO1G4VOOQS1G4U1G4UOOQS,5<q,5<qO$!vQdO1G4XOOQS-E:T-E:TOOQVAN?lAN?lOOQV1G2_1G2_O4aQdOAN?qO$#UQgOAN?qOOQVAN?xAN?xO4aQdOAN?xOOQV<<JR<<JRO4aQdOAN?rO4aQdO7+'{OOQV7+'{7+'{O1XQdO7+'{OOQVAN?rAN?rOOQS7+'|7+'|O$'PQdO<<MbOOQS1G4^1G4^O0rQdO1G4^OOQS,5<w,5<wO$'^QdO1G4]OOQS-E:Z-E:ZOOQU'#G_'#G_O$'oQfO7+'OO$'zQdO'#F_O$)RQdO7+'jO$)cQdO7+'jOOQS7+'j7+'jO$)nQdO<<LqO$*OQdO<<LqO$*OQdO<<LqO$*WQdO'#H^OOQS<<Lh<<LhO$*bQdO<<LhOOQS7+'h7+'hOOQS'#D|'#D|OOOO1G4R1G4RO$*{QdO1G4RO$+TQdO1G4RO1XQdO1G2ZP1XQdO'#GTO$+`QdO7+)qO$+qQdO7+)qP!;zQdO'#GVOOQVG25]G25]O4aQdOG25]OOQVG25dG25dOOQVG25^G25^OOQV<<Kg<<KgO4aQdO<<KgOOQS7+)x7+)xP$,SQdO'#G]OOQU-E:]-E:]OOQV<<Jj<<JjO$,vQtO'#FaOOQS'#Fc'#FcO$-WQdO'#FbO$-xQdO'#FbOOQS'#Fb'#FbO$-}QdO'#IYO$'zQdO'#FiO$'zQdO'#FiO$.fQdO'#FjO$'zQdO'#FkO$.mQdO'#IZOOQS'#IZ'#IZO$/[QdO,5;yOOQS<<KU<<KUO$/dQdO<<KUO$/tQdOANB]O$0UQdOANB]O$0^QdO'#H_OOQS'#H_'#H_O1sQdO'#DcO$0wQdO,5=xOOQSANBSANBSOOOO7+)m7+)mO$1`QdO7+)mOOQS7+'u7+'uO$1hQdO<<M]OOQVLD*wLD*wOOQVANARANARO5jQ!fO'#GaO$1yQtO,5<SO$'zQdO'#FmOOQS,5<W,5<WOOQS'#Fd'#FdO$2kQdO,5;|O$2pQdO,5;|OOQS'#Fg'#FgO$'zQdO'#G`O$3bQdO,5<QO$3|QdO,5>tO$4^QdO,5>tO1XQdO,5<PO$4oQdO,5<TO$4tQdO,5<TO$'zQdO'#I[O$4yQdO'#I[O$5OQdO,5<UOOQS,5<V,5<VO'vQdO'#FpOOQU1G1e1G1eO4aQdO1G1eOOQSAN@pAN@pO$5TQdOG27wO$5eQdO,59}OOQS1G3d1G3dOOOO<<MX<<MXOOQS,5<{,5<{OOQS-E:_-E:_O$5jQtO'#FaO$5qQdO'#I]O$6PQdO'#I]O$6XQdO,5<XOOQS1G1h1G1hO$6^QdO1G1hO$6cQdO,5<zOOQS-E:^-E:^O$6}QdO,5=OO$7fQdO1G4`OOQS-E:b-E:bOOQS1G1k1G1kOOQS1G1o1G1oO$7vQdO,5>vO$'zQdO,5>vOOQS1G1p1G1pO$8UQtO,5<[OOQU7+'P7+'PO$*WQdO1G/iO$'zQdO,5<YO$8]QdO,5>wO$8dQdO,5>wOOQS1G1s1G1sOOQS7+'S7+'SP$'zQdO'#GdO$8lQdO1G4bO$8vQdO1G4bO$9OQdO1G4bOOQS7+%T7+%TO$9^QdO1G1tO$9lQtO'#FaO$9sQdO,5<}OOQS,5<},5<}O$:RQdO1G4cOOQS-E:a-E:aO$'zQdO,5<|O$:YQdO,5<|O$:_QdO7+)|OOQS-E:`-E:`O$:iQdO7+)|O$'zQdO,5<ZP$'zQdO'#GcO$:qQdO1G2hO$'zQdO1G2hP$;PQdO'#GbO$;WQdO<<MhO$;bQdO1G1uO$;pQdO7+(SO8kQdO'#C}O8kQdO,59bO8kQdO,59bO8kQdO,59bO$<OQtO,5=`O8kQdO1G.|O0rQdO1G/XO0rQdO7+$pP$<cQdO'#GOO'vQdO'#GtO$<pQdO,59bO$<uQdO,59bO$<|QdO,59mO$=RQdO1G/UO1sQdO'#DRO8kQdO,59j",stateData:"$=l~O%cOS%^OSSOS%]PQ~OPdOVaOfoOhYOopOs!POvqO!PrO!Q{O!T!SO!U!RO!XZO!][O!h`O!r`O!s`O!t`O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#l!QO#o!TO#s!UO#u!VO#z!WO#}hO$P!XO%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~O%]!YO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%j![O%k!]O%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aO~Ok%xXl%xXm%xXn%xXo%xXp%xXs%xXz%xX{%xX!x%xX#g%xX%[%xX%_%xX%z%xXg%xX!T%xX!U%xX%{%xX!W%xX![%xX!Q%xX#[%xXt%xX!m%xX~P%SOfoOhYO!XZO!][O!h`O!r`O!s`O!t`O%oRO%pRO%tSO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O~Oz%wX{%wX#g%wX%[%wX%_%wX%z%wX~Ok!pOl!qOm!oOn!oOo!rOp!sOs!tO!x%wX~P)pOV!zOg!|Oo0dOv0rO!PrO~P'vOV#OOo0dOv0rO!W#PO~P'vOV#SOa#TOo0dOv0rO![#UO~P'vOQ#XO%`#XO%a#ZO~OQ#^OR#[O%`#^O%a#`O~OV%iX_%iXa%iXh%iXk%iXl%iXm%iXn%iXo%iXp%iXs%iXz%iX!X%iX!f%iX%j%iX%k%iX%l%iX%m%iX%n%iX%o%iX%p%iX%q%iX%r%iX%s%iXg%iX!T%iX!U%iX~O&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O&c^O&d^O&e^O&f^O&g^O&h^O&i^O&j^O{%iX!x%iX#g%iX%[%iX%_%iX%z%iX%{%iX!W%iX![%iX!Q%iX#[%iXt%iX!m%iX~P,eOz#dO{%hX!x%hX#g%hX%[%hX%_%hX%z%hX~Oo0dOv0rO~P'vO#g#gO%[#iO%_#iO~O%uWO~O!T#nO#u!VO#z!WO#}hO~OopO~P'vOV#sOa#tO%uWO{wP~OV#xOo0dOv0rO!Q#yO~P'vO{#{O!x$QO%z#|O#g!yX%[!yX%_!yX~OV#xOo0dOv0rO#g#SX%[#SX%_#SX~P'vOo0dOv0rO#g#WX%[#WX%_#WX~P'vO!f$WO!r$WO%uWO~OV$cO~P'vO!U$eO#s$fO#u$gO~O{$hO~OV$oO~P'vOS$qO%[$pO%c$rO~OV${Oa${Og$}Oo0dOv0rO~P'vOo0dOv0rO{%QO~P'vO&Y%SO~Oa!bOh!iO!X!kO!f!mOVba_bakbalbambanbaobapbasbazba{ba!xba#gba%[ba%_ba%jba%kba%lba%mba%nba%oba%pba%qba%rba%sba%zbagba!Tba!Uba%{ba!Wba![ba!Qba#[batba!mba~On%XO~Oo%XO~P'vOo0dO~P'vOk0fOl0gOm0eOn0eOo0nOp0oOs0sOg%wX!T%wX!U%wX%{%wX!W%wX![%wX!Q%wX#[%wX!m%wX~P)pO%{%ZOg%vXz%vX!T%vX!U%vX!W%vX{%vX~Og%]Oz%^O!T%bO!U%aO~Og%]O~Oz%eO!T%bO!U%aO!W&SX~O!W%iO~Oz%jO{%lO!T%bO!U%aO![%}X~O![%pO~O![%qO~OQ#XO%`#XO%a%sO~OV%uOo0dOv0rO!PrO~P'vOQ#^OR#[O%`#^O%a%xO~OV!qa_!qaa!qah!qak!qal!qam!qan!qao!qap!qas!qaz!qa{!qa!X!qa!f!qa!x!qa#g!qa%[!qa%_!qa%j!qa%k!qa%l!qa%m!qa%n!qa%o!qa%p!qa%q!qa%r!qa%s!qa%z!qag!qa!T!qa!U!qa%{!qa!W!qa![!qa!Q!qa#[!qat!qa!m!qa~P#yOz%zO{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P%SOV%|OopOvqO{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~P'vOz%zO{%ha!x%ha#g%ha%[%ha%_%ha%z%ha~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO#g$zX%[$zX%_$zX~P'vO#g#gO%[&RO%_&RO~O!f&SOh&qX%[&qX#[&qX#g&qX%_&qX#Z&qX~Oh!iO%[&UO~Okealeameaneaoeapeaseazea{ea!xea#gea%[ea%_ea%zeagea!Tea!Uea%{ea!Wea![ea!Qea#[eatea!mea~P%SOsqazqa{qa#gqa%[qa%_qa%zqa~Ok!pOl!qOm!oOn!oOo!rOp!sO!xqa~PEQO%z&WOz%yX{%yX~O%uWOz%yX{%yX~Oz&ZO{wX~O{&]O~Oz%jO#g%}X%[%}X%_%}Xg%}X{%}X![%}X!m%}X%z%}X~OV0mOo0dOv0rO!PrO~P'vO%z#|O#gUa%[Ua%_Ua~Oz&fO#g&PX%[&PX%_&PXn&PX~P%SOz&iO!Q&hO#g#Wa%[#Wa%_#Wa~O#[&jO#g#Ya%[#Ya%_#Ya~O!f$WO!r$WO#Z&lO%uWO~O#Z&lO~Oz&nO#g&tX%[&tX%_&tX~Oz&pO#g&pX%[&pX%_&pX{&pX~O!X&rO%z&sO~Oz&wOn&wX~P%SOn&zO~OPdOVaOopOvqO!PrO!Q{O!{tO!}uO#PvO#RwO#TxO#XyO#ZzO#^|O#_|O#a}O#c!OO%['PO~P'vOt'TO#p'RO#q'SOP#naV#naf#nah#nao#nas#nav#na!P#na!Q#na!T#na!U#na!X#na!]#na!h#na!r#na!s#na!t#na!{#na!}#na#P#na#R#na#T#na#X#na#Z#na#^#na#_#na#a#na#c#na#l#na#o#na#s#na#u#na#z#na#}#na$P#na%X#na%o#na%p#na%t#na%u#na&Z#na&[#na&]#na&^#na&_#na&`#na&a#na&b#na&c#na&d#na&e#na&f#na&g#na&h#na&i#na&j#na%Z#na%_#na~Oz'UO#['WO{&xX~Oh'YO!X&rO~Oh!iO{$hO!X&rO~O{'`O~P%SO%['cO~OS'dO%['cO~OV!aO_!aOa!bOh!iO!X!kO!f!mO%l!^O%m!_O%n!_O%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%k!]O~P!#WO%kWi~P!#WOV!aO_!aOa!bOh!iO!X!kO!f!mO%o!`O%p!`O%q!aO%r!aO%s!aOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~O%m!_O%n!_O~P!&RO%mWi%nWi~P!&ROa!bOh!iO!X!kO!f!mOkWilWimWinWioWipWisWizWi{Wi!xWi#gWi%[Wi%_Wi%jWi%kWi%lWi%mWi%nWi%oWi%pWi%zWigWi!TWi!UWi%{Wi!WWi![Wi!QWi#[WitWi!mWi~OV!aO_!aO%q!aO%r!aO%s!aO~P!)POVWi_Wi%qWi%rWi%sWi~P!)PO!T%bO!U%aOg&VXz&VX~O%z'fO%{'fO~P,eOz'hOg&UX~Og'jO~Oz'kO{'mO!W&XX~Oo0dOv0rOz'kO{'nO!W&XX~P'vO!W'pO~Om!oOn!oOo!rOp!sOkjisjizji{ji!xji#gji%[ji%_ji%zji~Ol!qO~P!-rOlji~P!-rOk0fOl0gOm0eOn0eOo0nOp0oO~Ot'rO~P!.{OV'wOg'xOo0dOv0rO~P'vOg'xOz'yO~Og'{O~O!U'}O~Og(OOz'yO!T%bO!U%aO~P%SOk0fOl0gOm0eOn0eOo0nOp0oOgqa!Tqa!Uqa%{qa!Wqa![qa!Qqa#[qatqa!mqa~PEQOV'wOo0dOv0rO!W&Sa~P'vOz(RO!W&Sa~O!W(SO~Oz(RO!T%bO!U%aO!W&Sa~P%SOV(WOo0dOv0rO![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~P'vOz(XO![%}a#g%}a%[%}a%_%}ag%}a{%}a!m%}a%z%}a~O![([O~Oz(XO!T%bO!U%aO![%}a~P%SOz(_O!T%bO!U%aO![&Ta~P%SOz(bO{&lX![&lX!m&lX%z&lX~O{(fO![(hO!m(iO%z(eO~OV%|OopOvqO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~P'vOz(kO{%hi!x%hi#g%hi%[%hi%_%hi%z%hi~O!f&SOh&qa%[&qa#[&qa#g&qa%_&qa#Z&qa~O%[(pO~OV#sOa#tO%uWO~Oz&ZO{wa~OopOvqO~P'vOz(XO#g%}a%[%}a%_%}ag%}a{%}a![%}a!m%}a%z%}a~P%SOz(uO#g%hX%[%hX%_%hX%z%hX~O%z#|O#gUi%[Ui%_Ui~O#g&Pa%[&Pa%_&Pan&Pa~P'vOz(xO#g&Pa%[&Pa%_&Pan&Pa~OV(|Oh)OO%uWO~O#Z)PO~O%uWO#g&ta%[&ta%_&ta~Oz)RO#g&ta%[&ta%_&ta~Oo0dOv0rO#g&pa%[&pa%_&pa{&pa~P'vOz)UO#g&pa%[&pa%_&pa{&pa~OV)WOa)WO%uWO~O%z)]O~Ot)`O#j)_OP#hiV#hif#hih#hio#his#hiv#hi!P#hi!Q#hi!T#hi!U#hi!X#hi!]#hi!h#hi!r#hi!s#hi!t#hi!{#hi!}#hi#P#hi#R#hi#T#hi#X#hi#Z#hi#^#hi#_#hi#a#hi#c#hi#l#hi#o#hi#s#hi#u#hi#z#hi#}#hi$P#hi%X#hi%o#hi%p#hi%t#hi%u#hi&Z#hi&[#hi&]#hi&^#hi&_#hi&`#hi&a#hi&b#hi&c#hi&d#hi&e#hi&f#hi&g#hi&h#hi&i#hi&j#hi%Z#hi%_#hi~Ot)aOP#kiV#kif#kih#kio#kis#kiv#ki!P#ki!Q#ki!T#ki!U#ki!X#ki!]#ki!h#ki!r#ki!s#ki!t#ki!{#ki!}#ki#P#ki#R#ki#T#ki#X#ki#Z#ki#^#ki#_#ki#a#ki#c#ki#l#ki#o#ki#s#ki#u#ki#z#ki#}#ki$P#ki%X#ki%o#ki%p#ki%t#ki%u#ki&Z#ki&[#ki&]#ki&^#ki&_#ki&`#ki&a#ki&b#ki&c#ki&d#ki&e#ki&f#ki&g#ki&h#ki&i#ki&j#ki%Z#ki%_#ki~OV)cOn&wa~P'vOz)dOn&wa~Oz)dOn&wa~P%SOn)hO~O%Y)lO~Ot)oO#p'RO#q)nOP#niV#nif#nih#nio#nis#niv#ni!P#ni!Q#ni!T#ni!U#ni!X#ni!]#ni!h#ni!r#ni!s#ni!t#ni!{#ni!}#ni#P#ni#R#ni#T#ni#X#ni#Z#ni#^#ni#_#ni#a#ni#c#ni#l#ni#o#ni#s#ni#u#ni#z#ni#}#ni$P#ni%X#ni%o#ni%p#ni%t#ni%u#ni&Z#ni&[#ni&]#ni&^#ni&_#ni&`#ni&a#ni&b#ni&c#ni&d#ni&e#ni&f#ni&g#ni&h#ni&i#ni&j#ni%Z#ni%_#ni~OV)rOo0dOv0rO{$hO~P'vOo0dOv0rO{&xa~P'vOz)vO{&xa~OV)zOa){Og*OO%q)|O%uWO~O{$hO&{*QO~Oh'YO~Oh!iO{$hO~O%[*VO~O%[*XO~OV${Oa${Oo0dOv0rOg&Ua~P'vOz*[Og&Ua~Oo0dOv0rO{*_O!W&Xa~P'vOz*`O!W&Xa~Oo0dOv0rOz*`O{*cO!W&Xa~P'vOo0dOv0rOz*`O!W&Xa~P'vOz*`O{*cO!W&Xa~Om0eOn0eOo0nOp0oOgjikjisjizji!Tji!Uji%{ji!Wji{ji![ji#gji%[ji%_ji!Qji#[jitji!mji%zji~Ol0gO~P!LzOlji~P!LzOV'wOg*hOo0dOv0rO~P'vOn*jO~Og*hOz*lO~Og*mO~OV'wOo0dOv0rO!W&Si~P'vOz*nO!W&Si~O!W*oO~OV(WOo0dOv0rO![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~P'vOz*rO!T%bO!U%aO![&Ti~Oz*uO![%}i#g%}i%[%}i%_%}ig%}i{%}i!m%}i%z%}i~O![*vO~Oa*xOo0dOv0rO![&Ti~P'vOz*rO![&Ti~O![*zO~OV*|Oo0dOv0rO{&la![&la!m&la%z&la~P'vOz*}O{&la![&la!m&la%z&la~O!]+QO&n+SO![!nX~O![+UO~O{(fO![+VO~O{(fO![+VO!m+WO~OV%|OopOvqO{%hq!x%hq#g%hq%[%hq%_%hq%z%hq~P'vOz$ri{$ri!x$ri#g$ri%[$ri%_$ri%z$ri~P%SOV%|OopOvqO~P'vOV%|Oo0dOv0rO#g%ha%[%ha%_%ha%z%ha~P'vOz+XO#g%ha%[%ha%_%ha%z%ha~Oz$ia#g$ia%[$ia%_$ian$ia~P%SO#g&Pi%[&Pi%_&Pin&Pi~P'vOz+[O#g#Wq%[#Wq%_#Wq~Oz+]O#[+_O#g&sX%[&sX%_&sXg&sX~OV+aOh)OO%uWO~O%uWO#g&ti%[&ti%_&ti~Oo0dOv0rO#g&pi%[&pi%_&pi{&pi~P'vO{#{Oz#eX!W#eX~Oz+eO!W&uX~O!W+gO~Ot+jO#j)_OP#hqV#hqf#hqh#hqo#hqs#hqv#hq!P#hq!Q#hq!T#hq!U#hq!X#hq!]#hq!h#hq!r#hq!s#hq!t#hq!{#hq!}#hq#P#hq#R#hq#T#hq#X#hq#Z#hq#^#hq#_#hq#a#hq#c#hq#l#hq#o#hq#s#hq#u#hq#z#hq#}#hq$P#hq%X#hq%o#hq%p#hq%t#hq%u#hq&Z#hq&[#hq&]#hq&^#hq&_#hq&`#hq&a#hq&b#hq&c#hq&d#hq&e#hq&f#hq&g#hq&h#hq&i#hq&j#hq%Z#hq%_#hq~On$|az$|a~P%SOV)cOn&wi~P'vOz+qOn&wi~Oz+{O{$hO#[+{O~O#q+}OP#nqV#nqf#nqh#nqo#nqs#nqv#nq!P#nq!Q#nq!T#nq!U#nq!X#nq!]#nq!h#nq!r#nq!s#nq!t#nq!{#nq!}#nq#P#nq#R#nq#T#nq#X#nq#Z#nq#^#nq#_#nq#a#nq#c#nq#l#nq#o#nq#s#nq#u#nq#z#nq#}#nq$P#nq%X#nq%o#nq%p#nq%t#nq%u#nq&Z#nq&[#nq&]#nq&^#nq&_#nq&`#nq&a#nq&b#nq&c#nq&d#nq&e#nq&f#nq&g#nq&h#nq&i#nq&j#nq%Z#nq%_#nq~O#[,OOz%Oa{%Oa~Oo0dOv0rO{&xi~P'vOz,QO{&xi~O{#{O%z,SOg&zXz&zX~O%uWOg&zXz&zX~Oz,WOg&yX~Og,YO~O%Y,]O~O!T%bO!U%aOg&Viz&Vi~OV${Oa${Oo0dOv0rOg&Ui~P'vO{,`Oz$la!W$la~Oo0dOv0rO{,aOz$la!W$la~P'vOo0dOv0rO{*_O!W&Xi~P'vOz,dO!W&Xi~Oo0dOv0rOz,dO!W&Xi~P'vOz,dO{,gO!W&Xi~Og$hiz$hi!W$hi~P%SOV'wOo0dOv0rO~P'vOn,iO~OV'wOg,jOo0dOv0rO~P'vOV'wOo0dOv0rO!W&Sq~P'vOz$gi![$gi#g$gi%[$gi%_$gig$gi{$gi!m$gi%z$gi~P%SOV(WOo0dOv0rO~P'vOa*xOo0dOv0rO![&Tq~P'vOz,kO![&Tq~O![,lO~OV(WOo0dOv0rO![%}q#g%}q%[%}q%_%}qg%}q{%}q!m%}q%z%}q~P'vO{,mO~OV*|Oo0dOv0rO{&li![&li!m&li%z&li~P'vOz,rO{&li![&li!m&li%z&li~O!]+QO&n+SO![!na~O{(fO![,uO~OV%|Oo0dOv0rO#g%hi%[%hi%_%hi%z%hi~P'vOz,vO#g%hi%[%hi%_%hi%z%hi~O%uWO#g&sa%[&sa%_&sag&sa~Oz,yO#g&sa%[&sa%_&sag&sa~Og,|O~OV)WOa)WO%uWO!W&ua~Oz-OO!W&ua~On$|iz$|i~P%SOV)cO~P'vOV)cOn&wq~P'vOt-SOP#myV#myf#myh#myo#mys#myv#my!P#my!Q#my!T#my!U#my!X#my!]#my!h#my!r#my!s#my!t#my!{#my!}#my#P#my#R#my#T#my#X#my#Z#my#^#my#_#my#a#my#c#my#l#my#o#my#s#my#u#my#z#my#}#my$P#my%X#my%o#my%p#my%t#my%u#my&Z#my&[#my&]#my&^#my&_#my&`#my&a#my&b#my&c#my&d#my&e#my&f#my&g#my&h#my&i#my&j#my%Z#my%_#my~O%Z-WO%_-WO~P`O#q-XOP#nyV#nyf#nyh#nyo#nys#nyv#ny!P#ny!Q#ny!T#ny!U#ny!X#ny!]#ny!h#ny!r#ny!s#ny!t#ny!{#ny!}#ny#P#ny#R#ny#T#ny#X#ny#Z#ny#^#ny#_#ny#a#ny#c#ny#l#ny#o#ny#s#ny#u#ny#z#ny#}#ny$P#ny%X#ny%o#ny%p#ny%t#ny%u#ny&Z#ny&[#ny&]#ny&^#ny&_#ny&`#ny&a#ny&b#ny&c#ny&d#ny&e#ny&f#ny&g#ny&h#ny&i#ny&j#ny%Z#ny%_#ny~Oz-[O{$hO#[-[O~Oo0dOv0rO{&xq~P'vOz-_O{&xq~O%z,SOg&zaz&za~OV)zOa){O%q)|O%uWOg&ya~Oz-cOg&ya~O$S-gO~OV${Oa${Oo0dOv0rO~P'vOo0dOv0rO{-hOz$li!W$li~P'vOo0dOv0rOz$li!W$li~P'vO{-hOz$li!W$li~Oo0dOv0rO{*_O~P'vOo0dOv0rO{*_O!W&Xq~P'vOz-kO!W&Xq~Oo0dOv0rOz-kO!W&Xq~P'vOs-nO!T%bO!U%aOg&Oq!W&Oq![&Oqz&Oq~P!.{Oa*xOo0dOv0rO![&Ty~P'vOz$ji![$ji~P%SOa*xOo0dOv0rO~P'vOV*|Oo0dOv0rO~P'vOV*|Oo0dOv0rO{&lq![&lq!m&lq%z&lq~P'vO{(fO![-sO!m-tO%z-rO~OV%|Oo0dOv0rO#g%hq%[%hq%_%hq%z%hq~P'vO#[-vOz$wa#g$wa%[$wa%_$wag$wa~O%uWO#g&si%[&si%_&sig&si~Oz-xO#g&si%[&si%_&sig&si~OV)WOa)WO%uWO!W&ui~Ot-|OP#m!RV#m!Rf#m!Rh#m!Ro#m!Rs#m!Rv#m!R!P#m!R!Q#m!R!T#m!R!U#m!R!X#m!R!]#m!R!h#m!R!r#m!R!s#m!R!t#m!R!{#m!R!}#m!R#P#m!R#R#m!R#T#m!R#X#m!R#Z#m!R#^#m!R#_#m!R#a#m!R#c#m!R#l#m!R#o#m!R#s#m!R#u#m!R#z#m!R#}#m!R$P#m!R%X#m!R%o#m!R%p#m!R%t#m!R%u#m!R&Z#m!R&[#m!R&]#m!R&^#m!R&_#m!R&`#m!R&a#m!R&b#m!R&c#m!R&d#m!R&e#m!R&f#m!R&g#m!R&h#m!R&i#m!R&j#m!R%Z#m!R%_#m!R~Oo0dOv0rO{&xy~P'vOV)zOa){O%q)|O%uWOg&yi~O$S-gO%Z.UO%_.UO~OV.`Oh.^O!X.]O!]._O!h.XO!s.ZO!t.ZO%p.WO%uWO&Z]O&[]O&]]O&^]O&_]O&`]O&a]O&b]O~Oo0dOv0rOz$lq!W$lq~P'vO{.eOz$lq!W$lq~Oo0dOv0rO{*_O!W&Xy~P'vOz.fO!W&Xy~Oo0dOv.jO~P'vOs-nO!T%bO!U%aOg&Oy!W&Oy![&Oyz&Oy~P!.{O{(fO![.mO~O{(fO![.mO!m.nO~O%uWO#g&sq%[&sq%_&sqg&sq~Oz.pO#g&sq%[&sq%_&sqg&sq~OV)zOa){O%q)|O%uWO~Oh.uO!f.sOz$TX#[$TX%j$TXg$TX~Os$TX{$TX!W$TX![$TX~P$,bO%o.wO%p.wOs$UXz$UX{$UX#[$UX%j$UX!W$UXg$UX![$UX~O!h.yO~Oz.}O#[/PO%j.zOs&|X{&|X!W&|Xg&|X~Oa/SO~P$(WOh.uOs&}Xz&}X{&}X#[&}X%j&}X!W&}Xg&}X![&}X~Os/WO{$hO~Oo0dOv0rOz$ly!W$ly~P'vOo0dOv0rO{*_O!W&X!R~P'vOz/[O!W&X!R~Og&RXs&RX!T&RX!U&RX!W&RX![&RXz&RX~P!.{Os-nO!T%bO!U%aOg&Qa!W&Qa![&Qaz&Qa~O{(fO![/_O~O%uWO#g&sy%[&sy%_&syg&sy~O!f.sOh$[as$[az$[a{$[a#[$[a%j$[a!W$[ag$[a![$[a~O!h/fO~O%o.wO%p.wOs$Uaz$Ua{$Ua#[$Ua%j$Ua!W$Uag$Ua![$Ua~O%j.zOs$Yaz$Ya{$Ya#[$Ya!W$Yag$Ya![$Ya~Os&|a{&|a!W&|ag&|a~P$'zOz/kOs&|a{&|a!W&|ag&|a~O!W/nO~Og/nO~O{/pO~O![/qO~Oo0dOv0rO{*_O!W&X!Z~P'vO{/tO~O%z/uO~P$,bOz/vO#[/PO%j.zOg'PX~Oz/vOg'PX~Og/xO~O!h/yO~O#[/POs%Saz%Sa{%Sa%j%Sa!W%Sag%Sa![%Sa~O#[/PO%j.zOs%Waz%Wa{%Wa!W%Wag%Wa~Os&|i{&|i!W&|ig&|i~P$'zOz/{O#[/PO%j.zO!['Oa~O{$da~P%SOg'Pa~P$'zOz0TOg'Pa~Oa0VO!['Oi~P$(WOz0XO!['Oi~Oz0XO#[/PO%j.zO!['Oi~O#[/PO%j.zOg$biz$bi~O%z0[O~P$,bO#[/PO%j.zOg%Vaz%Va~Og'Pi~P$'zO{0_O~Oa0VO!['Oq~P$(WOz0aO!['Oq~O#[/PO%j.zOz%Ui![%Ui~Oa0VO~P$(WOa0VO!['Oy~P$(WO#[/PO%j.zOg$ciz$ci~O#[/PO%j.zOz%Uq![%Uq~Oz+XO#g%ha%[%ha%_%ha%z%ha~P%SOV%|Oo0dOv0rO~P'vOn0iO~Oo0iO~P'vO{0jO~Ot0kO~P!.{O&]&Z&j&h&i&g&f&d&e&c&b&`&a&_&^&[%u~",goto:"!=c'QPPPPPP'RP'Z*s+]+v,b,}-kP.YP'Z.y.y'ZPPP'Z2cPPPPPP2c5VPP5VP7g7p>PPP>S>t>wPP'Z'ZPP?WPP'Z'ZPP'Z'Z'Z'Z'Z?[@U'ZP@XP@_DfHSHWPHZHeHi'ZPPPHlHu'RP'R'RP'RP'RP'RP'RP'R'R'RP'RPP'RPP'RP'RPH{IXIaPIhInPIhPIhIhPPPIhPK|PLVLaLgK|PIhLpPIhPLwL}PMRMgNUNoMRMRNu! SMRMRMRMR! h! n! q! v! y!!T!!Z!!g!!y!#P!#Z!#a!#}!$T!$Z!$e!$k!$q!%T!%_!%e!%k!%q!%{!&R!&X!&_!&e!&o!&u!'P!'V!'`!'f!'u!'}!(X!(`PPPPPPPPPPP!(f!(i!(o!(x!)S!)_PPPPPPPPPPPP!.R!/g!3g!6wPP!7P!7`!7i!8b!8X!8k!8q!8t!8w!8z!9S!9sPPPPPPPPPPPPPPPPP!9v!9z!:QP!:f!:j!:v!;S!;Y!;c!;f!;i!;o!;u!;{!<OP!<W!<a!=]!=`]eOn#g$h)l+w'}`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$c$e$f$h$o${%Q%X%[%^%a%e%j%l%u%z%|&X&]&f&h&i&p&s&w&z'R'U'g'h'k'm'n'r'w'y'}(R(W(X(_(b(k(m(u(x)U)])_)c)d)h)l)r)v*Q*[*_*`*c*i*j*l*n*q*r*u*x*|*}+Q+X+Z+[+c+p+q+w,P,Q,T,_,`,a,c,d,g,i,k,m,o,q,r,v-_-a-h-k-n.e.f/W/[/t0d0e0f0g0i0j0k0l0m0o0s}!cQ#c#p$R$b$n%c%h%n%o&^&y'b(l(w)b*g*p+o,n/r0h!P!dQ#c#p$R$b$n$s%c%h%n%o&^&y'b(l(w)b*g*p+o,n/r0h!R!eQ#c#p$R$b$n$s$t%c%h%n%o&^&y'b(l(w)b*g*p+o,n/r0h!T!fQ#c#p$R$b$n$s$t$u%c%h%n%o&^&y'b(l(w)b*g*p+o,n/r0h!V!gQ#c#p$R$b$n$s$t$u$v%c%h%n%o&^&y'b(l(w)b*g*p+o,n/r0h!X!hQ#c#p$R$b$n$s$t$u$v$w%c%h%n%o&^&y'b(l(w)b*g*p+o,n/r0h!]!hQ!n#c#p$R$b$n$s$t$u$v$w$x%c%h%n%o&^&y'b(l(w)b*g*p+o,n/r0h'}TOTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$c$e$f$h$o${%Q%X%[%^%a%e%j%l%u%z%|&X&]&f&h&i&p&s&w&z'R'U'g'h'k'm'n'r'w'y'}(R(W(X(_(b(k(m(u(x)U)])_)c)d)h)l)r)v*Q*[*_*`*c*i*j*l*n*q*r*u*x*|*}+Q+X+Z+[+c+p+q+w,P,Q,T,_,`,a,c,d,g,i,k,m,o,q,r,v-_-a-h-k-n.e.f/W/[/t0d0e0f0g0i0j0k0l0m0o0s&cVOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$f$h${%Q%X%[%^%e%j%l%u%z&X&]&h&i&p&s&z'R'U'g'h'k'm'n'r'y(R(X(_(b(k(m(u)U)])_)h)l)r)v*Q*[*_*`*c*i*j*l*n*q*r*u*|*}+Q+X+[+c+w,P,Q,T,_,`,a,c,d,g,i,k,m,o,q,r,v-_-a-h-k-n.e.f/[/t0d0e0f0g0i0j0k0l0o0s%mXOYZ[dnrxy}!P!Q!U!i!k#[#d#g#y#{#}$Q$f$h${%Q%[%^%e%j%l%u%z&X&]&h&i&p&s&z'R'U'g'h'k'm'n'r'y(R(X(_(b(k(m(u)U)])_)h)l)r)v*Q*[*_*`*c*i*l*n*q*r*u*|*}+Q+X+[+c+w,P,Q,T,_,`,a,c,d,g,k,m,o,q,r,v-_-a-h-k.e.f/[0j0k0lQ#vqQ/].jR0p0r't`OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$c$e$f$h$o${%Q%X%[%^%a%e%j%l%u%z%|&X&]&f&h&i&p&s&w&z'R'U'g'k'm'n'r'w'y'}(R(W(X(_(b(k(m(u(x)U)])_)c)d)h)l)r)v*Q*_*`*c*i*j*l*n*q*r*u*x*|*}+Q+X+Z+[+c+p+q+w,P,Q,T,`,a,c,d,g,i,k,m,o,q,r,v-_-a-h-k-n.e.f/W/[/t0d0e0f0g0i0j0k0l0m0o0sW#jhz{$XW#rq&Z.j0rQ$Z|Q$_!OQ$l!VQ$m!WW$z!i'h*[,_S&Y#s#tQ&}$gQ(n&SQ(|&jU(}&l)O)PU)Q&n)R+bW)X&r+e-O-zQ)x'WW)y'Y,W-c.SQ+d)WS,V)z){Y,x+],y-w-x.pQ,{+_Q-Y+{Q-^,OQ.Q-[l.V-g.].^.`.{.}/S/k/p/u/z0V0[0_Q.o-vQ/T._Q/b.uQ/m/PU0Q/v0T0]X0W/{0X0`0aR&X#r!_!wYZ!P!Q!k%Q%^%e'k'm'n'y(R)_*_*`*c*i*l*n,`,a,c,d,g-h-k.e.f/[R%[!vQ!{YQ%v#[Q&b#}Q&e$QR,s+QT.i-n/t![!jQ!n#c#p$R$b$n$s$t$u$v$w$x%c%h%n%o&^&y'b(l(w)b*g*p+o,n/r0hQ&V#kQ'^$mR*U'_R'g$zQ%T!mR/`.s'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$c$e$f$h$o${%Q%X%[%^%a%e%j%l%u%z%|&X&]&f&h&i&p&s&w&z'R'U'g'h'k'm'n'r'w'y'}(R(W(X(_(b(k(m(u(x)U)])_)c)d)h)l)r)v*Q*[*_*`*c*i*j*l*n*q*r*u*x*|*}+Q+X+Z+[+c+p+q+w,P,Q,T,_,`,a,c,d,g,i,k,m,o,q,r,v-_-a-h-k-n.e.f/W/[/t0d0e0f0g0i0j0k0l0m0o0sS#a_#b!P.Z-g.].^._.`.u.{.}/S/k/p/u/v/z/{0T0V0X0[0]0_0`0a'|_OTYZ[adnoprtxy}!P!Q!R!U!X!c!d!e!f!g!h!i!k!o!p!q!s!t!z#O#S#T#[#d#g#x#y#{#}$Q$c$e$f$h$o${%Q%X%[%^%a%e%j%l%u%z%|&X&]&f&h&i&p&s&w&z'R'U'g'h'k'm'n'r'w'y'}(R(W(X(_(b(k(m(u(x)U)])_)c)d)h)l)r)v*Q*[*_*`*c*i*j*l*n*q*r*u*x*|*}+Q+X+Z+[+c+p+q+w,P,Q,T,_,`,a,c,d,g,i,k,m,o,q,r,v-_-a-h-k-n.e.f/W/[/t0d0e0f0g0i0j0k0l0m0o0sT#a_#bT#^^#_R(j%va(g%v(i(j+W,s-t-u.nT+S(f+TR-u,sQ$PsQ+d)XR,U)yX#}s$O$P&dQ&t$_Q'[$lQ'_$mR)k&}Q)Y&rV,}+e-O-zZgOn$h)l+wXkOn)l+wQ$i!TQ&u$`Q&v$aQ'X$kQ']$mQ)i&|Q)p'RQ)s'SQ)t'TQ*R'ZS*T'^'_Q+k)_Q+m)`Q+n)aQ+r)gS+t)j*SQ+x)nQ+y)oS+z)q)rQ,[*UQ-Q+jQ-R+lQ-T+sS-U+u+vQ-Z+|Q-]+}Q-{-SQ-}-VQ.O-XQ.P-YQ.q-|Q.r.QQ/X.cR/s/YWkOn)l+wR#mjQ'Z$lS)j&}'[R+v)kQ,T)yR-a,UQ*S'ZQ+u)jR-V+vZiOjn)l+wQ'a$nR*W'bT-e,]-fu.b-g.].^.`.u.{.}/S/k/p/u/v/z0T0V0[0]0_t.b-g.].^.`.u.{.}/S/k/p/u/v/z0T0V0[0]0_Q/T._X0W/{0X0`0a!P.Y-g.].^._.`.u.{.}/S/k/p/u/v/z/{0T0V0X0[0]0_0`0aQ.x.XR/g.yg.{.[.|/c/j/o/}0P0R0^0b0cu.a-g.].^.`.u.{.}/S/k/p/u/v/z0T0V0[0]0_X.v.V.a/b0QR/d.uV0S/v0T0]R/Y.cQnOS#on+wR+w)lQ&[#uR(s&[S%k#R#wS(Y%k(]T(]%n&^Q%_!yQ%f!}W'z%_%f(P(TQ(P%cR(T%hQ&g$RR(y&gQ(`%oQ*s(ZT*y(`*sQ'i$|R*]'iS'l%P%QY*a'l*b,e-l.gU*b'm'n'oU,e*c*d*eS-l,f,gR.g-mQ#Y]R%r#YQ#_^R%w#_Q(c%tS+O(c+PR+P(dQ+T(fR,t+TQ#b_R%y#bQ#ebQ%{#cW&O#e%{(v+YQ(v&aR+Y0hQ$OsS&c$O&dR&d$PQ&q$]R)V&qQ&T#jR(o&TQ$X{R&k$XQ+^(}S,z+^-yR-y,{Q&o$ZR)S&oQ+f)YR-P+fQ#hfR&Q#hQ)^&uR+i)^Q&x$bS)e&x)fR)f&yQ'Q$iR)m'QQ'V$jS)w'V,RR,R)xQ,X)}R-d,XWjOn)l+wR#ljQ-f,]R.T-fd.|.[/c/j/o/}0P0R0^0b0cR/i.|U.t.V/b0QR/a.tQ/|/oS0Y/|0ZR0Z/}S/w/c/dR0U/wQ/O.[R/l/OR!ZPXmOn)l+wWlOn)l+wR'O$hYfOn$h)l+wR&P#g[sOn#g$h)l+wR&b#}&bQOYZ[dnprxy}!P!Q!U!i!k!o!p!q!s!t#[#d#g#y#{#}$Q$f$h${%Q%X%[%^%e%j%l%u%z&X&]&h&i&p&s&z'R'U'g'h'k'm'n'r'y(R(X(_(b(k(m(u)U)])_)h)l)r)v*Q*[*_*`*c*i*j*l*n*q*r*u*|*}+Q+X+[+c+w,P,Q,T,_,`,a,c,d,g,i,k,m,o,q,r,v-_-a-h-k-n.e.f/[/t0d0e0f0g0i0j0k0l0o0sQ!nTQ#caQ#poU$Rt%a'}S$b!R$eQ$n!XQ$s!cQ$t!dQ$u!eQ$v!fQ$w!gQ$x!hQ%c!zQ%h#OQ%n#SQ%o#TQ&^#xQ&y$cQ'b$oQ(l%|U(w&f(x+ZW)b&w)d+p+qQ*g'wQ*p(WQ+o)cQ,n*xQ/r/WR0h0mQ!yYQ!}ZQ$`!PQ$a!QQ%P!kQ'o%Q^'v%^%e'y(R*i*l*n^*^'k*`,c,d-k.f/[Q*d'mQ*e'nQ+l)_Q,b*_Q,f*cQ-i,`Q-j,aQ-m,gQ.d-hR/Z.e[bOn#g$h)l+w!^!vYZ!P!Q!k%Q%^%e'k'm'n'y(R)_*_*`*c*i*l*n,`,a,c,d,g-h-k.e.f/[Q#R[Q#fdS#wrxQ$UyW$]}$Q&z)hS$j!U$fW$y!i'h*[,_S%t#[+Q`%}#d%z(k(m(u+X,v0lQ&_#yQ&`#{Q&a#}Q'e${Q'u%[W(V%j(X*q*uQ(Z%lQ(d%uQ(q&XS(t&]0jQ(z&hQ({&iU)T&p)U+cQ)[&sQ)q'RY)u'U)v,P,Q-_Q*Y'gS*f'r0kW*w(_*r,k,oW*{(b*},q,rQ+h)]Q+|)rQ,Z*QQ,p*|Q,w+[Q-`,TQ-q,mR.R-ahUOn#d#g$h%z&]'r(k(m)l+w%S!uYZ[drxy}!P!Q!U!i!k#[#y#{#}$Q$f${%Q%[%^%e%j%l%u&X&h&i&p&s&z'R'U'g'h'k'm'n'y(R(X(_(b(u)U)])_)h)r)v*Q*[*_*`*c*i*l*n*q*r*u*|*}+Q+X+[+c,P,Q,T,_,`,a,c,d,g,k,m,o,q,r,v-_-a-h-k.e.f/[0j0k0lQ#qpW%U!o!s0e0oQ%V!pQ%W!qQ%Y!tQ%d0dS'q%X0iQ's0fQ't0gQ,h*jQ-p,iS.h-n/tR0q0sU#uq.j0rR(r&Z[cOn#g$h)l+wZ!xY#[#}$Q+QQ#W[Q#zrR$TxQ%`!yQ%g!}Q%m#RQ'e$yQ(Q%cQ(U%hQ(^%nQ(a%oQ*t(ZQ,^*YQ-o,hQ.l-pR/^.kQ$StQ'|%aR*k'}Q.k-nR0O/tR#QZR#V[R%O!iQ$|!iV*Z'h*[,_!]!lQ!n#c#p$R$b$n$s$t$u$v$w$x%c%h%n%o&^&y'b(l(w)b*g*p+o,n/r0hR%R!kT#]^#_Q%v#[R,s+QQ(h%vS+V(i(jQ,u+WQ-s,sS.m-t-uR/_.nT+R(f+TQ$^}Q&e$QQ)g&zR+s)hQ#khQ$VzQ$Y{R&m$XQ(|&lR+a)PQ(|&lQ+`)OR+a)PR$[|R)Z&rXlOn)l+wQ$d!RR&{$eQ$k!UR&|$fR*P'YQ)}'YV-b,W-c.SQ.c-gQ/Q.]R/R.^U.[-g.].^Q/V.`Q/c.uQ/h.{U/j.}/k/zQ/o/SQ/}/pQ0P/uU0R/v0T0]Q0^0VQ0b0[R0c0_R/U._R/e.u",nodeNames:"⚠ print Escape { Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatSelfDoc FormatConversion FormatSpec FormatReplacement FormatSelfDoc ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert TypeDefinition type TypeParamList TypeParam StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:277,context:Ew,nodeProps:[["isolate",-5,4,71,72,73,77,""],["group",-15,6,85,87,88,90,92,94,96,98,99,100,102,105,108,110,"Statement Statement",-22,8,18,21,25,40,49,50,56,57,60,61,62,63,64,67,70,71,72,79,80,81,82,"Expression",-10,114,116,119,121,122,126,128,133,135,138,"Statement",-9,143,144,147,148,150,151,152,153,154,"Pattern"],["openedBy",23,"(",54,"[",58,"{"],["closedBy",24,")",55,"]",59,"}"]],propSources:[Cw],skippedNodes:[0,4],repeatNodeCount:34,tokenData:"!2|~R!`OX%TXY%oY[%T[]%o]p%Tpq%oqr'ars)Yst*xtu%Tuv,dvw-hwx.Uxy/tyz0[z{0r{|2S|}2p}!O3W!O!P4_!P!Q:Z!Q!R;k!R![>_![!]Do!]!^Es!^!_FZ!_!`Gk!`!aHX!a!b%T!b!cIf!c!dJU!d!eK^!e!hJU!h!i!#f!i!tJU!t!u!,|!u!wJU!w!x!.t!x!}JU!}#O!0S#O#P&o#P#Q!0j#Q#R!1Q#R#SJU#S#T%T#T#UJU#U#VK^#V#YJU#Y#Z!#f#Z#fJU#f#g!,|#g#iJU#i#j!.t#j#oJU#o#p!1n#p#q!1s#q#r!2a#r#s!2f#s$g%T$g;'SJU;'S;=`KW<%lOJU`%YT&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T`%lP;=`<%l%To%v]&n`%c_OX%TXY%oY[%T[]%o]p%Tpq%oq#O%T#O#P&o#P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To&tX&n`OY%TYZ%oZ]%T]^%o^#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc'f[&n`O!_%T!_!`([!`#T%T#T#U(r#U#f%T#f#g(r#g#h(r#h#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(cTmR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc(yT!mR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk)aV&n`&[ZOr%Trs)vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk){V&n`Or%Trs*bs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk*iT&n`&^ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To+PZS_&n`OY*xYZ%TZ]*x]^%T^#o*x#o#p+r#p#q*x#q#r+r#r;'S*x;'S;=`,^<%lO*x_+wTS_OY+rZ]+r^;'S+r;'S;=`,W<%lO+r_,ZP;=`<%l+ro,aP;=`<%l*xj,kV%rQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-XT!xY&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj-oV%lQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.]V&n`&ZZOw%Twx.rx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk.wV&n`Ow%Twx/^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/eT&n`&]ZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk/{ThZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc0cTgR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk0yXVZ&n`Oz%Tz{1f{!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk1mVaR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk2ZV%oZ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc2wTzR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To3_W%pZ&n`O!_%T!_!`-Q!`!a3w!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Td4OT&{S&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk4fX!fQ&n`O!O%T!O!P5R!P!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5WV&n`O!O%T!O!P5m!P#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk5tT!rZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti6[a!hX&n`O!Q%T!Q![6T![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S6T#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti7fZ&n`O{%T{|8X|}%T}!O8X!O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8^V&n`O!Q%T!Q![8s![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti8z]!hX&n`O!Q%T!Q![8s![!l%T!l!m9s!m#R%T#R#S8s#S#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti9zT!hX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk:bX%qR&n`O!P%T!P!Q:}!Q!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj;UV%sQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti;ro!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!d%T!d!e?q!e!g%T!g!h7a!h!l%T!l!m9s!m!q%T!q!rA]!r!z%T!z!{Bq!{#R%T#R#S>_#S#U%T#U#V?q#V#X%T#X#Y7a#Y#^%T#^#_9s#_#c%T#c#dA]#d#l%T#l#mBq#m#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti=xV&n`O!Q%T!Q![6T![#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti>fc!hX&n`O!O%T!O!P=s!P!Q%T!Q![>_![!g%T!g!h7a!h!l%T!l!m9s!m#R%T#R#S>_#S#X%T#X#Y7a#Y#^%T#^#_9s#_#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti?vY&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Ti@mY!hX&n`O!Q%T!Q!R@f!R!S@f!S#R%T#R#S@f#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiAbX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBUX!hX&n`O!Q%T!Q!YA}!Y#R%T#R#SA}#S#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiBv]&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TiCv]!hX&n`O!Q%T!Q![Co![!c%T!c!iCo!i#R%T#R#SCo#S#T%T#T#ZCo#Z#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToDvV{_&n`O!_%T!_!`E]!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TcEdT%{R&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkEzT#gZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkFbXmR&n`O!^%T!^!_F}!_!`([!`!a([!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjGUV%mQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkGrV%zZ&n`O!_%T!_!`([!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkH`WmR&n`O!_%T!_!`([!`!aHx!a#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TjIPV%nQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkIoV_Q#}P&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%ToJ_]&n`&YS%uZO!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoKZP;=`<%lJUoKge&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!tJU!t!uLx!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#gLx#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUoMRa&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUkN_V&n`&`ZOr%TrsNts#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%TkNyV&n`Or%Trs! `s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! gT&n`&bZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk! }V&n`&_ZOw%Twx!!dx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!!iV&n`Ow%Twx!#Ox#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!#VT&n`&aZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!#oe&n`&YS%uZOr%Trs!%Qsw%Twx!&px!Q%T!Q![JU![!c%T!c!tJU!t!u!(`!u!}JU!}#R%T#R#SJU#S#T%T#T#fJU#f#g!(`#g#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!%XV&n`&dZOr%Trs!%ns#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!%sV&n`Or%Trs!&Ys#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&aT&n`&fZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!&wV&n`&cZOw%Twx!'^x#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!'cV&n`Ow%Twx!'xx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!(PT&n`&eZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!(ia&n`&YS%uZOr%Trs!)nsw%Twx!+^x!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!)uV&n`&hZOr%Trs!*[s#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*aV&n`Or%Trs!*vs#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!*}T&n`&jZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!+eV&n`&gZOw%Twx!+zx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,PV&n`Ow%Twx!,fx#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tk!,mT&n`&iZO#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%To!-Vi&n`&YS%uZOr%TrsNWsw%Twx! vx!Q%T!Q![JU![!c%T!c!dJU!d!eLx!e!hJU!h!i!(`!i!}JU!}#R%T#R#SJU#S#T%T#T#UJU#U#VLx#V#YJU#Y#Z!(`#Z#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUo!.}a&n`&YS%uZOr%Trs)Ysw%Twx.Ux!Q%T!Q![JU![!c%T!c!}JU!}#R%T#R#SJU#S#T%T#T#oJU#p#q%T#r$g%T$g;'SJU;'S;=`KW<%lOJUk!0ZT!XZ&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tc!0qT!WR&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%Tj!1XV%kQ&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!1sO!]~k!1zV%jR&n`O!_%T!_!`-Q!`#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T~!2fO![~i!2mT%tX&n`O#o%T#p#q%T#r;'S%T;'S;=`%i<%lO%T",tokenizers:[Qw,$w,xw,Pw,0,1,2,3,4],topRules:{Script:[0,5]},specialized:[{term:221,get:e=>zw[e]||-1}],tokenPrec:7646}),Ts=new ff,kd=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function _a(e){return(t,n,o)=>{if(o)return!1;let a=t.node.getChild("VariableName");return a&&n(a,e),!0}}const qw={FunctionDefinition:_a("function"),ClassDefinition:_a("class"),ForStatement(e,t,n){if(n){for(let o=e.node.firstChild;o;o=o.nextSibling)if(o.name=="VariableName")t(o,"variable");else if(o.name=="in")break}},ImportStatement(e,t){var n,o;let{node:a}=e,l=((n=a.firstChild)===null||n===void 0?void 0:n.name)=="from";for(let r=a.getChild("import");r;r=r.nextSibling)r.name=="VariableName"&&((o=r.nextSibling)===null||o===void 0?void 0:o.name)!="as"&&t(r,l?"variable":"namespace")},AssignStatement(e,t){for(let n=e.node.firstChild;n;n=n.nextSibling)if(n.name=="VariableName")t(n,"variable");else if(n.name==":"||n.name=="AssignOp")break},ParamList(e,t){for(let n=null,o=e.node.firstChild;o;o=o.nextSibling)o.name=="VariableName"&&(!n||!/\*|AssignOp/.test(n.name))&&t(o,"variable"),n=o},CapturePattern:_a("variable"),AsPattern:_a("variable"),__proto__:null};function Td(e,t){let n=Ts.get(t);if(n)return n;let o=[],a=!0;function l(r,i){let s=e.sliceString(r.from,r.to);o.push({label:s,type:i})}return t.cursor(df.IncludeAnonymous).iterate(r=>{if(r.name){let i=qw[r.name];if(i&&i(r,l,a)||!a&&kd.has(r.name))return!1;a=!1}else if(r.to-r.from>8192){for(let i of Td(e,r.node))o.push(i);return!1}}),Ts.set(t,o),o}const Es=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,Ed=["String","FormatString","Comment","PropertyName"];function Rw(e){let t=uf(e.state).resolveInner(e.pos,-1);if(Ed.indexOf(t.name)>-1)return null;let n=t.name=="VariableName"||t.to-t.from<20&&Es.test(e.state.sliceDoc(t.from,t.to));if(!n&&!e.explicit)return null;let o=[];for(let a=t;a;a=a.parent)kd.has(a.name)&&(o=o.concat(Td(e.state.doc,a)));return{options:o,from:n?t.from:e.pos,validFor:Es}}const Mw=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map(e=>({label:e,type:"constant"})).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map(e=>({label:e,type:"type"}))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map(e=>({label:e,type:"class"}))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map(e=>({label:e,type:"function"}))),Iw=[jt("def ${name}(${params}):\n	${}",{label:"def",detail:"function",type:"keyword"}),jt("for ${name} in ${collection}:\n	${}",{label:"for",detail:"loop",type:"keyword"}),jt("while ${}:\n	${}",{label:"while",detail:"loop",type:"keyword"}),jt("try:\n	${}\nexcept ${error}:\n	${}",{label:"try",detail:"/ except block",type:"keyword"}),jt(`if \${}:
	
`,{label:"if",detail:"block",type:"keyword"}),jt("if ${}:\n	${}\nelse:\n	${}",{label:"if",detail:"/ else block",type:"keyword"}),jt("class ${name}:\n	def __init__(self, ${params}):\n			${}",{label:"class",detail:"definition",type:"keyword"}),jt("import ${module}",{label:"import",detail:"statement",type:"keyword"}),jt("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],Vw=cf(Ed,pf(Mw.concat(Iw)));function Qs(e,t){let n=e.baseIndentFor(t),o=e.lineAt(e.pos,-1),a=o.from+o.text.length;return/^\s*($|#)/.test(o.text)&&e.node.to<a+100&&!/\S/.test(e.state.sliceDoc(a,e.node.to))&&e.lineIndent(e.pos,-1)<=n||/^\s*(else:|elif |except |finally:)/.test(e.textAfter)&&e.lineIndent(e.pos,-1)>n?null:n+e.unit}const Yl=bu.define({name:"python",parser:Nw.configure({props:[wu.add({Body:e=>{var t;return(t=Qs(e,e.node))!==null&&t!==void 0?t:e.continue()},IfStatement:e=>/^\s*(else:|elif )/.test(e.textAfter)?e.baseIndent:e.continue(),"ForStatement WhileStatement":e=>/^\s*else:/.test(e.textAfter)?e.baseIndent:e.continue(),TryStatement:e=>/^\s*(except |finally:|else:)/.test(e.textAfter)?e.baseIndent:e.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":ql({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":ql({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":ql({closing:"]"}),"String FormatString":()=>null,Script:e=>{if(e.pos+/\s*/.exec(e.textAfter)[0].length>=e.node.to){let t=null;for(let n=e.node,o=n.to;n=n.lastChild,!(!n||n.to!=o);)n.type.name=="Body"&&(t=n);if(t){let n=Qs(e,t);if(n!=null)return n}}return e.continue()}}),Su.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":xu,Body:(e,t)=>({from:e.from+1,to:e.to-(e.to==t.doc.length?0:1)})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/}});function Aw(){return new Ou(Yl,[Yl.data.of({autocomplete:Rw}),Yl.data.of({autocomplete:Vw})])}const Xw={key:"copy-tooltip"},Uw={key:"copied-tooltip"},Qd={__name:"CodeEditorModal",props:{code:{type:String,required:!0,default:""},open:{type:Boolean,required:!0,default:!1},language:{type:String,required:!1,default:"python"}},emits:["update:code","update:open","save"],setup(e,{emit:t}){const n=e,{t:o}=Ye(),a=t;let l=F(n.code),r=F(n.open);const i=p=>{l.value=p,a("update:code",l.value)},s=(p,_)=>{r.value=p,a("update:open",r.value),_&&a("save",l.value)};Te(()=>n.code,p=>{l.value=p}),Te(()=>n.open,p=>{r.value=p});const u=hf.theme({".cm-content":{fontFamily:"Cascadia Code, Consolas, Monaco, Menlo, Ubuntu Mono, Liberation Mono, DejaVu Sans Mono, Courier New, monospace",fontSize:"24px"}}),c={python:{extensions:[Aw(),Ti,u],tabSize:4},json:{extensions:[Sb(),Ti,u],tabSize:2}},d=Wp(),f=p=>{d.value=p.view};return(p,_)=>{const b=M("a-typography-text"),h=M("a-space"),v=M("a-modal");return k(),A(v,{open:w(r),width:"80vw",onOk:_[2]||(_[2]=T=>s(!1,!0)),onCancel:_[3]||(_[3]=T=>s(!1,!1))},{title:S(()=>[m(h,null,{default:S(()=>[m(w($f)),ne(" "+J(w(o)("components.codeEditorModal.title"))+" ",1),m(b,{copyable:{text:n.code}},{copyableTooltip:S(({copied:T})=>[T?(k(),Z("span",Uw,J(w(o)("components.codeEditorModal.copy_success")),1)):(k(),Z("span",Xw,J(w(o)("components.codeEditorModal.copy_code")),1))]),_:1},8,["copyable"])]),_:1})]),default:S(()=>[m(w(mf),{class:"code-editor",modelValue:w(l),"onUpdate:modelValue":_[0]||(_[0]=T=>_o(l)?l.value=T:l=T),placeholder:w(o)("components.codeEditorModal.please_enter_code"),style:{height:"80vh",minHeight:"400px"},autofocus:!0,"indent-with-tab":!0,"tab-size":c[n.language].tabSize,extensions:c[n.language].extensions,onReady:f,onChange:_[1]||(_[1]=T=>i(T))},null,8,["modelValue","placeholder","tab-size","extensions"])]),_:1},8,["open"])}}};function Pd(){return{description:"description",task_name:"tools.programming_function",has_inputs:!0,template:{language:{required:!0,placeholder:"",show:!1,value:"python",options:[{value:"python",label:"Python"}],name:"language",display_name:"language",type:"str",list:!1,field_type:"select"},code:{required:!0,placeholder:"some code...",show:!1,value:"",name:"code",display_name:"code",type:"str",list:!1,field_type:"textarea"},list_input:{required:!0,placeholder:"",show:!1,value:!1,name:"list_input",display_name:"list_input",type:"bool",list:!1,field_type:"checkbox"},output:{required:!0,placeholder:"",show:!1,value:"",name:"output",display_name:"output",type:"str",list:!1,field_type:"textarea",is_output:!0},console_msg:{required:!0,placeholder:"",show:!1,value:"",name:"console_msg",display_name:"console_msg",type:"str",list:!1,field_type:"textarea",is_output:!0},error_msg:{required:!1,placeholder:"",show:!1,value:"",name:"error_msg",display_name:"error_msg",type:"str",list:!1,field_type:"textarea",is_output:!0},files:{required:!1,placeholder:"",show:!1,value:"",name:"files",display_name:"files",type:"str",list:!1,field_type:"textarea",is_output:!0}}}}const Ww=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Pd},Symbol.toStringTag,{value:"Module"})),jw={style:{padding:"10px"}},Fw={__name:"ProgrammingFunction",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Ye(),o=F(t.data.template),a=Pd();Object.entries(a.template).forEach(([p,_])=>{o.value[p]=o.value[p]||_,_.is_output&&(o.value[p].is_output=!0)});const l=["language","code","output","use_oversea_node","list_input","error_msg","console_msg","files"],r=ut({required:!0,placeholder:"",show:!1,value:"",password:!1,name:"",display_name:"",type:"str",list:!1,field_type:"input"}),i=p=>{r.multiline=p=="textarea"},s=F(!1),u=()=>{s.value=!0},c=()=>{if(l.includes(r.display_name)){pt.error(n("components.nodes.tools.ProgrammingFunction.parameter_name_reserved"));return}r.name=r.display_name,o.value[r.name]=JSON.parse(JSON.stringify(r)),s.value=!1},d=p=>{delete o.value[p]},f=ut({open:!1,code:""});return(p,_)=>{const b=M("a-select"),h=M("a-textarea"),v=M("a-input"),T=M("a-button"),Q=M("a-select-option"),y=M("a-form-item"),$=M("a-form"),E=M("a-drawer"),x=M("a-typography-paragraph"),X=M("a-checkbox"),U=M("a-flex");return k(),A(Pe,{nodeId:e.id,fieldsData:o.value,debug:t.data.debug,translatePrefix:"components.nodes.tools.ProgrammingFunction",documentLink:"https://vectorvein.com/help/docs/tools#h2-4"},{main:S(()=>[m(U,{vertical:"",gap:"small"},{default:S(()=>[m(Qe,{name:o.value.language.display_name,required:"",type:"target",onDelete:_[1]||(_[1]=V=>d(p.field)),data:o.value.language,"onUpdate:data":_[2]||(_[2]=V=>o.value.language=V)},{default:S(()=>[m(b,{class:"field-content",style:{width:"100%"},value:o.value.language.value,"onUpdate:value":_[0]||(_[0]=V=>o.value.language.value=V),options:o.value.language.options},null,8,["value","options"])]),_:1},8,["name","data"]),(k(!0),Z(ye,null,Xe(Object.keys(o.value),(V,G)=>(k(),Z(ye,{key:G},[l.includes(V)?ce("",!0):(k(),A(Qe,{key:0,name:`${o.value[V].display_name}: ${o.value[V].type}`,required:"",type:"target",deletable:"",onDelete:ee=>d(V),data:o.value[V],"onUpdate:data":ee=>o.value[V]=ee},{default:S(()=>[o.value[V].field_type=="select"?(k(),A(b,{key:0,class:"field-content",style:{width:"100%"},value:o.value[V].value,"onUpdate:value":ee=>o.value[V].value=ee,options:o.value[V].options},null,8,["value","onUpdate:value","options"])):o.value[V].field_type=="textarea"?(k(),A(h,{key:1,class:"field-content",value:o.value[V].value,"onUpdate:value":ee=>o.value[V].value=ee,autoSize:{minRows:1,maxRows:10},showCount:!0,placeholder:o.value[V].placeholder},null,8,["value","onUpdate:value","placeholder"])):o.value[V].field_type=="input"?(k(),A(v,{key:2,class:"field-content",value:o.value[V].value,"onUpdate:value":ee=>o.value[V].value=ee,placeholder:o.value[V].placeholder},null,8,["value","onUpdate:value","placeholder"])):ce("",!0)]),_:2},1032,["name","onDelete","data","onUpdate:data"]))],64))),128)),De("div",jw,[m(T,{type:"dashed",block:"",onClick:u,class:"add-field-button"},{default:S(()=>[m(w(Xn)),ne(" "+J(w(n)("components.nodes.tools.ProgrammingFunction.add_parameter")),1)]),_:1}),m(E,{open:s.value,"onUpdate:open":_[5]||(_[5]=V=>s.value=V),class:"custom-class",style:{color:"red"},title:w(n)("components.nodes.tools.ProgrammingFunction.add_parameter"),placement:"right"},{extra:S(()=>[m(T,{type:"primary",onClick:c},{default:S(()=>[ne(J(w(n)("common.add")),1)]),_:1})]),default:S(()=>[m($,null,{default:S(()=>[m(y,{label:w(n)("components.nodes.tools.ProgrammingFunction.add_parameter_type")},{default:S(()=>[m(b,{value:r.type,"onUpdate:value":_[3]||(_[3]=V=>r.type=V),style:{width:"120px"},onChange:i},{default:S(()=>[m(Q,{value:"str"},{default:S(()=>[ne(J(w(n)("components.nodes.tools.ProgrammingFunction.parameter_type_str")),1)]),_:1}),m(Q,{value:"int"},{default:S(()=>[ne(J(w(n)("components.nodes.tools.ProgrammingFunction.parameter_type_int")),1)]),_:1}),m(Q,{value:"float"},{default:S(()=>[ne(J(w(n)("components.nodes.tools.ProgrammingFunction.parameter_type_float")),1)]),_:1}),m(Q,{value:"bool"},{default:S(()=>[ne(J(w(n)("components.nodes.tools.ProgrammingFunction.parameter_type_bool")),1)]),_:1}),m(Q,{value:"list"},{default:S(()=>[ne(J(w(n)("components.nodes.tools.ProgrammingFunction.parameter_type_list")),1)]),_:1}),m(Q,{value:"dict"},{default:S(()=>[ne(J(w(n)("components.nodes.tools.ProgrammingFunction.parameter_type_dict")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),m(y,{label:w(n)("components.nodes.tools.ProgrammingFunction.add_parameter_name")},{default:S(()=>[m(v,{value:r.display_name,"onUpdate:value":_[4]||(_[4]=V=>r.display_name=V)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["open","title"])]),m(Qe,{name:w(n)("components.nodes.tools.ProgrammingFunction.code"),required:"",type:"target",data:o.value.code,"onUpdate:data":_[9]||(_[9]=V=>o.value.code=V)},{default:S(()=>[m(x,{ellipsis:{row:1,expandable:!1},content:o.value.code.value},null,8,["content"]),m(T,{type:"dashed",block:"",onClick:_[6]||(_[6]=V=>f.open=!0)},{default:S(()=>[ne(J(w(n)("components.nodes.tools.ProgrammingFunction.open_editor")),1)]),_:1}),m(Qd,{language:o.value.language.value,open:f.open,"onUpdate:open":_[7]||(_[7]=V=>f.open=V),code:o.value.code.value,"onUpdate:code":_[8]||(_[8]=V=>o.value.code.value=V)},null,8,["language","open","code"])]),_:1},8,["name","data"]),m(Qe,{name:w(n)("components.nodes.tools.ProgrammingFunction.list_input"),"name-only":"",type:"target",data:o.value.list_input,"onUpdate:data":_[11]||(_[11]=V=>o.value.list_input=V)},{inline:S(()=>[m(X,{checked:o.value.list_input.value,"onUpdate:checked":_[10]||(_[10]=V=>o.value.list_input.value=V)},null,8,["checked"])]),_:1},8,["name","data"])]),_:1})]),_:1},8,["nodeId","fieldsData","debug"])}}},Lw=Object.freeze(Object.defineProperty({__proto__:null,default:Fw},Symbol.toStringTag,{value:"Module"})),Gw={__name:"WorkflowSelect",props:{modelValue:{},modelModifiers:{}},emits:Io(["selected"],["update:modelValue"]),setup(e,{emit:t}){const n=go(e,"modelValue"),o=t,{t:a}=Ye(),l=F(!0),r=Jo(),{userDatabases:i}=Qt(r),s=F([]);Fr(async()=>{const[f,p]=await Promise.all([u.load({}),$u("list",{})]);p.status==200&&(s.value=p.data),l.value=!1});const u=ut({columns:[{name:a("workspace.workflowSpaceMain.workflow_title"),dataIndex:"title",key:"title"},{title:a("workspace.workflowSpaceMain.tags"),key:"tags",dataIndex:"tags",filters:Se(()=>s.value.map(f=>({text:f.title,value:f.tid}))),width:"300px"},{title:a("workspace.workflowSpaceMain.update_time"),key:"update_time",dataIndex:"update_time",sorter:!0,sortDirections:["descend","ascend"],width:"200px"}],data:[],loading:!1,current:1,pageSize:10,total:0,pagination:Se(()=>({total:u.total,current:u.current,pageSize:u.pageSize})),selectTag:"all",selectTagChange:async()=>{u.loading=!0,await u.load({tags:[u.selectTag]}),u.loading=!1},searching:!1,searchText:"",hoverRowWid:null,customRow:f=>({style:{cursor:"pointer"},onClick:async p=>{(p.target.classList.contains("ant-table-cell")||p.target.classList.contains("workflow-title"))&&(await d(f.wid),o("selected",n.value))},onMouseenter:p=>{u.hoverRowWid=f.wid},onMouseleave:p=>{u.hoverRowWid=null}}),searchWorkflows:async()=>{u.loading=!0,u.searching=!0,await u.load({search_text:u.searchText}),u.searching=!1,u.loading=!1},clearSearch:async()=>{u.loading=!0,u.searching=!0,u.searchText="",await u.load({}),u.searching=!1,u.loading=!1},handleTableChange:(f,p,_)=>{u.load({page_size:f.pageSize,page:f.current,sort_field:_.field,sort_order:_.order,tags:p.tags,search_text:u.searchText})},load:async f=>{u.loading=!0;const p=await cr("list",f);p.status==200?u.data=p.data.workflows.map(_=>(_.create_time=new Date(parseInt(_.create_time)).toLocaleString(),_.update_time=new Date(parseInt(_.update_time)).toLocaleString(),_)):pt.error(p.msg),u.total=p.data.total,u.pageSize=p.data.page_size,u.current=p.data.page,u.loading=!1}}),c=F({}),d=async f=>{l.value=!0;const p=await cr("get",{wid:f});if(p.status!=200){pt.error(a("workspace.workflowSpace.get_workflow_failed"));return}c.value=p.data,c.value.data.nodes.forEach(h=>{h.category=="vectorDb"&&(h.data.template.database.options=i.value.filter(v=>v.status=="VALID").map(v=>({value:v.vid,label:v.name})))});const _=Hr(c.value),b=ut(_);n.value={wid:f,title:c.value.title,inputFields:b.inputFields,outputNodes:b.outputNodes,workflowInvokeOutputNodes:b.workflowInvokeOutputNodes},l.value=!1};return(f,p)=>{const _=M("a-input-search"),b=M("a-button"),h=M("a-space"),v=M("a-col"),T=M("a-row"),Q=M("a-typography-text"),y=M("a-tag"),$=M("a-table"),E=M("a-spin");return k(),A(E,{spinning:l.value},{default:S(()=>[m(T,{justify:"space-between",align:"middle",gutter:[16,16]},{default:S(()=>[m(v,{span:24},{default:S(()=>[m(T,{type:"flex",align:"middle",justify:"space-between"},{default:S(()=>[m(v,{flex:"auto"},{default:S(()=>[m(h,null,{default:S(()=>[m(_,{value:u.searchText,"onUpdate:value":p[0]||(p[0]=x=>u.searchText=x),placeholder:w(a)("workspace.workflowSpaceMain.input_search_text"),"enter-button":"",onSearch:u.searchWorkflows,class:"search-input"},null,8,["value","placeholder","onSearch"]),m(b,{onClick:u.clearSearch},{default:S(()=>[ne(J(w(a)("workspace.workflowSpaceMain.reset_search")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1}),m(v,{span:24},{default:S(()=>[m($,{loading:u.loading,columns:u.columns,customRow:u.customRow,"data-source":u.data,pagination:u.pagination,onChange:u.handleTableChange},{headerCell:S(({column:x})=>[x.key==="title"?(k(),Z(ye,{key:0},[m(w(jp)),ne(" "+J(w(a)("workspace.workflowSpaceMain.workflow_title")),1)],64)):x.key==="tags"?(k(),Z(ye,{key:1},[m(w(af)),ne(" "+J(w(a)("workspace.workflowSpaceMain.tags")),1)],64)):x.key==="update_time"?(k(),Z(ye,{key:2},[m(w(yf)),ne(" "+J(w(a)("workspace.workflowSpaceMain.update_time")),1)],64)):ce("",!0)]),bodyCell:S(({column:x,record:X})=>[x.key==="title"?(k(),A(h,{key:0},{default:S(()=>[m(Q,{class:"workflow-title"},{default:S(()=>[ne(J(X.title),1)]),_:2},1024)]),_:2},1024)):x.key==="tags"?(k(),A(h,{key:1},{default:S(()=>[(k(!0),Z(ye,null,Xe(X.tags,U=>(k(),A(y,{color:U.color,key:U.tid},{default:S(()=>[ne(J(U.title),1)]),_:2},1032,["color"]))),128))]),_:2},1024)):ce("",!0)]),_:1},8,["loading","columns","customRow","data-source","pagination","onChange"])]),_:1})]),_:1})]),_:1},8,["spinning"])}}},Bw=wn(Gw,[["__scopeId","data-v-05168f70"]]);function Dd(){return{description:"description",task_name:"tools.workflow_invoke",has_inputs:!0,seleted_workflow_title:"",is_template:!1,template:{workflow_id:{required:!0,placeholder:"",show:!1,value:"",name:"workflow_id",display_name:"workflow_id",type:"str",list:!1,field_type:"input"}}}}const Hw=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Dd},Symbol.toStringTag,{value:"Module"})),Yw={style:{padding:"5px 10px"}},Zw={__name:"WorkflowInvoke",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,o=vu().path.startsWith("/workspace/workflow/editor/")?"workflow":"officialTemplate",a=o=="template",{t:l}=Ye(),r=F(t.data.template),i=Dd();Object.entries(i.template).forEach(([d,f])=>{r.value[d]=r.value[d]||f,f.is_output&&(r.value[d].is_output=!0)});const s=F(t.data.seleted_workflow_title),u=F(t.data.is_template),c=ut({open:!1,data:{},onWorkflowSelect:()=>{t.data.seleted_workflow_title=c.data.title,s.value=c.data.title,t.data.is_template=c.data.isTemplate,u.value=c.data.isTemplate,r.value.workflow_id.value=c.data.wid,Object.keys(r.value).forEach(p=>{["workflow_id"].includes(p)||delete r.value[p]}),c.data.inputFields.forEach(p=>{Yr.includes(p.field_type)||(r.value[p.name]=JSON.parse(JSON.stringify(p)),r.value[p.name].node=r.value[p.name].nodeId)});const d=new Set;c.data.outputNodes.concat(c.data.workflowInvokeOutputNodes).forEach(p=>{if(p.field_type=="typography-paragraph")return;const _=p.id.slice(0,8);let b=`${_}_${p.type}`;for(;d.has(b);)b=`${b}_${Math.floor(Math.random()*1e3)}`;d.add(b);let h=b,v="";p.type=="Text"?(r.value[b]=JSON.parse(JSON.stringify(p.data.template.text)),h=`${h}_${p.data.template.output_title.value}`,r.value[b].display_name=`${_}_${p.data.template.output_title.value||"text"}`,v="text"):p.type=="Audio"?(r.value[b]=JSON.parse(JSON.stringify(p.data.template.audio_url||{})),r.value[b].display_name=`${_}_${p.type}`,v="audio_url"):p.type=="Mindmap"?(r.value[b]=JSON.parse(JSON.stringify(p.data.template.content)),r.value[b].display_name=`${_}_${p.type}`,v="content"):p.type=="Mermaid"?(r.value[b]=JSON.parse(JSON.stringify(p.data.template.content)),r.value[b].display_name=`${_}_${p.type}`,v="content"):p.type=="Echarts"?(r.value[b]=JSON.parse(JSON.stringify(p.data.template.option)),r.value[b].display_name=`${_}_${p.type}`,v="option"):p.type=="WorkflowInvokeOutput"&&(r.value[b]=JSON.parse(JSON.stringify(p.data.template.value)),r.value[b].display_name=`${_}_${p.data.template.display_name.value}`,v="value"),r.value[b].id=b,r.value[b].name=h,r.value[b].show=!1,r.value[b].is_output=!0,r.value[b].node=p.id,r.value[b].output_field_key=v}),c.open=!1}});return(d,f)=>{const p=M("a-typography-text"),_=M("a-button"),b=M("a-modal"),h=M("a-input"),v=M("a-divider"),T=M("a-select"),Q=M("a-textarea"),y=M("a-input-number"),$=M("a-checkbox"),E=M("a-flex");return k(),A(Pe,{nodeId:e.id,fieldsData:r.value,translatePrefix:"components.nodes.tools.WorkflowInvoke",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/tools#h2-12"},{main:S(()=>[m(E,{vertical:"",gap:"small"},{default:S(()=>[De("div",Yw,[s.value?(k(),Z(ye,{key:0},[m(p,{type:"secondary"},{default:S(()=>[ne(J(w(l)("components.nodes.tools.WorkflowInvoke.selected_workflow"))+": ",1)]),_:1}),m(p,null,{default:S(()=>[ne(J(s.value),1)]),_:1})],64)):ce("",!0),m(_,{type:"dashed",block:"",onClick:f[0]||(f[0]=x=>c.open=!0)},{default:S(()=>[ne(J(w(l)("components.nodes.tools.WorkflowInvoke.select_workflow")),1)]),_:1}),m(b,{open:c.open,title:w(l)("components.nodes.tools.WorkflowInvoke.select_workflow"),width:"80vw",onCancel:f[2]||(f[2]=x=>c.open=!1),footer:null},{default:S(()=>[m(Bw,{showUser:a,selectType:w(o),modelValue:c.data,"onUpdate:modelValue":f[1]||(f[1]=x=>c.data=x),onSelected:c.onWorkflowSelect},null,8,["selectType","modelValue","onSelected"])]),_:1},8,["open","title"])]),m(Qe,{name:w(l)("components.nodes.tools.WorkflowInvoke.workflow_id"),required:"",type:"target",data:r.value.workflow_id,"onUpdate:data":f[4]||(f[4]=x=>r.value.workflow_id=x)},{default:S(()=>[m(h,{disabled:"",value:r.value.workflow_id.value,"onUpdate:value":f[3]||(f[3]=x=>r.value.workflow_id.value=x),placeholder:r.value.workflow_id.placeholder},null,8,["value","placeholder"])]),_:1},8,["name","data"]),r.value.workflow_id.value.length>0?(k(),A(v,{key:0},{default:S(()=>[ne(J(w(l)("components.nodes.tools.WorkflowInvoke.workflow_fields")),1)]),_:1})):ce("",!0),(k(!0),Z(ye,null,Xe(Object.keys(r.value),(x,X)=>(k(),Z(ye,{key:X},[!["workflow_id"].includes(x)&&!r.value[x].is_output?(k(),A(Qe,{key:0,name:`${r.value[x].display_name}: ${r.value[x].type}`,required:"",type:"target",onDelete:U=>d.removeField(x),data:r.value[x],"onUpdate:data":U=>r.value[x]=U},{inline:S(()=>[r.value[x].field_type=="checkbox"?(k(),A($,{key:0,checked:r.value[x].value,"onUpdate:checked":U=>r.value[x].value=U},null,8,["checked","onUpdate:checked"])):ce("",!0)]),default:S(()=>[r.value[x].field_type=="select"?(k(),A(T,{key:0,style:{width:"100%"},value:r.value[x].value,"onUpdate:value":U=>r.value[x].value=U,options:r.value[x].options},null,8,["value","onUpdate:value","options"])):r.value[x].field_type=="textarea"?(k(),A(Q,{key:1,value:r.value[x].value,"onUpdate:value":U=>r.value[x].value=U,autoSize:{minRows:1,maxRows:10},showCount:!0,placeholder:r.value[x].placeholder},null,8,["value","onUpdate:value","placeholder"])):r.value[x].field_type=="input"?(k(),A(h,{key:2,value:r.value[x].value,"onUpdate:value":U=>r.value[x].value=U,placeholder:r.value[x].placeholder},null,8,["value","onUpdate:value","placeholder"])):r.value[x].field_type=="number"?(k(),A(y,{key:3,value:r.value[x].value,"onUpdate:value":U=>r.value[x].value=U,controls:!1,style:{width:"100%"}},null,8,["value","onUpdate:value"])):ce("",!0)]),_:2},1032,["name","onDelete","data","onUpdate:data"])):ce("",!0)],64))),128))]),_:1})]),output:S(()=>[m(E,{vertical:"",style:{width:"100%"}},{default:S(()=>[(k(!0),Z(ye,null,Xe(Object.keys(r.value),(x,X)=>(k(),Z(ye,{key:X},[r.value[x].is_output?(k(),A(Qe,{key:0,name:r.value[x].display_name,type:"source",nameOnly:"",data:r.value[x],"onUpdate:data":U=>r.value[x]=U},null,8,["name","data","onUpdate:data"])):ce("",!0)],64))),128))]),_:1})]),_:1},8,["nodeId","fieldsData","debug"])}}},Jw=Object.freeze(Object.defineProperty({__proto__:null,default:Zw},Symbol.toStringTag,{value:"Module"}));function Cd(){return{description:"description",task_name:"triggers.button_trigger",has_inputs:!1,template:{button_text:{required:!0,placeholder:"Run",show:!1,value:"",name:"button_text",display_name:"button_text",type:"str",list:!1,field_type:"input"}}}}const Kw=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Cd},Symbol.toStringTag,{value:"Module"})),eS={__name:"ButtonTrigger",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,{t:n}=Ye(),o=F(t.data.template),a=Cd();return Object.entries(a.template).forEach(([l,r])=>{o.value[l]=o.value[l]||r,r.is_output&&(o.value[l].is_output=!0)}),o.value.button_text.value=o.value.button_text.value.length>0?o.value.button_text.value:n("components.nodes.triggers.ButtonTrigger.run"),(l,r)=>(k(),A(Pe,{nodeId:e.id,fieldsData:o.value,translatePrefix:"components.nodes.triggers.ButtonTrigger",documentLink:"https://vectorvein.com/help/docs/triggers#h2-0"},null,8,["nodeId","fieldsData"]))}},tS=Object.freeze(Object.defineProperty({__proto__:null,default:eS},Symbol.toStringTag,{value:"Module"}));function zd(){return{description:"description",task_name:"vector_db.add_data",has_inputs:!0,template:{text:{required:!0,placeholder:"",show:!1,value:"",name:"text",display_name:"text",type:"str",list:!1,field_type:"textarea"},content_title:{required:!0,placeholder:"",show:!1,value:"",name:"content_title",display_name:"content_title",type:"str",list:!1,field_type:"input"},source_url:{required:!1,placeholder:"",show:!1,value:"",name:"source_url",display_name:"source_url",type:"str",list:!1,field_type:"input"},data_type:{required:!0,placeholder:"",show:!1,value:"text",options:[{value:"TEXT",label:"Text"}],name:"data_type",display_name:"data_type",type:"str",list:!1,field_type:"select"},split_method:{required:!0,placeholder:"",show:!1,value:"general",options:[{value:"general",label:"general"},{value:"delimiter",label:"delimiter"},{value:"markdown",label:"markdown"},{value:"table",label:"table"}],name:"split_method",display_name:"split_method",type:"str",list:!1,field_type:"select",condition:e=>e.data_type.value=="text"},chunk_length:{required:!0,placeholder:"",show:!1,value:500,name:"chunk_length",display_name:"chunk_length",type:"str",list:!1,field_type:"number",condition:e=>["general","markdown"].includes(e.split_method.value)},chunk_overlap:{required:!0,placeholder:"",show:!1,value:30,name:"chunk_overlap",display_name:"chunk_overlap",type:"str",list:!1,field_type:"number",condition:e=>["general","markdown"].includes(e.split_method.value)},delimiter:{required:!1,placeholder:"",show:!1,value:"\\n",name:"delimiter",display_name:"delimiter",type:"str",list:!1,field_type:"input",condition:e=>e.split_method.value=="delimiter"},remove_url_and_email:{required:!1,placeholder:"",show:!1,value:!0,name:"remove_url_and_email",display_name:"remove_url_and_email",type:"bool",list:!1,field_type:"checkbox"},database:{required:!0,placeholder:"",show:!1,value:"",options:[],name:"database",display_name:"database",type:"str",list:!1,field_type:"select"},object_id:{required:!0,placeholder:"",show:!1,value:"",name:"object_id",display_name:"object_id",type:"list|str",list:!1,field_type:"",is_output:!0}}}}const nS=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:zd},Symbol.toStringTag,{value:"Module"})),oS={__name:"AddData",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=Jo(),{userDatabases:o}=Qt(n),a=F(t.data.template),l=zd();return Object.entries(l.template).forEach(([r,i])=>{a.value[r]=a.value[r]||i,i.is_output&&(a.value[r].is_output=!0)}),a.value.database.options=o.value.filter(r=>r.status=="VALID").map(r=>({value:r.vid,label:r.name})),(r,i)=>(k(),A(Pe,{nodeId:e.id,fieldsData:a.value,translatePrefix:"components.nodes.vectorDb.AddData",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/vector-db#h2-0"},null,8,["nodeId","fieldsData","debug"]))}},aS=Object.freeze(Object.defineProperty({__proto__:null,default:oS},Symbol.toStringTag,{value:"Module"}));function Nd(){return{description:"description",task_name:"vector_db.delete_data",has_inputs:!0,template:{object_id:{required:!0,placeholder:"",show:!1,value:"",name:"object_id",display_name:"object_id",type:"list|str",list:!1,field_type:""},database:{required:!0,placeholder:"",show:!1,value:"",options:[],name:"database",display_name:"database",type:"str",list:!1,field_type:"select"},delete_success:{required:!0,placeholder:"",show:!1,value:"",name:"delete_success",display_name:"delete_success",type:"list|bool",list:!1,field_type:"",is_output:!0}}}}const lS=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Nd},Symbol.toStringTag,{value:"Module"})),rS={__name:"DeleteData",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=Jo(),{userDatabases:o}=Qt(n),a=F(t.data.template),l=Nd();return Object.entries(l.template).forEach(([r,i])=>{a.value[r]=a.value[r]||i,i.is_output&&(a.value[r].is_output=!0)}),a.value.database.options=o.value.filter(r=>r.status=="VALID").map(r=>({value:r.vid,label:r.name})),(r,i)=>(k(),A(Pe,{nodeId:e.id,fieldsData:a.value,translatePrefix:"components.nodes.vectorDb.DeleteData",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/vector-db#h2-4"},null,8,["nodeId","fieldsData","debug"]))}},iS=Object.freeze(Object.defineProperty({__proto__:null,default:rS},Symbol.toStringTag,{value:"Module"}));function qd(){return{description:"description",task_name:"vector_db.search_data",has_inputs:!0,template:{search_text:{required:!0,placeholder:"",show:!1,value:"",name:"search_text",display_name:"search_text",type:"str",list:!1,field_type:"textarea"},data_type:{required:!0,placeholder:"",show:!1,value:"text",options:[{value:"text",label:"Text"}],name:"data_type",display_name:"data_type",type:"str",list:!1,field_type:"select"},database:{required:!0,placeholder:"",show:!0,value:"",options:[],name:"database",display_name:"database",type:"str",list:!1,field_type:"select"},count:{required:!0,placeholder:"",show:!1,value:5,name:"count",display_name:"count",type:"str",list:!1,field_type:"number"},output_type:{required:!0,placeholder:"",show:!1,value:"text",options:[{value:"text",label:"Text"},{value:"list",label:"List"}],name:"output_type",display_name:"output_type",type:"str",list:!1,field_type:"select"},output:{required:!0,placeholder:"",show:!1,value:[],name:"output",display_name:"output",type:"list|str",list:!1,field_type:"",is_output:!0}}}}const sS=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:qd},Symbol.toStringTag,{value:"Module"})),uS={__name:"Search",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=Jo(),{userDatabases:o}=Qt(n),a=F(t.data.template),l=qd();return Object.entries(l.template).forEach(([r,i])=>{a.value[r]=a.value[r]||i,i.is_output&&(a.value[r].is_output=!0)}),a.value.database.options=o.value.filter(r=>r.status=="VALID").map(r=>({value:r.vid,label:r.name})),(r,i)=>(k(),A(Pe,{nodeId:e.id,fieldsData:a.value,translatePrefix:"components.nodes.vectorDb.Search",debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/vector-db#h2-8"},null,8,["nodeId","fieldsData","debug"]))}},cS=Object.freeze(Object.defineProperty({__proto__:null,default:uS},Symbol.toStringTag,{value:"Module"}));function Rd(){return{description:"description",task_name:"web_crawlers.bilibili_crawler",has_inputs:!0,template:{url_or_bvid:{required:!0,placeholder:"",show:!0,value:"",name:"url_or_bvid",display_name:"url_or_bvid",type:"str",clear_after_run:!0,list:!1,field_type:"input"},output_type:{required:!1,placeholder:"",show:!1,value:"str",options:[{value:"str",label:"str"},{value:"list",label:"list"}],name:"output_type",display_name:"output_type",type:"str",clear_after_run:!1,list:!0,field_type:"select"},output_subtitle:{required:!0,placeholder:"",show:!1,value:"",name:"output_subtitle",display_name:"output_subtitle",type:"str|dict",clear_after_run:!0,list:!1,field_type:"textarea",is_output:!0},output_title:{required:!0,placeholder:"",show:!1,value:"",name:"output_title",display_name:"output_title",type:"str|dict",clear_after_run:!0,list:!1,field_type:"textarea",is_output:!0}}}}const dS=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Rd},Symbol.toStringTag,{value:"Module"})),pS={__name:"BilibiliCrawler",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=Rd();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,documentLink:"https://vectorvein.com/help/docs/web-crawlers#h2-0",translatePrefix:"components.nodes.webCrawlers.BilibiliCrawler"},null,8,["nodeId","debug","fieldsData"]))}},fS=Object.freeze(Object.defineProperty({__proto__:null,default:pS},Symbol.toStringTag,{value:"Module"}));function Md(){return{description:"description",task_name:"web_crawlers.text_crawler",has_inputs:!0,template:{url:{required:!0,placeholder:"https://example.com",show:!0,value:"",name:"url",display_name:"url",type:"str",list:!1,field_type:"input"},output_type:{required:!1,placeholder:"",show:!1,value:"text",options:[{value:"text",label:"Text"}],name:"output_type",display_name:"output_type",type:"str",clear_after_run:!1,list:!0,field_type:"select"},output_text:{required:!0,placeholder:"",show:!1,value:"",name:"output_text",display_name:"output_text",type:"str|dict",list:!1,field_type:"textarea",is_output:!0},output_title:{required:!0,placeholder:"",show:!1,value:"",name:"output_title",display_name:"output_title",type:"str|dict",list:!1,field_type:"textarea",is_output:!0}}}}const hS=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Md},Symbol.toStringTag,{value:"Module"})),mS={__name:"TextCrawler",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=Md();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,debug:t.data.debug,documentLink:"https://vectorvein.com/help/docs/web-crawlers#h2-4",fieldsData:n.value,translatePrefix:"components.nodes.webCrawlers.TextCrawler"},null,8,["nodeId","debug","fieldsData"]))}},vS=Object.freeze(Object.defineProperty({__proto__:null,default:mS},Symbol.toStringTag,{value:"Module"}));function Id(){return{description:"description",task_name:"web_crawlers.youtube_crawler",has_inputs:!0,template:{url_or_video_id:{required:!0,placeholder:"",show:!0,value:"",name:"url_or_video_id",display_name:"url_or_video_id",type:"str",list:!1,field_type:"input"},get_comments:{required:!0,placeholder:"",show:!1,value:!1,name:"get_comments",display_name:"get_comments",type:"bool",list:!1,field_type:"checkbox"},comments_type:{required:!0,placeholder:"",show:!1,value:"text_only",options:[{value:"text_only",label:"text_only"},{value:"detailed",label:"detailed"}],name:"comments_type",display_name:"comments_type",type:"bool",list:!1,field_type:"radio"},output_type:{required:!1,placeholder:"",show:!1,value:"str",options:[{value:"str",label:"str"},{value:"list",label:"list"}],name:"output_type",display_name:"output_type",type:"str",clear_after_run:!1,list:!0,field_type:"select"},output_subtitle:{required:!0,placeholder:"",show:!1,value:"",name:"output_subtitle",display_name:"output_subtitle",type:"str|dict",list:!1,field_type:"textarea",is_output:!0},output_title:{required:!0,placeholder:"",show:!1,value:"",name:"output_title",display_name:"output_title",type:"str|dict",list:!1,field_type:"textarea",is_output:!0},output_comments:{required:!0,placeholder:"",show:!1,value:"",name:"output_comments",display_name:"output_comments",type:"str|dict",list:!1,field_type:"textarea",is_output:!0}}}}const _S=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:Id},Symbol.toStringTag,{value:"Module"})),gS={__name:"YoutubeCrawler",props:{id:{type:String,required:!0},data:{type:Object,required:!0}},setup(e){const t=e,n=F(t.data.template),o=Id();return Object.entries(o.template).forEach(([a,l])=>{n.value[a]=n.value[a]||l,l.is_output&&(n.value[a].is_output=!0)}),(a,l)=>(k(),A(Pe,{nodeId:e.id,debug:t.data.debug,fieldsData:n.value,documentLink:"https://vectorvein.com/help/docs/web-crawlers#h2-8",translatePrefix:"components.nodes.webCrawlers.YoutubeCrawler"},null,8,["nodeId","debug","fieldsData"]))}},yS=Object.freeze(Object.defineProperty({__proto__:null,default:gS},Symbol.toStringTag,{value:"Module"}));function OS(){return{description:"description",task_name:"file_processing.file_loader",has_inputs:!0,template:{files:{required:!0,placeholder:"",show:!0,multiline:!0,value:[],password:!1,name:"files",display_name:"files",type:"str",clear_after_run:!0,list:!1,field_type:"file"},output:{required:!0,placeholder:"",show:!1,multiline:!0,value:"",password:!1,name:"output",display_name:"output",type:"str",clear_after_run:!0,list:!1,field_type:"",is_output:!0}}}}const bS=Object.freeze(Object.defineProperty({__proto__:null,createTemplateData:OS},Symbol.toStringTag,{value:"Module"}));let ga;const wS=new Uint8Array(16);function SS(){if(!ga&&(ga=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ga))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ga(wS)}const xS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ps={randomUUID:xS};function Ds(e,t,n){if(Ps.randomUUID&&!t&&!e)return Ps.randomUUID();e=e||{};const o=e.random||(e.rng||SS)();return o[6]=o[6]&15|64,o[8]=o[8]&63|128,bf(o)}var $S={value:()=>{}};function hi(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Ra(n)}function Ra(e){this._=e}function kS(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",a=n.indexOf(".");if(a>=0&&(o=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Ra.prototype=hi.prototype={constructor:Ra,on:function(e,t){var n=this._,o=kS(e+"",n),a,l=-1,r=o.length;if(arguments.length<2){for(;++l<r;)if((a=(e=o[l]).type)&&(a=TS(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<r;)if(a=(e=o[l]).type)n[a]=Cs(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Cs(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ra(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),o=0,a,l;o<a;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],o=0,a=l.length;o<a;++o)l[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],a=0,l=o.length;a<l;++a)o[a].value.apply(t,n)}};function TS(e,t){for(var n=0,o=e.length,a;n<o;++n)if((a=e[n]).name===t)return a.value}function Cs(e,t,n){for(var o=0,a=e.length;o<a;++o)if(e[o].name===t){e[o]=$S,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Pr="http://www.w3.org/1999/xhtml";const zs={svg:"http://www.w3.org/2000/svg",xhtml:Pr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Dl(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),zs.hasOwnProperty(t)?{space:zs[t],local:e}:e}function ES(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Pr&&t.documentElement.namespaceURI===Pr?t.createElement(e):t.createElementNS(n,e)}}function QS(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Vd(e){var t=Dl(e);return(t.local?QS:ES)(t)}function PS(){}function mi(e){return e==null?PS:function(){return this.querySelector(e)}}function DS(e){typeof e!="function"&&(e=mi(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var l=t[a],r=l.length,i=o[a]=new Array(r),s,u,c=0;c<r;++c)(s=l[c])&&(u=e.call(s,s.__data__,c,l))&&("__data__"in s&&(u.__data__=s.__data__),i[c]=u);return new Ot(o,this._parents)}function CS(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function zS(){return[]}function Ad(e){return e==null?zS:function(){return this.querySelectorAll(e)}}function NS(e){return function(){return CS(e.apply(this,arguments))}}function qS(e){typeof e=="function"?e=NS(e):e=Ad(e);for(var t=this._groups,n=t.length,o=[],a=[],l=0;l<n;++l)for(var r=t[l],i=r.length,s,u=0;u<i;++u)(s=r[u])&&(o.push(e.call(s,s.__data__,u,r)),a.push(s));return new Ot(o,a)}function Xd(e){return function(){return this.matches(e)}}function Ud(e){return function(t){return t.matches(e)}}var RS=Array.prototype.find;function MS(e){return function(){return RS.call(this.children,e)}}function IS(){return this.firstElementChild}function VS(e){return this.select(e==null?IS:MS(typeof e=="function"?e:Ud(e)))}var AS=Array.prototype.filter;function XS(){return Array.from(this.children)}function US(e){return function(){return AS.call(this.children,e)}}function WS(e){return this.selectAll(e==null?XS:US(typeof e=="function"?e:Ud(e)))}function jS(e){typeof e!="function"&&(e=Xd(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var l=t[a],r=l.length,i=o[a]=[],s,u=0;u<r;++u)(s=l[u])&&e.call(s,s.__data__,u,l)&&i.push(s);return new Ot(o,this._parents)}function Wd(e){return new Array(e.length)}function FS(){return new Ot(this._enter||this._groups.map(Wd),this._parents)}function tl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}tl.prototype={constructor:tl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function LS(e){return function(){return e}}function GS(e,t,n,o,a,l){for(var r=0,i,s=t.length,u=l.length;r<u;++r)(i=t[r])?(i.__data__=l[r],o[r]=i):n[r]=new tl(e,l[r]);for(;r<s;++r)(i=t[r])&&(a[r]=i)}function BS(e,t,n,o,a,l,r){var i,s,u=new Map,c=t.length,d=l.length,f=new Array(c),p;for(i=0;i<c;++i)(s=t[i])&&(f[i]=p=r.call(s,s.__data__,i,t)+"",u.has(p)?a[i]=s:u.set(p,s));for(i=0;i<d;++i)p=r.call(e,l[i],i,l)+"",(s=u.get(p))?(o[i]=s,s.__data__=l[i],u.delete(p)):n[i]=new tl(e,l[i]);for(i=0;i<c;++i)(s=t[i])&&u.get(f[i])===s&&(a[i]=s)}function HS(e){return e.__data__}function YS(e,t){if(!arguments.length)return Array.from(this,HS);var n=t?BS:GS,o=this._parents,a=this._groups;typeof e!="function"&&(e=LS(e));for(var l=a.length,r=new Array(l),i=new Array(l),s=new Array(l),u=0;u<l;++u){var c=o[u],d=a[u],f=d.length,p=ZS(e.call(c,c&&c.__data__,u,o)),_=p.length,b=i[u]=new Array(_),h=r[u]=new Array(_),v=s[u]=new Array(f);n(c,d,b,h,v,p,t);for(var T=0,Q=0,y,$;T<_;++T)if(y=b[T]){for(T>=Q&&(Q=T+1);!($=h[Q])&&++Q<_;);y._next=$||null}}return r=new Ot(r,o),r._enter=i,r._exit=s,r}function ZS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function JS(){return new Ot(this._exit||this._groups.map(Wd),this._parents)}function KS(e,t,n){var o=this.enter(),a=this,l=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?l.remove():n(l),o&&a?o.merge(a).order():a}function ex(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,a=n.length,l=o.length,r=Math.min(a,l),i=new Array(a),s=0;s<r;++s)for(var u=n[s],c=o[s],d=u.length,f=i[s]=new Array(d),p,_=0;_<d;++_)(p=u[_]||c[_])&&(f[_]=p);for(;s<a;++s)i[s]=n[s];return new Ot(i,this._parents)}function tx(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],a=o.length-1,l=o[a],r;--a>=0;)(r=o[a])&&(l&&r.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(r,l),l=r);return this}function nx(e){e||(e=ox);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,a=new Array(o),l=0;l<o;++l){for(var r=n[l],i=r.length,s=a[l]=new Array(i),u,c=0;c<i;++c)(u=r[c])&&(s[c]=u);s.sort(t)}return new Ot(a,this._parents).order()}function ox(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ax(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function lx(){return Array.from(this)}function rx(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,l=o.length;a<l;++a){var r=o[a];if(r)return r}return null}function ix(){let e=0;for(const t of this)++e;return e}function sx(){return!this.node()}function ux(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var a=t[n],l=0,r=a.length,i;l<r;++l)(i=a[l])&&e.call(i,i.__data__,l,a);return this}function cx(e){return function(){this.removeAttribute(e)}}function dx(e){return function(){this.removeAttributeNS(e.space,e.local)}}function px(e,t){return function(){this.setAttribute(e,t)}}function fx(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function hx(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function mx(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function vx(e,t){var n=Dl(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?dx:cx:typeof t=="function"?n.local?mx:hx:n.local?fx:px)(n,t))}function jd(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _x(e){return function(){this.style.removeProperty(e)}}function gx(e,t,n){return function(){this.style.setProperty(e,t,n)}}function yx(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Ox(e,t,n){return arguments.length>1?this.each((t==null?_x:typeof t=="function"?yx:gx)(e,t,n??"")):ho(this.node(),e)}function ho(e,t){return e.style.getPropertyValue(t)||jd(e).getComputedStyle(e,null).getPropertyValue(t)}function bx(e){return function(){delete this[e]}}function wx(e,t){return function(){this[e]=t}}function Sx(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function xx(e,t){return arguments.length>1?this.each((t==null?bx:typeof t=="function"?Sx:wx)(e,t)):this.node()[e]}function Fd(e){return e.trim().split(/^|\s+/)}function vi(e){return e.classList||new Ld(e)}function Ld(e){this._node=e,this._names=Fd(e.getAttribute("class")||"")}Ld.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Gd(e,t){for(var n=vi(e),o=-1,a=t.length;++o<a;)n.add(t[o])}function Bd(e,t){for(var n=vi(e),o=-1,a=t.length;++o<a;)n.remove(t[o])}function $x(e){return function(){Gd(this,e)}}function kx(e){return function(){Bd(this,e)}}function Tx(e,t){return function(){(t.apply(this,arguments)?Gd:Bd)(this,e)}}function Ex(e,t){var n=Fd(e+"");if(arguments.length<2){for(var o=vi(this.node()),a=-1,l=n.length;++a<l;)if(!o.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?Tx:t?$x:kx)(n,t))}function Qx(){this.textContent=""}function Px(e){return function(){this.textContent=e}}function Dx(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Cx(e){return arguments.length?this.each(e==null?Qx:(typeof e=="function"?Dx:Px)(e)):this.node().textContent}function zx(){this.innerHTML=""}function Nx(e){return function(){this.innerHTML=e}}function qx(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Rx(e){return arguments.length?this.each(e==null?zx:(typeof e=="function"?qx:Nx)(e)):this.node().innerHTML}function Mx(){this.nextSibling&&this.parentNode.appendChild(this)}function Ix(){return this.each(Mx)}function Vx(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ax(){return this.each(Vx)}function Xx(e){var t=typeof e=="function"?e:Vd(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ux(){return null}function Wx(e,t){var n=typeof e=="function"?e:Vd(e),o=t==null?Ux:typeof t=="function"?t:mi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function jx(){var e=this.parentNode;e&&e.removeChild(this)}function Fx(){return this.each(jx)}function Lx(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Gx(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Bx(e){return this.select(e?Gx:Lx)}function Hx(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Yx(e){return function(t){e.call(this,t,this.__data__)}}function Zx(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Jx(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,a=t.length,l;n<a;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++o]=l;++o?t.length=o:delete this.__on}}}function Kx(e,t,n){return function(){var o=this.__on,a,l=Yx(t);if(o){for(var r=0,i=o.length;r<i;++r)if((a=o[r]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=t;return}}this.addEventListener(e.type,l,n),a={type:e.type,name:e.name,value:t,listener:l,options:n},o?o.push(a):this.__on=[a]}}function e$(e,t,n){var o=Zx(e+""),a,l=o.length,r;if(arguments.length<2){var i=this.node().__on;if(i){for(var s=0,u=i.length,c;s<u;++s)for(a=0,c=i[s];a<l;++a)if((r=o[a]).type===c.type&&r.name===c.name)return c.value}return}for(i=t?Kx:Jx,a=0;a<l;++a)this.each(i(o[a],t,n));return this}function Hd(e,t,n){var o=jd(e),a=o.CustomEvent;typeof a=="function"?a=new a(t,n):(a=o.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function t$(e,t){return function(){return Hd(this,e,t)}}function n$(e,t){return function(){return Hd(this,e,t.apply(this,arguments))}}function o$(e,t){return this.each((typeof t=="function"?n$:t$)(e,t))}function*a$(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],a=0,l=o.length,r;a<l;++a)(r=o[a])&&(yield r)}var Yd=[null];function Ot(e,t){this._groups=e,this._parents=t}function ta(){return new Ot([[document.documentElement]],Yd)}function l$(){return this}Ot.prototype=ta.prototype={constructor:Ot,select:DS,selectAll:qS,selectChild:VS,selectChildren:WS,filter:jS,data:YS,enter:FS,exit:JS,join:KS,merge:ex,selection:l$,order:tx,sort:nx,call:ax,nodes:lx,node:rx,size:ix,empty:sx,each:ux,attr:vx,style:Ox,property:xx,classed:Ex,text:Cx,html:Rx,raise:Ix,lower:Ax,append:Xx,insert:Wx,remove:Fx,clone:Bx,datum:Hx,on:e$,dispatch:o$,[Symbol.iterator]:a$};function vn(e){return typeof e=="string"?new Ot([[document.querySelector(e)]],[document.documentElement]):new Ot([[e]],Yd)}function r$(e){let t;for(;t=e.sourceEvent;)e=t;return e}function dn(e,t){if(e=r$(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const Dr={capture:!0,passive:!1};function Cr(e){e.preventDefault(),e.stopImmediatePropagation()}function i$(e){var t=e.document.documentElement,n=vn(e).on("dragstart.drag",Cr,Dr);"onselectstart"in t?n.on("selectstart.drag",Cr,Dr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function s$(e,t){var n=e.document.documentElement,o=vn(e).on("dragstart.drag",null);t&&(o.on("click.drag",Cr,Dr),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function _i(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Zd(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function na(){}var Bo=.7,nl=1/Bo,ro="\\s*([+-]?\\d+)\\s*",Ho="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",It="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u$=/^#([0-9a-f]{3,8})$/,c$=new RegExp(`^rgb\\(${ro},${ro},${ro}\\)$`),d$=new RegExp(`^rgb\\(${It},${It},${It}\\)$`),p$=new RegExp(`^rgba\\(${ro},${ro},${ro},${Ho}\\)$`),f$=new RegExp(`^rgba\\(${It},${It},${It},${Ho}\\)$`),h$=new RegExp(`^hsl\\(${Ho},${It},${It}\\)$`),m$=new RegExp(`^hsla\\(${Ho},${It},${It},${Ho}\\)$`),Ns={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_i(na,Yo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:qs,formatHex:qs,formatHex8:v$,formatHsl:_$,formatRgb:Rs,toString:Rs});function qs(){return this.rgb().formatHex()}function v$(){return this.rgb().formatHex8()}function _$(){return Jd(this).formatHsl()}function Rs(){return this.rgb().formatRgb()}function Yo(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=u$.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ms(t):n===3?new ht(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ya(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ya(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=c$.exec(e))?new ht(t[1],t[2],t[3],1):(t=d$.exec(e))?new ht(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=p$.exec(e))?ya(t[1],t[2],t[3],t[4]):(t=f$.exec(e))?ya(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=h$.exec(e))?As(t[1],t[2]/100,t[3]/100,1):(t=m$.exec(e))?As(t[1],t[2]/100,t[3]/100,t[4]):Ns.hasOwnProperty(e)?Ms(Ns[e]):e==="transparent"?new ht(NaN,NaN,NaN,0):null}function Ms(e){return new ht(e>>16&255,e>>8&255,e&255,1)}function ya(e,t,n,o){return o<=0&&(e=t=n=NaN),new ht(e,t,n,o)}function g$(e){return e instanceof na||(e=Yo(e)),e?(e=e.rgb(),new ht(e.r,e.g,e.b,e.opacity)):new ht}function zr(e,t,n,o){return arguments.length===1?g$(e):new ht(e,t,n,o??1)}function ht(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}_i(ht,zr,Zd(na,{brighter(e){return e=e==null?nl:Math.pow(nl,e),new ht(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Bo:Math.pow(Bo,e),new ht(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ht(Mn(this.r),Mn(this.g),Mn(this.b),ol(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Is,formatHex:Is,formatHex8:y$,formatRgb:Vs,toString:Vs}));function Is(){return`#${Cn(this.r)}${Cn(this.g)}${Cn(this.b)}`}function y$(){return`#${Cn(this.r)}${Cn(this.g)}${Cn(this.b)}${Cn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Vs(){const e=ol(this.opacity);return`${e===1?"rgb(":"rgba("}${Mn(this.r)}, ${Mn(this.g)}, ${Mn(this.b)}${e===1?")":`, ${e})`}`}function ol(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Mn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Cn(e){return e=Mn(e),(e<16?"0":"")+e.toString(16)}function As(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Et(e,t,n,o)}function Jd(e){if(e instanceof Et)return new Et(e.h,e.s,e.l,e.opacity);if(e instanceof na||(e=Yo(e)),!e)return new Et;if(e instanceof Et)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,a=Math.min(t,n,o),l=Math.max(t,n,o),r=NaN,i=l-a,s=(l+a)/2;return i?(t===l?r=(n-o)/i+(n<o)*6:n===l?r=(o-t)/i+2:r=(t-n)/i+4,i/=s<.5?l+a:2-l-a,r*=60):i=s>0&&s<1?0:r,new Et(r,i,s,e.opacity)}function O$(e,t,n,o){return arguments.length===1?Jd(e):new Et(e,t,n,o??1)}function Et(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}_i(Et,O$,Zd(na,{brighter(e){return e=e==null?nl:Math.pow(nl,e),new Et(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Bo:Math.pow(Bo,e),new Et(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,a=2*n-o;return new ht(Zl(e>=240?e-240:e+120,a,o),Zl(e,a,o),Zl(e<120?e+240:e-120,a,o),this.opacity)},clamp(){return new Et(Xs(this.h),Oa(this.s),Oa(this.l),ol(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ol(this.opacity);return`${e===1?"hsl(":"hsla("}${Xs(this.h)}, ${Oa(this.s)*100}%, ${Oa(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Xs(e){return e=(e||0)%360,e<0?e+360:e}function Oa(e){return Math.max(0,Math.min(1,e||0))}function Zl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Kd=e=>()=>e;function b$(e,t){return function(n){return e+n*t}}function w$(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function S$(e){return(e=+e)==1?ep:function(t,n){return n-t?w$(t,n,e):Kd(isNaN(t)?n:t)}}function ep(e,t){var n=t-e;return n?b$(e,n):Kd(isNaN(e)?t:e)}const Us=function e(t){var n=S$(t);function o(a,l){var r=n((a=zr(a)).r,(l=zr(l)).r),i=n(a.g,l.g),s=n(a.b,l.b),u=ep(a.opacity,l.opacity);return function(c){return a.r=r(c),a.g=i(c),a.b=s(c),a.opacity=u(c),a+""}}return o.gamma=e,o}(1);function fn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Nr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jl=new RegExp(Nr.source,"g");function x$(e){return function(){return e}}function $$(e){return function(t){return e(t)+""}}function k$(e,t){var n=Nr.lastIndex=Jl.lastIndex=0,o,a,l,r=-1,i=[],s=[];for(e=e+"",t=t+"";(o=Nr.exec(e))&&(a=Jl.exec(t));)(l=a.index)>n&&(l=t.slice(n,l),i[r]?i[r]+=l:i[++r]=l),(o=o[0])===(a=a[0])?i[r]?i[r]+=a:i[++r]=a:(i[++r]=null,s.push({i:r,x:fn(o,a)})),n=Jl.lastIndex;return n<t.length&&(l=t.slice(n),i[r]?i[r]+=l:i[++r]=l),i.length<2?s[0]?$$(s[0].x):x$(t):(t=s.length,function(u){for(var c=0,d;c<t;++c)i[(d=s[c]).i]=d.x(u);return i.join("")})}var Ws=180/Math.PI,qr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tp(e,t,n,o,a,l){var r,i,s;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(i=Math.sqrt(n*n+o*o))&&(n/=i,o/=i,s/=i),e*o<t*n&&(e=-e,t=-t,s=-s,r=-r),{translateX:a,translateY:l,rotate:Math.atan2(t,e)*Ws,skewX:Math.atan(s)*Ws,scaleX:r,scaleY:i}}var ba;function T$(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?qr:tp(t.a,t.b,t.c,t.d,t.e,t.f)}function E$(e){return e==null||(ba||(ba=document.createElementNS("http://www.w3.org/2000/svg","g")),ba.setAttribute("transform",e),!(e=ba.transform.baseVal.consolidate()))?qr:(e=e.matrix,tp(e.a,e.b,e.c,e.d,e.e,e.f))}function np(e,t,n,o){function a(u){return u.length?u.pop()+" ":""}function l(u,c,d,f,p,_){if(u!==d||c!==f){var b=p.push("translate(",null,t,null,n);_.push({i:b-4,x:fn(u,d)},{i:b-2,x:fn(c,f)})}else(d||f)&&p.push("translate("+d+t+f+n)}function r(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(a(d)+"rotate(",null,o)-2,x:fn(u,c)})):c&&d.push(a(d)+"rotate("+c+o)}function i(u,c,d,f){u!==c?f.push({i:d.push(a(d)+"skewX(",null,o)-2,x:fn(u,c)}):c&&d.push(a(d)+"skewX("+c+o)}function s(u,c,d,f,p,_){if(u!==d||c!==f){var b=p.push(a(p)+"scale(",null,",",null,")");_.push({i:b-4,x:fn(u,d)},{i:b-2,x:fn(c,f)})}else(d!==1||f!==1)&&p.push(a(p)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),l(u.translateX,u.translateY,c.translateX,c.translateY,d,f),r(u.rotate,c.rotate,d,f),i(u.skewX,c.skewX,d,f),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(p){for(var _=-1,b=f.length,h;++_<b;)d[(h=f[_]).i]=h.x(p);return d.join("")}}}var Q$=np(T$,"px, ","px)","deg)"),P$=np(E$,", ",")",")"),D$=1e-12;function js(e){return((e=Math.exp(e))+1/e)/2}function C$(e){return((e=Math.exp(e))-1/e)/2}function z$(e){return((e=Math.exp(2*e))-1)/(e+1)}const N$=function e(t,n,o){function a(l,r){var i=l[0],s=l[1],u=l[2],c=r[0],d=r[1],f=r[2],p=c-i,_=d-s,b=p*p+_*_,h,v;if(b<D$)v=Math.log(f/u)/t,h=function(x){return[i+x*p,s+x*_,u*Math.exp(t*x*v)]};else{var T=Math.sqrt(b),Q=(f*f-u*u+o*b)/(2*u*n*T),y=(f*f-u*u-o*b)/(2*f*n*T),$=Math.log(Math.sqrt(Q*Q+1)-Q),E=Math.log(Math.sqrt(y*y+1)-y);v=(E-$)/t,h=function(x){var X=x*v,U=js($),V=u/(n*T)*(U*z$(t*X+$)-C$($));return[i+V*p,s+V*_,u*U/js(t*X+$)]}}return h.duration=v*1e3*t/Math.SQRT2,h}return a.rho=function(l){var r=Math.max(.001,+l),i=r*r,s=i*i;return e(r,i,s)},a}(Math.SQRT2,2,4);var mo=0,$o=0,bo=0,op=1e3,al,ko,ll=0,Ln=0,Cl=0,Zo=typeof performance=="object"&&performance.now?performance:Date,ap=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function gi(){return Ln||(ap(q$),Ln=Zo.now()+Cl)}function q$(){Ln=0}function rl(){this._call=this._time=this._next=null}rl.prototype=lp.prototype={constructor:rl,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?gi():+n)+(t==null?0:+t),!this._next&&ko!==this&&(ko?ko._next=this:al=this,ko=this),this._call=e,this._time=n,Rr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rr())}};function lp(e,t,n){var o=new rl;return o.restart(e,t,n),o}function R$(){gi(),++mo;for(var e=al,t;e;)(t=Ln-e._time)>=0&&e._call.call(void 0,t),e=e._next;--mo}function Fs(){Ln=(ll=Zo.now())+Cl,mo=$o=0;try{R$()}finally{mo=0,I$(),Ln=0}}function M$(){var e=Zo.now(),t=e-ll;t>op&&(Cl-=t,ll=e)}function I$(){for(var e,t=al,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:al=n);ko=e,Rr(o)}function Rr(e){if(!mo){$o&&($o=clearTimeout($o));var t=e-Ln;t>24?(e<1/0&&($o=setTimeout(Fs,e-Zo.now()-Cl)),bo&&(bo=clearInterval(bo))):(bo||(ll=Zo.now(),bo=setInterval(M$,op)),mo=1,ap(Fs))}}function Ls(e,t,n){var o=new rl;return t=t==null?0:+t,o.restart(a=>{o.stop(),e(a+t)},t,n),o}var V$=hi("start","end","cancel","interrupt"),A$=[],rp=0,Gs=1,Mr=2,Ma=3,Bs=4,Ir=5,Ia=6;function zl(e,t,n,o,a,l){var r=e.__transition;if(!r)e.__transition={};else if(n in r)return;X$(e,n,{name:t,index:o,group:a,on:V$,tween:A$,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:rp})}function yi(e,t){var n=Dt(e,t);if(n.state>rp)throw new Error("too late; already scheduled");return n}function Wt(e,t){var n=Dt(e,t);if(n.state>Ma)throw new Error("too late; already running");return n}function Dt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function X$(e,t,n){var o=e.__transition,a;o[t]=n,n.timer=lp(l,0,n.time);function l(u){n.state=Gs,n.timer.restart(r,n.delay,n.time),n.delay<=u&&r(u-n.delay)}function r(u){var c,d,f,p;if(n.state!==Gs)return s();for(c in o)if(p=o[c],p.name===n.name){if(p.state===Ma)return Ls(r);p.state===Bs?(p.state=Ia,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[c]):+c<t&&(p.state=Ia,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete o[c])}if(Ls(function(){n.state===Ma&&(n.state=Bs,n.timer.restart(i,n.delay,n.time),i(u))}),n.state=Mr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Mr){for(n.state=Ma,a=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(a[++d]=p);a.length=d+1}}function i(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=Ir,1),d=-1,f=a.length;++d<f;)a[d].call(e,c);n.state===Ir&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Ia,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Va(e,t){var n=e.__transition,o,a,l=!0,r;if(n){t=t==null?null:t+"";for(r in n){if((o=n[r]).name!==t){l=!1;continue}a=o.state>Mr&&o.state<Ir,o.state=Ia,o.timer.stop(),o.on.call(a?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[r]}l&&delete e.__transition}}function U$(e){return this.each(function(){Va(this,e)})}function W$(e,t){var n,o;return function(){var a=Wt(this,e),l=a.tween;if(l!==n){o=n=l;for(var r=0,i=o.length;r<i;++r)if(o[r].name===t){o=o.slice(),o.splice(r,1);break}}a.tween=o}}function j$(e,t,n){var o,a;if(typeof n!="function")throw new Error;return function(){var l=Wt(this,e),r=l.tween;if(r!==o){a=(o=r).slice();for(var i={name:t,value:n},s=0,u=a.length;s<u;++s)if(a[s].name===t){a[s]=i;break}s===u&&a.push(i)}l.tween=a}}function F$(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Dt(this.node(),n).tween,a=0,l=o.length,r;a<l;++a)if((r=o[a]).name===e)return r.value;return null}return this.each((t==null?W$:j$)(n,e,t))}function Oi(e,t,n){var o=e._id;return e.each(function(){var a=Wt(this,o);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Dt(a,o).value[t]}}function ip(e,t){var n;return(typeof t=="number"?fn:t instanceof Yo?Us:(n=Yo(t))?(t=n,Us):k$)(e,t)}function L$(e){return function(){this.removeAttribute(e)}}function G$(e){return function(){this.removeAttributeNS(e.space,e.local)}}function B$(e,t,n){var o,a=n+"",l;return function(){var r=this.getAttribute(e);return r===a?null:r===o?l:l=t(o=r,n)}}function H$(e,t,n){var o,a=n+"",l;return function(){var r=this.getAttributeNS(e.space,e.local);return r===a?null:r===o?l:l=t(o=r,n)}}function Y$(e,t,n){var o,a,l;return function(){var r,i=n(this),s;return i==null?void this.removeAttribute(e):(r=this.getAttribute(e),s=i+"",r===s?null:r===o&&s===a?l:(a=s,l=t(o=r,i)))}}function Z$(e,t,n){var o,a,l;return function(){var r,i=n(this),s;return i==null?void this.removeAttributeNS(e.space,e.local):(r=this.getAttributeNS(e.space,e.local),s=i+"",r===s?null:r===o&&s===a?l:(a=s,l=t(o=r,i)))}}function J$(e,t){var n=Dl(e),o=n==="transform"?P$:ip;return this.attrTween(e,typeof t=="function"?(n.local?Z$:Y$)(n,o,Oi(this,"attr."+e,t)):t==null?(n.local?G$:L$)(n):(n.local?H$:B$)(n,o,t))}function K$(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ek(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function tk(e,t){var n,o;function a(){var l=t.apply(this,arguments);return l!==o&&(n=(o=l)&&ek(e,l)),n}return a._value=t,a}function nk(e,t){var n,o;function a(){var l=t.apply(this,arguments);return l!==o&&(n=(o=l)&&K$(e,l)),n}return a._value=t,a}function ok(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Dl(e);return this.tween(n,(o.local?tk:nk)(o,t))}function ak(e,t){return function(){yi(this,e).delay=+t.apply(this,arguments)}}function lk(e,t){return t=+t,function(){yi(this,e).delay=t}}function rk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ak:lk)(t,e)):Dt(this.node(),t).delay}function ik(e,t){return function(){Wt(this,e).duration=+t.apply(this,arguments)}}function sk(e,t){return t=+t,function(){Wt(this,e).duration=t}}function uk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ik:sk)(t,e)):Dt(this.node(),t).duration}function ck(e,t){if(typeof t!="function")throw new Error;return function(){Wt(this,e).ease=t}}function dk(e){var t=this._id;return arguments.length?this.each(ck(t,e)):Dt(this.node(),t).ease}function pk(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Wt(this,e).ease=n}}function fk(e){if(typeof e!="function")throw new Error;return this.each(pk(this._id,e))}function hk(e){typeof e!="function"&&(e=Xd(e));for(var t=this._groups,n=t.length,o=new Array(n),a=0;a<n;++a)for(var l=t[a],r=l.length,i=o[a]=[],s,u=0;u<r;++u)(s=l[u])&&e.call(s,s.__data__,u,l)&&i.push(s);return new an(o,this._parents,this._name,this._id)}function mk(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,a=n.length,l=Math.min(o,a),r=new Array(o),i=0;i<l;++i)for(var s=t[i],u=n[i],c=s.length,d=r[i]=new Array(c),f,p=0;p<c;++p)(f=s[p]||u[p])&&(d[p]=f);for(;i<o;++i)r[i]=t[i];return new an(r,this._parents,this._name,this._id)}function vk(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function _k(e,t,n){var o,a,l=vk(t)?yi:Wt;return function(){var r=l(this,e),i=r.on;i!==o&&(a=(o=i).copy()).on(t,n),r.on=a}}function gk(e,t){var n=this._id;return arguments.length<2?Dt(this.node(),n).on.on(e):this.each(_k(n,e,t))}function yk(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ok(){return this.on("end.remove",yk(this._id))}function bk(e){var t=this._name,n=this._id;typeof e!="function"&&(e=mi(e));for(var o=this._groups,a=o.length,l=new Array(a),r=0;r<a;++r)for(var i=o[r],s=i.length,u=l[r]=new Array(s),c,d,f=0;f<s;++f)(c=i[f])&&(d=e.call(c,c.__data__,f,i))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,zl(u[f],t,n,f,u,Dt(c,n)));return new an(l,this._parents,t,n)}function wk(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ad(e));for(var o=this._groups,a=o.length,l=[],r=[],i=0;i<a;++i)for(var s=o[i],u=s.length,c,d=0;d<u;++d)if(c=s[d]){for(var f=e.call(c,c.__data__,d,s),p,_=Dt(c,n),b=0,h=f.length;b<h;++b)(p=f[b])&&zl(p,t,n,b,f,_);l.push(f),r.push(c)}return new an(l,r,t,n)}var Sk=ta.prototype.constructor;function xk(){return new Sk(this._groups,this._parents)}function $k(e,t){var n,o,a;return function(){var l=ho(this,e),r=(this.style.removeProperty(e),ho(this,e));return l===r?null:l===n&&r===o?a:a=t(n=l,o=r)}}function sp(e){return function(){this.style.removeProperty(e)}}function kk(e,t,n){var o,a=n+"",l;return function(){var r=ho(this,e);return r===a?null:r===o?l:l=t(o=r,n)}}function Tk(e,t,n){var o,a,l;return function(){var r=ho(this,e),i=n(this),s=i+"";return i==null&&(s=i=(this.style.removeProperty(e),ho(this,e))),r===s?null:r===o&&s===a?l:(a=s,l=t(o=r,i))}}function Ek(e,t){var n,o,a,l="style."+t,r="end."+l,i;return function(){var s=Wt(this,e),u=s.on,c=s.value[l]==null?i||(i=sp(t)):void 0;(u!==n||a!==c)&&(o=(n=u).copy()).on(r,a=c),s.on=o}}function Qk(e,t,n){var o=(e+="")=="transform"?Q$:ip;return t==null?this.styleTween(e,$k(e,o)).on("end.style."+e,sp(e)):typeof t=="function"?this.styleTween(e,Tk(e,o,Oi(this,"style."+e,t))).each(Ek(this._id,e)):this.styleTween(e,kk(e,o,t),n).on("end.style."+e,null)}function Pk(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Dk(e,t,n){var o,a;function l(){var r=t.apply(this,arguments);return r!==a&&(o=(a=r)&&Pk(e,r,n)),o}return l._value=t,l}function Ck(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Dk(e,t,n??""))}function zk(e){return function(){this.textContent=e}}function Nk(e){return function(){var t=e(this);this.textContent=t??""}}function qk(e){return this.tween("text",typeof e=="function"?Nk(Oi(this,"text",e)):zk(e==null?"":e+""))}function Rk(e){return function(t){this.textContent=e.call(this,t)}}function Mk(e){var t,n;function o(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&Rk(a)),t}return o._value=e,o}function Ik(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Mk(e))}function Vk(){for(var e=this._name,t=this._id,n=up(),o=this._groups,a=o.length,l=0;l<a;++l)for(var r=o[l],i=r.length,s,u=0;u<i;++u)if(s=r[u]){var c=Dt(s,t);zl(s,e,n,u,r,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new an(o,this._parents,e,n)}function Ak(){var e,t,n=this,o=n._id,a=n.size();return new Promise(function(l,r){var i={value:r},s={value:function(){--a===0&&l()}};n.each(function(){var u=Wt(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(i),t._.interrupt.push(i),t._.end.push(s)),u.on=t}),a===0&&l()})}var Xk=0;function an(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function up(){return++Xk}var Lt=ta.prototype;an.prototype={constructor:an,select:bk,selectAll:wk,selectChild:Lt.selectChild,selectChildren:Lt.selectChildren,filter:hk,merge:mk,selection:xk,transition:Vk,call:Lt.call,nodes:Lt.nodes,node:Lt.node,size:Lt.size,empty:Lt.empty,each:Lt.each,on:gk,attr:J$,attrTween:ok,style:Qk,styleTween:Ck,text:qk,textTween:Ik,remove:Ok,tween:F$,delay:rk,duration:uk,ease:dk,easeVarying:fk,end:Ak,[Symbol.iterator]:Lt[Symbol.iterator]};function Uk(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Wk={time:null,delay:0,duration:250,ease:Uk};function jk(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Fk(e){var t,n;e instanceof an?(t=e._id,e=e._name):(t=up(),(n=Wk).time=gi(),e=e==null?null:e+"");for(var o=this._groups,a=o.length,l=0;l<a;++l)for(var r=o[l],i=r.length,s,u=0;u<i;++u)(s=r[u])&&zl(s,e,t,u,r,n||jk(s,t));return new an(o,this._parents,e,t)}ta.prototype.interrupt=U$;ta.prototype.transition=Fk;const wa=e=>()=>e;function Lk(e,{sourceEvent:t,target:n,transform:o,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:a}})}function en(e,t,n){this.k=e,this.x=t,this.y=n}en.prototype={constructor:en,scale:function(e){return e===1?this:new en(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new en(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var bi=new en(1,0,0);en.prototype;function Kl(e){e.stopImmediatePropagation()}function wo(e){e.preventDefault(),e.stopImmediatePropagation()}function Gk(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Bk(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Hs(){return this.__zoom||bi}function Hk(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Yk(){return navigator.maxTouchPoints||"ontouchstart"in this}function Zk(e,t,n){var o=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],l=e.invertY(t[0][1])-n[0][1],r=e.invertY(t[1][1])-n[1][1];return e.translate(a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a),r>l?(l+r)/2:Math.min(0,l)||Math.max(0,r))}function Jk(){var e=Gk,t=Bk,n=Zk,o=Hk,a=Yk,l=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],i=250,s=N$,u=hi("start","zoom","end"),c,d,f,p=500,_=150,b=0,h=10;function v(g){g.property("__zoom",Hs).on("wheel.zoom",X,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",V).filter(a).on("touchstart.zoom",G).on("touchmove.zoom",ee).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(g,D,O,q){var C=g.selection?g.selection():g;C.property("__zoom",Hs),g!==C?$(g,D,O,q):C.interrupt().each(function(){E(this,arguments).event(q).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},v.scaleBy=function(g,D,O,q){v.scaleTo(g,function(){var C=this.__zoom.k,N=typeof D=="function"?D.apply(this,arguments):D;return C*N},O,q)},v.scaleTo=function(g,D,O,q){v.transform(g,function(){var C=t.apply(this,arguments),N=this.__zoom,P=O==null?y(C):typeof O=="function"?O.apply(this,arguments):O,R=N.invert(P),K=typeof D=="function"?D.apply(this,arguments):D;return n(Q(T(N,K),P,R),C,r)},O,q)},v.translateBy=function(g,D,O,q){v.transform(g,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),r)},null,q)},v.translateTo=function(g,D,O,q,C){v.transform(g,function(){var N=t.apply(this,arguments),P=this.__zoom,R=q==null?y(N):typeof q=="function"?q.apply(this,arguments):q;return n(bi.translate(R[0],R[1]).scale(P.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof O=="function"?-O.apply(this,arguments):-O),N,r)},q,C)};function T(g,D){return D=Math.max(l[0],Math.min(l[1],D)),D===g.k?g:new en(D,g.x,g.y)}function Q(g,D,O){var q=D[0]-O[0]*g.k,C=D[1]-O[1]*g.k;return q===g.x&&C===g.y?g:new en(g.k,q,C)}function y(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function $(g,D,O,q){g.on("start.zoom",function(){E(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(q).end()}).tween("zoom",function(){var C=this,N=arguments,P=E(C,N).event(q),R=t.apply(C,N),K=O==null?y(R):typeof O=="function"?O.apply(C,N):O,te=Math.max(R[1][0]-R[0][0],R[1][1]-R[0][1]),L=C.__zoom,ae=typeof D=="function"?D.apply(C,N):D,Y=s(L.invert(K).concat(te/L.k),ae.invert(K).concat(te/ae.k));return function(pe){if(pe===1)pe=ae;else{var re=Y(pe),se=te/re[2];pe=new en(se,K[0]-re[0]*se,K[1]-re[1]*se)}P.zoom(null,pe)}})}function E(g,D,O){return!O&&g.__zooming||new x(g,D)}function x(g,D){this.that=g,this.args=D,this.active=0,this.sourceEvent=null,this.extent=t.apply(g,D),this.taps=0}x.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,D){return this.mouse&&g!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var D=vn(this.that).datum();u.call(g,this.that,new Lk(g,{sourceEvent:this.sourceEvent,target:v,type:g,transform:this.that.__zoom,dispatch:u}),D)}};function X(g,...D){if(!e.apply(this,arguments))return;var O=E(this,D).event(g),q=this.__zoom,C=Math.max(l[0],Math.min(l[1],q.k*Math.pow(2,o.apply(this,arguments)))),N=dn(g);if(O.wheel)(O.mouse[0][0]!==N[0]||O.mouse[0][1]!==N[1])&&(O.mouse[1]=q.invert(O.mouse[0]=N)),clearTimeout(O.wheel);else{if(q.k===C)return;O.mouse=[N,q.invert(N)],Va(this),O.start()}wo(g),O.wheel=setTimeout(P,_),O.zoom("mouse",n(Q(T(q,C),O.mouse[0],O.mouse[1]),O.extent,r));function P(){O.wheel=null,O.end()}}function U(g,...D){if(f||!e.apply(this,arguments))return;var O=g.currentTarget,q=E(this,D,!0).event(g),C=vn(g.view).on("mousemove.zoom",K,!0).on("mouseup.zoom",te,!0),N=dn(g,O),P=g.clientX,R=g.clientY;i$(g.view),Kl(g),q.mouse=[N,this.__zoom.invert(N)],Va(this),q.start();function K(L){if(wo(L),!q.moved){var ae=L.clientX-P,Y=L.clientY-R;q.moved=ae*ae+Y*Y>b}q.event(L).zoom("mouse",n(Q(q.that.__zoom,q.mouse[0]=dn(L,O),q.mouse[1]),q.extent,r))}function te(L){C.on("mousemove.zoom mouseup.zoom",null),s$(L.view,q.moved),wo(L),q.event(L).end()}}function V(g,...D){if(e.apply(this,arguments)){var O=this.__zoom,q=dn(g.changedTouches?g.changedTouches[0]:g,this),C=O.invert(q),N=O.k*(g.shiftKey?.5:2),P=n(Q(T(O,N),q,C),t.apply(this,D),r);wo(g),i>0?vn(this).transition().duration(i).call($,P,q,g):vn(this).call(v.transform,P,q,g)}}function G(g,...D){if(e.apply(this,arguments)){var O=g.touches,q=O.length,C=E(this,D,g.changedTouches.length===q).event(g),N,P,R,K;for(Kl(g),P=0;P<q;++P)R=O[P],K=dn(R,this),K=[K,this.__zoom.invert(K),R.identifier],C.touch0?!C.touch1&&C.touch0[2]!==K[2]&&(C.touch1=K,C.taps=0):(C.touch0=K,N=!0,C.taps=1+!!c);c&&(c=clearTimeout(c)),N&&(C.taps<2&&(d=K[0],c=setTimeout(function(){c=null},p)),Va(this),C.start())}}function ee(g,...D){if(this.__zooming){var O=E(this,D).event(g),q=g.changedTouches,C=q.length,N,P,R,K;for(wo(g),N=0;N<C;++N)P=q[N],R=dn(P,this),O.touch0&&O.touch0[2]===P.identifier?O.touch0[0]=R:O.touch1&&O.touch1[2]===P.identifier&&(O.touch1[0]=R);if(P=O.that.__zoom,O.touch1){var te=O.touch0[0],L=O.touch0[1],ae=O.touch1[0],Y=O.touch1[1],pe=(pe=ae[0]-te[0])*pe+(pe=ae[1]-te[1])*pe,re=(re=Y[0]-L[0])*re+(re=Y[1]-L[1])*re;P=T(P,Math.sqrt(pe/re)),R=[(te[0]+ae[0])/2,(te[1]+ae[1])/2],K=[(L[0]+Y[0])/2,(L[1]+Y[1])/2]}else if(O.touch0)R=O.touch0[0],K=O.touch0[1];else return;O.zoom("touch",n(Q(P,R,K),O.extent,r))}}function B(g,...D){if(this.__zooming){var O=E(this,D).event(g),q=g.changedTouches,C=q.length,N,P;for(Kl(g),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),N=0;N<C;++N)P=q[N],O.touch0&&O.touch0[2]===P.identifier?delete O.touch0:O.touch1&&O.touch1[2]===P.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(P=dn(P,this),Math.hypot(d[0]-P[0],d[1]-P[1])<h)){var R=vn(this).on("dblclick.zoom");R&&R.apply(this,arguments)}}}return v.wheelDelta=function(g){return arguments.length?(o=typeof g=="function"?g:wa(+g),v):o},v.filter=function(g){return arguments.length?(e=typeof g=="function"?g:wa(!!g),v):e},v.touchable=function(g){return arguments.length?(a=typeof g=="function"?g:wa(!!g),v):a},v.extent=function(g){return arguments.length?(t=typeof g=="function"?g:wa([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),v):t},v.scaleExtent=function(g){return arguments.length?(l[0]=+g[0],l[1]=+g[1],v):[l[0],l[1]]},v.translateExtent=function(g){return arguments.length?(r[0][0]=+g[0][0],r[1][0]=+g[1][0],r[0][1]=+g[0][1],r[1][1]=+g[1][1],v):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},v.constrain=function(g){return arguments.length?(n=g,v):n},v.duration=function(g){return arguments.length?(i=+g,v):i},v.interpolate=function(g){return arguments.length?(s=g,v):s},v.on=function(){var g=u.on.apply(u,arguments);return g===u?v:g},v.clickDistance=function(g){return arguments.length?(b=(g=+g)*g,v):Math.sqrt(b)},v.tapDistance=function(g){return arguments.length?(h=+g,v):h},v}const cp=Symbol("MiniMapSlots"),Kk=["id","x","y","rx","ry","width","height","fill","stroke","stroke-width","shape-rendering"],eT={name:"MiniMapNode",compatConfig:{MODE:3}},tT=Me({...eT,props:{id:{},type:{},selected:{type:Boolean},dragging:{type:Boolean},position:{},dimensions:{},borderRadius:{},color:{},shapeRendering:{},strokeColor:{},strokeWidth:{}},emits:["click","dblclick","mouseenter","mousemove","mouseleave"],setup(e,{emit:t}){const n=e,o=On(cp),a=hl(),l=Ue(()=>a.style??{});function r(d){t("click",d)}function i(d){t("dblclick",d)}function s(d){t("mouseenter",d)}function u(d){t("mousemove",d)}function c(d){t("mouseleave",d)}return(d,f)=>w(o)[`node-${n.type}`]?(k(),A(Tn(w(o)[`node-${n.type}`]),Fp(hu({key:0},n)),null,16)):(k(),Z("rect",{key:1,id:d.id,class:et(["vue-flow__minimap-node",{selected:d.selected,dragging:d.dragging}]),x:d.position.x,y:d.position.y,rx:d.borderRadius,ry:d.borderRadius,width:d.dimensions.width,height:d.dimensions.height,fill:d.color||l.value.background||l.value.backgroundColor,stroke:d.strokeColor,"stroke-width":d.strokeWidth,"shape-rendering":d.shapeRendering,onClick:r,onDblclick:i,onMouseenter:s,onMousemove:u,onMouseleave:c},null,42,Kk))}}),nT=["width","height","viewBox","aria-labelledby"],oT=["id"],aT=["d","fill","stroke","stroke-width"],lT={name:"MiniMap",compatConfig:{MODE:3}},rT=Me({...lT,props:{nodeColor:{type:[String,Function],default:"#e2e2e2"},nodeStrokeColor:{type:[String,Function],default:"transparent"},nodeClassName:{type:[String,Function]},nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 240, 240, 0.6)"},maskStrokeColor:{default:"none"},maskStrokeWidth:{default:1},position:{default:"bottom-right"},pannable:{type:Boolean,default:!1},zoomable:{type:Boolean,default:!1},width:{},height:{},ariaLabel:{default:"Vue Flow mini map"},inversePan:{type:Boolean,default:!1},zoomStep:{default:10},offsetScale:{default:5}},emits:["click","nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:t}){const n=cu(),o=hl(),a=200,l=150,{id:r,edges:i,viewport:s,translateExtent:u,dimensions:c,emits:d,d3Selection:f,d3Zoom:p,getNodesInitialized:_}=Ae(),b=F();In(cp,n);const h=Ue(()=>{var C;return e.width??((C=o.style)==null?void 0:C.width)??a}),v=Ue(()=>{var C;return e.height??((C=o.style)==null?void 0:C.height)??l}),T=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",Q=Se(()=>typeof e.nodeColor=="string"?()=>e.nodeColor:e.nodeColor),y=Se(()=>typeof e.nodeStrokeColor=="string"?()=>e.nodeStrokeColor:e.nodeStrokeColor),$=Se(()=>typeof e.nodeClassName=="string"?()=>e.nodeClassName:typeof e.nodeClassName=="function"?e.nodeClassName:()=>""),E=Se(()=>ri(_.value)),x=Se(()=>({x:-s.value.x/s.value.zoom,y:-s.value.y/s.value.zoom,width:c.value.width/s.value.zoom,height:c.value.height/s.value.zoom})),X=Se(()=>_.value&&_.value.length?V_(E.value,x.value):x.value),U=Se(()=>{const C=X.value.width/h.value,N=X.value.height/v.value;return Math.max(C,N)}),V=Se(()=>{const C=U.value*h.value,N=U.value*v.value,P=e.offsetScale*U.value;return{offset:P,x:X.value.x-(C-X.value.width)/2-P,y:X.value.y-(N-X.value.height)/2-P,width:C+P*2,height:N+P*2}}),G=Se(()=>!V.value.x||!V.value.y?"":`
    M${V.value.x-V.value.offset},${V.value.y-V.value.offset}
    h${V.value.width+V.value.offset*2}
    v${V.value.height+V.value.offset*2}
    h${-V.value.width-V.value.offset*2}z
    M${x.value.x},${x.value.y}
    h${x.value.width}
    v${x.value.height}
    h${-x.value.width}z`);mu(C=>{if(b.value){const N=vn(b.value),P=te=>{if(te.sourceEvent.type!=="wheel"||!f.value||!p.value)return;const L=-te.sourceEvent.deltaY*(te.sourceEvent.deltaMode===1?.05:te.sourceEvent.deltaMode?1:.002)*e.zoomStep,ae=s.value.zoom*2**L;p.value.scaleTo(f.value,ae)},R=te=>{if(te.sourceEvent.type!=="mousemove"||!f.value||!p.value)return;const L=U.value*Math.max(1,s.value.zoom)*(e.inversePan?-1:1),ae={x:s.value.x-te.sourceEvent.movementX*L,y:s.value.y-te.sourceEvent.movementY*L},Y=[[0,0],[c.value.width,c.value.height]],pe=bi.translate(ae.x,ae.y).scale(s.value.zoom),re=p.value.constrain()(pe,Y,u.value);p.value.transform(f.value,re)},K=Jk().on("zoom",e.pannable?R:()=>{}).on("zoom.wheel",e.zoomable?P:()=>{});N.call(K),C(()=>{N.on("zoom",null)})}},{flush:"post"});function ee(C){const[N,P]=dn(C);t("click",{event:C,position:{x:N,y:P}})}function B(C,N){const P={event:C,node:N,connectedEdges:mn([N],i.value)};d.miniMapNodeClick(P),t("nodeClick",P)}function g(C,N){const P={event:C,node:N,connectedEdges:mn([N],i.value)};d.miniMapNodeDoubleClick(P),t("nodeDblclick",P)}function D(C,N){const P={event:C,node:N,connectedEdges:mn([N],i.value)};d.miniMapNodeMouseEnter(P),t("nodeMouseenter",P)}function O(C,N){const P={event:C,node:N,connectedEdges:mn([N],i.value)};d.miniMapNodeMouseMove(P),t("nodeMousemove",P)}function q(C,N){const P={event:C,node:N,connectedEdges:mn([N],i.value)};d.miniMapNodeMouseLeave(P),t("nodeMouseleave",P)}return(C,N)=>(k(),A(w(Dc),{position:C.position,class:et(["vue-flow__minimap",{pannable:C.pannable,zoomable:C.zoomable}])},{default:S(()=>[(k(),Z("svg",{ref_key:"el",ref:b,width:h.value,height:v.value,viewBox:[V.value.x,V.value.y,V.value.width,V.value.height].join(" "),role:"img","aria-labelledby":`vue-flow__minimap-${w(r)}`,onClick:ee},[C.ariaLabel?(k(),Z("title",{key:0,id:`vue-flow__minimap-${w(r)}`},J(C.ariaLabel),9,oT)):ce("",!0),(k(!0),Z(ye,null,Xe(w(_),P=>(k(),A(tT,{id:P.id,key:P.id,position:P.computedPosition,dimensions:P.dimensions,selected:P.selected,dragging:P.dragging,style:lt(P.style),class:et($.value(P)),color:Q.value(P),"border-radius":C.nodeBorderRadius,"stroke-color":y.value(P),"stroke-width":C.nodeStrokeWidth,"shape-rendering":w(T),type:P.type,onClick:R=>B(R,P),onDblclick:R=>g(R,P),onMouseenter:R=>D(R,P),onMousemove:R=>O(R,P),onMouseleave:R=>q(R,P)},null,8,["id","position","dimensions","selected","dragging","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","type","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"]))),128)),De("path",{class:"vue-flow__minimap-mask",d:G.value,fill:C.maskColor,stroke:C.maskStrokeColor,"stroke-width":C.maskStrokeWidth,"fill-rule":"evenodd"},null,8,aT)],8,nT))]),_:1},8,["position","class"]))}});var Rt=(e=>(e.Lines="lines",e.Dots="dots",e))(Rt||{});const dp=function({dimensions:e,size:t,color:n}){return qe("path",{stroke:n,"stroke-width":t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},pp=function({radius:e,color:t}){return qe("circle",{cx:e,cy:e,r:e,fill:t})};Rt.Lines+"",Rt.Dots+"";const iT={[Rt.Dots]:"#81818a",[Rt.Lines]:"#eee"},sT=["id","x","y","width","height","patternTransform"],uT={key:2,height:"100",width:"100"},cT=["fill"],dT=["x","y","fill"],pT={name:"Background",compatConfig:{MODE:3}},fT=Me({...pT,props:{id:{},variant:{default:()=>Rt.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:2}},setup(e){const{id:t,viewport:n}=Ae(),o=Se(()=>{const[r,i]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],s=[r*n.value.zoom||1,i*n.value.zoom||1],u=e.size*n.value.zoom,c=e.variant===Rt.Dots?[u/e.offset,u/e.offset]:[s[0]/e.offset,s[1]/e.offset];return{scaledGap:s,offset:c,size:u}}),a=Ue(()=>`pattern-${t}${e.id?`-${e.id}`:""}`),l=Ue(()=>e.color||e.patternColor||iT[e.variant||Rt.Dots]);return(r,i)=>(k(),Z("svg",{class:"vue-flow__background vue-flow__container",style:lt({height:`${r.height>100?100:r.height}%`,width:`${r.width>100?100:r.width}%`})},[Ve(r.$slots,"pattern-container",{id:a.value},()=>[De("pattern",{id:a.value,x:w(n).x%o.value.scaledGap[0],y:w(n).y%o.value.scaledGap[1],width:o.value.scaledGap[0],height:o.value.scaledGap[1],patternTransform:`translate(-${o.value.offset[0]},-${o.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[Ve(r.$slots,"pattern",{},()=>[r.variant===w(Rt).Lines?(k(),A(w(dp),{key:0,size:r.lineWidth,color:l.value,dimensions:o.value.scaledGap},null,8,["size","color","dimensions"])):r.variant===w(Rt).Dots?(k(),A(w(pp),{key:1,color:l.value,radius:o.value.size/r.offset},null,8,["color","radius"])):ce("",!0),r.bgColor?(k(),Z("svg",uT,[De("rect",{width:"100%",height:"100%",fill:r.bgColor},null,8,cT)])):ce("",!0)])],8,sT)]),De("rect",{x:r.x,y:r.y,width:"100%",height:"100%",fill:`url(#${a.value})`},null,8,dT),Ve(r.$slots,"default",{id:a.value})],4))}}),hT={name:"ControlButton",compatConfig:{MODE:3}},mT=(e,t)=>{const n=e.__vccOpts||e;for(const[o,a]of t)n[o]=a;return n},vT={class:"vue-flow__controls-button"};function _T(e,t,n,o,a,l){return k(),Z("button",vT,[Ve(e.$slots,"default")])}const Sa=mT(hT,[["render",_T]]),gT={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},yT=De("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),OT=[yT];function bT(e,t){return k(),Z("svg",gT,OT)}const wT={render:bT},ST={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},xT=De("path",{d:"M0 0h32v4.2H0z"},null,-1),$T=[xT];function kT(e,t){return k(),Z("svg",ST,$T)}const TT={render:kT},ET={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},QT=De("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),PT=[QT];function DT(e,t){return k(),Z("svg",ET,PT)}const CT={render:DT},zT={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},NT=De("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),qT=[NT];function RT(e,t){return k(),Z("svg",zT,qT)}const MT={render:RT},IT={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},VT=De("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),AT=[VT];function XT(e,t){return k(),Z("svg",IT,AT)}const UT={render:XT},WT={name:"Controls",compatConfig:{MODE:3}},jT=Me({...WT,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>ac.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:o,elementsSelectable:a,setInteractive:l,zoomIn:r,zoomOut:i,fitView:s,viewport:u,minZoom:c,maxZoom:d}=Ae(),f=Ue(()=>n.value||o.value||a.value),p=Ue(()=>u.value.zoom<=c.value),_=Ue(()=>u.value.zoom>=d.value);function b(){r(),t("zoomIn")}function h(){i(),t("zoomOut")}function v(){s(e.fitViewParams),t("fitView")}function T(){l(!f.value),t("interactionChange",!f.value)}return(Q,y)=>(k(),A(w(Dc),{class:"vue-flow__controls",position:Q.position},{default:S(()=>[Ve(Q.$slots,"top"),Q.showZoom?(k(),Z(ye,{key:0},[Ve(Q.$slots,"control-zoom-in",{},()=>[m(Sa,{class:"vue-flow__controls-zoomin",disabled:_.value,onClick:b},{default:S(()=>[Ve(Q.$slots,"icon-zoom-in",{},()=>[(k(),A(Tn(w(wT))))])]),_:3},8,["disabled"])]),Ve(Q.$slots,"control-zoom-out",{},()=>[m(Sa,{class:"vue-flow__controls-zoomout",disabled:p.value,onClick:h},{default:S(()=>[Ve(Q.$slots,"icon-zoom-out",{},()=>[(k(),A(Tn(w(TT))))])]),_:3},8,["disabled"])])],64)):ce("",!0),Q.showFitView?Ve(Q.$slots,"control-fit-view",{key:1},()=>[m(Sa,{class:"vue-flow__controls-fitview",onClick:v},{default:S(()=>[Ve(Q.$slots,"icon-fit-view",{},()=>[(k(),A(Tn(w(CT))))])]),_:3})]):ce("",!0),Q.showInteractive?Ve(Q.$slots,"control-interactive",{key:2},()=>[Q.showInteractive?(k(),A(Sa,{key:0,class:"vue-flow__controls-interactive",onClick:T},{default:S(()=>[f.value?Ve(Q.$slots,"icon-unlock",{key:0},()=>[(k(),A(Tn(w(UT))))]):ce("",!0),f.value?ce("",!0):Ve(Q.$slots,"icon-lock",{key:1},()=>[(k(),A(Tn(w(MT))))])]),_:3})):ce("",!0)]):ce("",!0),Ve(Q.$slots,"default")]),_:3},8,["position"]))}}),FT={__name:"TagInput",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const{t}=Ye(),n=go(e,"modelValue"),o=F([]);return Fr(async()=>{const{data:a}=await $u("list",{});o.value=a.map(l=>({label:l.title,value:l.tid}))}),(a,l)=>{const r=M("a-select");return k(),A(r,{value:n.value,"onUpdate:value":l[0]||(l[0]=i=>n.value=i),mode:"tags",placeholder:w(t)("components.workspace.tagInput.select_tags"),style:{"min-width":"150px",width:"100%"},options:o.value},null,8,["value","placeholder","options"])}}},fp={__name:"MarkdownEditor",props:Io({placeholder:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,{t:n}=Ye(),o=go(e,"modelValue"),a=F(!1);return(l,r)=>{const i=M("a-checkbox"),s=M("a-form-item-rest"),u=M("a-textarea"),c=Lp("highlight");return k(),Z("div",null,[m(s,null,{default:S(()=>[m(i,{checked:a.value,"onUpdate:checked":r[0]||(r[0]=d=>a.value=d)},{default:S(()=>[ne(J(w(n)("common.preview")),1)]),_:1},8,["checked"])]),_:1}),Vn(m(u,{value:o.value,"onUpdate:value":r[1]||(r[1]=d=>o.value=d),autoSize:{minRows:3,maxRows:10},placeholder:t.placeholder},null,8,["value","placeholder"]),[[An,!a.value]]),Vn(m(w(Gp),{source:o.value,"onUpdate:source":r[2]||(r[2]=d=>o.value=d),class:"custom-scrollbar markdown-body custom-hljs"},null,8,["source"]),[[c],[An,a.value]])])}}};var LT=Object.defineProperty,il=Object.getOwnPropertySymbols,hp=Object.prototype.hasOwnProperty,mp=Object.prototype.propertyIsEnumerable,Ys=(e,t,n)=>t in e?LT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eo=(e,t)=>{for(var n in t||(t={}))hp.call(t,n)&&Ys(e,n,t[n]);if(il)for(var n of il(t))mp.call(t,n)&&Ys(e,n,t[n]);return e},vp=(e,t)=>{var n={};for(var o in e)hp.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&il)for(var o of il(e))t.indexOf(o)<0&&mp.call(e,o)&&(n[o]=e[o]);return n};const _p="[vue-draggable-plus]: ";function GT(e){console.warn(_p+e)}function BT(e){console.error(_p+e)}function HT(e,t,n){Array.isArray(e)&&n>=0&&n<e.length&&e.splice(n,0,e.splice(t,1)[0])}function YT(e){return e.replace(/-(\w)/g,(t,n)=>n?n.toUpperCase():"")}function ZT(e){return Object.keys(e).reduce((t,n)=>(typeof e[n]<"u"&&(t[YT(n)]=e[n]),t),{})}function JT(e,t){if(Array.isArray(e))return e.splice(t,1)}function KT(e,t,n){if(Array.isArray(e))return e.splice(t,0,n)}function e2(e){return typeof e>"u"}function t2(e){return typeof e=="string"}function Zs(e,t,n){const o=e.children[n];e.insertBefore(t,o)}function er(e){e.parentNode&&e.parentNode.removeChild(e)}function n2(e,t=document){var n;let o=null;return typeof(t==null?void 0:t.querySelector)=="function"?o=(n=t==null?void 0:t.querySelector)==null?void 0:n.call(t,e):o=document.querySelector(e),o||GT(`Element not found: ${e}`),o}function o2(e,t,n=null){return function(...o){return e.apply(n,o),t.apply(n,o)}}function a2(e,t){const n=eo({},e);return Object.keys(t).forEach(o=>{n[o]?n[o]=o2(e[o],t[o]):n[o]=t[o]}),n}function l2(e){return e instanceof HTMLElement}function r2(e,t){Object.keys(e).forEach(n=>{t(n,e[n])})}/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Js(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,o)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Js(Object(n),!0).forEach(function(o){i2(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Js(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Aa(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Aa=function(t){return typeof t}:Aa=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Aa(e)}function i2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ln(){return ln=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ln.apply(this,arguments)}function s2(e,t){if(e==null)return{};var n={},o=Object.keys(e),a,l;for(l=0;l<o.length;l++)a=o[l],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function u2(e,t){if(e==null)return{};var n=s2(e,t),o,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)o=l[a],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var c2="1.15.0";function tn(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var rn=tn(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),oa=tn(/Edge/i),Ks=tn(/firefox/i),zo=tn(/safari/i)&&!tn(/chrome/i)&&!tn(/android/i),gp=tn(/iP(ad|od|hone)/i),yp=tn(/chrome/i)&&tn(/android/i),Op={capture:!1,passive:!1};function Ne(e,t,n){e.addEventListener(t,n,!rn&&Op)}function ze(e,t,n){e.removeEventListener(t,n,!rn&&Op)}function sl(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function d2(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function qt(e,t,n,o){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&sl(e,t):sl(e,t))||o&&e===n)return e;if(e===n)break}while(e=d2(e))}return null}var eu=/\s+/g;function vt(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(eu," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(eu," ")}}function Oe(e,t,n){var o=e&&e.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in o)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),o[t]=n+(typeof n=="string"?"":"px")}}function io(e,t){var n="";if(typeof e=="string")n=e;else do{var o=Oe(e,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function bp(e,t,n){if(e){var o=e.getElementsByTagName(t),a=0,l=o.length;if(n)for(;a<l;a++)n(o[a],a);return o}return[]}function Vt(){var e=document.scrollingElement;return e||document.documentElement}function ot(e,t,n,o,a){if(!(!e.getBoundingClientRect&&e!==window)){var l,r,i,s,u,c,d;if(e!==window&&e.parentNode&&e!==Vt()?(l=e.getBoundingClientRect(),r=l.top,i=l.left,s=l.bottom,u=l.right,c=l.height,d=l.width):(r=0,i=0,s=window.innerHeight,u=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(a=a||e.parentNode,!rn))do if(a&&a.getBoundingClientRect&&(Oe(a,"transform")!=="none"||n&&Oe(a,"position")!=="static")){var f=a.getBoundingClientRect();r-=f.top+parseInt(Oe(a,"border-top-width")),i-=f.left+parseInt(Oe(a,"border-left-width")),s=r+l.height,u=i+l.width;break}while(a=a.parentNode);if(o&&e!==window){var p=io(a||e),_=p&&p.a,b=p&&p.d;p&&(r/=b,i/=_,d/=_,c/=b,s=r+c,u=i+d)}return{top:r,left:i,bottom:s,right:u,width:d,height:c}}}function tu(e,t,n){for(var o=yn(e,!0),a=ot(e)[t];o;){var l=ot(o)[n],r=void 0;if(r=a>=l,!r)return o;if(o===Vt())break;o=yn(o,!1)}return!1}function vo(e,t,n,o){for(var a=0,l=0,r=e.children;l<r.length;){if(r[l].style.display!=="none"&&r[l]!==be.ghost&&(o||r[l]!==be.dragged)&&qt(r[l],n.draggable,e,!1)){if(a===t)return r[l];a++}l++}return null}function wi(e,t){for(var n=e.lastElementChild;n&&(n===be.ghost||Oe(n,"display")==="none"||t&&!sl(n,t));)n=n.previousElementSibling;return n||null}function bt(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==be.clone&&(!t||sl(e,t))&&n++;return n}function nu(e){var t=0,n=0,o=Vt();if(e)do{var a=io(e),l=a.a,r=a.d;t+=e.scrollLeft*l,n+=e.scrollTop*r}while(e!==o&&(e=e.parentNode));return[t,n]}function p2(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n)}return-1}function yn(e,t){if(!e||!e.getBoundingClientRect)return Vt();var n=e,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=Oe(n);if(n.clientWidth<n.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Vt();if(o||t)return n;o=!0}}while(n=n.parentNode);return Vt()}function f2(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function tr(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var No;function wp(e,t){return function(){if(!No){var n=arguments,o=this;n.length===1?e.call(o,n[0]):e.apply(o,n),No=setTimeout(function(){No=void 0},t)}}}function h2(){clearTimeout(No),No=void 0}function Sp(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function xp(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var gt="Sortable"+new Date().getTime();function m2(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(o){if(!(Oe(o,"display")==="none"||o===be.ghost)){e.push({target:o,rect:ot(o)});var a=At({},e[e.length-1].rect);if(o.thisAnimationDuration){var l=io(o,!0);l&&(a.top-=l.f,a.left-=l.e)}o.fromRect=a}})}},addAnimationState:function(n){e.push(n)},removeAnimationState:function(n){e.splice(p2(e,{target:n}),1)},animateAll:function(n){var o=this;if(!this.options.animation){clearTimeout(t),typeof n=="function"&&n();return}var a=!1,l=0;e.forEach(function(r){var i=0,s=r.target,u=s.fromRect,c=ot(s),d=s.prevFromRect,f=s.prevToRect,p=r.rect,_=io(s,!0);_&&(c.top-=_.f,c.left-=_.e),s.toRect=c,s.thisAnimationDuration&&tr(d,c)&&!tr(u,c)&&(p.top-c.top)/(p.left-c.left)===(u.top-c.top)/(u.left-c.left)&&(i=_2(p,d,f,o.options)),tr(c,u)||(s.prevFromRect=u,s.prevToRect=c,i||(i=o.options.animation),o.animate(s,p,c,i)),i&&(a=!0,l=Math.max(l,i),clearTimeout(s.animationResetTimer),s.animationResetTimer=setTimeout(function(){s.animationTime=0,s.prevFromRect=null,s.fromRect=null,s.prevToRect=null,s.thisAnimationDuration=null},i),s.thisAnimationDuration=i)}),clearTimeout(t),a?t=setTimeout(function(){typeof n=="function"&&n()},l):typeof n=="function"&&n(),e=[]},animate:function(n,o,a,l){if(l){Oe(n,"transition",""),Oe(n,"transform","");var r=io(this.el),i=r&&r.a,s=r&&r.d,u=(o.left-a.left)/(i||1),c=(o.top-a.top)/(s||1);n.animatingX=!!u,n.animatingY=!!c,Oe(n,"transform","translate3d("+u+"px,"+c+"px,0)"),this.forRepaintDummy=v2(n),Oe(n,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),Oe(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){Oe(n,"transition",""),Oe(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},l)}}}}function v2(e){return e.offsetWidth}function _2(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}var Yn=[],nr={initializeByDefault:!0},aa={mount:function(e){for(var t in nr)nr.hasOwnProperty(t)&&!(t in e)&&(e[t]=nr[t]);Yn.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Yn.push(e)},pluginEvent:function(e,t,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var a=e+"Global";Yn.forEach(function(l){t[l.pluginName]&&(t[l.pluginName][a]&&t[l.pluginName][a](At({sortable:t},n)),t.options[l.pluginName]&&t[l.pluginName][e]&&t[l.pluginName][e](At({sortable:t},n)))})},initializePlugins:function(e,t,n,o){Yn.forEach(function(r){var i=r.pluginName;if(!(!e.options[i]&&!r.initializeByDefault)){var s=new r(e,t,e.options);s.sortable=e,s.options=e.options,e[i]=s,ln(n,s.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var l=this.modifyOption(e,a,e.options[a]);typeof l<"u"&&(e.options[a]=l)}},getEventProperties:function(e,t){var n={};return Yn.forEach(function(o){typeof o.eventProperties=="function"&&ln(n,o.eventProperties.call(t[o.pluginName],e))}),n},modifyOption:function(e,t,n){var o;return Yn.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[t]=="function"&&(o=a.optionListeners[t].call(e[a.pluginName],n))}),o}};function g2(e){var t=e.sortable,n=e.rootEl,o=e.name,a=e.targetEl,l=e.cloneEl,r=e.toEl,i=e.fromEl,s=e.oldIndex,u=e.newIndex,c=e.oldDraggableIndex,d=e.newDraggableIndex,f=e.originalEvent,p=e.putSortable,_=e.extraEventProperties;if(t=t||n&&n[gt],!!t){var b,h=t.options,v="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!rn&&!oa?b=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(b=document.createEvent("Event"),b.initEvent(o,!0,!0)),b.to=r||n,b.from=i||n,b.item=a||n,b.clone=l,b.oldIndex=s,b.newIndex=u,b.oldDraggableIndex=c,b.newDraggableIndex=d,b.originalEvent=f,b.pullMode=p?p.lastPutMode:void 0;var T=At(At({},_),aa.getEventProperties(o,t));for(var Q in T)b[Q]=T[Q];n&&n.dispatchEvent(b),h[v]&&h[v].call(t,b)}}var y2=["evt"],dt=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=n.evt,a=u2(n,y2);aa.pluginEvent.bind(be)(e,t,At({dragEl:le,parentEl:He,ghostEl:ke,rootEl:je,nextEl:kn,lastDownEl:Xa,cloneEl:Le,cloneHidden:_n,dragStarted:To,putSortable:rt,activeSortable:be.active,originalEvent:o,oldIndex:to,oldDraggableIndex:qo,newIndex:_t,newDraggableIndex:hn,hideGhostForTarget:Ep,unhideGhostForTarget:Qp,cloneNowHidden:function(){_n=!0},cloneNowShown:function(){_n=!1},dispatchSortableEvent:function(l){ct({sortable:t,name:l,originalEvent:o})}},a))};function ct(e){g2(At({putSortable:rt,cloneEl:Le,targetEl:le,rootEl:je,oldIndex:to,oldDraggableIndex:qo,newIndex:_t,newDraggableIndex:hn},e))}var le,He,ke,je,kn,Xa,Le,_n,to,_t,qo,hn,xa,rt,Jn=!1,ul=!1,cl=[],xn,$t,or,ar,ou,au,To,Zn,Ro,Mo=!1,$a=!1,Ua,st,lr=[],Vr=!1,dl=[],Nl=typeof document<"u",ka=gp,lu=oa||rn?"cssFloat":"float",O2=Nl&&!yp&&!gp&&"draggable"in document.createElement("div"),$p=function(){if(Nl){if(rn)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),kp=function(e,t){var n=Oe(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),a=vo(e,0,t),l=vo(e,1,t),r=a&&Oe(a),i=l&&Oe(l),s=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+ot(a).width,u=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+ot(l).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&r.float&&r.float!=="none"){var c=r.float==="left"?"left":"right";return l&&(i.clear==="both"||i.clear===c)?"vertical":"horizontal"}return a&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||s>=o&&n[lu]==="none"||l&&n[lu]==="none"&&s+u>o)?"vertical":"horizontal"},b2=function(e,t,n){var o=n?e.left:e.top,a=n?e.right:e.bottom,l=n?e.width:e.height,r=n?t.left:t.top,i=n?t.right:t.bottom,s=n?t.width:t.height;return o===r||a===i||o+l/2===r+s/2},w2=function(e,t){var n;return cl.some(function(o){var a=o[gt].options.emptyInsertThreshold;if(!(!a||wi(o))){var l=ot(o),r=e>=l.left-a&&e<=l.right+a,i=t>=l.top-a&&t<=l.bottom+a;if(r&&i)return n=o}}),n},Tp=function(e){function t(a,l){return function(r,i,s,u){var c=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(a==null&&(l||c))return!0;if(a==null||a===!1)return!1;if(l&&a==="clone")return a;if(typeof a=="function")return t(a(r,i,s,u),l)(r,i,s,u);var d=(l?r:i).options.group.name;return a===!0||typeof a=="string"&&a===d||a.join&&a.indexOf(d)>-1}}var n={},o=e.group;(!o||Aa(o)!="object")&&(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},Ep=function(){!$p&&ke&&Oe(ke,"display","none")},Qp=function(){!$p&&ke&&Oe(ke,"display","")};Nl&&!yp&&document.addEventListener("click",function(e){if(ul)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ul=!1,!1},!0);var $n=function(e){if(le){e=e.touches?e.touches[0]:e;var t=w2(e.clientX,e.clientY);if(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[gt]._onDragOver(n)}}},S2=function(e){le&&le.parentNode[gt]._isOutsideThisEl(e.target)};function be(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=ln({},t),e[gt]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return kp(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,r){l.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:be.supportPointer!==!1&&"PointerEvent"in window&&!zo,emptyInsertThreshold:5};aa.initializePlugins(this,e,n);for(var o in n)!(o in t)&&(t[o]=n[o]);Tp(t);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=t.forceFallback?!1:O2,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Ne(e,"pointerdown",this._onTapStart):(Ne(e,"mousedown",this._onTapStart),Ne(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ne(e,"dragover",this),Ne(e,"dragenter",this)),cl.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ln(this,m2())}be.prototype={constructor:be,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Zn=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,le):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,o=this.options,a=o.preventOnFilter,l=e.type,r=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,i=(r||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||i,u=o.filter;if(D2(n),!le&&!(/mousedown|pointerdown/.test(l)&&e.button!==0||o.disabled)&&!s.isContentEditable&&!(!this.nativeDraggable&&zo&&i&&i.tagName.toUpperCase()==="SELECT")&&(i=qt(i,o.draggable,n,!1),!(i&&i.animated)&&Xa!==i)){if(to=bt(i),qo=bt(i,o.draggable),typeof u=="function"){if(u.call(this,e,i,this)){ct({sortable:t,rootEl:s,name:"filter",targetEl:i,toEl:n,fromEl:n}),dt("filter",t,{evt:e}),a&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(c){if(c=qt(s,c.trim(),n,!1),c)return ct({sortable:t,rootEl:c,name:"filter",targetEl:i,fromEl:n,toEl:n}),dt("filter",t,{evt:e}),!0}),u)){a&&e.cancelable&&e.preventDefault();return}o.handle&&!qt(s,o.handle,n,!1)||this._prepareDragStart(e,r,i)}}},_prepareDragStart:function(e,t,n){var o=this,a=o.el,l=o.options,r=a.ownerDocument,i;if(n&&!le&&n.parentNode===a){var s=ot(n);if(je=a,le=n,He=le.parentNode,kn=le.nextSibling,Xa=n,xa=l.group,be.dragged=le,xn={target:le,clientX:(t||e).clientX,clientY:(t||e).clientY},ou=xn.clientX-s.left,au=xn.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,le.style["will-change"]="all",i=function(){if(dt("delayEnded",o,{evt:e}),be.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!Ks&&o.nativeDraggable&&(le.draggable=!0),o._triggerDragStart(e,t),ct({sortable:o,name:"choose",originalEvent:e}),vt(le,l.chosenClass,!0)},l.ignore.split(",").forEach(function(u){bp(le,u.trim(),rr)}),Ne(r,"dragover",$n),Ne(r,"mousemove",$n),Ne(r,"touchmove",$n),Ne(r,"mouseup",o._onDrop),Ne(r,"touchend",o._onDrop),Ne(r,"touchcancel",o._onDrop),Ks&&this.nativeDraggable&&(this.options.touchStartThreshold=4,le.draggable=!0),dt("delayStart",this,{evt:e}),l.delay&&(!l.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(oa||rn))){if(be.eventCanceled){this._onDrop();return}Ne(r,"mouseup",o._disableDelayedDrag),Ne(r,"touchend",o._disableDelayedDrag),Ne(r,"touchcancel",o._disableDelayedDrag),Ne(r,"mousemove",o._delayedDragTouchMoveHandler),Ne(r,"touchmove",o._delayedDragTouchMoveHandler),l.supportPointer&&Ne(r,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(i,l.delay)}else i()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){le&&rr(le),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ze(e,"mouseup",this._disableDelayedDrag),ze(e,"touchend",this._disableDelayedDrag),ze(e,"touchcancel",this._disableDelayedDrag),ze(e,"mousemove",this._delayedDragTouchMoveHandler),ze(e,"touchmove",this._delayedDragTouchMoveHandler),ze(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?Ne(document,"pointermove",this._onTouchMove):t?Ne(document,"touchmove",this._onTouchMove):Ne(document,"mousemove",this._onTouchMove):(Ne(le,"dragend",this),Ne(je,"dragstart",this._onDragStart));try{document.selection?Wa(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Jn=!1,je&&le){dt("dragStarted",this,{evt:t}),this.nativeDraggable&&Ne(document,"dragover",S2);var n=this.options;!e&&vt(le,n.dragClass,!1),vt(le,n.ghostClass,!0),be.active=this,e&&this._appendGhost(),ct({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if($t){this._lastX=$t.clientX,this._lastY=$t.clientY,Ep();for(var e=document.elementFromPoint($t.clientX,$t.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint($t.clientX,$t.clientY),e!==t);)t=e;if(le.parentNode[gt]._isOutsideThisEl(e),t)do{if(t[gt]){var n=void 0;if(n=t[gt]._onDragOver({clientX:$t.clientX,clientY:$t.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Qp()}},_onTouchMove:function(e){if(xn){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,a=e.touches?e.touches[0]:e,l=ke&&io(ke,!0),r=ke&&l&&l.a,i=ke&&l&&l.d,s=ka&&st&&nu(st),u=(a.clientX-xn.clientX+o.x)/(r||1)+(s?s[0]-lr[0]:0)/(r||1),c=(a.clientY-xn.clientY+o.y)/(i||1)+(s?s[1]-lr[1]:0)/(i||1);if(!be.active&&!Jn){if(n&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(ke){l?(l.e+=u-(or||0),l.f+=c-(ar||0)):l={a:1,b:0,c:0,d:1,e:u,f:c};var d="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");Oe(ke,"webkitTransform",d),Oe(ke,"mozTransform",d),Oe(ke,"msTransform",d),Oe(ke,"transform",d),or=u,ar=c,$t=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ke){var e=this.options.fallbackOnBody?document.body:je,t=ot(le,!0,ka,!0,e),n=this.options;if(ka){for(st=e;Oe(st,"position")==="static"&&Oe(st,"transform")==="none"&&st!==document;)st=st.parentNode;st!==document.body&&st!==document.documentElement?(st===document&&(st=Vt()),t.top+=st.scrollTop,t.left+=st.scrollLeft):st=Vt(),lr=nu(st)}ke=le.cloneNode(!0),vt(ke,n.ghostClass,!1),vt(ke,n.fallbackClass,!0),vt(ke,n.dragClass,!0),Oe(ke,"transition",""),Oe(ke,"transform",""),Oe(ke,"box-sizing","border-box"),Oe(ke,"margin",0),Oe(ke,"top",t.top),Oe(ke,"left",t.left),Oe(ke,"width",t.width),Oe(ke,"height",t.height),Oe(ke,"opacity","0.8"),Oe(ke,"position",ka?"absolute":"fixed"),Oe(ke,"zIndex","100000"),Oe(ke,"pointerEvents","none"),be.ghost=ke,e.appendChild(ke),Oe(ke,"transform-origin",ou/parseInt(ke.style.width)*100+"% "+au/parseInt(ke.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,a=n.options;if(dt("dragStart",this,{evt:e}),be.eventCanceled){this._onDrop();return}dt("setupClone",this),be.eventCanceled||(Le=xp(le),Le.removeAttribute("id"),Le.draggable=!1,Le.style["will-change"]="",this._hideClone(),vt(Le,this.options.chosenClass,!1),be.clone=Le),n.cloneId=Wa(function(){dt("clone",n),!be.eventCanceled&&(n.options.removeCloneOnHide||je.insertBefore(Le,le),n._hideClone(),ct({sortable:n,name:"clone"}))}),!t&&vt(le,a.dragClass,!0),t?(ul=!0,n._loopId=setInterval(n._emulateDragOver,50)):(ze(document,"mouseup",n._onDrop),ze(document,"touchend",n._onDrop),ze(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",a.setData&&a.setData.call(n,o,le)),Ne(document,"drop",n),Oe(le,"transform","translateZ(0)")),Jn=!0,n._dragStartId=Wa(n._dragStarted.bind(n,t,e)),Ne(document,"selectstart",n),To=!0,zo&&Oe(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,o,a,l,r=this.options,i=r.group,s=be.active,u=xa===i,c=r.sort,d=rt||s,f,p=this,_=!1;if(Vr)return;function b(q,C){dt(q,p,At({evt:e,isOwner:u,axis:f?"vertical":"horizontal",revert:l,dragRect:o,targetRect:a,canSort:c,fromSortable:d,target:n,completed:v,onMove:function(N,P){return Ta(je,t,le,o,N,ot(N),e,P)},changed:T},C))}function h(){b("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function v(q){return b("dragOverCompleted",{insertion:q}),q&&(u?s._hideClone():s._showClone(p),p!==d&&(vt(le,rt?rt.options.ghostClass:s.options.ghostClass,!1),vt(le,r.ghostClass,!0)),rt!==p&&p!==be.active?rt=p:p===be.active&&rt&&(rt=null),d===p&&(p._ignoreWhileAnimating=n),p.animateAll(function(){b("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(n===le&&!le.animated||n===t&&!n.animated)&&(Zn=null),!r.dragoverBubble&&!e.rootEl&&n!==document&&(le.parentNode[gt]._isOutsideThisEl(e.target),!q&&$n(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),_=!0}function T(){_t=bt(le),hn=bt(le,r.draggable),ct({sortable:p,name:"change",toEl:t,newIndex:_t,newDraggableIndex:hn,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=qt(n,r.draggable,t,!0),b("dragOver"),be.eventCanceled)return _;if(le.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||p._ignoreWhileAnimating===n)return v(!1);if(ul=!1,s&&!r.disabled&&(u?c||(l=He!==je):rt===this||(this.lastPutMode=xa.checkPull(this,s,le,e))&&i.checkPut(this,s,le,e))){if(f=this._getDirection(e,n)==="vertical",o=ot(le),b("dragOverValid"),be.eventCanceled)return _;if(l)return He=je,h(),this._hideClone(),b("revert"),be.eventCanceled||(kn?je.insertBefore(le,kn):je.appendChild(le)),v(!0);var Q=wi(t,r.draggable);if(!Q||T2(e,f,this)&&!Q.animated){if(Q===le)return v(!1);if(Q&&t===e.target&&(n=Q),n&&(a=ot(n)),Ta(je,t,le,o,n,a,e,!!n)!==!1)return h(),Q&&Q.nextSibling?t.insertBefore(le,Q.nextSibling):t.appendChild(le),He=t,T(),v(!0)}else if(Q&&k2(e,f,this)){var y=vo(t,0,r,!0);if(y===le)return v(!1);if(n=y,a=ot(n),Ta(je,t,le,o,n,a,e,!1)!==!1)return h(),t.insertBefore(le,y),He=t,T(),v(!0)}else if(n.parentNode===t){a=ot(n);var $=0,E,x=le.parentNode!==t,X=!b2(le.animated&&le.toRect||o,n.animated&&n.toRect||a,f),U=f?"top":"left",V=tu(n,"top","top")||tu(le,"top","top"),G=V?V.scrollTop:void 0;Zn!==n&&(E=a[U],Mo=!1,$a=!X&&r.invertSwap||x),$=E2(e,n,a,f,X?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,$a,Zn===n);var ee;if($!==0){var B=bt(le);do B-=$,ee=He.children[B];while(ee&&(Oe(ee,"display")==="none"||ee===ke))}if($===0||ee===n)return v(!1);Zn=n,Ro=$;var g=n.nextElementSibling,D=!1;D=$===1;var O=Ta(je,t,le,o,n,a,e,D);if(O!==!1)return(O===1||O===-1)&&(D=O===1),Vr=!0,setTimeout($2,30),h(),D&&!g?t.appendChild(le):n.parentNode.insertBefore(le,D?g:n),V&&Sp(V,0,G-V.scrollTop),He=le.parentNode,E!==void 0&&!$a&&(Ua=Math.abs(E-ot(n)[U])),T(),v(!0)}if(t.contains(le))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ze(document,"mousemove",this._onTouchMove),ze(document,"touchmove",this._onTouchMove),ze(document,"pointermove",this._onTouchMove),ze(document,"dragover",$n),ze(document,"mousemove",$n),ze(document,"touchmove",$n)},_offUpEvents:function(){var e=this.el.ownerDocument;ze(e,"mouseup",this._onDrop),ze(e,"touchend",this._onDrop),ze(e,"pointerup",this._onDrop),ze(e,"touchcancel",this._onDrop),ze(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(_t=bt(le),hn=bt(le,n.draggable),dt("drop",this,{evt:e}),He=le&&le.parentNode,_t=bt(le),hn=bt(le,n.draggable),be.eventCanceled){this._nulling();return}Jn=!1,$a=!1,Mo=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ar(this.cloneId),Ar(this._dragStartId),this.nativeDraggable&&(ze(document,"drop",this),ze(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),zo&&Oe(document.body,"user-select",""),Oe(le,"transform",""),e&&(To&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),ke&&ke.parentNode&&ke.parentNode.removeChild(ke),(je===He||rt&&rt.lastPutMode!=="clone")&&Le&&Le.parentNode&&Le.parentNode.removeChild(Le),le&&(this.nativeDraggable&&ze(le,"dragend",this),rr(le),le.style["will-change"]="",To&&!Jn&&vt(le,rt?rt.options.ghostClass:this.options.ghostClass,!1),vt(le,this.options.chosenClass,!1),ct({sortable:this,name:"unchoose",toEl:He,newIndex:null,newDraggableIndex:null,originalEvent:e}),je!==He?(_t>=0&&(ct({rootEl:He,name:"add",toEl:He,fromEl:je,originalEvent:e}),ct({sortable:this,name:"remove",toEl:He,originalEvent:e}),ct({rootEl:He,name:"sort",toEl:He,fromEl:je,originalEvent:e}),ct({sortable:this,name:"sort",toEl:He,originalEvent:e})),rt&&rt.save()):_t!==to&&_t>=0&&(ct({sortable:this,name:"update",toEl:He,originalEvent:e}),ct({sortable:this,name:"sort",toEl:He,originalEvent:e})),be.active&&((_t==null||_t===-1)&&(_t=to,hn=qo),ct({sortable:this,name:"end",toEl:He,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){dt("nulling",this),je=le=He=ke=kn=Le=Xa=_n=xn=$t=To=_t=hn=to=qo=Zn=Ro=rt=xa=be.dragged=be.ghost=be.clone=be.active=null,dl.forEach(function(e){e.checked=!0}),dl.length=or=ar=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":le&&(this._onDragOver(e),x2(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,o=0,a=n.length,l=this.options;o<a;o++)t=n[o],qt(t,l.draggable,this.el,!1)&&e.push(t.getAttribute(l.dataIdAttr)||P2(t));return e},sort:function(e,t){var n={},o=this.el;this.toArray().forEach(function(a,l){var r=o.children[l];qt(r,this.options.draggable,o,!1)&&(n[a]=r)},this),t&&this.captureAnimationState(),e.forEach(function(a){n[a]&&(o.removeChild(n[a]),o.appendChild(n[a]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return qt(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var o=aa.modifyOption(this,e,t);typeof o<"u"?n[e]=o:n[e]=t,e==="group"&&Tp(n)},destroy:function(){dt("destroy",this);var e=this.el;e[gt]=null,ze(e,"mousedown",this._onTapStart),ze(e,"touchstart",this._onTapStart),ze(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ze(e,"dragover",this),ze(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),cl.splice(cl.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!_n){if(dt("hideClone",this),be.eventCanceled)return;Oe(Le,"display","none"),this.options.removeCloneOnHide&&Le.parentNode&&Le.parentNode.removeChild(Le),_n=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(_n){if(dt("showClone",this),be.eventCanceled)return;le.parentNode==je&&!this.options.group.revertClone?je.insertBefore(Le,le):kn?je.insertBefore(Le,kn):je.appendChild(Le),this.options.group.revertClone&&this.animate(le,Le),Oe(Le,"display",""),_n=!1}}};function x2(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Ta(e,t,n,o,a,l,r,i){var s,u=e[gt],c=u.options.onMove,d;return window.CustomEvent&&!rn&&!oa?s=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(s=document.createEvent("Event"),s.initEvent("move",!0,!0)),s.to=t,s.from=e,s.dragged=n,s.draggedRect=o,s.related=a||t,s.relatedRect=l||ot(t),s.willInsertAfter=i,s.originalEvent=r,e.dispatchEvent(s),c&&(d=c.call(u,s,r)),d}function rr(e){e.draggable=!1}function $2(){Vr=!1}function k2(e,t,n){var o=ot(vo(n.el,0,n.options,!0)),a=10;return t?e.clientX<o.left-a||e.clientY<o.top&&e.clientX<o.right:e.clientY<o.top-a||e.clientY<o.bottom&&e.clientX<o.left}function T2(e,t,n){var o=ot(wi(n.el,n.options.draggable)),a=10;return t?e.clientX>o.right+a||e.clientX<=o.right&&e.clientY>o.bottom&&e.clientX>=o.left:e.clientX>o.right&&e.clientY>o.top||e.clientX<=o.right&&e.clientY>o.bottom+a}function E2(e,t,n,o,a,l,r,i){var s=o?e.clientY:e.clientX,u=o?n.height:n.width,c=o?n.top:n.left,d=o?n.bottom:n.right,f=!1;if(!r){if(i&&Ua<u*a){if(!Mo&&(Ro===1?s>c+u*l/2:s<d-u*l/2)&&(Mo=!0),Mo)f=!0;else if(Ro===1?s<c+Ua:s>d-Ua)return-Ro}else if(s>c+u*(1-a)/2&&s<d-u*(1-a)/2)return Q2(t)}return f=f||r,f&&(s<c+u*l/2||s>d-u*l/2)?s>c+u/2?1:-1:0}function Q2(e){return bt(le)<bt(e)?1:-1}function P2(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function D2(e){dl.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&dl.push(o)}}function Wa(e){return setTimeout(e,0)}function Ar(e){return clearTimeout(e)}Nl&&Ne(document,"touchmove",function(e){(be.active||Jn)&&e.cancelable&&e.preventDefault()});be.utils={on:Ne,off:ze,css:Oe,find:bp,is:function(e,t){return!!qt(e,t,e,!1)},extend:f2,throttle:wp,closest:qt,toggleClass:vt,clone:xp,index:bt,nextTick:Wa,cancelNextTick:Ar,detectDirection:kp,getChild:vo};be.get=function(e){return e[gt]};be.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(be.utils=At(At({},be.utils),o.utils)),aa.mount(o)})};be.create=function(e,t){return new be(e,t)};be.version=c2;var Ke=[],Eo,Xr,Ur=!1,ir,sr,pl,Qo;function C2(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?Ne(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ne(document,"pointermove",this._handleFallbackAutoScroll):n.touches?Ne(document,"touchmove",this._handleFallbackAutoScroll):Ne(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?ze(document,"dragover",this._handleAutoScroll):(ze(document,"pointermove",this._handleFallbackAutoScroll),ze(document,"touchmove",this._handleFallbackAutoScroll),ze(document,"mousemove",this._handleFallbackAutoScroll)),ru(),ja(),h2()},nulling:function(){pl=Xr=Eo=Ur=Qo=ir=sr=null,Ke.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var o=this,a=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,r=document.elementFromPoint(a,l);if(pl=t,n||this.options.forceAutoScrollFallback||oa||rn||zo){ur(t,this.options,r,n);var i=yn(r,!0);Ur&&(!Qo||a!==ir||l!==sr)&&(Qo&&ru(),Qo=setInterval(function(){var s=yn(document.elementFromPoint(a,l),!0);s!==i&&(i=s,ja()),ur(t,o.options,s,n)},10),ir=a,sr=l)}else{if(!this.options.bubbleScroll||yn(r,!0)===Vt()){ja();return}ur(t,this.options,yn(r,!1),!1)}}},ln(e,{pluginName:"scroll",initializeByDefault:!0})}function ja(){Ke.forEach(function(e){clearInterval(e.pid)}),Ke=[]}function ru(){clearInterval(Qo)}var ur=wp(function(e,t,n,o){if(t.scroll){var a=(e.touches?e.touches[0]:e).clientX,l=(e.touches?e.touches[0]:e).clientY,r=t.scrollSensitivity,i=t.scrollSpeed,s=Vt(),u=!1,c;Xr!==n&&(Xr=n,ja(),Eo=t.scroll,c=t.scrollFn,Eo===!0&&(Eo=yn(n,!0)));var d=0,f=Eo;do{var p=f,_=ot(p),b=_.top,h=_.bottom,v=_.left,T=_.right,Q=_.width,y=_.height,$=void 0,E=void 0,x=p.scrollWidth,X=p.scrollHeight,U=Oe(p),V=p.scrollLeft,G=p.scrollTop;p===s?($=Q<x&&(U.overflowX==="auto"||U.overflowX==="scroll"||U.overflowX==="visible"),E=y<X&&(U.overflowY==="auto"||U.overflowY==="scroll"||U.overflowY==="visible")):($=Q<x&&(U.overflowX==="auto"||U.overflowX==="scroll"),E=y<X&&(U.overflowY==="auto"||U.overflowY==="scroll"));var ee=$&&(Math.abs(T-a)<=r&&V+Q<x)-(Math.abs(v-a)<=r&&!!V),B=E&&(Math.abs(h-l)<=r&&G+y<X)-(Math.abs(b-l)<=r&&!!G);if(!Ke[d])for(var g=0;g<=d;g++)Ke[g]||(Ke[g]={});(Ke[d].vx!=ee||Ke[d].vy!=B||Ke[d].el!==p)&&(Ke[d].el=p,Ke[d].vx=ee,Ke[d].vy=B,clearInterval(Ke[d].pid),(ee!=0||B!=0)&&(u=!0,Ke[d].pid=setInterval((function(){o&&this.layer===0&&be.active._onTouchMove(pl);var D=Ke[this.layer].vy?Ke[this.layer].vy*i:0,O=Ke[this.layer].vx?Ke[this.layer].vx*i:0;typeof c=="function"&&c.call(be.dragged.parentNode[gt],O,D,e,pl,Ke[this.layer].el)!=="continue"||Sp(Ke[this.layer].el,O,D)}).bind({layer:d}),24))),d++}while(t.bubbleScroll&&f!==s&&(f=yn(f,!1)));Ur=u}},30),Pp=function(e){var t=e.originalEvent,n=e.putSortable,o=e.dragEl,a=e.activeSortable,l=e.dispatchSortableEvent,r=e.hideGhostForTarget,i=e.unhideGhostForTarget;if(t){var s=n||a;r();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(u.clientX,u.clientY);i(),s&&!s.el.contains(c)&&(l("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function Si(){}Si.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=vo(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Pp};ln(Si,{pluginName:"revertOnSpill"});function xi(){}xi.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,o=n||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},drop:Pp};ln(xi,{pluginName:"removeOnSpill"});be.mount(new C2);be.mount(xi,Si);function z2(e){return e==null?e:JSON.parse(JSON.stringify(e))}function N2(e){Gn()&&fl(e)}function q2(e){Gn()?bn(e):e()}const iu="__CLONE__DRAGGABLE__ELEMENT__NODE__";function Wr(...e){var t,n;const o=(t=Gn())==null?void 0:t.proxy,a=e[0];let[,l,r]=e;Array.isArray(w(l))||(r=l,l=null);let i=null;const{immediate:s=!0,clone:u=z2}=(n=w(r))!=null?n:{};function c($){var E;$.item[iu]=u(w((E=w(l))==null?void 0:E[$.oldIndex]))}function d($){const E=$.item[iu];e2(E)||(er($.item),KT(w(l),$.newIndex,E))}function f($){const{from:E,item:x,oldIndex:X,pullMode:U,clone:V}=$;if(U==="clone"){Zs(E,x,X),er(V);return}JT(w(l),X)}function p($){const{from:E,item:x,oldIndex:X,newIndex:U}=$;er(x),Zs(E,x,X),HT(w(l),X,U)}const _={onUpdate:p,onStart:c,onAdd:d,onRemove:f};function b($){const E=w(a);return $||($=t2(E)?n2(E,o==null?void 0:o.$el):E),$&&!l2($)&&($=$.$el),$||BT("Root element not found"),$}function h(){var $;const E=($=w(r))!=null?$:{},x=vp(E,["immediate","clone"]);return a2(l===null?{}:_,x)}const v=$=>{$=b($),i&&T.destroy(),i=new be($,h())};Te(r,()=>{i&&r2(h(),($,E)=>{i==null||i.option($,E)})},{deep:!0});const T={option:($,E)=>i==null?void 0:i.option($,E),destroy:()=>{i==null||i.destroy(),i=null},save:()=>i==null?void 0:i.save(),toArray:()=>i==null?void 0:i.toArray(),closest:(...$)=>i==null?void 0:i.closest(...$)},Q=()=>T==null?void 0:T.option("disabled",!0),y=()=>T==null?void 0:T.option("disabled",!1);return q2(()=>{s&&v()}),N2(T.destroy),eo({start:v,pause:Q,resume:y},T)}const jr=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],R2=["onUpdate","onStart","onAdd","onRemove","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target",...jr.map(e=>`on${e.replace(/^\S/,t=>t.toUpperCase())}`)],M2=Me({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:R2,emits:["update:modelValue",...jr],setup(e,{slots:t,emit:n,expose:o}){const a=hl(),l=jr.reduce((c,d)=>{const f=`on${d.replace(/^\S/,p=>p.toUpperCase())}`;return c[f]=p=>n(d,p),c},{}),r=Se(()=>{const c=pu(e),d=vp(c,["modelValue"]),f=Object.entries(d).reduce((p,[_,b])=>{const h=w(b);return h!==void 0&&(p[_]=h),p},{});return eo(eo({},l),ZT(eo(eo({},a),f)))}),i=Se({get:()=>e.modelValue,set:c=>n("update:modelValue",c)}),s=F(),u=ut(Wr(e.target||s,i,r));return o(u),()=>{if(t.default)return qe(e.tag||"div",{ref:s},t.default(u))}}}),I2={__name:"DraggableText",props:Io({placeholder:{type:String,required:!1,default:""}},{modelValue:{},modelModifiers:{}}),emits:Io(["change","delete"],["update:modelValue"]),setup(e,{emit:t}){const{t:n}=Ye(),o=go(e,"modelValue"),a=t;return(l,r)=>{const i=M("a-button"),s=M("a-tooltip"),u=M("a-flex");return k(),A(u,{align:"center",class:"draggable-text-container"},{default:S(()=>[m(fp,{class:"markdown-editor",modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=c=>o.value=c),onChange:r[1]||(r[1]=c=>a("change"))},null,8,["modelValue"]),m(s,{title:w(n)("common.delete")},{default:S(()=>[m(i,{class:"delete-button",type:"text",onClick:r[2]||(r[2]=c=>a("delete"))},{icon:S(()=>[m(w(Gr),{style:{"flex-grow":"0"}})]),_:1})]),_:1},8,["title"])]),_:1})}}},su=wn(I2,[["__scopeId","data-v-ee6df7f6"]]),V2={key:1,class:"special-item-container"},A2={class:"draggable-item-content"},X2={key:0},U2={key:1,class:"special-item-container"},W2={key:2,class:"special-item-container"},j2={key:3,class:"special-item-container"},F2={key:4,class:"special-item-container"},L2={key:5,class:"special-item-container"},G2={key:6},B2={key:0,class:"ui-special-item-container"},H2={__name:"UIDesign",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=go(e,"modelValue"),{t:n}=Ye(),o=Hr(t.value),a=ut(o),l=F(a.inputFields),r=F(a.outputNodes),i=F(a.triggerNodes),s=F([{id:"typography-paragraph",required:!0,placeholder:n("components.workspace.uiDesign.typography-paragraph.placeholder"),show:!1,value:"",name:"typography-paragraph",display_name:"typography-paragraph",type:"str",list:!1,field_type:"typography-paragraph"}]),u=()=>{t.value.data.ui={inputFields:l.value,outputNodes:r.value}},c=F(!1),d=F(),f=ut({animation:150,ghostClass:"ghost",handle:".handle",group:{name:"fields",pull:!1},onStart:()=>{c.value=!0},onAdd:()=>{u()},onEnd:()=>{u(),wt(()=>{c.value=!1})}});Wr(d,l,f);const p=F(),_=ut({animation:150,ghostClass:"ghost",handle:".handle",group:{name:"fields",pull:!1},onStart:()=>{c.value=!0},onAdd:()=>{u()},onEnd:()=>{u(),wt(()=>{c.value=!1})}});Wr(p,r,_);const b=(h,v)=>{h.splice(v,1),u()};return(h,v)=>{const T=M("a-menu-item"),Q=M("a-tooltip"),y=M("a-menu"),$=M("a-layout-sider"),E=M("a-typography-title"),x=M("a-select"),X=M("a-textarea"),U=M("a-input"),V=M("a-input-number"),G=M("a-checkbox"),ee=M("a-form-item"),B=M("a-col"),g=M("a-row"),D=M("a-flex"),O=M("a-form"),q=M("a-divider"),C=M("a-button"),N=M("a-layout-content"),P=M("a-layout");return k(),A(P,{class:"ui-design-layout","has-sider":""},{default:S(()=>[m($,{class:"ui-design-sider custom-scrollbar"},{default:S(()=>[m(y,{theme:"light",mode:"inline",ref:"siderMenu",class:"ui-design-sider-menu"},{default:S(()=>[m(w(M2),{modelValue:s.value,"onUpdate:modelValue":v[0]||(v[0]=R=>s.value=R),animation:"150",group:{name:"fields",pull:"clone",put:!1},sort:!1},{default:S(()=>[(k(!0),Z(ye,null,Xe(s.value,(R,K)=>(k(),A(Q,{key:`node-${K}`,title:w(n)(`components.workspace.uiDesign.${R.name}.tip`),placement:"right"},{default:S(()=>[m(T,{class:"draggable-menu-item",id:R.id},{default:S(()=>[m(w(Rl)),De("span",null,J(w(n)(`components.workspace.uiDesign.${R.name}.title`)),1)]),_:2},1032,["id"])]),_:2},1032,["title"]))),128))]),_:1},8,["modelValue"])]),_:1},512)]),_:1}),m(N,{class:"ui-design-sider-content"},{default:S(()=>[m(g,{gutter:[16,16]},{default:S(()=>[m(B,{xxl:6,xl:8,lg:10,md:24},{default:S(()=>[m(D,{vertical:""},{default:S(()=>[m(E,{level:3},{default:S(()=>[m(w(so),{fill:"#28c5e5"}),ne(" "+J(w(n)("workspace.workflowSpace.inputs")),1)]),_:1}),m(O,{layout:"vertical",ref_key:"inputFieldsEl",ref:d},{default:S(()=>[(k(!0),Z(ye,null,Xe(l.value,(R,K)=>(k(),A(D,{align:"center",class:"draggable-item",key:`field-${R}-${K}`},{default:S(()=>[m(w(Rl),{class:"handle"}),w(Yr).includes(R.field_type)?ce("",!0):(k(),A(ee,{key:0,class:"draggable-item-content"},{label:S(()=>[ne(J(R.display_name),1)]),default:S(()=>[R.field_type=="temperature"?(k(),A(Br,{key:0,modelValue:R.value,"onUpdate:modelValue":te=>R.value=te},null,8,["modelValue","onUpdate:modelValue"])):R.field_type=="select"?(k(),A(x,{key:1,value:R.value,"onUpdate:value":te=>R.value=te,options:R.options},null,8,["value","onUpdate:value","options"])):R.field_type=="textarea"?(k(),A(X,{key:2,value:R.value,"onUpdate:value":te=>R.value=te,autoSize:{minRows:2,maxRows:10},placeholder:R.placeholder},null,8,["value","onUpdate:value","placeholder"])):R.field_type=="input"?(k(),A(U,{key:3,value:R.value,"onUpdate:value":te=>R.value=te,placeholder:R.placeholder},null,8,["value","onUpdate:value","placeholder"])):R.field_type=="number"?(k(),A(V,{key:4,value:R.value,"onUpdate:value":te=>R.value=te,placeholder:R.placeholder},null,8,["value","onUpdate:value","placeholder"])):R.field_type=="checkbox"?(k(),A(G,{key:5,checked:R.value,"onUpdate:checked":te=>R.value=te},null,8,["checked","onUpdate:checked"])):R.field_type=="file"?(k(),A(ku,{key:6,modelValue:R.value,"onUpdate:modelValue":te=>R.value=te,supportFileTypes:R.support_file_types||".docx, .pptx, .xlsx, .pdf, .txt, .md, .html, .json, .csv, .srt, .zip"},null,8,["modelValue","onUpdate:modelValue","supportFileTypes"])):R.field_type=="list"?(k(),A(Kp,{key:7,modelValue:R.value,"onUpdate:modelValue":te=>R.value=te},null,8,["modelValue","onUpdate:modelValue"])):ce("",!0)]),_:2},1024)),R.field_type=="typography-paragraph"?(k(),A(g,{key:1,class:"draggable-item-content"},{default:S(()=>[m(B,{span:24,class:"ui-special-item-container"},{default:S(()=>[m(su,{modelValue:R.value,"onUpdate:modelValue":te=>R.value=te,placeholder:R.placeholder,onChange:u,onDelete:te=>b(l.value,K)},null,8,["modelValue","onUpdate:modelValue","placeholder","onDelete"])]),_:2},1024)]),_:2},1024)):ce("",!0)]),_:2},1024))),128))]),_:1},512),m(q),m(D,{vertical:""},{default:S(()=>[(k(!0),Z(ye,null,Xe(i.value,R=>(k(),Z("div",{key:`node-${R.id}`},[R.type=="ButtonTrigger"?(k(),A(C,{key:0,type:"primary",block:""},{default:S(()=>[ne(J(R.data.template.button_text.value),1)]),_:2},1024)):R.type=="ScheduleTrigger"?(k(),Z("div",V2,[m(E,{level:4},{default:S(()=>[ne(J(w(n)("components.nodes.triggers.ScheduleTrigger.title")),1)]),_:1})])):ce("",!0)]))),128))]),_:1})]),_:1})]),_:1}),m(B,{xxl:18,xl:16,lg:14,md:24},{default:S(()=>[m(E,{level:3,style:{display:"flex","justify-content":"space-between"}},{default:S(()=>[De("span",null,[m(w(Jp),{fill:"#28c5e5"}),ne(" "+J(w(n)("workspace.workflowSpace.outputs")),1)])]),_:1}),m(D,{vertical:"",ref_key:"outputNodesEl",ref:p},{default:S(()=>[(k(!0),Z(ye,null,Xe(r.value,(R,K)=>(k(),A(D,{align:"center",class:"draggable-item",key:`node-${R.id}-${K}`},{default:S(()=>[m(w(Rl),{class:"handle"}),De("div",A2,[R.type=="Text"?(k(),Z("div",X2,[m(E,{level:5},{default:S(()=>[ne(J(R.data.template.output_title.value),1)]),_:2},1024),m(ef,{text:R.data.template.text.value,renderMarkdown:R.data.template.render_markdown.value},null,8,["text","renderMarkdown"])])):R.type=="Audio"?(k(),Z("div",U2,[m(E,{level:4},{default:S(()=>[ne(J(w(n)("components.nodes.outputs.Audio.title")),1)]),_:1})])):R.type=="Mindmap"?(k(),Z("div",W2,[m(E,{level:4},{default:S(()=>[ne(J(w(n)("components.nodes.outputs.Mindmap.title")),1)]),_:1})])):R.type=="Mermaid"?(k(),Z("div",j2,[m(E,{level:4},{default:S(()=>[ne(J(w(n)("components.nodes.outputs.Mermaid.title")),1)]),_:1})])):R.type=="Echarts"?(k(),Z("div",F2,[m(E,{level:4},{default:S(()=>[ne(J(w(n)("components.nodes.outputs.Echarts.title")),1)]),_:1})])):R.type=="Html"?(k(),Z("div",L2,[m(E,{level:4},{default:S(()=>[ne(J(w(n)("components.nodes.outputs.Html.title")),1)]),_:1})])):(k(),Z("div",G2,[R.field_type=="typography-paragraph"?(k(),Z("div",B2,[m(su,{modelValue:R.value,"onUpdate:modelValue":te=>R.value=te,placeholder:R.placeholder,onChange:u,onDelete:te=>b(r.value,K)},null,8,["modelValue","onUpdate:modelValue","placeholder","onDelete"])])):ce("",!0)]))])]),_:2},1024))),128))]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})}}},Y2=wn(H2,[["__scopeId","data-v-71538c2d"]]),Z2={__name:"VueFlowStyleSettings",props:{modelValue:{},modelModifiers:{}},emits:Io(["save"],["update:modelValue"]),setup(e,{emit:t}){const n=t,o=go(e,"modelValue"),{t:a}=Ye(),l=F(!1),r=()=>{n("save",o),l.value=!1};return(i,s)=>{const u=M("a-button"),c=M("a-select-option"),d=M("a-select"),f=M("a-form-item"),p=M("a-switch"),_=M("a-form"),b=M("a-drawer");return k(),Z(ye,null,[m(u,{onClick:s[0]||(s[0]=h=>l.value=!0),class:"settings-button"},{default:S(()=>[ne(J(w(a)("components.workspace.vueFlowStyleSettings.title")),1)]),_:1}),m(b,{open:l.value,"onUpdate:open":s[3]||(s[3]=h=>l.value=h),class:"custom-class",title:w(a)("components.workspace.vueFlowStyleSettings.title"),placement:"right"},{extra:S(()=>[m(u,{type:"primary",onClick:r},{default:S(()=>[ne(J(w(a)("common.save")),1)]),_:1})]),default:S(()=>[m(_,{model:o.value,"label-col":{span:8},"wrapper-col":{span:16},autocomplete:"off"},{default:S(()=>[m(f,{label:w(a)("components.workspace.vueFlowStyleSettings.edge_type"),name:"edge_type"},{default:S(()=>[m(d,{value:o.value.edge.type,"onUpdate:value":s[1]||(s[1]=h=>o.value.edge.type=h)},{default:S(()=>[m(c,{value:"bezier"},{default:S(()=>[ne(J(w(a)("components.workspace.vueFlowStyleSettings.edge_type_bezier")),1)]),_:1}),m(c,{value:"step"},{default:S(()=>[ne(J(w(a)("components.workspace.vueFlowStyleSettings.edge_type_step")),1)]),_:1}),m(c,{value:"smoothstep"},{default:S(()=>[ne(J(w(a)("components.workspace.vueFlowStyleSettings.edge_type_smoothstep")),1)]),_:1}),m(c,{value:"straight"},{default:S(()=>[ne(J(w(a)("components.workspace.vueFlowStyleSettings.edge_type_straight")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),m(f,{label:w(a)("components.workspace.vueFlowStyleSettings.edge_animated"),name:"edge_animated"},{default:S(()=>[m(p,{checked:o.value.edge.animated,"onUpdate:checked":s[2]||(s[2]=h=>o.value.edge.animated=h)},null,8,["checked"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["open","title"])],64)}}},J2=wn(Z2,[["__scopeId","data-v-33ef65ae"]]),K2={key:0,class:"loading-container"},eE={key:1,class:"editor-container"},tE={class:"title-container"},nE=["data-node-type"],oE={__name:"WorkflowEditor",setup(e){const{t,te:n}=Ye(),o=F(!0),a=vu(),l=Hp(),r=F(""),i=F(t("workspace.workflowEditor.workflow_canvas")),s=ut([t("workspace.workflowEditor.workflow_info"),t("workspace.workflowEditor.workflow_canvas"),t("workspace.workflowEditor.workflow_ui_design")]);let u="workflow",c=null,d={};const f=Jo(),{userDatabases:p}=Qt(f),_=ml();Qt(_);const b=vf(),h=Bp(),{vueFlowStyleSettings:v}=Qt(h),T=_l(),{nodeMessagesCount:Q,nodeMessages:y}=Qt(T),$=F(""),E=F({}),x=F([]),X=F(b.diagnosisRecord),U=F(l.currentRoute.value.query.rid),V=()=>{he.value.forEach(fe=>{fe.type=v.value.edge.type,fe.animated=v.value.edge.animated,fe.style=v.value.edge.style}),h.setVueFlowStyleSettings(v.value)};fl(()=>{b.setDiagnosisRecord(null)}),bn(async()=>{if(U.value&&!X.value){const Be=await _f("get",{rid:U.value});X.value=Be.data}a.path.startsWith("/workflow/editor/")?(u="workflow",c=cr,r.value=a.params.workflowId,d={wid:r.value}):(u="template",c=gf,r.value=a.params.templateId,d={tid:r.value});const fe=c("get",d),ie=lf("list"),xe=rf("list"),ge=await fe,nt=await ie,We=await xe;if(nt.status==200&&f.setUserDatabases(nt.data),We.status==200&&_.setUserRelationalDatabases(We.data),ge.status!=200){pt.error(t("workspace.workflowSpace.get_workflow_failed")),await l.push({name:"WorkflowSpaceMain"});return}E.value=ge.data,X.value&&(E.value.data=X.value.data),E.value.data.nodes.forEach(Be=>{var Bn,xt;X.value&&(Be.data.debug={run_time:((xt=(Bn=X.value.data)==null?void 0:Bn.node_run_time)==null?void 0:xt[Be.id])??-1,credits:Be.data.credits||0}),Be.category=="vectorDb"&&(Be.data.template.database.options=p.value.filter(Fe=>Fe.status=="VALID").map(Fe=>({value:Fe.vid,label:Fe.name})));const mt=tt[Be.type]();Object.entries(Be.data.template).forEach(([Fe,Sn])=>{var zt;(zt=mt.template[Fe])!=null&&zt.condition&&(Sn.condition=mt.template[Fe].condition)});const un={};Object.keys(mt.template).forEach(Fe=>{Be.data.template.hasOwnProperty(Fe)&&(un[Fe]=Be.data.template[Fe])}),Object.keys(Be.data.template).forEach(Fe=>{mt.template.hasOwnProperty(Fe)||(un[Fe]=Be.data.template[Fe])}),Be.data.template=un}),E.value.tags=E.value.tags.map(Be=>Be.tid),pe(E.value.data),x.value=[...E.value.data.nodes,...E.value.data.edges],$.value=ia(E.value),o.value=!1});const G=()=>{const fe=Y();E.value.data={...fe,ui:E.value.data.ui||{}}},ee=F(!1),B=F({hasInput:!1,hasOutput:!1,hasTrigger:!1}),g=()=>{B.value={hasInput:!1,hasOutput:!1,hasTrigger:!1,noCycle:!1,noIsolatedNodes:!1};const fe=tf(E.value);B.value.noCycle=fe.noCycle,B.value.noIsolatedNodes=fe.noIsolatedNodes;const ie=Hr(E.value),xe=ut(ie);return B.value.hasInput=xe.inputFields.filter(ge=>!Yr.includes(ge.field_type)).length>0,B.value.hasOutput=E.value.data.nodes.filter(ge=>ge.category=="outputs").length>0,B.value.hasTrigger=xe.triggerNodes.filter(ge=>ge.category=="triggers").length>0,Object.values(B.value).some(ge=>ge===!1)?(ee.value=!0,!1):!0},D=F(!1),O=async()=>{D.value=!0;const fe=E.value.data.ui||{},ie=Y();E.value.data={...ie,ui:fe};const xe=g();try{const ge=await c("update",{...d,...E.value});ge.status==200?(pt.success(t("workspace.workflowSpace.save_success")),$.value=ia(E.value)):ge.status==400?pt.error(t("workspace.workflowSpace.workflow_cant_invoke_itself")):pt.error(t("workspace.workflowSpace.save_failed")),u=="workflow"&&b.updateUserWorkflow(E.value)}catch(ge){console.error(ge),pt.error(t("workspace.workflowSpace.save_failed"))}return D.value=!1,xe},q=async()=>{u=="workflow"?await l.push({name:"WorkflowUse",params:{workflowId:r.value}}):await l.push({name:"WorkflowTemplate",params:{workflowTemplateId:r.value}})},C=F(!1),N=async()=>{await O(),await q()},P=async()=>{await q()},R=()=>{U.value&&q();const fe=E.value.data.ui||{},ie=Y();E.value.data={...ie,ui:fe},$.value!=ia(E.value)?C.value=!0:q()},{addEdges:K,removeEdges:te,updateEdge:L,onConnect:ae,toObject:Y,fromObject:pe,findNode:re,viewport:se,vueFlowRef:H,edges:he}=Ae();ae(fe=>{var xe,ge,nt;if(he.value.some(We=>We.target===fe.target&&We.targetHandle===fe.targetHandle)){pt.error(t("workspace.workflowEditor.edge_already_connected_message"));return}fe.type=((xe=v.value.edge)==null?void 0:xe.type)||"bezier",fe.animated=((ge=v.value.edge)==null?void 0:ge.animated)||!0,fe.style=((nt=v.value.edge)==null?void 0:nt.style)||{strokeWidth:3,stroke:"#28c5e5"},K([fe])});const _e=({edge:fe,connection:ie})=>{L(fe,ie)},Ce=({edge:fe,event:ie})=>{fe.selected&&pt.info(t("workspace.workflowEditor.edge_delete_message"))},z=fe=>{},I=fe=>{x.value=x.value.filter(ie=>!(ie.source===fe.edge.source&&ie.target===fe.edge.target&&ie.sourceHandle===fe.edge.sourceHandle&&ie.targetHandle===fe.edge.targetHandle))},W={change:(fe,ie)=>{if(fe.event=="removeField"){const xe=he.value.filter(ge=>ge.source===ie&&ge.sourceHandle===fe.fieldName||ge.target===ie&&ge.targetHandle===fe.fieldName);te(xe)}else if(fe.event=="editField"){const{oldFieldName:xe,newFieldName:ge}=fe,nt=re(ie);nt.handleBounds.source.forEach(We=>{We.id===xe&&(We.id=ge)}),nt.handleBounds.target.forEach(We=>{We.id===xe&&(We.id=ge)}),he.value.forEach(We=>{We.source===ie&&We.sourceHandle===xe&&(We.sourceHandle=ge),We.target===ie&&We.targetHandle===xe&&(We.targetHandle=ge)})}},delete:(fe,ie)=>{x.value=x.value.filter(xe=>xe.id!==ie),x.value=x.value.filter(xe=>!(xe.source&&xe.source===ie||xe.target&&xe.target===ie))},clone:(fe,ie)=>{const xe=re(ie);xe.selected=!1;const ge=JSON.parse(JSON.stringify(xe));ge.id=Ds(),ge.selected=!0,ge.position.x+=50,ge.position.y-=50,x.value.push(ge)}};Te(()=>Q.value,()=>{for(;y.value.length>0;){const{action:fe,data:ie,nodeId:xe}=T.pop();W[fe](ie,xe)}});let j;const oe=fe=>{j&&document.body.removeChild(j);let ie=fe.target.getBoundingClientRect();j=fe.target.cloneNode(!0),j.style.position="absolute",j.style.top=ie.top+"px",j.style.left=ie.left+"px",j.style.width=ie.width+"px",j.style.height=ie.height+"px",j.style.opacity="0.5",j.style.zIndex="1000",document.body.appendChild(j)},de=fe=>{j&&(j.style.left=fe.touches[0].clientX+"px",j.style.top=fe.touches[0].clientY+"px")},me=fe=>{j&&(document.body.removeChild(j),j=null);let ie=fe.srcElement.dataset.nodeType;ie||(ie=fe.srcElement.children[0].dataset.nodeType);const xe=H.value.getBoundingClientRect(),{x:ge,y:nt,zoom:We}=se.value;let Be=0,mt=0;fe.type=="touchend"?(Be=fe.changedTouches[0].clientX-xe.left,mt=fe.changedTouches[0].clientY-xe.top):(Be=fe.clientX-xe.left,mt=fe.clientY-xe.top);const un=tt[ie]();Object.entries(un.template).forEach(([xt,Fe])=>{const Sn=`components.nodes.${Ct[ie]}.${ie}.${xt}`;n(Sn)&&Fe.display_name&&(Fe.display_name=t(Sn)),Fe.options&&(Fe.options=Fe.options.map(zt=>{const la=`components.nodes.${Ct[ie]}.${ie}.${xt}_${zt.value}`;return n(la)&&(zt.label=t(la)),zt}))});const Bn={id:Ds(),type:ie,category:Ct[ie],position:{x:(Be-ge)/We,y:(mt-nt)/We},data:un};x.value.push(Bn)},$e=Object.assign({"/src/components/nodes/assistedNodes/CommentNode.vue":E0,"/src/components/nodes/controlFlows/Conditional.vue":A0,"/src/components/nodes/controlFlows/Empty.vue":W0,"/src/components/nodes/controlFlows/JsonProcess.vue":L0,"/src/components/nodes/controlFlows/RandomChoice.vue":H0,"/src/components/nodes/fileProcessing/FileLoader.vue":Z0,"/src/components/nodes/imageGeneration/StableDiffusion.vue":e1,"/src/components/nodes/llms/ChatGLM.vue":o1,"/src/components/nodes/llms/Claude.vue":r1,"/src/components/nodes/llms/Moonshot.vue":u1,"/src/components/nodes/llms/OpenAI.vue":p1,"/src/components/nodes/mediaProcessing/GlmVision.vue":m1,"/src/components/nodes/mediaProcessing/GptVision.vue":g1,"/src/components/nodes/outputs/Document.vue":b1,"/src/components/nodes/outputs/Echarts.vue":x1,"/src/components/nodes/outputs/Email.vue":T1,"/src/components/nodes/outputs/Mermaid.vue":P1,"/src/components/nodes/outputs/Mindmap.vue":z1,"/src/components/nodes/outputs/Text.vue":R1,"/src/components/nodes/outputs/WorkflowInvokeOutput.vue":V1,"/src/components/nodes/relationalDb/GetTableInfo.vue":U1,"/src/components/nodes/relationalDb/RunSql.vue":F1,"/src/components/nodes/relationalDb/SmartQuery.vue":B1,"/src/components/nodes/textProcessing/ListRender.vue":Z1,"/src/components/nodes/textProcessing/MarkdownToHtml.vue":eb,"/src/components/nodes/textProcessing/TemplateCompose.vue":ib,"/src/components/nodes/textProcessing/TextInOut.vue":cb,"/src/components/nodes/textProcessing/TextSplitters.vue":fb,"/src/components/nodes/textProcessing/TextTruncation.vue":vb,"/src/components/nodes/tools/ImageSearch.vue":yb,"/src/components/nodes/tools/ProgrammingFunction.vue":Lw,"/src/components/nodes/tools/WorkflowInvoke.vue":Jw,"/src/components/nodes/triggers/ButtonTrigger.vue":tS,"/src/components/nodes/vectorDb/AddData.vue":aS,"/src/components/nodes/vectorDb/DeleteData.vue":iS,"/src/components/nodes/vectorDb/Search.vue":cS,"/src/components/nodes/webCrawlers/BilibiliCrawler.vue":fS,"/src/components/nodes/webCrawlers/TextCrawler.vue":vS,"/src/components/nodes/webCrawlers/YoutubeCrawler.vue":yS}),Ee=Object.assign({"/src/components/nodes/assistedNodes/CommentNode.js":w0,"/src/components/nodes/controlFlows/Conditional.js":I0,"/src/components/nodes/controlFlows/Empty.js":X0,"/src/components/nodes/controlFlows/JsonProcess.js":j0,"/src/components/nodes/controlFlows/RandomChoice.js":G0,"/src/components/nodes/fileProcessing/FileLoader.js":bS,"/src/components/nodes/imageGeneration/StableDiffusion.js":J0,"/src/components/nodes/llms/ChatGLM.js":t1,"/src/components/nodes/llms/Claude.js":a1,"/src/components/nodes/llms/Moonshot.js":i1,"/src/components/nodes/llms/OpenAI.js":c1,"/src/components/nodes/mediaProcessing/GlmVision.js":f1,"/src/components/nodes/mediaProcessing/GptVision.js":v1,"/src/components/nodes/outputs/Document.js":y1,"/src/components/nodes/outputs/Echarts.js":w1,"/src/components/nodes/outputs/Email.js":$1,"/src/components/nodes/outputs/Mermaid.js":E1,"/src/components/nodes/outputs/Mindmap.js":D1,"/src/components/nodes/outputs/Text.js":N1,"/src/components/nodes/outputs/WorkflowInvokeOutput.js":M1,"/src/components/nodes/relationalDb/GetTableInfo.js":A1,"/src/components/nodes/relationalDb/RunSql.js":W1,"/src/components/nodes/relationalDb/SmartQuery.js":L1,"/src/components/nodes/textProcessing/ListRender.js":H1,"/src/components/nodes/textProcessing/MarkdownToHtml.js":J1,"/src/components/nodes/textProcessing/TemplateCompose.js":nb,"/src/components/nodes/textProcessing/TextInOut.js":sb,"/src/components/nodes/textProcessing/TextSplitters.js":db,"/src/components/nodes/textProcessing/TextTruncation.js":hb,"/src/components/nodes/tools/ImageSearch.js":_b,"/src/components/nodes/tools/ProgrammingFunction.js":Ww,"/src/components/nodes/tools/WorkflowInvoke.js":Hw,"/src/components/nodes/triggers/ButtonTrigger.js":Kw,"/src/components/nodes/vectorDb/AddData.js":nS,"/src/components/nodes/vectorDb/DeleteData.js":lS,"/src/components/nodes/vectorDb/Search.js":sS,"/src/components/nodes/webCrawlers/BilibiliCrawler.js":dS,"/src/components/nodes/webCrawlers/TextCrawler.js":hS,"/src/components/nodes/webCrawlers/YoutubeCrawler.js":_S}),Ze={},Ge={},tt={},Ct={};Object.entries($e).forEach(([fe,ie])=>{const xe=fe.match(/\/([^/]+)\.vue$/)[1],ge=fe.match(/\/([^/]+)\/[^/]+\.vue$/)[1];Ze[xe]=zn(ie.default);const nt=Ee[fe.replace(/\.vue$/,".js")];tt[xe]=nt==null?void 0:nt.createTemplateData,!tt[xe]().deprecated&&(Ge[ge]||(Ge[ge]=[]),Ge[ge].push(xe),Ct[xe]=ge)});const sn=ut({open:!1,code:"",openEditor:async()=>{let fe=Y();fe.ui=E.value.data.ui||{},sn.code=JSON.stringify(fe,null,2),sn.open=!0},updateCode:fe=>{const ie=JSON.parse(fe);E.value.data.ui=ie.ui||{},x.value=[...ie.nodes,...ie.edges],E.value.data.nodes=ie.nodes,E.value.data.edges=ie.edges,E.value.data.nodes.forEach(xe=>{xe.category=="vectorDb"&&(xe.data.template.database.options=p.value.filter(ge=>ge.status=="VALID").map(ge=>({value:ge.vid,label:ge.name})))}),$.value=ia(E.value)}});return(fe,ie)=>{const xe=M("a-spin"),ge=M("a-typography-text"),nt=M("a-button"),We=M("a-modal"),Be=M("a-typography-link"),mt=M("a-col"),un=M("a-segmented"),Bn=M("a-tooltip"),xt=M("a-typography-paragraph"),Fe=M("a-space"),Sn=M("a-row"),zt=M("a-divider"),la=M("a-menu-item"),Dp=M("a-sub-menu"),Cp=M("a-menu"),zp=M("a-layout-sider"),Np=M("a-flex"),qp=M("a-alert"),Rp=M("a-layout-content"),$i=M("a-layout");return o.value?(k(),Z("div",K2,[m(xe,{size:"large"})])):(k(),Z("div",eE,[De("div",tE,[m(Sn,{style:{width:"100%"}},{default:S(()=>[m(mt,{span:8},{default:S(()=>[m(Be,{onClick:R,style:{"text-wrap":"nowrap"}},{default:S(()=>[m(w(kf)),ne(" "+J(w(t)("common.back"))+" ",1),m(We,{open:C.value,"onUpdate:open":ie[0]||(ie[0]=Ie=>C.value=Ie)},{title:S(()=>[m(ge,{type:"warning"},{default:S(()=>[m(w(Ei)),ne(" "+J(w(t)("common.back")),1)]),_:1})]),footer:S(()=>[m(nt,{onClick:P},{default:S(()=>[ne(J(w(t)("workspace.workflowEditor.exit_without_save")),1)]),_:1}),m(nt,{type:"primary",onClick:N},{default:S(()=>[ne(J(w(t)("workspace.workflowEditor.save_and_exit")),1)]),_:1})]),default:S(()=>[ne(" "+J(w(t)("workspace.workflowEditor.exit_not_saved_confirm"))+" ",1)]),_:1},8,["open"])]),_:1}),m(ge,{class:"title",ellipsis:!0,editable:{triggerType:["text","icon"]},content:E.value.title,"onUpdate:content":ie[1]||(ie[1]=Ie=>E.value.title=Ie)},null,8,["content"])]),_:1}),m(mt,{span:8,style:{display:"flex","justify-content":"center"}},{default:S(()=>[m(un,{value:i.value,"onUpdate:value":ie[2]||(ie[2]=Ie=>i.value=Ie),options:s,onChange:G},null,8,["value","options"])]),_:1}),m(mt,{span:8,style:{display:"flex","justify-content":"end"}},{default:S(()=>[m(Fe,null,{default:S(()=>[m(nt,{onClick:sn.openEditor},{icon:S(()=>[m(w(xf))]),default:S(()=>[ne(" "+J(w(t)("workspace.workflowEditor.edit_code"))+" ",1),m(Qd,{language:"json",open:sn.open,"onUpdate:open":ie[3]||(ie[3]=Ie=>sn.open=Ie),code:sn.code,"onUpdate:code":ie[4]||(ie[4]=Ie=>sn.code=Ie),onSave:sn.updateCode},null,8,["open","code","onSave"])]),_:1},8,["onClick"]),m(nt,{type:"primary",onClick:O,loading:D.value,disabled:!!U.value},{icon:S(()=>[m(w(Of))]),default:S(()=>[m(Bn,{title:U.value?w(t)("workspace.workflowEditor.cannot_save_when_diagnosing"):""},{default:S(()=>[ne(J(w(t)("common.save")),1)]),_:1},8,["title"])]),_:1},8,["loading","disabled"]),m(We,{open:ee.value,"onUpdate:open":ie[5]||(ie[5]=Ie=>ee.value=Ie),footer:null},{title:S(()=>[m(ge,{type:"warning"},{default:S(()=>[m(w(Ei)),ne(" "+J(w(t)("workspace.workflowEditor.workflow_check_warning")),1)]),_:1})]),default:S(()=>[B.value.hasInput?ce("",!0):(k(),A(xt,{key:0,type:"danger"},{default:S(()=>[ne(J(w(t)("workspace.workflowEditor.workflow_has_no_inputs")),1)]),_:1})),B.value.hasOutput?ce("",!0):(k(),A(xt,{key:1,type:"danger"},{default:S(()=>[ne(J(w(t)("workspace.workflowEditor.workflow_has_no_outputs")),1)]),_:1})),B.value.hasTrigger?ce("",!0):(k(),A(xt,{key:2,type:"danger"},{default:S(()=>[ne(J(w(t)("workspace.workflowEditor.workflow_has_no_triggers")),1)]),_:1})),B.value.noCycle?ce("",!0):(k(),A(xt,{key:3,type:"danger"},{default:S(()=>[ne(J(w(t)("workspace.workflowEditor.workflow_has_cycles")),1)]),_:1})),B.value.noIsolatedNodes?ce("",!0):(k(),A(xt,{key:4,type:"danger"},{default:S(()=>[ne(J(w(t)("workspace.workflowEditor.workflow_has_isolated_nodes")),1)]),_:1}))]),_:1},8,["open"])]),_:1})]),_:1})]),_:1})]),Vn(De("div",null,[m(Sn,{justify:"center"},{default:S(()=>[m(mt,{lg:10,md:12,sm:18,xs:24},{default:S(()=>[m(zt,null,{default:S(()=>[ne(J(w(t)("workspace.workflowEditor.tags")),1)]),_:1}),m(FT,{modelValue:E.value.tags,"onUpdate:modelValue":ie[6]||(ie[6]=Ie=>E.value.tags=Ie)},null,8,["modelValue"]),m(zt,null,{default:S(()=>[ne(J(w(t)("workspace.workflowEditor.brief_info")),1)]),_:1}),m(fp,{modelValue:E.value.brief,"onUpdate:modelValue":ie[7]||(ie[7]=Ie=>E.value.brief=Ie)},null,8,["modelValue"]),m(zt,null,{default:S(()=>[ne(J(w(t)("workspace.workflowEditor.brief_images")),1)]),_:1}),De("div",null,[m(ku,{modelValue:E.value.images,"onUpdate:modelValue":ie[8]||(ie[8]=Ie=>E.value.images=Ie),multiple:!0,supportFileTypes:"image/*"},null,8,["modelValue"])])]),_:1})]),_:1})],512),[[An,i.value==w(t)("workspace.workflowEditor.workflow_info")]]),Vn(m($i,{"has-sider":"",style:{height:"100%"}},{default:S(()=>[m(zp,{style:{overflow:"auto",backgroundColor:"#fff"},class:"custom-scrollbar"},{default:S(()=>[m(Cp,{theme:"light",mode:"inline"},{default:S(()=>[(k(!0),Z(ye,null,Xe(w(Yp),Ie=>(k(),A(Dp,{key:`category-${Ie.name}`,icon:Ie.icon},{title:S(()=>[ne(J(w(t)(`components.nodes.${Ie.name}.title`)),1)]),default:S(()=>[(k(!0),Z(ye,null,Xe(Ge[Ie.name],(ra,Mp)=>(k(),A(la,{"data-node-type":ra,id:ra,draggable:"true",onTouchstart:oe,onTouchmove:de,onDragend:me,onTouchend:me,key:`node-${Mp}`},{default:S(()=>[De("span",{"data-node-type":ra},J(w(t)(`components.nodes.${Ie.name}.${ra}.title`)),9,nE)]),_:2},1032,["data-node-type","id"]))),128))]),_:2},1032,["icon"]))),128))]),_:1})]),_:1}),m($i,{style:{"background-color":"#fff"}},{default:S(()=>[X.value?(k(),A(qp,{key:0,banner:""},{message:S(()=>[m(Np,{align:"center",justify:"space-between"},{default:S(()=>[m(ge,null,{default:S(()=>[ne(J(w(t)("workspace.workflowEditor.diagnosing_record",{record:`${X.value.title}
                ${X.value.data.rid}`})),1)]),_:1})]),_:1})]),_:1})):ce("",!0),m(Rp,{style:{margin:"24px 16px 0",overflow:"initial",backgroundColor:"#fff"}},{default:S(()=>[m(w(Oy),{modelValue:x.value,"onUpdate:modelValue":ie[10]||(ie[10]=Ie=>x.value=Ie),"node-types":Ze,"edges-updatable":!0,onEdgeUpdate:_e,onEdgeClick:Ce,onEdgeDoubleClick:I,onPaneClick:z,"snap-to-grid":!0,"snap-grid":[20,20]},{default:S(()=>[m(w(rT)),m(w(jT)),m(w(fT),{variant:"dots"}),m(J2,{modelValue:w(v),"onUpdate:modelValue":ie[9]||(ie[9]=Ie=>_o(v)?v.value=Ie:null),onSave:V},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},512),[[An,i.value==w(t)("workspace.workflowEditor.workflow_canvas")]]),i.value==w(t)("workspace.workflowEditor.workflow_ui_design")?(k(),A(Y2,{key:0,modelValue:E.value,"onUpdate:modelValue":ie[11]||(ie[11]=Ie=>E.value=Ie)},null,8,["modelValue"])):ce("",!0)]))}}},yE=wn(oE,[["__scopeId","data-v-e66d5e76"]]);export{yE as default};
