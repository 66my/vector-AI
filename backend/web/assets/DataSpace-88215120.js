import{u as F,r as g,x as N,B as T,p as m,f as t,o as r,g as _,c as n,h as e,ap as j,k as i,t as u,j as l,F as x,v as w,i as b,aq as q,m as G}from"./index-46254f1b.js";import{u as P}from"./userDatabase-10886e5c.js";import{d as v}from"./database-07243708.js";const z={class:"dataspace-container"},H={key:1},J={key:2},K={key:3},Z={__name:"DataSpace",setup(Q){const{t:a}=F(),S=g(!0),D=P(),f=N({columns:[{name:a("workspace.dataSpace.databaseName"),dataIndex:"name",key:"name"},{title:a("common.status"),dataIndex:"status",key:"status"},{title:a("common.tags"),key:"tags",dataIndex:"tags"},{title:a("common.action"),key:"action"}],data:[]}),k=async()=>{const p=await v("list",{});p.status==200?(D.setUserDatabases(p.data),f.data=p.data.map(c=>({...c,color:j[c.status],tags:[]})),S.value=!1):m.error(p.msg)};T(async()=>{await k()});const s=N({open:g(!1),creating:g(!1),create:async()=>{s.creating=!0,(await v("create",{name:s.databaseName})).status===200?m.success(a("workspace.dataSpace.create_success")):m.error(a("workspace.dataSpace.create_failed")),await k(),s.creating=!1,s.open=!1}}),L=async p=>{(await v("delete",{vid:p})).status===200?m.success(a("workspace.dataSpace.delete_success")):m.error(a("workspace.dataSpace.delete_failed")),await k()};return(p,c)=>{const I=t("a-button"),B=t("a-input"),U=t("a-form-item"),h=t("a-modal"),$=t("RouterLink"),C=t("a-tag"),M=t("a-typography-link"),O=t("a-popconfirm"),R=t("a-table"),V=t("a-card"),A=t("a-col"),E=t("a-row");return r(),_("div",z,[n(E,{gutter:[16,16]},{default:e(()=>[n(A,{span:24},{default:e(()=>[n(V,{loading:S.value},{extra:e(()=>[n(I,{type:"primary",onClick:c[0]||(c[0]=o=>s.open=!0)},{default:e(()=>[i(u(l(a)("workspace.dataSpace.create")),1)]),_:1}),n(h,{open:s.open,"onUpdate:open":c[2]||(c[2]=o=>s.open=o),title:l(a)("workspace.dataSpace.create"),onOk:s.create,confirmLoading:s.creating},{default:e(()=>[n(U,{label:l(a)("workspace.dataSpace.databaseName")},{default:e(()=>[n(B,{value:s.databaseName,"onUpdate:value":c[1]||(c[1]=o=>s.databaseName=o)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["open","title","onOk","confirmLoading"])]),default:e(()=>[n(R,{columns:f.columns,"data-source":f.data},{headerCell:e(({column:o})=>[o.key==="name"?(r(),_(x,{key:0},[i(u(l(a)("workspace.dataSpace.databaseName")),1)],64)):w("",!0)]),bodyCell:e(({column:o,record:d})=>[o.key==="name"?(r(),b($,{key:0,to:`/data/${d.vid}`},{default:e(()=>[i(u(d.name),1)]),_:2},1032,["to"])):o.key==="status"?(r(),_("span",H,[n(C,{color:d.color},{default:e(()=>[d.status==="CREATING"?(r(),b(l(q),{key:0})):w("",!0),i(" "+u(l(a)(`workspace.dataSpace.status_${d.status.toLowerCase()}`)),1)]),_:2},1032,["color"])])):o.key==="tags"?(r(),_("span",J,[(r(!0),_(x,null,G(d.tags,y=>(r(),b(C,{key:y},{default:e(()=>[i(u(y.toUpperCase()),1)]),_:2},1024))),128))])):o.key==="action"?(r(),_("span",K,[n(O,{title:l(a)("workspace.dataSpace.delete_confirm"),onConfirm:y=>L(d.vid)},{default:e(()=>[n(M,{type:"danger"},{default:e(()=>[i(u(l(a)("workspace.databaseDetail.delete")),1)]),_:1})]),_:2},1032,["title","onConfirm"])])):w("",!0)]),_:1},8,["columns","data-source"])]),_:1},8,["loading"])]),_:1})]),_:1})])}}};export{Z as default};
