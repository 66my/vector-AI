import{j as F,r as g,e as D,L as T,N as m,l as t,n as r,s as _,c as n,q as e,aD as j,x as i,y as u,u as l,F as N,D as w,p as b,aE as q,v as G}from"./index-33277216.js";import{u as P}from"./userDatabase-2584b3fd.js";import{d as v}from"./database-07243708.js";const z={class:"dataspace-container"},H={key:1},J={key:2},K={key:3},Z={__name:"DataSpace",setup(Q){const{t:a}=F(),S=g(!0),x=P(),f=D({columns:[{name:a("workspace.dataSpace.databaseName"),dataIndex:"name",key:"name"},{title:a("common.status"),dataIndex:"status",key:"status"},{title:a("common.tags"),key:"tags",dataIndex:"tags"},{title:a("common.action"),key:"action"}],data:[]}),k=async()=>{const p=await v("list",{});p.status==200?(x.setUserDatabases(p.data),f.data=p.data.map(c=>({...c,color:j[c.status],tags:[]})),S.value=!1):m.error(p.msg)};T(async()=>{await k()});const s=D({open:g(!1),creating:g(!1),create:async()=>{s.creating=!0,(await v("create",{name:s.databaseName})).status===200?m.success(a("workspace.dataSpace.create_success")):m.error(a("workspace.dataSpace.create_failed")),await k(),s.creating=!1,s.open=!1}}),L=async p=>{(await v("delete",{vid:p})).status===200?m.success(a("workspace.dataSpace.delete_success")):m.error(a("workspace.dataSpace.delete_failed")),await k()};return(p,c)=>{const I=t("a-button"),U=t("a-input"),B=t("a-form-item"),$=t("a-modal"),h=t("RouterLink"),C=t("a-tag"),E=t("a-typography-link"),M=t("a-popconfirm"),O=t("a-table"),R=t("a-card"),V=t("a-col"),A=t("a-row");return r(),_("div",z,[n(A,{gutter:[16,16]},{default:e(()=>[n(V,{span:24},{default:e(()=>[n(R,{loading:S.value},{extra:e(()=>[n(I,{type:"primary",onClick:c[0]||(c[0]=o=>s.open=!0)},{default:e(()=>[i(u(l(a)("workspace.dataSpace.create")),1)]),_:1}),n($,{open:s.open,"onUpdate:open":c[2]||(c[2]=o=>s.open=o),title:l(a)("workspace.dataSpace.create"),onOk:s.create,confirmLoading:s.creating},{default:e(()=>[n(B,{label:l(a)("workspace.dataSpace.databaseName")},{default:e(()=>[n(U,{value:s.databaseName,"onUpdate:value":c[1]||(c[1]=o=>s.databaseName=o)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["open","title","onOk","confirmLoading"])]),default:e(()=>[n(O,{columns:f.columns,"data-source":f.data},{headerCell:e(({column:o})=>[o.key==="name"?(r(),_(N,{key:0},[i(u(l(a)("workspace.dataSpace.databaseName")),1)],64)):w("",!0)]),bodyCell:e(({column:o,record:d})=>[o.key==="name"?(r(),b(h,{key:0,to:`/data/${d.vid}`},{default:e(()=>[i(u(d.name),1)]),_:2},1032,["to"])):o.key==="status"?(r(),_("span",H,[n(C,{color:d.color},{default:e(()=>[d.status==="CREATING"?(r(),b(l(q),{key:0})):w("",!0),i(" "+u(l(a)(`workspace.dataSpace.status_${d.status.toLowerCase()}`)),1)]),_:2},1032,["color"])])):o.key==="tags"?(r(),_("span",J,[(r(!0),_(N,null,G(d.tags,y=>(r(),b(C,{key:y},{default:e(()=>[i(u(y.toUpperCase()),1)]),_:2},1024))),128))])):o.key==="action"?(r(),_("span",K,[n(M,{title:l(a)("workspace.dataSpace.delete_confirm"),onConfirm:y=>L(d.vid)},{default:e(()=>[n(E,{type:"danger"},{default:e(()=>[i(u(l(a)("workspace.databaseDetail.delete")),1)]),_:1})]),_:2},1032,["title","onConfirm"])])):w("",!0)]),_:1},8,["columns","data-source"])]),_:1},8,["loading"])]),_:1})]),_:1})])}}};export{Z as default};
